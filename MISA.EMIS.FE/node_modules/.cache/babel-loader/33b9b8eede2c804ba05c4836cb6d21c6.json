{"ast":null,"code":"/**\r\n * DevExtreme (esm/file_management/provider_base.js)\r\n * Version: 22.1.4\r\n * Build date: Fri Jul 22 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport { compileGetter } from \"../core/utils/data\";\nimport { ensureDefined } from \"../core/utils/common\";\nimport dateSerialization from \"../core/utils/date_serialization\";\nimport { each } from \"../core/utils/iterator\";\nimport { isPromise } from \"../core/utils/type\";\nimport { Deferred, fromPromise } from \"../core/utils/deferred\";\nimport FileSystemItem from \"./file_system_item\";\nvar DEFAULT_FILE_UPLOAD_CHUNK_SIZE = 2e5;\n\nclass FileSystemProviderBase {\n  constructor(options) {\n    options = ensureDefined(options, {});\n    this._keyGetter = compileGetter(this._getKeyExpr(options));\n    this._nameGetter = compileGetter(this._getNameExpr(options));\n    this._isDirGetter = compileGetter(this._getIsDirExpr(options));\n    this._sizeGetter = compileGetter(this._getSizeExpr(options));\n    this._dateModifiedGetter = compileGetter(this._getDateModifiedExpr(options));\n    this._thumbnailGetter = compileGetter(options.thumbnailExpr || \"thumbnail\");\n  }\n\n  getItems(parentDirectory) {\n    return [];\n  }\n\n  renameItem(item, name) {}\n\n  createDirectory(parentDirectory, name) {}\n\n  deleteItems(items) {}\n\n  moveItems(items, destinationDirectory) {}\n\n  copyItems(items, destinationDirectory) {}\n\n  uploadFileChunk(fileData, chunksInfo, destinationDirectory) {}\n\n  abortFileUpload(fileData, chunksInfo, destinationDirectory) {}\n\n  downloadItems(items) {}\n\n  getItemsContent(items) {}\n\n  getFileUploadChunkSize() {\n    return DEFAULT_FILE_UPLOAD_CHUNK_SIZE;\n  }\n\n  _convertDataObjectsToFileItems(entries, pathInfo) {\n    var result = [];\n    each(entries, (_, entry) => {\n      var fileItem = this._createFileItem(entry, pathInfo);\n\n      result.push(fileItem);\n    });\n    return result;\n  }\n\n  _createFileItem(dataObj, pathInfo) {\n    var key = this._keyGetter(dataObj);\n\n    var fileItem = new FileSystemItem(pathInfo, this._nameGetter(dataObj), !!this._isDirGetter(dataObj), key);\n    fileItem.size = this._sizeGetter(dataObj);\n\n    if (void 0 === fileItem.size) {\n      fileItem.size = 0;\n    }\n\n    fileItem.dateModified = dateSerialization.deserializeDate(this._dateModifiedGetter(dataObj));\n\n    if (void 0 === fileItem.dateModified) {\n      fileItem.dateModified = new Date();\n    }\n\n    if (fileItem.isDirectory) {\n      fileItem.hasSubDirectories = this._hasSubDirs(dataObj);\n    }\n\n    if (!key) {\n      fileItem.key = fileItem.relativeName;\n    }\n\n    fileItem.thumbnail = this._thumbnailGetter(dataObj) || \"\";\n    fileItem.dataItem = dataObj;\n    return fileItem;\n  }\n\n  _hasSubDirs(dataObj) {\n    return true;\n  }\n\n  _getKeyExpr(options) {\n    return options.keyExpr || this._defaultKeyExpr;\n  }\n\n  _defaultKeyExpr(fileItem) {\n    if (2 === arguments.length) {\n      fileItem.__KEY__ = arguments[1];\n      return;\n    }\n\n    return Object.prototype.hasOwnProperty.call(fileItem, \"__KEY__\") ? fileItem.__KEY__ : null;\n  }\n\n  _getNameExpr(options) {\n    return options.nameExpr || \"name\";\n  }\n\n  _getIsDirExpr(options) {\n    return options.isDirectoryExpr || \"isDirectory\";\n  }\n\n  _getSizeExpr(options) {\n    return options.sizeExpr || \"size\";\n  }\n\n  _getDateModifiedExpr(options) {\n    return options.dateModifiedExpr || \"dateModified\";\n  }\n\n  _executeActionAsDeferred(action, keepResult) {\n    var deferred = new Deferred();\n\n    try {\n      var result = action();\n\n      if (isPromise(result)) {\n        fromPromise(result).done(userResult => deferred.resolve(keepResult && userResult || void 0)).fail(error => deferred.reject(error));\n      } else {\n        deferred.resolve(keepResult && result || void 0);\n      }\n    } catch (error) {\n      return deferred.reject(error);\n    }\n\n    return deferred.promise();\n  }\n\n}\n\nexport default FileSystemProviderBase;","map":{"version":3,"names":["compileGetter","ensureDefined","dateSerialization","each","isPromise","Deferred","fromPromise","FileSystemItem","DEFAULT_FILE_UPLOAD_CHUNK_SIZE","FileSystemProviderBase","constructor","options","_keyGetter","_getKeyExpr","_nameGetter","_getNameExpr","_isDirGetter","_getIsDirExpr","_sizeGetter","_getSizeExpr","_dateModifiedGetter","_getDateModifiedExpr","_thumbnailGetter","thumbnailExpr","getItems","parentDirectory","renameItem","item","name","createDirectory","deleteItems","items","moveItems","destinationDirectory","copyItems","uploadFileChunk","fileData","chunksInfo","abortFileUpload","downloadItems","getItemsContent","getFileUploadChunkSize","_convertDataObjectsToFileItems","entries","pathInfo","result","_","entry","fileItem","_createFileItem","push","dataObj","key","size","dateModified","deserializeDate","Date","isDirectory","hasSubDirectories","_hasSubDirs","relativeName","thumbnail","dataItem","keyExpr","_defaultKeyExpr","arguments","length","__KEY__","Object","prototype","hasOwnProperty","call","nameExpr","isDirectoryExpr","sizeExpr","dateModifiedExpr","_executeActionAsDeferred","action","keepResult","deferred","done","userResult","resolve","fail","error","reject","promise"],"sources":["E:/MisaProject/W2022_06/misa_emis/node_modules/devextreme/esm/file_management/provider_base.js"],"sourcesContent":["/**\r\n * DevExtreme (esm/file_management/provider_base.js)\r\n * Version: 22.1.4\r\n * Build date: Fri Jul 22 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport {\r\n    compileGetter\r\n} from \"../core/utils/data\";\r\nimport {\r\n    ensureDefined\r\n} from \"../core/utils/common\";\r\nimport dateSerialization from \"../core/utils/date_serialization\";\r\nimport {\r\n    each\r\n} from \"../core/utils/iterator\";\r\nimport {\r\n    isPromise\r\n} from \"../core/utils/type\";\r\nimport {\r\n    Deferred,\r\n    fromPromise\r\n} from \"../core/utils/deferred\";\r\nimport FileSystemItem from \"./file_system_item\";\r\nvar DEFAULT_FILE_UPLOAD_CHUNK_SIZE = 2e5;\r\nclass FileSystemProviderBase {\r\n    constructor(options) {\r\n        options = ensureDefined(options, {});\r\n        this._keyGetter = compileGetter(this._getKeyExpr(options));\r\n        this._nameGetter = compileGetter(this._getNameExpr(options));\r\n        this._isDirGetter = compileGetter(this._getIsDirExpr(options));\r\n        this._sizeGetter = compileGetter(this._getSizeExpr(options));\r\n        this._dateModifiedGetter = compileGetter(this._getDateModifiedExpr(options));\r\n        this._thumbnailGetter = compileGetter(options.thumbnailExpr || \"thumbnail\")\r\n    }\r\n    getItems(parentDirectory) {\r\n        return []\r\n    }\r\n    renameItem(item, name) {}\r\n    createDirectory(parentDirectory, name) {}\r\n    deleteItems(items) {}\r\n    moveItems(items, destinationDirectory) {}\r\n    copyItems(items, destinationDirectory) {}\r\n    uploadFileChunk(fileData, chunksInfo, destinationDirectory) {}\r\n    abortFileUpload(fileData, chunksInfo, destinationDirectory) {}\r\n    downloadItems(items) {}\r\n    getItemsContent(items) {}\r\n    getFileUploadChunkSize() {\r\n        return DEFAULT_FILE_UPLOAD_CHUNK_SIZE\r\n    }\r\n    _convertDataObjectsToFileItems(entries, pathInfo) {\r\n        var result = [];\r\n        each(entries, (_, entry) => {\r\n            var fileItem = this._createFileItem(entry, pathInfo);\r\n            result.push(fileItem)\r\n        });\r\n        return result\r\n    }\r\n    _createFileItem(dataObj, pathInfo) {\r\n        var key = this._keyGetter(dataObj);\r\n        var fileItem = new FileSystemItem(pathInfo, this._nameGetter(dataObj), !!this._isDirGetter(dataObj), key);\r\n        fileItem.size = this._sizeGetter(dataObj);\r\n        if (void 0 === fileItem.size) {\r\n            fileItem.size = 0\r\n        }\r\n        fileItem.dateModified = dateSerialization.deserializeDate(this._dateModifiedGetter(dataObj));\r\n        if (void 0 === fileItem.dateModified) {\r\n            fileItem.dateModified = new Date\r\n        }\r\n        if (fileItem.isDirectory) {\r\n            fileItem.hasSubDirectories = this._hasSubDirs(dataObj)\r\n        }\r\n        if (!key) {\r\n            fileItem.key = fileItem.relativeName\r\n        }\r\n        fileItem.thumbnail = this._thumbnailGetter(dataObj) || \"\";\r\n        fileItem.dataItem = dataObj;\r\n        return fileItem\r\n    }\r\n    _hasSubDirs(dataObj) {\r\n        return true\r\n    }\r\n    _getKeyExpr(options) {\r\n        return options.keyExpr || this._defaultKeyExpr\r\n    }\r\n    _defaultKeyExpr(fileItem) {\r\n        if (2 === arguments.length) {\r\n            fileItem.__KEY__ = arguments[1];\r\n            return\r\n        }\r\n        return Object.prototype.hasOwnProperty.call(fileItem, \"__KEY__\") ? fileItem.__KEY__ : null\r\n    }\r\n    _getNameExpr(options) {\r\n        return options.nameExpr || \"name\"\r\n    }\r\n    _getIsDirExpr(options) {\r\n        return options.isDirectoryExpr || \"isDirectory\"\r\n    }\r\n    _getSizeExpr(options) {\r\n        return options.sizeExpr || \"size\"\r\n    }\r\n    _getDateModifiedExpr(options) {\r\n        return options.dateModifiedExpr || \"dateModified\"\r\n    }\r\n    _executeActionAsDeferred(action, keepResult) {\r\n        var deferred = new Deferred;\r\n        try {\r\n            var result = action();\r\n            if (isPromise(result)) {\r\n                fromPromise(result).done(userResult => deferred.resolve(keepResult && userResult || void 0)).fail(error => deferred.reject(error))\r\n            } else {\r\n                deferred.resolve(keepResult && result || void 0)\r\n            }\r\n        } catch (error) {\r\n            return deferred.reject(error)\r\n        }\r\n        return deferred.promise()\r\n    }\r\n}\r\nexport default FileSystemProviderBase;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}