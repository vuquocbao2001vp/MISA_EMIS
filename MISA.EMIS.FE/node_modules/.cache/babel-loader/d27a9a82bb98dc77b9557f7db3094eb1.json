{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/map/provider.google_static.js)\r\n * Version: 22.1.4\r\n * Build date: Fri Jul 22 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport { getWidth, getHeight } from \"../../core/utils/size\";\nimport { each } from \"../../core/utils/iterator\";\nimport eventsEngine from \"../../events/core/events_engine\";\nimport Provider from \"./provider\";\nimport Color from \"../../color\";\nimport { name as clickEventName } from \"../../events/click\";\nvar GOOGLE_STATIC_URL = \"https://maps.google.com/maps/api/staticmap?\";\nvar GoogleStaticProvider = Provider.inherit({\n  _locationToString: function (location) {\n    var latLng = this._getLatLng(location);\n\n    return latLng ? latLng.lat + \",\" + latLng.lng : location.toString().replace(/ /g, \"+\");\n  },\n  _renderImpl: function () {\n    return this._updateMap();\n  },\n  updateDimensions: function () {\n    return this._updateMap();\n  },\n  updateMapType: function () {\n    return this._updateMap();\n  },\n  updateBounds: function () {\n    return Promise.resolve();\n  },\n  updateCenter: function () {\n    return this._updateMap();\n  },\n  updateZoom: function () {\n    return this._updateMap();\n  },\n  updateControls: function () {\n    return Promise.resolve();\n  },\n  addMarkers: function (options) {\n    var that = this;\n    return this._updateMap().then(function (result) {\n      each(options, function (_, options) {\n        that._fireMarkerAddedAction({\n          options: options\n        });\n      });\n      return result;\n    });\n  },\n  removeMarkers: function (options) {\n    var that = this;\n    return this._updateMap().then(function (result) {\n      each(options, function (_, options) {\n        that._fireMarkerRemovedAction({\n          options: options\n        });\n      });\n      return result;\n    });\n  },\n  adjustViewport: function () {\n    return Promise.resolve();\n  },\n  addRoutes: function (options) {\n    var that = this;\n    return this._updateMap().then(function (result) {\n      each(options, function (_, options) {\n        that._fireRouteAddedAction({\n          options: options\n        });\n      });\n      return result;\n    });\n  },\n  removeRoutes: function (options) {\n    var that = this;\n    return this._updateMap().then(function (result) {\n      each(options, function (_, options) {\n        that._fireRouteRemovedAction({\n          options: options\n        });\n      });\n      return result;\n    });\n  },\n  clean: function () {\n    this._$container.css(\"backgroundImage\", \"none\");\n\n    eventsEngine.off(this._$container, this._addEventNamespace(clickEventName));\n    return Promise.resolve();\n  },\n  mapRendered: function () {\n    return true;\n  },\n  _updateMap: function () {\n    var key = this._keyOption(\"googleStatic\");\n\n    var $container = this._$container;\n    var requestOptions = [\"sensor=false\", \"size=\" + Math.round(getWidth($container)) + \"x\" + Math.round(getHeight($container)), \"maptype=\" + this._option(\"type\"), \"center=\" + this._locationToString(this._option(\"center\")), \"zoom=\" + this._option(\"zoom\"), this._markersSubstring()];\n    requestOptions.push.apply(requestOptions, this._routeSubstrings());\n\n    if (key) {\n      requestOptions.push(\"key=\" + key);\n    }\n\n    var request = GOOGLE_STATIC_URL + requestOptions.join(\"&\");\n\n    this._$container.css(\"background\", 'url(\"' + request + '\") no-repeat 0 0');\n\n    this._attachClickEvent();\n\n    return Promise.resolve(true);\n  },\n  _markersSubstring: function () {\n    var that = this;\n    var markers = [];\n\n    var markerIcon = this._option(\"markerIconSrc\");\n\n    if (markerIcon) {\n      markers.push(\"icon:\" + markerIcon);\n    }\n\n    each(this._option(\"markers\"), function (_, marker) {\n      markers.push(that._locationToString(marker.location));\n    });\n    return \"markers=\" + markers.join(\"|\");\n  },\n  _routeSubstrings: function () {\n    var that = this;\n    var routes = [];\n    each(this._option(\"routes\"), function (_, route) {\n      var color = new Color(route.color || that._defaultRouteColor()).toHex().replace(\"#\", \"0x\");\n      var opacity = Math.round(255 * (route.opacity || that._defaultRouteOpacity())).toString(16);\n\n      var width = route.weight || that._defaultRouteWeight();\n\n      var locations = [];\n      each(route.locations, function (_, routePoint) {\n        locations.push(that._locationToString(routePoint));\n      });\n      routes.push(\"path=color:\" + color + opacity + \"|weight:\" + width + \"|\" + locations.join(\"|\"));\n    });\n    return routes;\n  },\n  _attachClickEvent: function () {\n    var that = this;\n\n    var eventName = this._addEventNamespace(clickEventName);\n\n    eventsEngine.off(this._$container, eventName);\n    eventsEngine.on(this._$container, eventName, function (e) {\n      that._fireClickAction({\n        event: e\n      });\n    });\n  }\n});\nexport default GoogleStaticProvider;","map":{"version":3,"names":["getWidth","getHeight","each","eventsEngine","Provider","Color","name","clickEventName","GOOGLE_STATIC_URL","GoogleStaticProvider","inherit","_locationToString","location","latLng","_getLatLng","lat","lng","toString","replace","_renderImpl","_updateMap","updateDimensions","updateMapType","updateBounds","Promise","resolve","updateCenter","updateZoom","updateControls","addMarkers","options","that","then","result","_","_fireMarkerAddedAction","removeMarkers","_fireMarkerRemovedAction","adjustViewport","addRoutes","_fireRouteAddedAction","removeRoutes","_fireRouteRemovedAction","clean","_$container","css","off","_addEventNamespace","mapRendered","key","_keyOption","$container","requestOptions","Math","round","_option","_markersSubstring","push","apply","_routeSubstrings","request","join","_attachClickEvent","markers","markerIcon","marker","routes","route","color","_defaultRouteColor","toHex","opacity","_defaultRouteOpacity","width","weight","_defaultRouteWeight","locations","routePoint","eventName","on","e","_fireClickAction","event"],"sources":["E:/MisaProject/W2022_06/misa_emis/node_modules/devextreme/esm/ui/map/provider.google_static.js"],"sourcesContent":["/**\r\n * DevExtreme (esm/ui/map/provider.google_static.js)\r\n * Version: 22.1.4\r\n * Build date: Fri Jul 22 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport {\r\n    getWidth,\r\n    getHeight\r\n} from \"../../core/utils/size\";\r\nimport {\r\n    each\r\n} from \"../../core/utils/iterator\";\r\nimport eventsEngine from \"../../events/core/events_engine\";\r\nimport Provider from \"./provider\";\r\nimport Color from \"../../color\";\r\nimport {\r\n    name as clickEventName\r\n} from \"../../events/click\";\r\nvar GOOGLE_STATIC_URL = \"https://maps.google.com/maps/api/staticmap?\";\r\nvar GoogleStaticProvider = Provider.inherit({\r\n    _locationToString: function(location) {\r\n        var latLng = this._getLatLng(location);\r\n        return latLng ? latLng.lat + \",\" + latLng.lng : location.toString().replace(/ /g, \"+\")\r\n    },\r\n    _renderImpl: function() {\r\n        return this._updateMap()\r\n    },\r\n    updateDimensions: function() {\r\n        return this._updateMap()\r\n    },\r\n    updateMapType: function() {\r\n        return this._updateMap()\r\n    },\r\n    updateBounds: function() {\r\n        return Promise.resolve()\r\n    },\r\n    updateCenter: function() {\r\n        return this._updateMap()\r\n    },\r\n    updateZoom: function() {\r\n        return this._updateMap()\r\n    },\r\n    updateControls: function() {\r\n        return Promise.resolve()\r\n    },\r\n    addMarkers: function(options) {\r\n        var that = this;\r\n        return this._updateMap().then((function(result) {\r\n            each(options, (function(_, options) {\r\n                that._fireMarkerAddedAction({\r\n                    options: options\r\n                })\r\n            }));\r\n            return result\r\n        }))\r\n    },\r\n    removeMarkers: function(options) {\r\n        var that = this;\r\n        return this._updateMap().then((function(result) {\r\n            each(options, (function(_, options) {\r\n                that._fireMarkerRemovedAction({\r\n                    options: options\r\n                })\r\n            }));\r\n            return result\r\n        }))\r\n    },\r\n    adjustViewport: function() {\r\n        return Promise.resolve()\r\n    },\r\n    addRoutes: function(options) {\r\n        var that = this;\r\n        return this._updateMap().then((function(result) {\r\n            each(options, (function(_, options) {\r\n                that._fireRouteAddedAction({\r\n                    options: options\r\n                })\r\n            }));\r\n            return result\r\n        }))\r\n    },\r\n    removeRoutes: function(options) {\r\n        var that = this;\r\n        return this._updateMap().then((function(result) {\r\n            each(options, (function(_, options) {\r\n                that._fireRouteRemovedAction({\r\n                    options: options\r\n                })\r\n            }));\r\n            return result\r\n        }))\r\n    },\r\n    clean: function() {\r\n        this._$container.css(\"backgroundImage\", \"none\");\r\n        eventsEngine.off(this._$container, this._addEventNamespace(clickEventName));\r\n        return Promise.resolve()\r\n    },\r\n    mapRendered: function() {\r\n        return true\r\n    },\r\n    _updateMap: function() {\r\n        var key = this._keyOption(\"googleStatic\");\r\n        var $container = this._$container;\r\n        var requestOptions = [\"sensor=false\", \"size=\" + Math.round(getWidth($container)) + \"x\" + Math.round(getHeight($container)), \"maptype=\" + this._option(\"type\"), \"center=\" + this._locationToString(this._option(\"center\")), \"zoom=\" + this._option(\"zoom\"), this._markersSubstring()];\r\n        requestOptions.push.apply(requestOptions, this._routeSubstrings());\r\n        if (key) {\r\n            requestOptions.push(\"key=\" + key)\r\n        }\r\n        var request = GOOGLE_STATIC_URL + requestOptions.join(\"&\");\r\n        this._$container.css(\"background\", 'url(\"' + request + '\") no-repeat 0 0');\r\n        this._attachClickEvent();\r\n        return Promise.resolve(true)\r\n    },\r\n    _markersSubstring: function() {\r\n        var that = this;\r\n        var markers = [];\r\n        var markerIcon = this._option(\"markerIconSrc\");\r\n        if (markerIcon) {\r\n            markers.push(\"icon:\" + markerIcon)\r\n        }\r\n        each(this._option(\"markers\"), (function(_, marker) {\r\n            markers.push(that._locationToString(marker.location))\r\n        }));\r\n        return \"markers=\" + markers.join(\"|\")\r\n    },\r\n    _routeSubstrings: function() {\r\n        var that = this;\r\n        var routes = [];\r\n        each(this._option(\"routes\"), (function(_, route) {\r\n            var color = new Color(route.color || that._defaultRouteColor()).toHex().replace(\"#\", \"0x\");\r\n            var opacity = Math.round(255 * (route.opacity || that._defaultRouteOpacity())).toString(16);\r\n            var width = route.weight || that._defaultRouteWeight();\r\n            var locations = [];\r\n            each(route.locations, (function(_, routePoint) {\r\n                locations.push(that._locationToString(routePoint))\r\n            }));\r\n            routes.push(\"path=color:\" + color + opacity + \"|weight:\" + width + \"|\" + locations.join(\"|\"))\r\n        }));\r\n        return routes\r\n    },\r\n    _attachClickEvent: function() {\r\n        var that = this;\r\n        var eventName = this._addEventNamespace(clickEventName);\r\n        eventsEngine.off(this._$container, eventName);\r\n        eventsEngine.on(this._$container, eventName, (function(e) {\r\n            that._fireClickAction({\r\n                event: e\r\n            })\r\n        }))\r\n    }\r\n});\r\nexport default GoogleStaticProvider;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}