{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\n\n/**\r\n * DevExtreme (esm/viz/tree_map/selection.js)\r\n * Version: 22.1.4\r\n * Build date: Fri Jul 22 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport TreeMapBase from \"./tree_map.base\";\nimport Node from \"./node\";\nimport { expand } from \"../core/helpers\";\nimport { buildRectAppearance } from \"./common\";\nvar proto = TreeMapBase.prototype;\nvar nodeProto = Node.prototype;\nimport { normalizeEnum as _normalizeEnum } from \"../core/utils\";\nvar MODE_NONE = 0;\nvar MODE_SINGLE = 1;\nvar MODE_MULTIPLE = 2;\nvar STATE_CODE = 2;\nimport \"./api\";\nimport \"./states\";\nproto._eventsMap.onSelectionChanged = {\n  name: \"selectionChanged\"\n};\nexpand(proto._handlers, \"calculateAdditionalStates\", function (states, options) {\n  states[2] = options.selectionStyle ? buildRectAppearance(options.selectionStyle) : {};\n});\nnodeProto.statesMap[2] = nodeProto.statesMap[3] = STATE_CODE;\nnodeProto.additionalStates.push(2);\nexpand(proto, \"_onNodesCreated\", function () {\n  this._selectionList.length = 0;\n});\nexpand(proto, \"_extendProxyType\", function (proto) {\n  var that = this;\n\n  proto.select = function (state) {\n    that._selectNode(this._id, !!state);\n  };\n\n  proto.isSelected = function () {\n    return that._selectionList.includes(this._id);\n  };\n\n  that._selectionList = [];\n});\nTreeMapBase.addChange({\n  code: \"SELECTION_MODE\",\n  handler: function () {\n    var option = _normalizeEnum(this._getOption(\"selectionMode\", true));\n\n    var selectionList = this._selectionList;\n    var tmp;\n    var mode = \"none\" === option ? MODE_NONE : \"multiple\" === option ? MODE_MULTIPLE : MODE_SINGLE;\n\n    if (mode === MODE_SINGLE && selectionList.length > 1) {\n      tmp = selectionList.pop();\n      this.clearSelection();\n      selectionList.push(tmp);\n    } else if (mode === MODE_NONE) {\n      this.clearSelection();\n    }\n\n    this._selectionMode = mode;\n  },\n  isThemeDependent: true,\n  isOptionChange: true,\n  option: \"selectionMode\"\n});\nexpand(proto, \"_applyTilesAppearance\", function () {\n  if (this._selectionList.length) {\n    bringSelectedTilesToForeground(this._nodes, this._selectionList);\n  }\n});\nvar tileToFront = [leafToFront, groupToFront];\n\nfunction bringSelectedTilesToForeground(nodes, selectionList) {\n  var i;\n  var ii = selectionList.length;\n  var node;\n\n  for (i = 0; i < ii; ++i) {\n    node = nodes[selectionList[i]];\n    tileToFront[Number(node.isNode())](node.tile);\n  }\n}\n\nfunction leafToFront(content) {\n  content.toForeground();\n}\n\nfunction groupToFront(content) {\n  content.outer.toForeground();\n  content.inner.toForeground();\n}\n\nproto._applySelectionState = function (index, state) {\n  var node = this._nodes[index];\n  node.setState(STATE_CODE, state);\n\n  this._eventTrigger(\"selectionChanged\", {\n    node: node.proxy\n  });\n};\n\nproto._selectNode = function (index, state) {\n  var selectionList;\n  var k;\n  var tmp;\n\n  if (this._selectionMode !== MODE_NONE) {\n    this._context.suspend();\n\n    selectionList = this._selectionList;\n    k = selectionList.indexOf(index);\n\n    if (state && -1 === k) {\n      if (this._selectionMode === MODE_SINGLE) {\n        if (selectionList.length) {\n          tmp = selectionList.pop();\n\n          this._applySelectionState(tmp, false);\n        }\n      }\n\n      selectionList.push(index);\n\n      this._applySelectionState(index, true);\n    } else if (!state && k >= 0) {\n      selectionList.splice(k, 1);\n\n      this._applySelectionState(index, false);\n    }\n\n    this._context.resume();\n  }\n};\n\nproto.clearSelection = function () {\n  var selectionList = this._selectionList;\n  var i;\n  var ii = selectionList.length;\n\n  if (this._selectionMode !== MODE_NONE) {\n    this._context.suspend();\n\n    for (i = 0; i < ii; ++i) {\n      this._applySelectionState(selectionList[i], false);\n    }\n\n    selectionList.length = 0;\n\n    this._context.resume();\n  }\n};","map":{"version":3,"names":["TreeMapBase","Node","expand","buildRectAppearance","proto","prototype","nodeProto","normalizeEnum","_normalizeEnum","MODE_NONE","MODE_SINGLE","MODE_MULTIPLE","STATE_CODE","_eventsMap","onSelectionChanged","name","_handlers","states","options","selectionStyle","statesMap","additionalStates","push","_selectionList","length","that","select","state","_selectNode","_id","isSelected","includes","addChange","code","handler","option","_getOption","selectionList","tmp","mode","pop","clearSelection","_selectionMode","isThemeDependent","isOptionChange","bringSelectedTilesToForeground","_nodes","tileToFront","leafToFront","groupToFront","nodes","i","ii","node","Number","isNode","tile","content","toForeground","outer","inner","_applySelectionState","index","setState","_eventTrigger","proxy","k","_context","suspend","indexOf","splice","resume"],"sources":["E:/MisaProject/W2022_06/misa_emis/node_modules/devextreme/esm/viz/tree_map/selection.js"],"sourcesContent":["/**\r\n * DevExtreme (esm/viz/tree_map/selection.js)\r\n * Version: 22.1.4\r\n * Build date: Fri Jul 22 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport TreeMapBase from \"./tree_map.base\";\r\nimport Node from \"./node\";\r\nimport {\r\n    expand\r\n} from \"../core/helpers\";\r\nimport {\r\n    buildRectAppearance\r\n} from \"./common\";\r\nvar proto = TreeMapBase.prototype;\r\nvar nodeProto = Node.prototype;\r\nimport {\r\n    normalizeEnum as _normalizeEnum\r\n} from \"../core/utils\";\r\nvar MODE_NONE = 0;\r\nvar MODE_SINGLE = 1;\r\nvar MODE_MULTIPLE = 2;\r\nvar STATE_CODE = 2;\r\nimport \"./api\";\r\nimport \"./states\";\r\nproto._eventsMap.onSelectionChanged = {\r\n    name: \"selectionChanged\"\r\n};\r\nexpand(proto._handlers, \"calculateAdditionalStates\", (function(states, options) {\r\n    states[2] = options.selectionStyle ? buildRectAppearance(options.selectionStyle) : {}\r\n}));\r\nnodeProto.statesMap[2] = nodeProto.statesMap[3] = STATE_CODE;\r\nnodeProto.additionalStates.push(2);\r\nexpand(proto, \"_onNodesCreated\", (function() {\r\n    this._selectionList.length = 0\r\n}));\r\nexpand(proto, \"_extendProxyType\", (function(proto) {\r\n    var that = this;\r\n    proto.select = function(state) {\r\n        that._selectNode(this._id, !!state)\r\n    };\r\n    proto.isSelected = function() {\r\n        return that._selectionList.includes(this._id)\r\n    };\r\n    that._selectionList = []\r\n}));\r\nTreeMapBase.addChange({\r\n    code: \"SELECTION_MODE\",\r\n    handler: function() {\r\n        var option = _normalizeEnum(this._getOption(\"selectionMode\", true));\r\n        var selectionList = this._selectionList;\r\n        var tmp;\r\n        var mode = \"none\" === option ? MODE_NONE : \"multiple\" === option ? MODE_MULTIPLE : MODE_SINGLE;\r\n        if (mode === MODE_SINGLE && selectionList.length > 1) {\r\n            tmp = selectionList.pop();\r\n            this.clearSelection();\r\n            selectionList.push(tmp)\r\n        } else if (mode === MODE_NONE) {\r\n            this.clearSelection()\r\n        }\r\n        this._selectionMode = mode\r\n    },\r\n    isThemeDependent: true,\r\n    isOptionChange: true,\r\n    option: \"selectionMode\"\r\n});\r\nexpand(proto, \"_applyTilesAppearance\", (function() {\r\n    if (this._selectionList.length) {\r\n        bringSelectedTilesToForeground(this._nodes, this._selectionList)\r\n    }\r\n}));\r\nvar tileToFront = [leafToFront, groupToFront];\r\n\r\nfunction bringSelectedTilesToForeground(nodes, selectionList) {\r\n    var i;\r\n    var ii = selectionList.length;\r\n    var node;\r\n    for (i = 0; i < ii; ++i) {\r\n        node = nodes[selectionList[i]];\r\n        tileToFront[Number(node.isNode())](node.tile)\r\n    }\r\n}\r\n\r\nfunction leafToFront(content) {\r\n    content.toForeground()\r\n}\r\n\r\nfunction groupToFront(content) {\r\n    content.outer.toForeground();\r\n    content.inner.toForeground()\r\n}\r\nproto._applySelectionState = function(index, state) {\r\n    var node = this._nodes[index];\r\n    node.setState(STATE_CODE, state);\r\n    this._eventTrigger(\"selectionChanged\", {\r\n        node: node.proxy\r\n    })\r\n};\r\nproto._selectNode = function(index, state) {\r\n    var selectionList;\r\n    var k;\r\n    var tmp;\r\n    if (this._selectionMode !== MODE_NONE) {\r\n        this._context.suspend();\r\n        selectionList = this._selectionList;\r\n        k = selectionList.indexOf(index);\r\n        if (state && -1 === k) {\r\n            if (this._selectionMode === MODE_SINGLE) {\r\n                if (selectionList.length) {\r\n                    tmp = selectionList.pop();\r\n                    this._applySelectionState(tmp, false)\r\n                }\r\n            }\r\n            selectionList.push(index);\r\n            this._applySelectionState(index, true)\r\n        } else if (!state && k >= 0) {\r\n            selectionList.splice(k, 1);\r\n            this._applySelectionState(index, false)\r\n        }\r\n        this._context.resume()\r\n    }\r\n};\r\nproto.clearSelection = function() {\r\n    var selectionList = this._selectionList;\r\n    var i;\r\n    var ii = selectionList.length;\r\n    if (this._selectionMode !== MODE_NONE) {\r\n        this._context.suspend();\r\n        for (i = 0; i < ii; ++i) {\r\n            this._applySelectionState(selectionList[i], false)\r\n        }\r\n        selectionList.length = 0;\r\n        this._context.resume()\r\n    }\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}