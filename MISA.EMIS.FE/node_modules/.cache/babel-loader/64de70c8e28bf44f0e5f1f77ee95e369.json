{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/scheduler/workspaces/ui.scheduler.virtual_scrolling.js)\r\n * Version: 22.1.4\r\n * Build date: Fri Jul 22 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport domAdapter from \"../../../core/dom_adapter\";\nimport eventsEngine from \"../../../events/core/events_engine\";\nimport { getWindow } from \"../../../core/utils/window\";\nimport { addNamespace } from \"../../../events/utils/index\";\nimport { isDefined } from \"../../../core/utils/type\";\nvar DEFAULT_CELL_HEIGHT = 50;\nvar MIN_CELL_WIDTH = 1;\nvar MIN_SCROLL_OFFSET = 10;\nvar VIRTUAL_APPOINTMENTS_RENDER_TIMEOUT = 15;\nvar DOCUMENT_SCROLL_EVENT_NAMESPACE = addNamespace(\"scroll\", \"dxSchedulerVirtualScrolling\");\nvar scrollingOrientations = {\n  vertical: \"vertical\",\n  horizontal: \"horizontal\",\n  both: \"both\",\n  none: \"none\"\n};\nvar DefaultScrollingOrientation = scrollingOrientations.both;\nexport class VirtualScrollingDispatcher {\n  constructor(options) {\n    this.options = options;\n\n    if (options) {\n      this._rowHeight = this.getCellHeight();\n      this._cellWidth = this.getCellWidth();\n\n      this._createVirtualScrollingBase();\n    }\n  }\n\n  get isRTL() {\n    return this.options.isRTL();\n  }\n\n  get verticalVirtualScrolling() {\n    return this._verticalVirtualScrolling;\n  }\n\n  set verticalVirtualScrolling(value) {\n    this._verticalVirtualScrolling = value;\n  }\n\n  get horizontalVirtualScrolling() {\n    return this._horizontalVirtualScrolling;\n  }\n\n  set horizontalVirtualScrolling(value) {\n    this._horizontalVirtualScrolling = value;\n  }\n\n  get document() {\n    return domAdapter.getDocument();\n  }\n\n  get height() {\n    return this.options.getSchedulerHeight();\n  }\n\n  get width() {\n    return this.options.getSchedulerWidth();\n  }\n\n  get rowHeight() {\n    return this._rowHeight;\n  }\n\n  set rowHeight(value) {\n    this._rowHeight = value;\n  }\n\n  get outlineCount() {\n    return this.options.getScrolling().outlineCount;\n  }\n\n  get cellWidth() {\n    return this._cellWidth;\n  }\n\n  set cellWidth(value) {\n    this._cellWidth = value;\n  }\n\n  get viewportWidth() {\n    var width = this.width && this.options.getViewWidth();\n    return width > 0 ? width : this.options.getWindowWidth();\n  }\n\n  get viewportHeight() {\n    var height = this.height && this.options.getViewHeight();\n    return height > 0 ? height : this.options.getWindowHeight();\n  }\n\n  get cellCountInsideTopVirtualRow() {\n    var _this$verticalScrolli;\n\n    return (null === (_this$verticalScrolli = this.verticalScrollingState) || void 0 === _this$verticalScrolli ? void 0 : _this$verticalScrolli.virtualItemCountBefore) || 0;\n  }\n\n  get cellCountInsideLeftVirtualCell() {\n    var _this$horizontalScrol;\n\n    return (null === (_this$horizontalScrol = this.horizontalScrollingState) || void 0 === _this$horizontalScrol ? void 0 : _this$horizontalScrol.virtualItemCountBefore) || 0;\n  }\n\n  get cellCountInsideRightVirtualCell() {\n    var _this$horizontalScrol2;\n\n    return (null === (_this$horizontalScrol2 = this.horizontalScrollingState) || void 0 === _this$horizontalScrol2 ? void 0 : _this$horizontalScrol2.virtualItemCountAfter) || 0;\n  }\n\n  get topVirtualRowsCount() {\n    return this.cellCountInsideTopVirtualRow > 0 ? 1 : 0;\n  }\n\n  get leftVirtualCellsCount() {\n    var virtualItemsCount = !this.isRTL ? this.cellCountInsideLeftVirtualCell : this.cellCountInsideRightVirtualCell;\n    return virtualItemsCount > 0 ? 1 : 0;\n  }\n\n  get virtualRowOffset() {\n    var _this$verticalScrolli2;\n\n    return (null === (_this$verticalScrolli2 = this.verticalScrollingState) || void 0 === _this$verticalScrolli2 ? void 0 : _this$verticalScrolli2.virtualItemSizeBefore) || 0;\n  }\n\n  get virtualCellOffset() {\n    var _this$horizontalScrol3;\n\n    return (null === (_this$horizontalScrol3 = this.horizontalScrollingState) || void 0 === _this$horizontalScrol3 ? void 0 : _this$horizontalScrol3.virtualItemSizeBefore) || 0;\n  }\n\n  get scrollingState() {\n    var _this$verticalVirtual, _this$horizontalVirtu;\n\n    return {\n      vertical: null === (_this$verticalVirtual = this.verticalVirtualScrolling) || void 0 === _this$verticalVirtual ? void 0 : _this$verticalVirtual.state,\n      horizontal: null === (_this$horizontalVirtu = this.horizontalVirtualScrolling) || void 0 === _this$horizontalVirtu ? void 0 : _this$horizontalVirtu.state\n    };\n  }\n\n  get verticalScrollingState() {\n    return this.scrollingState.vertical;\n  }\n\n  get horizontalScrollingState() {\n    return this.scrollingState.horizontal;\n  }\n\n  get scrollingOrientation() {\n    var scrolling = this.options.getScrolling();\n\n    if (\"standard\" === scrolling.mode) {\n      return scrollingOrientations.none;\n    }\n\n    return scrolling.orientation || DefaultScrollingOrientation;\n  }\n\n  get verticalScrollingAllowed() {\n    return this.scrollingOrientation === scrollingOrientations.vertical || this.scrollingOrientation === scrollingOrientations.both;\n  }\n\n  get horizontalScrollingAllowed() {\n    return this.scrollingOrientation === scrollingOrientations.horizontal || this.scrollingOrientation === scrollingOrientations.both;\n  }\n\n  setViewOptions(options) {\n    this.options = options;\n\n    if (this.verticalVirtualScrolling) {\n      this.verticalVirtualScrolling.options = options;\n      this.verticalVirtualScrolling.itemSize = this.rowHeight;\n      this.verticalVirtualScrolling.viewportSize = this.viewportHeight;\n    }\n\n    if (this.horizontalVirtualScrolling) {\n      this.horizontalVirtualScrolling.options = options;\n      this.verticalVirtualScrolling.itemSize = this.cellWidth;\n      this.verticalVirtualScrolling.viewportSize = this.viewportWidth;\n    }\n  }\n\n  getRenderState() {\n    var _this$verticalVirtual2, _this$horizontalVirtu2;\n\n    var verticalRenderState = (null === (_this$verticalVirtual2 = this.verticalVirtualScrolling) || void 0 === _this$verticalVirtual2 ? void 0 : _this$verticalVirtual2.getRenderState()) || {};\n    var horizontalRenderState = (null === (_this$horizontalVirtu2 = this.horizontalVirtualScrolling) || void 0 === _this$horizontalVirtu2 ? void 0 : _this$horizontalVirtu2.getRenderState()) || {};\n    return _extends({}, verticalRenderState, horizontalRenderState);\n  }\n\n  getCellHeight() {\n    var cellHeight = this.options.getCellHeight();\n    var result = cellHeight > 0 ? cellHeight : DEFAULT_CELL_HEIGHT;\n    return Math.floor(result);\n  }\n\n  getCellWidth() {\n    var cellWidth = this.options.getCellWidth();\n    var minCellWidth = this.options.getCellMinWidth();\n\n    if (!cellWidth || cellWidth < minCellWidth) {\n      cellWidth = minCellWidth;\n    }\n\n    var result = cellWidth > 0 ? cellWidth : MIN_CELL_WIDTH;\n    return Math.floor(result);\n  }\n\n  calculateCoordinatesByDataAndPosition(cellData, position, date, isCalculateTime, isVerticalDirectionView) {\n    var {\n      rowIndex: rowIndex,\n      columnIndex: columnIndex\n    } = position;\n    var {\n      startDate: startDate,\n      endDate: endDate,\n      allDay: allDay\n    } = cellData;\n    var timeToScroll = date.getTime();\n    var cellStartTime = startDate.getTime();\n    var cellEndTime = endDate.getTime();\n    var scrollInCell = allDay || !isCalculateTime ? 0 : (timeToScroll - cellStartTime) / (cellEndTime - cellStartTime);\n    var cellWidth = this.getCellWidth();\n    var rowHeight = this.getCellHeight();\n    var top = isVerticalDirectionView ? (rowIndex + scrollInCell) * rowHeight : rowIndex * rowHeight;\n    var left = isVerticalDirectionView ? columnIndex * cellWidth : (columnIndex + scrollInCell) * cellWidth;\n\n    if (this.isRTL) {\n      left = this.options.getScrollableOuterWidth() - left;\n    }\n\n    return {\n      top: top,\n      left: left\n    };\n  }\n\n  dispose() {\n    if (this._onScrollHandler) {\n      eventsEngine.off(this.document, DOCUMENT_SCROLL_EVENT_NAMESPACE, this._onScrollHandler);\n    }\n  }\n\n  createVirtualScrolling() {\n    var isVerticalVirtualScrollingCreated = !!this.verticalVirtualScrolling;\n    var isHorizontalVirtualScrollingCreated = !!this.horizontalVirtualScrolling;\n\n    if (this.verticalScrollingAllowed !== isVerticalVirtualScrollingCreated || this.horizontalScrollingAllowed !== isHorizontalVirtualScrollingCreated) {\n      this._rowHeight = this.getCellHeight();\n      this._cellWidth = this.getCellWidth();\n\n      this._createVirtualScrollingBase();\n    }\n  }\n\n  _createVirtualScrollingBase() {\n    if (this.verticalScrollingAllowed) {\n      this.verticalVirtualScrolling = new VerticalVirtualScrolling(_extends({}, this.options, {\n        viewportHeight: this.viewportHeight,\n        rowHeight: this.rowHeight,\n        outlineCount: this.outlineCount\n      }));\n    }\n\n    if (this.horizontalScrollingAllowed) {\n      this.horizontalVirtualScrolling = new HorizontalVirtualScrolling(_extends({}, this.options, {\n        viewportWidth: this.viewportWidth,\n        cellWidth: this.cellWidth,\n        outlineCount: this.outlineCount\n      }));\n    }\n  }\n\n  isAttachWindowScrollEvent() {\n    return (this.horizontalScrollingAllowed || this.verticalScrollingAllowed) && !this.height;\n  }\n\n  attachScrollableEvents() {\n    if (this.isAttachWindowScrollEvent()) {\n      this._attachWindowScroll();\n    }\n  }\n\n  _attachWindowScroll() {\n    var window = getWindow();\n    this._onScrollHandler = this.options.createAction(() => {\n      var {\n        scrollX: scrollX,\n        scrollY: scrollY\n      } = window;\n\n      if (scrollX >= MIN_SCROLL_OFFSET || scrollY >= MIN_SCROLL_OFFSET) {\n        this.handleOnScrollEvent({\n          left: scrollX,\n          top: scrollY\n        });\n      }\n    });\n    eventsEngine.on(this.document, DOCUMENT_SCROLL_EVENT_NAMESPACE, this._onScrollHandler);\n  }\n\n  handleOnScrollEvent(scrollPosition) {\n    if (scrollPosition) {\n      var _this$verticalVirtual3, _this$horizontalVirtu3;\n\n      var {\n        left: left,\n        top: top\n      } = scrollPosition;\n      var verticalStateChanged = isDefined(top) && (null === (_this$verticalVirtual3 = this.verticalVirtualScrolling) || void 0 === _this$verticalVirtual3 ? void 0 : _this$verticalVirtual3.updateState(top));\n      var horizontalStateChanged = isDefined(left) && (null === (_this$horizontalVirtu3 = this.horizontalVirtualScrolling) || void 0 === _this$horizontalVirtu3 ? void 0 : _this$horizontalVirtu3.updateState(left));\n\n      if (verticalStateChanged || horizontalStateChanged) {\n        var _this$options$updateR, _this$options;\n\n        null === (_this$options$updateR = (_this$options = this.options).updateRender) || void 0 === _this$options$updateR ? void 0 : _this$options$updateR.call(_this$options);\n      }\n    }\n  }\n\n  updateDimensions(isForce) {\n    var cellHeight = this.getCellHeight();\n    var needUpdateVertical = this.verticalScrollingAllowed && cellHeight !== this.rowHeight;\n\n    if ((needUpdateVertical || isForce) && this.verticalVirtualScrolling) {\n      this.rowHeight = cellHeight;\n      this.verticalVirtualScrolling.viewportSize = this.viewportHeight;\n      this.verticalVirtualScrolling.reinitState(cellHeight, isForce);\n    }\n\n    var cellWidth = this.getCellWidth();\n    var needUpdateHorizontal = this.horizontalScrollingAllowed && cellWidth !== this.cellWidth;\n\n    if ((needUpdateHorizontal || isForce) && this.horizontalVirtualScrolling) {\n      this.cellWidth = cellWidth;\n      this.horizontalVirtualScrolling.viewportSize = this.viewportWidth;\n      this.horizontalVirtualScrolling.reinitState(cellWidth, isForce);\n    }\n\n    if (needUpdateVertical || needUpdateHorizontal) {\n      var _this$options$updateG, _this$options2;\n\n      null === (_this$options$updateG = (_this$options2 = this.options).updateGrid) || void 0 === _this$options$updateG ? void 0 : _this$options$updateG.call(_this$options2);\n    }\n  }\n\n}\n\nclass VirtualScrollingBase {\n  constructor(options) {\n    this.options = options;\n    this._state = this.defaultState;\n    this.viewportSize = options.viewportSize;\n    this._itemSize = options.itemSize;\n    this._position = -1;\n    this._itemSizeChanged = false;\n    this.updateState(0);\n  }\n\n  get itemSize() {\n    return this._itemSize;\n  }\n\n  set itemSize(value) {\n    this._itemSizeChanged = this._itemSize !== value;\n    this._itemSize = value;\n  }\n\n  get state() {\n    return this._state;\n  }\n\n  set state(value) {\n    this._state = value;\n  }\n\n  get startIndex() {\n    return this.state.startIndex;\n  }\n\n  get pageSize() {\n    return Math.ceil(this.viewportSize / this.itemSize);\n  }\n\n  get outlineCount() {\n    return isDefined(this.options.outlineCount) ? this.options.outlineCount : Math.floor(this.pageSize / 2);\n  }\n\n  get groupCount() {\n    return this.options.getGroupCount();\n  }\n\n  get isVerticalGrouping() {\n    return this.options.isVerticalGrouping();\n  }\n\n  get defaultState() {\n    return {\n      prevPosition: 0,\n      startIndex: -1,\n      itemCount: 0,\n      virtualItemCountBefore: 0,\n      virtualItemCountAfter: 0,\n      outlineCountBefore: 0,\n      outlineCountAfter: 0,\n      virtualItemSizeBefore: 0,\n      virtualItemSizeAfter: 0,\n      outlineSizeBefore: 0,\n      outlineSizeAfter: 0\n    };\n  }\n\n  get maxScrollPosition() {\n    return this.getTotalItemCount() * this.itemSize - this.viewportSize;\n  }\n\n  get position() {\n    return this._position;\n  }\n\n  set position(value) {\n    this._position = value;\n  }\n\n  needUpdateState(position) {\n    var {\n      prevPosition: prevPosition,\n      startIndex: startIndex\n    } = this.state;\n    var isFirstInitialization = startIndex < 0;\n\n    if (isFirstInitialization) {\n      return true;\n    }\n\n    var isStartIndexChanged = false;\n\n    if (this._validateAndSavePosition(position)) {\n      if (0 === position || position === this.maxScrollPosition) {\n        return true;\n      }\n\n      var currentPosition = prevPosition;\n      var currentItemsCount = Math.floor(currentPosition / this.itemSize);\n      var itemsCount = Math.floor(position / this.itemSize);\n      isStartIndexChanged = Math.abs(currentItemsCount - itemsCount) >= this.outlineCount;\n    }\n\n    return isStartIndexChanged;\n  }\n\n  _validateAndSavePosition(position) {\n    if (!isDefined(position)) {\n      return false;\n    }\n\n    var result = this.position !== position;\n    this.position = position;\n    return result;\n  }\n\n  _correctPosition(position) {\n    return position >= 0 ? Math.min(position, this.maxScrollPosition) : -1;\n  }\n\n  updateState(position, isForce) {\n    position = this._correctPosition(position);\n\n    if (!this.needUpdateState(position) && !isForce) {\n      return false;\n    }\n\n    var itemsInfoBefore = this._calcItemInfoBefore(position);\n\n    var itemsDeltaBefore = this._calcItemDeltaBefore(itemsInfoBefore);\n\n    var {\n      outlineCountAfter: outlineCountAfter,\n      virtualItemCountAfter: virtualItemCountAfter,\n      itemCountWithAfter: itemCountWithAfter\n    } = this._calcItemInfoAfter(itemsDeltaBefore);\n\n    var {\n      virtualItemCountBefore: virtualItemCountBefore,\n      outlineCountBefore: outlineCountBefore\n    } = itemsInfoBefore;\n    var itemCount = outlineCountBefore + itemCountWithAfter + outlineCountAfter;\n    var itemCountBefore = Math.floor(position / this.itemSize);\n    this.state.prevPosition = itemCountBefore * this.itemSize;\n    this.state.startIndex = itemCountBefore - outlineCountBefore;\n    this.state.virtualItemCountBefore = virtualItemCountBefore;\n    this.state.outlineCountBefore = outlineCountBefore;\n    this.state.itemCount = itemCount;\n    this.state.outlineCountAfter = outlineCountAfter;\n    this.state.virtualItemCountAfter = virtualItemCountAfter;\n\n    this._updateStateCore();\n\n    return true;\n  }\n\n  reinitState(itemSize, isForceUpdate) {\n    var {\n      position: position\n    } = this;\n    this.itemSize = itemSize;\n    this.updateState(0, isForceUpdate);\n\n    if (position > 0) {\n      this.updateState(position, isForceUpdate);\n    }\n  }\n\n  _calcItemInfoBefore(position) {\n    var virtualItemCountBefore = Math.floor(position / this.itemSize);\n    var outlineCountBefore = Math.min(virtualItemCountBefore, this.outlineCount);\n    virtualItemCountBefore -= outlineCountBefore;\n    return {\n      virtualItemCountBefore: virtualItemCountBefore,\n      outlineCountBefore: outlineCountBefore\n    };\n  }\n\n  _calcItemDeltaBefore(itemInfoBefore) {\n    var {\n      virtualItemCountBefore: virtualItemCountBefore,\n      outlineCountBefore: outlineCountBefore\n    } = itemInfoBefore;\n    var totalItemCount = this.getTotalItemCount();\n    return totalItemCount - virtualItemCountBefore - outlineCountBefore;\n  }\n\n  getTotalItemCount() {\n    throw \"getTotalItemCount method should be implemented\";\n  }\n\n  getRenderState() {\n    throw \"getRenderState method should be implemented\";\n  }\n\n  _calcItemInfoAfter(itemsDeltaBefore) {\n    var itemCountWithAfter = itemsDeltaBefore >= this.pageSize ? this.pageSize : itemsDeltaBefore;\n    var virtualItemCountAfter = itemsDeltaBefore - itemCountWithAfter;\n    var outlineCountAfter = virtualItemCountAfter > 0 ? Math.min(virtualItemCountAfter, this.outlineCount) : 0;\n\n    if (virtualItemCountAfter > 0) {\n      virtualItemCountAfter -= outlineCountAfter;\n    }\n\n    return {\n      virtualItemCountAfter: virtualItemCountAfter,\n      outlineCountAfter: outlineCountAfter,\n      itemCountWithAfter: itemCountWithAfter\n    };\n  }\n\n  _updateStateCore() {\n    var {\n      state: state\n    } = this;\n    var virtualItemCountBefore = state.virtualItemCountBefore;\n    var virtualItemCountAfter = state.virtualItemCountAfter;\n    var outlineCountBefore = state.outlineCountBefore;\n    var outlineCountAfter = state.outlineCountAfter;\n    var prevVirtualItemSizeBefore = state.virtualItemSizeBefore;\n    var prevVirtualItemSizeAfter = state.virtualItemSizeAfter;\n    var prevOutlineSizeBefore = state.outlineSizeBefore;\n    var prevOutlineSizeAfter = state.outlineSizeAfter;\n    var virtualItemSizeBefore = this.itemSize * virtualItemCountBefore;\n    var virtualItemSizeAfter = this.itemSize * virtualItemCountAfter;\n    var outlineSizeBefore = this.itemSize * outlineCountBefore;\n    var outlineSizeAfter = this.itemSize * outlineCountAfter;\n    var prevVirtualSizeBefore = prevVirtualItemSizeBefore + prevOutlineSizeBefore;\n    var virtualSizeBefore = virtualItemSizeBefore + outlineSizeBefore;\n    var prevVirtualSizeAfter = prevVirtualItemSizeAfter + prevOutlineSizeAfter;\n    var virtualSizeAfter = virtualItemSizeAfter + outlineSizeAfter;\n    var isAppend = prevVirtualSizeBefore < virtualSizeBefore;\n    var isPrepend = prevVirtualSizeAfter < virtualSizeAfter;\n    var needAddItems = this._itemSizeChanged || isAppend || isPrepend;\n\n    if (needAddItems) {\n      this._updateStateVirtualItems(virtualItemSizeBefore, virtualItemSizeAfter);\n    }\n  }\n\n  _updateStateVirtualItems(virtualItemSizeBefore, virtualItemSizeAfter) {\n    var {\n      state: state\n    } = this;\n    state.virtualItemSizeBefore = virtualItemSizeBefore;\n    state.virtualItemSizeAfter = virtualItemSizeAfter;\n  }\n\n}\n\nclass VerticalVirtualScrolling extends VirtualScrollingBase {\n  constructor(options) {\n    super(_extends({}, options, {\n      itemSize: options.rowHeight,\n      viewportSize: options.viewportHeight\n    }));\n  }\n\n  get prevTopPosition() {\n    return this.state.prevPosition;\n  }\n\n  get rowCount() {\n    return this.state.itemCount;\n  }\n\n  get topVirtualRowCount() {\n    return this.state.virtualItemCountBefore;\n  }\n\n  get bottomVirtualRowCount() {\n    return this.state.virtualItemCountAfter;\n  }\n\n  getTotalItemCount() {\n    return this.options.getTotalRowCount(this.groupCount, this.isVerticalGrouping);\n  }\n\n  getRenderState() {\n    return {\n      topVirtualRowHeight: this.state.virtualItemSizeBefore,\n      bottomVirtualRowHeight: this.state.virtualItemSizeAfter,\n      startRowIndex: this.state.startIndex,\n      rowCount: this.state.itemCount,\n      startIndex: this.state.startIndex\n    };\n  }\n\n}\n\nclass HorizontalVirtualScrolling extends VirtualScrollingBase {\n  constructor(options) {\n    super(_extends({}, options, {\n      itemSize: options.cellWidth,\n      viewportSize: options.viewportWidth\n    }));\n  }\n\n  get isRTL() {\n    return this.options.isRTL();\n  }\n\n  getTotalItemCount() {\n    return this.options.getTotalCellCount(this.groupCount, this.isVerticalGrouping);\n  }\n\n  getRenderState() {\n    return {\n      leftVirtualCellWidth: this.state.virtualItemSizeBefore,\n      rightVirtualCellWidth: this.state.virtualItemSizeAfter,\n      startCellIndex: this.state.startIndex,\n      cellCount: this.state.itemCount,\n      cellWidth: this.itemSize\n    };\n  }\n\n  _updateStateVirtualItems(virtualItemSizeBefore, virtualItemSizeAfter) {\n    if (!this.isRTL) {\n      super._updateStateVirtualItems(virtualItemSizeBefore, virtualItemSizeAfter);\n    } else {\n      var {\n        state: state\n      } = this;\n      state.virtualItemSizeAfter = virtualItemSizeBefore;\n      state.virtualItemSizeBefore = virtualItemSizeAfter;\n      state.startIndex = this.getTotalItemCount() - this.startIndex - this.state.itemCount;\n    }\n  }\n\n}\n\nexport class VirtualScrollingRenderer {\n  constructor(workspace) {\n    this._workspace = workspace;\n    this._renderAppointmentTimeoutID = null;\n  }\n\n  getRenderTimeout() {\n    return this._workspace.option(\"isRenovatedAppointments\") ? -1 : VIRTUAL_APPOINTMENTS_RENDER_TIMEOUT;\n  }\n\n  get workspace() {\n    return this._workspace;\n  }\n\n  updateRender() {\n    this._renderGrid();\n\n    this._renderAppointments();\n  }\n\n  _renderGrid() {\n    this.workspace.renderWorkSpace(false);\n  }\n\n  _renderAppointments() {\n    var renderTimeout = this.getRenderTimeout();\n\n    if (renderTimeout >= 0) {\n      clearTimeout(this._renderAppointmentTimeoutID);\n      this._renderAppointmentTimeoutID = setTimeout(() => this.workspace.updateAppointments(), renderTimeout);\n    } else {\n      this.workspace.updateAppointments();\n    }\n  }\n\n}","map":{"version":3,"names":["_extends","domAdapter","eventsEngine","getWindow","addNamespace","isDefined","DEFAULT_CELL_HEIGHT","MIN_CELL_WIDTH","MIN_SCROLL_OFFSET","VIRTUAL_APPOINTMENTS_RENDER_TIMEOUT","DOCUMENT_SCROLL_EVENT_NAMESPACE","scrollingOrientations","vertical","horizontal","both","none","DefaultScrollingOrientation","VirtualScrollingDispatcher","constructor","options","_rowHeight","getCellHeight","_cellWidth","getCellWidth","_createVirtualScrollingBase","isRTL","verticalVirtualScrolling","_verticalVirtualScrolling","value","horizontalVirtualScrolling","_horizontalVirtualScrolling","document","getDocument","height","getSchedulerHeight","width","getSchedulerWidth","rowHeight","outlineCount","getScrolling","cellWidth","viewportWidth","getViewWidth","getWindowWidth","viewportHeight","getViewHeight","getWindowHeight","cellCountInsideTopVirtualRow","_this$verticalScrolli","verticalScrollingState","virtualItemCountBefore","cellCountInsideLeftVirtualCell","_this$horizontalScrol","horizontalScrollingState","cellCountInsideRightVirtualCell","_this$horizontalScrol2","virtualItemCountAfter","topVirtualRowsCount","leftVirtualCellsCount","virtualItemsCount","virtualRowOffset","_this$verticalScrolli2","virtualItemSizeBefore","virtualCellOffset","_this$horizontalScrol3","scrollingState","_this$verticalVirtual","_this$horizontalVirtu","state","scrollingOrientation","scrolling","mode","orientation","verticalScrollingAllowed","horizontalScrollingAllowed","setViewOptions","itemSize","viewportSize","getRenderState","_this$verticalVirtual2","_this$horizontalVirtu2","verticalRenderState","horizontalRenderState","cellHeight","result","Math","floor","minCellWidth","getCellMinWidth","calculateCoordinatesByDataAndPosition","cellData","position","date","isCalculateTime","isVerticalDirectionView","rowIndex","columnIndex","startDate","endDate","allDay","timeToScroll","getTime","cellStartTime","cellEndTime","scrollInCell","top","left","getScrollableOuterWidth","dispose","_onScrollHandler","off","createVirtualScrolling","isVerticalVirtualScrollingCreated","isHorizontalVirtualScrollingCreated","VerticalVirtualScrolling","HorizontalVirtualScrolling","isAttachWindowScrollEvent","attachScrollableEvents","_attachWindowScroll","window","createAction","scrollX","scrollY","handleOnScrollEvent","on","scrollPosition","_this$verticalVirtual3","_this$horizontalVirtu3","verticalStateChanged","updateState","horizontalStateChanged","_this$options$updateR","_this$options","updateRender","call","updateDimensions","isForce","needUpdateVertical","reinitState","needUpdateHorizontal","_this$options$updateG","_this$options2","updateGrid","VirtualScrollingBase","_state","defaultState","_itemSize","_position","_itemSizeChanged","startIndex","pageSize","ceil","groupCount","getGroupCount","isVerticalGrouping","prevPosition","itemCount","outlineCountBefore","outlineCountAfter","virtualItemSizeAfter","outlineSizeBefore","outlineSizeAfter","maxScrollPosition","getTotalItemCount","needUpdateState","isFirstInitialization","isStartIndexChanged","_validateAndSavePosition","currentPosition","currentItemsCount","itemsCount","abs","_correctPosition","min","itemsInfoBefore","_calcItemInfoBefore","itemsDeltaBefore","_calcItemDeltaBefore","itemCountWithAfter","_calcItemInfoAfter","itemCountBefore","_updateStateCore","isForceUpdate","itemInfoBefore","totalItemCount","prevVirtualItemSizeBefore","prevVirtualItemSizeAfter","prevOutlineSizeBefore","prevOutlineSizeAfter","prevVirtualSizeBefore","virtualSizeBefore","prevVirtualSizeAfter","virtualSizeAfter","isAppend","isPrepend","needAddItems","_updateStateVirtualItems","prevTopPosition","rowCount","topVirtualRowCount","bottomVirtualRowCount","getTotalRowCount","topVirtualRowHeight","bottomVirtualRowHeight","startRowIndex","getTotalCellCount","leftVirtualCellWidth","rightVirtualCellWidth","startCellIndex","cellCount","VirtualScrollingRenderer","workspace","_workspace","_renderAppointmentTimeoutID","getRenderTimeout","option","_renderGrid","_renderAppointments","renderWorkSpace","renderTimeout","clearTimeout","setTimeout","updateAppointments"],"sources":["E:/MisaProject/W2022_06/misa_emis/node_modules/devextreme/esm/ui/scheduler/workspaces/ui.scheduler.virtual_scrolling.js"],"sourcesContent":["/**\r\n * DevExtreme (esm/ui/scheduler/workspaces/ui.scheduler.virtual_scrolling.js)\r\n * Version: 22.1.4\r\n * Build date: Fri Jul 22 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\r\nimport domAdapter from \"../../../core/dom_adapter\";\r\nimport eventsEngine from \"../../../events/core/events_engine\";\r\nimport {\r\n    getWindow\r\n} from \"../../../core/utils/window\";\r\nimport {\r\n    addNamespace\r\n} from \"../../../events/utils/index\";\r\nimport {\r\n    isDefined\r\n} from \"../../../core/utils/type\";\r\nvar DEFAULT_CELL_HEIGHT = 50;\r\nvar MIN_CELL_WIDTH = 1;\r\nvar MIN_SCROLL_OFFSET = 10;\r\nvar VIRTUAL_APPOINTMENTS_RENDER_TIMEOUT = 15;\r\nvar DOCUMENT_SCROLL_EVENT_NAMESPACE = addNamespace(\"scroll\", \"dxSchedulerVirtualScrolling\");\r\nvar scrollingOrientations = {\r\n    vertical: \"vertical\",\r\n    horizontal: \"horizontal\",\r\n    both: \"both\",\r\n    none: \"none\"\r\n};\r\nvar DefaultScrollingOrientation = scrollingOrientations.both;\r\nexport class VirtualScrollingDispatcher {\r\n    constructor(options) {\r\n        this.options = options;\r\n        if (options) {\r\n            this._rowHeight = this.getCellHeight();\r\n            this._cellWidth = this.getCellWidth();\r\n            this._createVirtualScrollingBase()\r\n        }\r\n    }\r\n    get isRTL() {\r\n        return this.options.isRTL()\r\n    }\r\n    get verticalVirtualScrolling() {\r\n        return this._verticalVirtualScrolling\r\n    }\r\n    set verticalVirtualScrolling(value) {\r\n        this._verticalVirtualScrolling = value\r\n    }\r\n    get horizontalVirtualScrolling() {\r\n        return this._horizontalVirtualScrolling\r\n    }\r\n    set horizontalVirtualScrolling(value) {\r\n        this._horizontalVirtualScrolling = value\r\n    }\r\n    get document() {\r\n        return domAdapter.getDocument()\r\n    }\r\n    get height() {\r\n        return this.options.getSchedulerHeight()\r\n    }\r\n    get width() {\r\n        return this.options.getSchedulerWidth()\r\n    }\r\n    get rowHeight() {\r\n        return this._rowHeight\r\n    }\r\n    set rowHeight(value) {\r\n        this._rowHeight = value\r\n    }\r\n    get outlineCount() {\r\n        return this.options.getScrolling().outlineCount\r\n    }\r\n    get cellWidth() {\r\n        return this._cellWidth\r\n    }\r\n    set cellWidth(value) {\r\n        this._cellWidth = value\r\n    }\r\n    get viewportWidth() {\r\n        var width = this.width && this.options.getViewWidth();\r\n        return width > 0 ? width : this.options.getWindowWidth()\r\n    }\r\n    get viewportHeight() {\r\n        var height = this.height && this.options.getViewHeight();\r\n        return height > 0 ? height : this.options.getWindowHeight()\r\n    }\r\n    get cellCountInsideTopVirtualRow() {\r\n        var _this$verticalScrolli;\r\n        return (null === (_this$verticalScrolli = this.verticalScrollingState) || void 0 === _this$verticalScrolli ? void 0 : _this$verticalScrolli.virtualItemCountBefore) || 0\r\n    }\r\n    get cellCountInsideLeftVirtualCell() {\r\n        var _this$horizontalScrol;\r\n        return (null === (_this$horizontalScrol = this.horizontalScrollingState) || void 0 === _this$horizontalScrol ? void 0 : _this$horizontalScrol.virtualItemCountBefore) || 0\r\n    }\r\n    get cellCountInsideRightVirtualCell() {\r\n        var _this$horizontalScrol2;\r\n        return (null === (_this$horizontalScrol2 = this.horizontalScrollingState) || void 0 === _this$horizontalScrol2 ? void 0 : _this$horizontalScrol2.virtualItemCountAfter) || 0\r\n    }\r\n    get topVirtualRowsCount() {\r\n        return this.cellCountInsideTopVirtualRow > 0 ? 1 : 0\r\n    }\r\n    get leftVirtualCellsCount() {\r\n        var virtualItemsCount = !this.isRTL ? this.cellCountInsideLeftVirtualCell : this.cellCountInsideRightVirtualCell;\r\n        return virtualItemsCount > 0 ? 1 : 0\r\n    }\r\n    get virtualRowOffset() {\r\n        var _this$verticalScrolli2;\r\n        return (null === (_this$verticalScrolli2 = this.verticalScrollingState) || void 0 === _this$verticalScrolli2 ? void 0 : _this$verticalScrolli2.virtualItemSizeBefore) || 0\r\n    }\r\n    get virtualCellOffset() {\r\n        var _this$horizontalScrol3;\r\n        return (null === (_this$horizontalScrol3 = this.horizontalScrollingState) || void 0 === _this$horizontalScrol3 ? void 0 : _this$horizontalScrol3.virtualItemSizeBefore) || 0\r\n    }\r\n    get scrollingState() {\r\n        var _this$verticalVirtual, _this$horizontalVirtu;\r\n        return {\r\n            vertical: null === (_this$verticalVirtual = this.verticalVirtualScrolling) || void 0 === _this$verticalVirtual ? void 0 : _this$verticalVirtual.state,\r\n            horizontal: null === (_this$horizontalVirtu = this.horizontalVirtualScrolling) || void 0 === _this$horizontalVirtu ? void 0 : _this$horizontalVirtu.state\r\n        }\r\n    }\r\n    get verticalScrollingState() {\r\n        return this.scrollingState.vertical\r\n    }\r\n    get horizontalScrollingState() {\r\n        return this.scrollingState.horizontal\r\n    }\r\n    get scrollingOrientation() {\r\n        var scrolling = this.options.getScrolling();\r\n        if (\"standard\" === scrolling.mode) {\r\n            return scrollingOrientations.none\r\n        }\r\n        return scrolling.orientation || DefaultScrollingOrientation\r\n    }\r\n    get verticalScrollingAllowed() {\r\n        return this.scrollingOrientation === scrollingOrientations.vertical || this.scrollingOrientation === scrollingOrientations.both\r\n    }\r\n    get horizontalScrollingAllowed() {\r\n        return this.scrollingOrientation === scrollingOrientations.horizontal || this.scrollingOrientation === scrollingOrientations.both\r\n    }\r\n    setViewOptions(options) {\r\n        this.options = options;\r\n        if (this.verticalVirtualScrolling) {\r\n            this.verticalVirtualScrolling.options = options;\r\n            this.verticalVirtualScrolling.itemSize = this.rowHeight;\r\n            this.verticalVirtualScrolling.viewportSize = this.viewportHeight\r\n        }\r\n        if (this.horizontalVirtualScrolling) {\r\n            this.horizontalVirtualScrolling.options = options;\r\n            this.verticalVirtualScrolling.itemSize = this.cellWidth;\r\n            this.verticalVirtualScrolling.viewportSize = this.viewportWidth\r\n        }\r\n    }\r\n    getRenderState() {\r\n        var _this$verticalVirtual2, _this$horizontalVirtu2;\r\n        var verticalRenderState = (null === (_this$verticalVirtual2 = this.verticalVirtualScrolling) || void 0 === _this$verticalVirtual2 ? void 0 : _this$verticalVirtual2.getRenderState()) || {};\r\n        var horizontalRenderState = (null === (_this$horizontalVirtu2 = this.horizontalVirtualScrolling) || void 0 === _this$horizontalVirtu2 ? void 0 : _this$horizontalVirtu2.getRenderState()) || {};\r\n        return _extends({}, verticalRenderState, horizontalRenderState)\r\n    }\r\n    getCellHeight() {\r\n        var cellHeight = this.options.getCellHeight();\r\n        var result = cellHeight > 0 ? cellHeight : DEFAULT_CELL_HEIGHT;\r\n        return Math.floor(result)\r\n    }\r\n    getCellWidth() {\r\n        var cellWidth = this.options.getCellWidth();\r\n        var minCellWidth = this.options.getCellMinWidth();\r\n        if (!cellWidth || cellWidth < minCellWidth) {\r\n            cellWidth = minCellWidth\r\n        }\r\n        var result = cellWidth > 0 ? cellWidth : MIN_CELL_WIDTH;\r\n        return Math.floor(result)\r\n    }\r\n    calculateCoordinatesByDataAndPosition(cellData, position, date, isCalculateTime, isVerticalDirectionView) {\r\n        var {\r\n            rowIndex: rowIndex,\r\n            columnIndex: columnIndex\r\n        } = position;\r\n        var {\r\n            startDate: startDate,\r\n            endDate: endDate,\r\n            allDay: allDay\r\n        } = cellData;\r\n        var timeToScroll = date.getTime();\r\n        var cellStartTime = startDate.getTime();\r\n        var cellEndTime = endDate.getTime();\r\n        var scrollInCell = allDay || !isCalculateTime ? 0 : (timeToScroll - cellStartTime) / (cellEndTime - cellStartTime);\r\n        var cellWidth = this.getCellWidth();\r\n        var rowHeight = this.getCellHeight();\r\n        var top = isVerticalDirectionView ? (rowIndex + scrollInCell) * rowHeight : rowIndex * rowHeight;\r\n        var left = isVerticalDirectionView ? columnIndex * cellWidth : (columnIndex + scrollInCell) * cellWidth;\r\n        if (this.isRTL) {\r\n            left = this.options.getScrollableOuterWidth() - left\r\n        }\r\n        return {\r\n            top: top,\r\n            left: left\r\n        }\r\n    }\r\n    dispose() {\r\n        if (this._onScrollHandler) {\r\n            eventsEngine.off(this.document, DOCUMENT_SCROLL_EVENT_NAMESPACE, this._onScrollHandler)\r\n        }\r\n    }\r\n    createVirtualScrolling() {\r\n        var isVerticalVirtualScrollingCreated = !!this.verticalVirtualScrolling;\r\n        var isHorizontalVirtualScrollingCreated = !!this.horizontalVirtualScrolling;\r\n        if (this.verticalScrollingAllowed !== isVerticalVirtualScrollingCreated || this.horizontalScrollingAllowed !== isHorizontalVirtualScrollingCreated) {\r\n            this._rowHeight = this.getCellHeight();\r\n            this._cellWidth = this.getCellWidth();\r\n            this._createVirtualScrollingBase()\r\n        }\r\n    }\r\n    _createVirtualScrollingBase() {\r\n        if (this.verticalScrollingAllowed) {\r\n            this.verticalVirtualScrolling = new VerticalVirtualScrolling(_extends({}, this.options, {\r\n                viewportHeight: this.viewportHeight,\r\n                rowHeight: this.rowHeight,\r\n                outlineCount: this.outlineCount\r\n            }))\r\n        }\r\n        if (this.horizontalScrollingAllowed) {\r\n            this.horizontalVirtualScrolling = new HorizontalVirtualScrolling(_extends({}, this.options, {\r\n                viewportWidth: this.viewportWidth,\r\n                cellWidth: this.cellWidth,\r\n                outlineCount: this.outlineCount\r\n            }))\r\n        }\r\n    }\r\n    isAttachWindowScrollEvent() {\r\n        return (this.horizontalScrollingAllowed || this.verticalScrollingAllowed) && !this.height\r\n    }\r\n    attachScrollableEvents() {\r\n        if (this.isAttachWindowScrollEvent()) {\r\n            this._attachWindowScroll()\r\n        }\r\n    }\r\n    _attachWindowScroll() {\r\n        var window = getWindow();\r\n        this._onScrollHandler = this.options.createAction(() => {\r\n            var {\r\n                scrollX: scrollX,\r\n                scrollY: scrollY\r\n            } = window;\r\n            if (scrollX >= MIN_SCROLL_OFFSET || scrollY >= MIN_SCROLL_OFFSET) {\r\n                this.handleOnScrollEvent({\r\n                    left: scrollX,\r\n                    top: scrollY\r\n                })\r\n            }\r\n        });\r\n        eventsEngine.on(this.document, DOCUMENT_SCROLL_EVENT_NAMESPACE, this._onScrollHandler)\r\n    }\r\n    handleOnScrollEvent(scrollPosition) {\r\n        if (scrollPosition) {\r\n            var _this$verticalVirtual3, _this$horizontalVirtu3;\r\n            var {\r\n                left: left,\r\n                top: top\r\n            } = scrollPosition;\r\n            var verticalStateChanged = isDefined(top) && (null === (_this$verticalVirtual3 = this.verticalVirtualScrolling) || void 0 === _this$verticalVirtual3 ? void 0 : _this$verticalVirtual3.updateState(top));\r\n            var horizontalStateChanged = isDefined(left) && (null === (_this$horizontalVirtu3 = this.horizontalVirtualScrolling) || void 0 === _this$horizontalVirtu3 ? void 0 : _this$horizontalVirtu3.updateState(left));\r\n            if (verticalStateChanged || horizontalStateChanged) {\r\n                var _this$options$updateR, _this$options;\r\n                null === (_this$options$updateR = (_this$options = this.options).updateRender) || void 0 === _this$options$updateR ? void 0 : _this$options$updateR.call(_this$options)\r\n            }\r\n        }\r\n    }\r\n    updateDimensions(isForce) {\r\n        var cellHeight = this.getCellHeight();\r\n        var needUpdateVertical = this.verticalScrollingAllowed && cellHeight !== this.rowHeight;\r\n        if ((needUpdateVertical || isForce) && this.verticalVirtualScrolling) {\r\n            this.rowHeight = cellHeight;\r\n            this.verticalVirtualScrolling.viewportSize = this.viewportHeight;\r\n            this.verticalVirtualScrolling.reinitState(cellHeight, isForce)\r\n        }\r\n        var cellWidth = this.getCellWidth();\r\n        var needUpdateHorizontal = this.horizontalScrollingAllowed && cellWidth !== this.cellWidth;\r\n        if ((needUpdateHorizontal || isForce) && this.horizontalVirtualScrolling) {\r\n            this.cellWidth = cellWidth;\r\n            this.horizontalVirtualScrolling.viewportSize = this.viewportWidth;\r\n            this.horizontalVirtualScrolling.reinitState(cellWidth, isForce)\r\n        }\r\n        if (needUpdateVertical || needUpdateHorizontal) {\r\n            var _this$options$updateG, _this$options2;\r\n            null === (_this$options$updateG = (_this$options2 = this.options).updateGrid) || void 0 === _this$options$updateG ? void 0 : _this$options$updateG.call(_this$options2)\r\n        }\r\n    }\r\n}\r\nclass VirtualScrollingBase {\r\n    constructor(options) {\r\n        this.options = options;\r\n        this._state = this.defaultState;\r\n        this.viewportSize = options.viewportSize;\r\n        this._itemSize = options.itemSize;\r\n        this._position = -1;\r\n        this._itemSizeChanged = false;\r\n        this.updateState(0)\r\n    }\r\n    get itemSize() {\r\n        return this._itemSize\r\n    }\r\n    set itemSize(value) {\r\n        this._itemSizeChanged = this._itemSize !== value;\r\n        this._itemSize = value\r\n    }\r\n    get state() {\r\n        return this._state\r\n    }\r\n    set state(value) {\r\n        this._state = value\r\n    }\r\n    get startIndex() {\r\n        return this.state.startIndex\r\n    }\r\n    get pageSize() {\r\n        return Math.ceil(this.viewportSize / this.itemSize)\r\n    }\r\n    get outlineCount() {\r\n        return isDefined(this.options.outlineCount) ? this.options.outlineCount : Math.floor(this.pageSize / 2)\r\n    }\r\n    get groupCount() {\r\n        return this.options.getGroupCount()\r\n    }\r\n    get isVerticalGrouping() {\r\n        return this.options.isVerticalGrouping()\r\n    }\r\n    get defaultState() {\r\n        return {\r\n            prevPosition: 0,\r\n            startIndex: -1,\r\n            itemCount: 0,\r\n            virtualItemCountBefore: 0,\r\n            virtualItemCountAfter: 0,\r\n            outlineCountBefore: 0,\r\n            outlineCountAfter: 0,\r\n            virtualItemSizeBefore: 0,\r\n            virtualItemSizeAfter: 0,\r\n            outlineSizeBefore: 0,\r\n            outlineSizeAfter: 0\r\n        }\r\n    }\r\n    get maxScrollPosition() {\r\n        return this.getTotalItemCount() * this.itemSize - this.viewportSize\r\n    }\r\n    get position() {\r\n        return this._position\r\n    }\r\n    set position(value) {\r\n        this._position = value\r\n    }\r\n    needUpdateState(position) {\r\n        var {\r\n            prevPosition: prevPosition,\r\n            startIndex: startIndex\r\n        } = this.state;\r\n        var isFirstInitialization = startIndex < 0;\r\n        if (isFirstInitialization) {\r\n            return true\r\n        }\r\n        var isStartIndexChanged = false;\r\n        if (this._validateAndSavePosition(position)) {\r\n            if (0 === position || position === this.maxScrollPosition) {\r\n                return true\r\n            }\r\n            var currentPosition = prevPosition;\r\n            var currentItemsCount = Math.floor(currentPosition / this.itemSize);\r\n            var itemsCount = Math.floor(position / this.itemSize);\r\n            isStartIndexChanged = Math.abs(currentItemsCount - itemsCount) >= this.outlineCount\r\n        }\r\n        return isStartIndexChanged\r\n    }\r\n    _validateAndSavePosition(position) {\r\n        if (!isDefined(position)) {\r\n            return false\r\n        }\r\n        var result = this.position !== position;\r\n        this.position = position;\r\n        return result\r\n    }\r\n    _correctPosition(position) {\r\n        return position >= 0 ? Math.min(position, this.maxScrollPosition) : -1\r\n    }\r\n    updateState(position, isForce) {\r\n        position = this._correctPosition(position);\r\n        if (!this.needUpdateState(position) && !isForce) {\r\n            return false\r\n        }\r\n        var itemsInfoBefore = this._calcItemInfoBefore(position);\r\n        var itemsDeltaBefore = this._calcItemDeltaBefore(itemsInfoBefore);\r\n        var {\r\n            outlineCountAfter: outlineCountAfter,\r\n            virtualItemCountAfter: virtualItemCountAfter,\r\n            itemCountWithAfter: itemCountWithAfter\r\n        } = this._calcItemInfoAfter(itemsDeltaBefore);\r\n        var {\r\n            virtualItemCountBefore: virtualItemCountBefore,\r\n            outlineCountBefore: outlineCountBefore\r\n        } = itemsInfoBefore;\r\n        var itemCount = outlineCountBefore + itemCountWithAfter + outlineCountAfter;\r\n        var itemCountBefore = Math.floor(position / this.itemSize);\r\n        this.state.prevPosition = itemCountBefore * this.itemSize;\r\n        this.state.startIndex = itemCountBefore - outlineCountBefore;\r\n        this.state.virtualItemCountBefore = virtualItemCountBefore;\r\n        this.state.outlineCountBefore = outlineCountBefore;\r\n        this.state.itemCount = itemCount;\r\n        this.state.outlineCountAfter = outlineCountAfter;\r\n        this.state.virtualItemCountAfter = virtualItemCountAfter;\r\n        this._updateStateCore();\r\n        return true\r\n    }\r\n    reinitState(itemSize, isForceUpdate) {\r\n        var {\r\n            position: position\r\n        } = this;\r\n        this.itemSize = itemSize;\r\n        this.updateState(0, isForceUpdate);\r\n        if (position > 0) {\r\n            this.updateState(position, isForceUpdate)\r\n        }\r\n    }\r\n    _calcItemInfoBefore(position) {\r\n        var virtualItemCountBefore = Math.floor(position / this.itemSize);\r\n        var outlineCountBefore = Math.min(virtualItemCountBefore, this.outlineCount);\r\n        virtualItemCountBefore -= outlineCountBefore;\r\n        return {\r\n            virtualItemCountBefore: virtualItemCountBefore,\r\n            outlineCountBefore: outlineCountBefore\r\n        }\r\n    }\r\n    _calcItemDeltaBefore(itemInfoBefore) {\r\n        var {\r\n            virtualItemCountBefore: virtualItemCountBefore,\r\n            outlineCountBefore: outlineCountBefore\r\n        } = itemInfoBefore;\r\n        var totalItemCount = this.getTotalItemCount();\r\n        return totalItemCount - virtualItemCountBefore - outlineCountBefore\r\n    }\r\n    getTotalItemCount() {\r\n        throw \"getTotalItemCount method should be implemented\"\r\n    }\r\n    getRenderState() {\r\n        throw \"getRenderState method should be implemented\"\r\n    }\r\n    _calcItemInfoAfter(itemsDeltaBefore) {\r\n        var itemCountWithAfter = itemsDeltaBefore >= this.pageSize ? this.pageSize : itemsDeltaBefore;\r\n        var virtualItemCountAfter = itemsDeltaBefore - itemCountWithAfter;\r\n        var outlineCountAfter = virtualItemCountAfter > 0 ? Math.min(virtualItemCountAfter, this.outlineCount) : 0;\r\n        if (virtualItemCountAfter > 0) {\r\n            virtualItemCountAfter -= outlineCountAfter\r\n        }\r\n        return {\r\n            virtualItemCountAfter: virtualItemCountAfter,\r\n            outlineCountAfter: outlineCountAfter,\r\n            itemCountWithAfter: itemCountWithAfter\r\n        }\r\n    }\r\n    _updateStateCore() {\r\n        var {\r\n            state: state\r\n        } = this;\r\n        var virtualItemCountBefore = state.virtualItemCountBefore;\r\n        var virtualItemCountAfter = state.virtualItemCountAfter;\r\n        var outlineCountBefore = state.outlineCountBefore;\r\n        var outlineCountAfter = state.outlineCountAfter;\r\n        var prevVirtualItemSizeBefore = state.virtualItemSizeBefore;\r\n        var prevVirtualItemSizeAfter = state.virtualItemSizeAfter;\r\n        var prevOutlineSizeBefore = state.outlineSizeBefore;\r\n        var prevOutlineSizeAfter = state.outlineSizeAfter;\r\n        var virtualItemSizeBefore = this.itemSize * virtualItemCountBefore;\r\n        var virtualItemSizeAfter = this.itemSize * virtualItemCountAfter;\r\n        var outlineSizeBefore = this.itemSize * outlineCountBefore;\r\n        var outlineSizeAfter = this.itemSize * outlineCountAfter;\r\n        var prevVirtualSizeBefore = prevVirtualItemSizeBefore + prevOutlineSizeBefore;\r\n        var virtualSizeBefore = virtualItemSizeBefore + outlineSizeBefore;\r\n        var prevVirtualSizeAfter = prevVirtualItemSizeAfter + prevOutlineSizeAfter;\r\n        var virtualSizeAfter = virtualItemSizeAfter + outlineSizeAfter;\r\n        var isAppend = prevVirtualSizeBefore < virtualSizeBefore;\r\n        var isPrepend = prevVirtualSizeAfter < virtualSizeAfter;\r\n        var needAddItems = this._itemSizeChanged || isAppend || isPrepend;\r\n        if (needAddItems) {\r\n            this._updateStateVirtualItems(virtualItemSizeBefore, virtualItemSizeAfter)\r\n        }\r\n    }\r\n    _updateStateVirtualItems(virtualItemSizeBefore, virtualItemSizeAfter) {\r\n        var {\r\n            state: state\r\n        } = this;\r\n        state.virtualItemSizeBefore = virtualItemSizeBefore;\r\n        state.virtualItemSizeAfter = virtualItemSizeAfter\r\n    }\r\n}\r\nclass VerticalVirtualScrolling extends VirtualScrollingBase {\r\n    constructor(options) {\r\n        super(_extends({}, options, {\r\n            itemSize: options.rowHeight,\r\n            viewportSize: options.viewportHeight\r\n        }))\r\n    }\r\n    get prevTopPosition() {\r\n        return this.state.prevPosition\r\n    }\r\n    get rowCount() {\r\n        return this.state.itemCount\r\n    }\r\n    get topVirtualRowCount() {\r\n        return this.state.virtualItemCountBefore\r\n    }\r\n    get bottomVirtualRowCount() {\r\n        return this.state.virtualItemCountAfter\r\n    }\r\n    getTotalItemCount() {\r\n        return this.options.getTotalRowCount(this.groupCount, this.isVerticalGrouping)\r\n    }\r\n    getRenderState() {\r\n        return {\r\n            topVirtualRowHeight: this.state.virtualItemSizeBefore,\r\n            bottomVirtualRowHeight: this.state.virtualItemSizeAfter,\r\n            startRowIndex: this.state.startIndex,\r\n            rowCount: this.state.itemCount,\r\n            startIndex: this.state.startIndex\r\n        }\r\n    }\r\n}\r\nclass HorizontalVirtualScrolling extends VirtualScrollingBase {\r\n    constructor(options) {\r\n        super(_extends({}, options, {\r\n            itemSize: options.cellWidth,\r\n            viewportSize: options.viewportWidth\r\n        }))\r\n    }\r\n    get isRTL() {\r\n        return this.options.isRTL()\r\n    }\r\n    getTotalItemCount() {\r\n        return this.options.getTotalCellCount(this.groupCount, this.isVerticalGrouping)\r\n    }\r\n    getRenderState() {\r\n        return {\r\n            leftVirtualCellWidth: this.state.virtualItemSizeBefore,\r\n            rightVirtualCellWidth: this.state.virtualItemSizeAfter,\r\n            startCellIndex: this.state.startIndex,\r\n            cellCount: this.state.itemCount,\r\n            cellWidth: this.itemSize\r\n        }\r\n    }\r\n    _updateStateVirtualItems(virtualItemSizeBefore, virtualItemSizeAfter) {\r\n        if (!this.isRTL) {\r\n            super._updateStateVirtualItems(virtualItemSizeBefore, virtualItemSizeAfter)\r\n        } else {\r\n            var {\r\n                state: state\r\n            } = this;\r\n            state.virtualItemSizeAfter = virtualItemSizeBefore;\r\n            state.virtualItemSizeBefore = virtualItemSizeAfter;\r\n            state.startIndex = this.getTotalItemCount() - this.startIndex - this.state.itemCount\r\n        }\r\n    }\r\n}\r\nexport class VirtualScrollingRenderer {\r\n    constructor(workspace) {\r\n        this._workspace = workspace;\r\n        this._renderAppointmentTimeoutID = null\r\n    }\r\n    getRenderTimeout() {\r\n        return this._workspace.option(\"isRenovatedAppointments\") ? -1 : VIRTUAL_APPOINTMENTS_RENDER_TIMEOUT\r\n    }\r\n    get workspace() {\r\n        return this._workspace\r\n    }\r\n    updateRender() {\r\n        this._renderGrid();\r\n        this._renderAppointments()\r\n    }\r\n    _renderGrid() {\r\n        this.workspace.renderWorkSpace(false)\r\n    }\r\n    _renderAppointments() {\r\n        var renderTimeout = this.getRenderTimeout();\r\n        if (renderTimeout >= 0) {\r\n            clearTimeout(this._renderAppointmentTimeoutID);\r\n            this._renderAppointmentTimeoutID = setTimeout(() => this.workspace.updateAppointments(), renderTimeout)\r\n        } else {\r\n            this.workspace.updateAppointments()\r\n        }\r\n    }\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}