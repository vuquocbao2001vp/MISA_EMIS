{"ast":null,"code":"/**\r\n * DevExtreme (esm/viz/funnel/tracker.js)\r\n * Version: 22.1.4\r\n * Build date: Fri Jul 22 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport Funnel from \"./funnel\";\nimport { Tracker } from \"../components/tracker\";\nvar DATA_KEY_BASE = \"__funnel_data_\";\nimport { isDefined } from \"../../core/utils/type\";\nvar dataKeyModifier = 0;\nvar proto = Funnel.prototype;\nproto._eventsMap.onItemClick = {\n  name: \"itemClick\"\n};\nproto._eventsMap.onLegendClick = {\n  name: \"legendClick\"\n};\n\nvar getDataKey = function () {\n  return DATA_KEY_BASE + dataKeyModifier++;\n};\n\nexport var plugin = {\n  name: \"tracker\",\n  init: function () {\n    var that = this;\n    var dataKey = getDataKey();\n\n    var getProxyData = function (e) {\n      var rootOffset = that._renderer.getRootOffset();\n\n      var x = Math.floor(e.pageX - rootOffset.left);\n      var y = Math.floor(e.pageY - rootOffset.top);\n      return that._hitTestTargets(x, y);\n    };\n\n    that._tracker = new Tracker({\n      widget: that,\n      root: that._renderer.root,\n      getData: function (e, tooltipData) {\n        var target = e.target;\n        var data = target[dataKey];\n\n        if (isDefined(data)) {\n          return data;\n        }\n\n        var proxyData = getProxyData(e);\n\n        if (tooltipData && proxyData && \"inside-label\" !== proxyData.type) {\n          return;\n        }\n\n        return proxyData && proxyData.id;\n      },\n      getNode: function (index) {\n        return that._items[index];\n      },\n      click: function (e) {\n        var proxyData = getProxyData(e.event);\n        var dataType = proxyData && proxyData.type;\n        var event = \"legend\" === dataType ? \"legendClick\" : \"itemClick\";\n\n        that._eventTrigger(event, {\n          item: e.node,\n          event: e.event\n        });\n      }\n    });\n    this._dataKey = dataKey;\n  },\n  dispose: function () {\n    this._tracker.dispose();\n  },\n  extenders: {\n    _change_TILING: function () {\n      var dataKey = this._dataKey;\n\n      this._items.forEach(function (item, index) {\n        item.element.data(dataKey, index);\n      });\n    }\n  }\n};","map":{"version":3,"names":["Funnel","Tracker","DATA_KEY_BASE","isDefined","dataKeyModifier","proto","prototype","_eventsMap","onItemClick","name","onLegendClick","getDataKey","plugin","init","that","dataKey","getProxyData","e","rootOffset","_renderer","getRootOffset","x","Math","floor","pageX","left","y","pageY","top","_hitTestTargets","_tracker","widget","root","getData","tooltipData","target","data","proxyData","type","id","getNode","index","_items","click","event","dataType","_eventTrigger","item","node","_dataKey","dispose","extenders","_change_TILING","forEach","element"],"sources":["E:/MisaProject/W2022_06/misa_emis/node_modules/devextreme/esm/viz/funnel/tracker.js"],"sourcesContent":["/**\r\n * DevExtreme (esm/viz/funnel/tracker.js)\r\n * Version: 22.1.4\r\n * Build date: Fri Jul 22 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport Funnel from \"./funnel\";\r\nimport {\r\n    Tracker\r\n} from \"../components/tracker\";\r\nvar DATA_KEY_BASE = \"__funnel_data_\";\r\nimport {\r\n    isDefined\r\n} from \"../../core/utils/type\";\r\nvar dataKeyModifier = 0;\r\nvar proto = Funnel.prototype;\r\nproto._eventsMap.onItemClick = {\r\n    name: \"itemClick\"\r\n};\r\nproto._eventsMap.onLegendClick = {\r\n    name: \"legendClick\"\r\n};\r\nvar getDataKey = function() {\r\n    return DATA_KEY_BASE + dataKeyModifier++\r\n};\r\nexport var plugin = {\r\n    name: \"tracker\",\r\n    init: function() {\r\n        var that = this;\r\n        var dataKey = getDataKey();\r\n        var getProxyData = function(e) {\r\n            var rootOffset = that._renderer.getRootOffset();\r\n            var x = Math.floor(e.pageX - rootOffset.left);\r\n            var y = Math.floor(e.pageY - rootOffset.top);\r\n            return that._hitTestTargets(x, y)\r\n        };\r\n        that._tracker = new Tracker({\r\n            widget: that,\r\n            root: that._renderer.root,\r\n            getData: function(e, tooltipData) {\r\n                var target = e.target;\r\n                var data = target[dataKey];\r\n                if (isDefined(data)) {\r\n                    return data\r\n                }\r\n                var proxyData = getProxyData(e);\r\n                if (tooltipData && proxyData && \"inside-label\" !== proxyData.type) {\r\n                    return\r\n                }\r\n                return proxyData && proxyData.id\r\n            },\r\n            getNode: function(index) {\r\n                return that._items[index]\r\n            },\r\n            click: function(e) {\r\n                var proxyData = getProxyData(e.event);\r\n                var dataType = proxyData && proxyData.type;\r\n                var event = \"legend\" === dataType ? \"legendClick\" : \"itemClick\";\r\n                that._eventTrigger(event, {\r\n                    item: e.node,\r\n                    event: e.event\r\n                })\r\n            }\r\n        });\r\n        this._dataKey = dataKey\r\n    },\r\n    dispose: function() {\r\n        this._tracker.dispose()\r\n    },\r\n    extenders: {\r\n        _change_TILING: function() {\r\n            var dataKey = this._dataKey;\r\n            this._items.forEach((function(item, index) {\r\n                item.element.data(dataKey, index)\r\n            }))\r\n        }\r\n    }\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}