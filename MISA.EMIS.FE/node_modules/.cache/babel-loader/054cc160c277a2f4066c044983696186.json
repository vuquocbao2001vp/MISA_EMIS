{"ast":null,"code":"import \"core-js/modules/es.array.at.js\";\nimport \"core-js/modules/es.string.at-alternative.js\";\n\n/**\r\n * DevExtreme (esm/ui/diagram/ui.diagram.context_toolbox.js)\r\n * Version: 22.1.4\r\n * Build date: Fri Jul 22 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport $ from \"../../core/renderer\";\nimport Widget from \"../widget/ui.widget\";\nimport Popover from \"../popover\";\nimport { getDiagram } from \"./diagram.importer\";\nimport { getWindow } from \"../../core/utils/window\";\nvar DIAGRAM_CONTEXT_TOOLBOX_TARGET_CLASS = \"dx-diagram-context-toolbox-target\";\nvar DIAGRAM_CONTEXT_TOOLBOX_CLASS = \"dx-diagram-context-toolbox\";\nvar DIAGRAM_TOUCH_CONTEXT_TOOLBOX_CLASS = \"dx-diagram-touch-context-toolbox\";\nvar DIAGRAM_CONTEXT_TOOLBOX_CONTENT_CLASS = \"dx-diagram-context-toolbox-content\";\n\nclass DiagramContextToolbox extends Widget {\n  _init() {\n    super._init();\n\n    this._onShownAction = this._createActionByOption(\"onShown\");\n    this._popoverPositionData = [{\n      my: {\n        x: \"center\",\n        y: \"top\"\n      },\n      at: {\n        x: \"center\",\n        y: \"bottom\"\n      },\n      offset: {\n        x: 0,\n        y: 5\n      }\n    }, {\n      my: {\n        x: \"right\",\n        y: \"center\"\n      },\n      at: {\n        x: \"left\",\n        y: \"center\"\n      },\n      offset: {\n        x: -5,\n        y: 0\n      }\n    }, {\n      my: {\n        x: \"center\",\n        y: \"bottom\"\n      },\n      at: {\n        x: \"center\",\n        y: \"top\"\n      },\n      offset: {\n        x: 0,\n        y: -5\n      }\n    }, {\n      my: {\n        x: \"left\",\n        y: \"center\"\n      },\n      at: {\n        x: \"right\",\n        y: \"center\"\n      },\n      offset: {\n        x: 5,\n        y: 0\n      }\n    }];\n  }\n\n  _initMarkup() {\n    super._initMarkup();\n\n    this._$popoverTargetElement = $(\"<div>\").addClass(DIAGRAM_CONTEXT_TOOLBOX_TARGET_CLASS).appendTo(this.$element());\n    var $popoverElement = $(\"<div>\").appendTo(this.$element());\n    var popoverClass = DIAGRAM_CONTEXT_TOOLBOX_CLASS;\n\n    if (this._isTouchMode()) {\n      popoverClass += \" \" + DIAGRAM_TOUCH_CONTEXT_TOOLBOX_CLASS;\n    }\n\n    this._popoverInstance = this._createComponent($popoverElement, Popover, {\n      hideOnOutsideClick: false,\n      container: this.$element()\n    });\n\n    this._popoverInstance.$element().addClass(popoverClass);\n  }\n\n  _isTouchMode() {\n    var {\n      Browser: Browser\n    } = getDiagram();\n    return Browser.TouchUI;\n  }\n\n  _show(x, y, side, category, callback) {\n    this._popoverInstance.hide();\n\n    var $content = $(\"<div>\").addClass(DIAGRAM_CONTEXT_TOOLBOX_CONTENT_CLASS);\n\n    if (void 0 !== this.option(\"toolboxWidth\")) {\n      $content.css(\"width\", this.option(\"toolboxWidth\"));\n    }\n\n    this._$popoverTargetElement.css({\n      left: x + this._popoverPositionData[side].offset.x,\n      top: y + this._popoverPositionData[side].offset.y\n    }).show();\n\n    var window = getWindow();\n\n    var targetDiv = this._$popoverTargetElement.get(0);\n\n    this._$popoverTargetElement.css({\n      left: targetDiv.offsetLeft - (targetDiv.getBoundingClientRect().left + window.scrollX - targetDiv.offsetLeft),\n      top: targetDiv.offsetTop - (targetDiv.getBoundingClientRect().top + window.scrollY - targetDiv.offsetTop)\n    });\n\n    this._popoverInstance.option({\n      position: {\n        my: this._popoverPositionData[side].my,\n        at: this._popoverPositionData[side].at,\n        of: this._$popoverTargetElement\n      },\n      contentTemplate: $content,\n      onContentReady: function () {\n        var $element = this.$element().find(\".\" + DIAGRAM_CONTEXT_TOOLBOX_CONTENT_CLASS);\n\n        this._onShownAction({\n          category: category,\n          callback: callback,\n          $element: $element,\n          hide: () => this._popoverInstance.hide()\n        });\n      }.bind(this)\n    });\n\n    this._popoverInstance.show();\n  }\n\n  _hide() {\n    this._$popoverTargetElement.hide();\n\n    this._popoverInstance.hide();\n  }\n\n}\n\nexport default DiagramContextToolbox;","map":{"version":3,"names":["$","Widget","Popover","getDiagram","getWindow","DIAGRAM_CONTEXT_TOOLBOX_TARGET_CLASS","DIAGRAM_CONTEXT_TOOLBOX_CLASS","DIAGRAM_TOUCH_CONTEXT_TOOLBOX_CLASS","DIAGRAM_CONTEXT_TOOLBOX_CONTENT_CLASS","DiagramContextToolbox","_init","_onShownAction","_createActionByOption","_popoverPositionData","my","x","y","at","offset","_initMarkup","_$popoverTargetElement","addClass","appendTo","$element","$popoverElement","popoverClass","_isTouchMode","_popoverInstance","_createComponent","hideOnOutsideClick","container","Browser","TouchUI","_show","side","category","callback","hide","$content","option","css","left","top","show","window","targetDiv","get","offsetLeft","getBoundingClientRect","scrollX","offsetTop","scrollY","position","of","contentTemplate","onContentReady","find","bind","_hide"],"sources":["E:/MisaProject/W2022_06/misa_emis/node_modules/devextreme/esm/ui/diagram/ui.diagram.context_toolbox.js"],"sourcesContent":["/**\r\n * DevExtreme (esm/ui/diagram/ui.diagram.context_toolbox.js)\r\n * Version: 22.1.4\r\n * Build date: Fri Jul 22 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport $ from \"../../core/renderer\";\r\nimport Widget from \"../widget/ui.widget\";\r\nimport Popover from \"../popover\";\r\nimport {\r\n    getDiagram\r\n} from \"./diagram.importer\";\r\nimport {\r\n    getWindow\r\n} from \"../../core/utils/window\";\r\nvar DIAGRAM_CONTEXT_TOOLBOX_TARGET_CLASS = \"dx-diagram-context-toolbox-target\";\r\nvar DIAGRAM_CONTEXT_TOOLBOX_CLASS = \"dx-diagram-context-toolbox\";\r\nvar DIAGRAM_TOUCH_CONTEXT_TOOLBOX_CLASS = \"dx-diagram-touch-context-toolbox\";\r\nvar DIAGRAM_CONTEXT_TOOLBOX_CONTENT_CLASS = \"dx-diagram-context-toolbox-content\";\r\nclass DiagramContextToolbox extends Widget {\r\n    _init() {\r\n        super._init();\r\n        this._onShownAction = this._createActionByOption(\"onShown\");\r\n        this._popoverPositionData = [{\r\n            my: {\r\n                x: \"center\",\r\n                y: \"top\"\r\n            },\r\n            at: {\r\n                x: \"center\",\r\n                y: \"bottom\"\r\n            },\r\n            offset: {\r\n                x: 0,\r\n                y: 5\r\n            }\r\n        }, {\r\n            my: {\r\n                x: \"right\",\r\n                y: \"center\"\r\n            },\r\n            at: {\r\n                x: \"left\",\r\n                y: \"center\"\r\n            },\r\n            offset: {\r\n                x: -5,\r\n                y: 0\r\n            }\r\n        }, {\r\n            my: {\r\n                x: \"center\",\r\n                y: \"bottom\"\r\n            },\r\n            at: {\r\n                x: \"center\",\r\n                y: \"top\"\r\n            },\r\n            offset: {\r\n                x: 0,\r\n                y: -5\r\n            }\r\n        }, {\r\n            my: {\r\n                x: \"left\",\r\n                y: \"center\"\r\n            },\r\n            at: {\r\n                x: \"right\",\r\n                y: \"center\"\r\n            },\r\n            offset: {\r\n                x: 5,\r\n                y: 0\r\n            }\r\n        }]\r\n    }\r\n    _initMarkup() {\r\n        super._initMarkup();\r\n        this._$popoverTargetElement = $(\"<div>\").addClass(DIAGRAM_CONTEXT_TOOLBOX_TARGET_CLASS).appendTo(this.$element());\r\n        var $popoverElement = $(\"<div>\").appendTo(this.$element());\r\n        var popoverClass = DIAGRAM_CONTEXT_TOOLBOX_CLASS;\r\n        if (this._isTouchMode()) {\r\n            popoverClass += \" \" + DIAGRAM_TOUCH_CONTEXT_TOOLBOX_CLASS\r\n        }\r\n        this._popoverInstance = this._createComponent($popoverElement, Popover, {\r\n            hideOnOutsideClick: false,\r\n            container: this.$element()\r\n        });\r\n        this._popoverInstance.$element().addClass(popoverClass)\r\n    }\r\n    _isTouchMode() {\r\n        var {\r\n            Browser: Browser\r\n        } = getDiagram();\r\n        return Browser.TouchUI\r\n    }\r\n    _show(x, y, side, category, callback) {\r\n        this._popoverInstance.hide();\r\n        var $content = $(\"<div>\").addClass(DIAGRAM_CONTEXT_TOOLBOX_CONTENT_CLASS);\r\n        if (void 0 !== this.option(\"toolboxWidth\")) {\r\n            $content.css(\"width\", this.option(\"toolboxWidth\"))\r\n        }\r\n        this._$popoverTargetElement.css({\r\n            left: x + this._popoverPositionData[side].offset.x,\r\n            top: y + this._popoverPositionData[side].offset.y\r\n        }).show();\r\n        var window = getWindow();\r\n        var targetDiv = this._$popoverTargetElement.get(0);\r\n        this._$popoverTargetElement.css({\r\n            left: targetDiv.offsetLeft - (targetDiv.getBoundingClientRect().left + window.scrollX - targetDiv.offsetLeft),\r\n            top: targetDiv.offsetTop - (targetDiv.getBoundingClientRect().top + window.scrollY - targetDiv.offsetTop)\r\n        });\r\n        this._popoverInstance.option({\r\n            position: {\r\n                my: this._popoverPositionData[side].my,\r\n                at: this._popoverPositionData[side].at,\r\n                of: this._$popoverTargetElement\r\n            },\r\n            contentTemplate: $content,\r\n            onContentReady: function() {\r\n                var $element = this.$element().find(\".\" + DIAGRAM_CONTEXT_TOOLBOX_CONTENT_CLASS);\r\n                this._onShownAction({\r\n                    category: category,\r\n                    callback: callback,\r\n                    $element: $element,\r\n                    hide: () => this._popoverInstance.hide()\r\n                })\r\n            }.bind(this)\r\n        });\r\n        this._popoverInstance.show()\r\n    }\r\n    _hide() {\r\n        this._$popoverTargetElement.hide();\r\n        this._popoverInstance.hide()\r\n    }\r\n}\r\nexport default DiagramContextToolbox;\r\n"],"mappings":";;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAOA,CAAP,MAAc,qBAAd;AACA,OAAOC,MAAP,MAAmB,qBAAnB;AACA,OAAOC,OAAP,MAAoB,YAApB;AACA,SACIC,UADJ,QAEO,oBAFP;AAGA,SACIC,SADJ,QAEO,yBAFP;AAGA,IAAIC,oCAAoC,GAAG,mCAA3C;AACA,IAAIC,6BAA6B,GAAG,4BAApC;AACA,IAAIC,mCAAmC,GAAG,kCAA1C;AACA,IAAIC,qCAAqC,GAAG,oCAA5C;;AACA,MAAMC,qBAAN,SAAoCR,MAApC,CAA2C;EACvCS,KAAK,GAAG;IACJ,MAAMA,KAAN;;IACA,KAAKC,cAAL,GAAsB,KAAKC,qBAAL,CAA2B,SAA3B,CAAtB;IACA,KAAKC,oBAAL,GAA4B,CAAC;MACzBC,EAAE,EAAE;QACAC,CAAC,EAAE,QADH;QAEAC,CAAC,EAAE;MAFH,CADqB;MAKzBC,EAAE,EAAE;QACAF,CAAC,EAAE,QADH;QAEAC,CAAC,EAAE;MAFH,CALqB;MASzBE,MAAM,EAAE;QACJH,CAAC,EAAE,CADC;QAEJC,CAAC,EAAE;MAFC;IATiB,CAAD,EAazB;MACCF,EAAE,EAAE;QACAC,CAAC,EAAE,OADH;QAEAC,CAAC,EAAE;MAFH,CADL;MAKCC,EAAE,EAAE;QACAF,CAAC,EAAE,MADH;QAEAC,CAAC,EAAE;MAFH,CALL;MASCE,MAAM,EAAE;QACJH,CAAC,EAAE,CAAC,CADA;QAEJC,CAAC,EAAE;MAFC;IATT,CAbyB,EA0BzB;MACCF,EAAE,EAAE;QACAC,CAAC,EAAE,QADH;QAEAC,CAAC,EAAE;MAFH,CADL;MAKCC,EAAE,EAAE;QACAF,CAAC,EAAE,QADH;QAEAC,CAAC,EAAE;MAFH,CALL;MASCE,MAAM,EAAE;QACJH,CAAC,EAAE,CADC;QAEJC,CAAC,EAAE,CAAC;MAFA;IATT,CA1ByB,EAuCzB;MACCF,EAAE,EAAE;QACAC,CAAC,EAAE,MADH;QAEAC,CAAC,EAAE;MAFH,CADL;MAKCC,EAAE,EAAE;QACAF,CAAC,EAAE,OADH;QAEAC,CAAC,EAAE;MAFH,CALL;MASCE,MAAM,EAAE;QACJH,CAAC,EAAE,CADC;QAEJC,CAAC,EAAE;MAFC;IATT,CAvCyB,CAA5B;EAqDH;;EACDG,WAAW,GAAG;IACV,MAAMA,WAAN;;IACA,KAAKC,sBAAL,GAA8BpB,CAAC,CAAC,OAAD,CAAD,CAAWqB,QAAX,CAAoBhB,oCAApB,EAA0DiB,QAA1D,CAAmE,KAAKC,QAAL,EAAnE,CAA9B;IACA,IAAIC,eAAe,GAAGxB,CAAC,CAAC,OAAD,CAAD,CAAWsB,QAAX,CAAoB,KAAKC,QAAL,EAApB,CAAtB;IACA,IAAIE,YAAY,GAAGnB,6BAAnB;;IACA,IAAI,KAAKoB,YAAL,EAAJ,EAAyB;MACrBD,YAAY,IAAI,MAAMlB,mCAAtB;IACH;;IACD,KAAKoB,gBAAL,GAAwB,KAAKC,gBAAL,CAAsBJ,eAAtB,EAAuCtB,OAAvC,EAAgD;MACpE2B,kBAAkB,EAAE,KADgD;MAEpEC,SAAS,EAAE,KAAKP,QAAL;IAFyD,CAAhD,CAAxB;;IAIA,KAAKI,gBAAL,CAAsBJ,QAAtB,GAAiCF,QAAjC,CAA0CI,YAA1C;EACH;;EACDC,YAAY,GAAG;IACX,IAAI;MACAK,OAAO,EAAEA;IADT,IAEA5B,UAAU,EAFd;IAGA,OAAO4B,OAAO,CAACC,OAAf;EACH;;EACDC,KAAK,CAAClB,CAAD,EAAIC,CAAJ,EAAOkB,IAAP,EAAaC,QAAb,EAAuBC,QAAvB,EAAiC;IAClC,KAAKT,gBAAL,CAAsBU,IAAtB;;IACA,IAAIC,QAAQ,GAAGtC,CAAC,CAAC,OAAD,CAAD,CAAWqB,QAAX,CAAoBb,qCAApB,CAAf;;IACA,IAAI,KAAK,CAAL,KAAW,KAAK+B,MAAL,CAAY,cAAZ,CAAf,EAA4C;MACxCD,QAAQ,CAACE,GAAT,CAAa,OAAb,EAAsB,KAAKD,MAAL,CAAY,cAAZ,CAAtB;IACH;;IACD,KAAKnB,sBAAL,CAA4BoB,GAA5B,CAAgC;MAC5BC,IAAI,EAAE1B,CAAC,GAAG,KAAKF,oBAAL,CAA0BqB,IAA1B,EAAgChB,MAAhC,CAAuCH,CADrB;MAE5B2B,GAAG,EAAE1B,CAAC,GAAG,KAAKH,oBAAL,CAA0BqB,IAA1B,EAAgChB,MAAhC,CAAuCF;IAFpB,CAAhC,EAGG2B,IAHH;;IAIA,IAAIC,MAAM,GAAGxC,SAAS,EAAtB;;IACA,IAAIyC,SAAS,GAAG,KAAKzB,sBAAL,CAA4B0B,GAA5B,CAAgC,CAAhC,CAAhB;;IACA,KAAK1B,sBAAL,CAA4BoB,GAA5B,CAAgC;MAC5BC,IAAI,EAAEI,SAAS,CAACE,UAAV,IAAwBF,SAAS,CAACG,qBAAV,GAAkCP,IAAlC,GAAyCG,MAAM,CAACK,OAAhD,GAA0DJ,SAAS,CAACE,UAA5F,CADsB;MAE5BL,GAAG,EAAEG,SAAS,CAACK,SAAV,IAAuBL,SAAS,CAACG,qBAAV,GAAkCN,GAAlC,GAAwCE,MAAM,CAACO,OAA/C,GAAyDN,SAAS,CAACK,SAA1F;IAFuB,CAAhC;;IAIA,KAAKvB,gBAAL,CAAsBY,MAAtB,CAA6B;MACzBa,QAAQ,EAAE;QACNtC,EAAE,EAAE,KAAKD,oBAAL,CAA0BqB,IAA1B,EAAgCpB,EAD9B;QAENG,EAAE,EAAE,KAAKJ,oBAAL,CAA0BqB,IAA1B,EAAgCjB,EAF9B;QAGNoC,EAAE,EAAE,KAAKjC;MAHH,CADe;MAMzBkC,eAAe,EAAEhB,QANQ;MAOzBiB,cAAc,EAAE,YAAW;QACvB,IAAIhC,QAAQ,GAAG,KAAKA,QAAL,GAAgBiC,IAAhB,CAAqB,MAAMhD,qCAA3B,CAAf;;QACA,KAAKG,cAAL,CAAoB;UAChBwB,QAAQ,EAAEA,QADM;UAEhBC,QAAQ,EAAEA,QAFM;UAGhBb,QAAQ,EAAEA,QAHM;UAIhBc,IAAI,EAAE,MAAM,KAAKV,gBAAL,CAAsBU,IAAtB;QAJI,CAApB;MAMH,CARe,CAQdoB,IARc,CAQT,IARS;IAPS,CAA7B;;IAiBA,KAAK9B,gBAAL,CAAsBgB,IAAtB;EACH;;EACDe,KAAK,GAAG;IACJ,KAAKtC,sBAAL,CAA4BiB,IAA5B;;IACA,KAAKV,gBAAL,CAAsBU,IAAtB;EACH;;AApHsC;;AAsH3C,eAAe5B,qBAAf"},"metadata":{},"sourceType":"module"}