{"ast":null,"code":"/**\r\n * DevExtreme (esm/animation/fx.js)\r\n * Version: 22.1.4\r\n * Build date: Fri Jul 22 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport $ from \"../core/renderer\";\nimport { getWindow } from \"../core/utils/window\";\nvar window = getWindow();\nimport eventsEngine from \"../events/core/events_engine\";\nimport errors from \"../core/errors\";\nimport { getPublicElement } from \"../core/element\";\nimport { extend } from \"../core/utils/extend\";\nimport { isFunction, isPlainObject } from \"../core/utils/type\";\nimport { each, map } from \"../core/utils/iterator\";\nimport { getTranslateCss, parseTranslate, clearCache, locate, getTranslate } from \"./translator\";\nimport { convertTransitionTimingFuncToEasing, getEasing } from \"./easing\";\nimport { requestAnimationFrame, cancelAnimationFrame } from \"./frame\";\nimport { transitionEndEventName, transition } from \"../core/utils/support\";\nimport positionUtils from \"./position\";\nimport { removeEvent } from \"../events/remove\";\nimport { addNamespace } from \"../events/utils/index\";\nimport { when, Deferred } from \"../core/utils/deferred\";\nvar removeEventName = addNamespace(removeEvent, \"dxFX\");\nimport { noop } from \"../core/utils/common\";\nvar RELATIVE_VALUE_REGEX = /^([+-])=(.*)/i;\nvar ANIM_DATA_KEY = \"dxAnimData\";\nvar ANIM_QUEUE_KEY = \"dxAnimQueue\";\nvar TRANSFORM_PROP = \"transform\";\nvar TransitionAnimationStrategy = {\n  initAnimation: function ($element, config) {\n    $element.css({\n      transitionProperty: \"none\"\n    });\n\n    if (\"string\" === typeof config.from) {\n      $element.addClass(config.from);\n    } else {\n      setProps($element, config.from);\n    }\n\n    var that = this;\n    var deferred = new Deferred();\n    var cleanupWhen = config.cleanupWhen;\n    config.transitionAnimation = {\n      deferred: deferred,\n      finish: function () {\n        that._finishTransition($element);\n\n        if (cleanupWhen) {\n          when(deferred, cleanupWhen).always(function () {\n            that._cleanup($element, config);\n          });\n        } else {\n          that._cleanup($element, config);\n        }\n\n        deferred.resolveWith($element, [config, $element]);\n      }\n    };\n\n    this._completeAnimationCallback($element, config).done(function () {\n      config.transitionAnimation.finish();\n    }).fail(function () {\n      deferred.rejectWith($element, [config, $element]);\n    });\n\n    if (!config.duration) {\n      config.transitionAnimation.finish();\n    }\n\n    $element.css(\"transform\");\n  },\n  animate: function ($element, config) {\n    this._startAnimation($element, config);\n\n    return config.transitionAnimation.deferred.promise();\n  },\n  _completeAnimationCallback: function ($element, config) {\n    var that = this;\n    var startTime = Date.now() + config.delay;\n    var deferred = new Deferred();\n    var transitionEndFired = new Deferred();\n    var simulatedTransitionEndFired = new Deferred();\n    var simulatedEndEventTimer;\n    var transitionEndEventFullName = transitionEndEventName() + \".dxFX\";\n\n    config.transitionAnimation.cleanup = function () {\n      clearTimeout(simulatedEndEventTimer);\n      clearTimeout(waitForJSCompleteTimer);\n      eventsEngine.off($element, transitionEndEventFullName);\n      eventsEngine.off($element, removeEventName);\n    };\n\n    eventsEngine.one($element, transitionEndEventFullName, function () {\n      if (Date.now() - startTime >= config.duration) {\n        transitionEndFired.reject();\n      }\n    });\n    eventsEngine.off($element, removeEventName);\n    eventsEngine.on($element, removeEventName, function () {\n      that.stop($element, config);\n      deferred.reject();\n    });\n    var waitForJSCompleteTimer = setTimeout(function () {\n      simulatedEndEventTimer = setTimeout(function () {\n        simulatedTransitionEndFired.reject();\n      }, config.duration + config.delay + fx._simulatedTransitionEndDelay);\n      when(transitionEndFired, simulatedTransitionEndFired).fail(function () {\n        deferred.resolve();\n      }.bind(this));\n    });\n    return deferred.promise();\n  },\n  _startAnimation: function ($element, config) {\n    $element.css({\n      transitionProperty: \"all\",\n      transitionDelay: config.delay + \"ms\",\n      transitionDuration: config.duration + \"ms\",\n      transitionTimingFunction: config.easing\n    });\n\n    if (\"string\" === typeof config.to) {\n      $element[0].className += \" \" + config.to;\n    } else if (config.to) {\n      setProps($element, config.to);\n    }\n  },\n  _finishTransition: function ($element) {\n    $element.css(\"transition\", \"none\");\n  },\n  _cleanup: function ($element, config) {\n    config.transitionAnimation.cleanup();\n\n    if (\"string\" === typeof config.from) {\n      $element.removeClass(config.from);\n      $element.removeClass(config.to);\n    }\n  },\n  stop: function ($element, config, jumpToEnd) {\n    if (!config) {\n      return;\n    }\n\n    if (jumpToEnd) {\n      config.transitionAnimation.finish();\n    } else {\n      if (isPlainObject(config.to)) {\n        each(config.to, function (key) {\n          $element.css(key, $element.css(key));\n        });\n      }\n\n      this._finishTransition($element);\n\n      this._cleanup($element, config);\n    }\n  }\n};\nvar FrameAnimationStrategy = {\n  initAnimation: function ($element, config) {\n    setProps($element, config.from);\n  },\n  animate: function ($element, config) {\n    var deferred = new Deferred();\n    var that = this;\n\n    if (!config) {\n      return deferred.reject().promise();\n    }\n\n    each(config.to, function (prop) {\n      if (void 0 === config.from[prop]) {\n        config.from[prop] = that._normalizeValue($element.css(prop));\n      }\n    });\n\n    if (config.to[TRANSFORM_PROP]) {\n      config.from[TRANSFORM_PROP] = that._parseTransform(config.from[TRANSFORM_PROP]);\n      config.to[TRANSFORM_PROP] = that._parseTransform(config.to[TRANSFORM_PROP]);\n    }\n\n    config.frameAnimation = {\n      to: config.to,\n      from: config.from,\n      currentValue: config.from,\n      easing: convertTransitionTimingFuncToEasing(config.easing),\n      duration: config.duration,\n      startTime: new Date().valueOf(),\n      finish: function () {\n        this.currentValue = this.to;\n        this.draw();\n        cancelAnimationFrame(config.frameAnimation.animationFrameId);\n        deferred.resolve();\n      },\n      draw: function () {\n        if (config.draw) {\n          config.draw(this.currentValue);\n          return;\n        }\n\n        var currentValue = extend({}, this.currentValue);\n\n        if (currentValue[TRANSFORM_PROP]) {\n          currentValue[TRANSFORM_PROP] = map(currentValue[TRANSFORM_PROP], function (value, prop) {\n            if (\"translate\" === prop) {\n              return getTranslateCss(value);\n            } else if (\"scale\" === prop) {\n              return \"scale(\" + value + \")\";\n            } else if (\"rotate\" === prop.substr(0, prop.length - 1)) {\n              return prop + \"(\" + value + \"deg)\";\n            }\n          }).join(\" \");\n        }\n\n        $element.css(currentValue);\n      }\n    };\n\n    if (config.delay) {\n      config.frameAnimation.startTime += config.delay;\n      config.frameAnimation.delayTimeout = setTimeout(function () {\n        that._startAnimation($element, config);\n      }, config.delay);\n    } else {\n      that._startAnimation($element, config);\n    }\n\n    return deferred.promise();\n  },\n  _startAnimation: function ($element, config) {\n    eventsEngine.off($element, removeEventName);\n    eventsEngine.on($element, removeEventName, function () {\n      if (config.frameAnimation) {\n        cancelAnimationFrame(config.frameAnimation.animationFrameId);\n      }\n    });\n\n    this._animationStep($element, config);\n  },\n  _parseTransform: function (transformString) {\n    var result = {};\n    each(transformString.match(/\\w+\\d*\\w*\\([^)]*\\)\\s*/g), function (i, part) {\n      var translateData = parseTranslate(part);\n      var scaleData = part.match(/scale\\((.+?)\\)/);\n      var rotateData = part.match(/(rotate.)\\((.+)deg\\)/);\n\n      if (translateData) {\n        result.translate = translateData;\n      }\n\n      if (scaleData && scaleData[1]) {\n        result.scale = parseFloat(scaleData[1]);\n      }\n\n      if (rotateData && rotateData[1]) {\n        result[rotateData[1]] = parseFloat(rotateData[2]);\n      }\n    });\n    return result;\n  },\n  stop: function ($element, config, jumpToEnd) {\n    var frameAnimation = config && config.frameAnimation;\n\n    if (!frameAnimation) {\n      return;\n    }\n\n    cancelAnimationFrame(frameAnimation.animationFrameId);\n    clearTimeout(frameAnimation.delayTimeout);\n\n    if (jumpToEnd) {\n      frameAnimation.finish();\n    }\n\n    delete config.frameAnimation;\n  },\n  _animationStep: function ($element, config) {\n    var frameAnimation = config && config.frameAnimation;\n\n    if (!frameAnimation) {\n      return;\n    }\n\n    var now = new Date().valueOf();\n\n    if (now >= frameAnimation.startTime + frameAnimation.duration) {\n      frameAnimation.finish();\n      return;\n    }\n\n    frameAnimation.currentValue = this._calcStepValue(frameAnimation, now - frameAnimation.startTime);\n    frameAnimation.draw();\n    var that = this;\n    frameAnimation.animationFrameId = requestAnimationFrame(function () {\n      that._animationStep($element, config);\n    });\n  },\n  _calcStepValue: function (frameAnimation, currentDuration) {\n    return function calcValueRecursively(from, to) {\n      var result = Array.isArray(to) ? [] : {};\n      each(to, function (propName, endPropValue) {\n        if (\"string\" === typeof endPropValue && false === parseFloat(endPropValue, 10)) {\n          return true;\n        }\n\n        result[propName] = \"object\" === typeof endPropValue ? calcValueRecursively(from[propName], endPropValue) : function (propName) {\n          var x = currentDuration / frameAnimation.duration;\n          var t = currentDuration;\n          var b = 1 * from[propName];\n          var c = to[propName] - from[propName];\n          var d = frameAnimation.duration;\n          return getEasing(frameAnimation.easing)(x, t, b, c, d);\n        }(propName);\n      });\n      return result;\n    }(frameAnimation.from, frameAnimation.to);\n  },\n  _normalizeValue: function (value) {\n    var numericValue = parseFloat(value, 10);\n\n    if (false === numericValue) {\n      return value;\n    }\n\n    return numericValue;\n  }\n};\nvar FallbackToNoAnimationStrategy = {\n  initAnimation: function () {},\n  animate: function () {\n    return new Deferred().resolve().promise();\n  },\n  stop: noop,\n  isSynchronous: true\n};\n\nvar getAnimationStrategy = function (config) {\n  config = config || {};\n  var animationStrategies = {\n    transition: transition() ? TransitionAnimationStrategy : FrameAnimationStrategy,\n    frame: FrameAnimationStrategy,\n    noAnimation: FallbackToNoAnimationStrategy\n  };\n  var strategy = config.strategy || \"transition\";\n\n  if (\"css\" === config.type && !transition()) {\n    strategy = \"noAnimation\";\n  }\n\n  return animationStrategies[strategy];\n};\n\nvar baseConfigValidator = function (config, animationType, validate, typeMessage) {\n  each([\"from\", \"to\"], function () {\n    if (!validate(config[this])) {\n      throw errors.Error(\"E0010\", animationType, this, typeMessage);\n    }\n  });\n};\n\nvar isObjectConfigValidator = function (config, animationType) {\n  return baseConfigValidator(config, animationType, function (target) {\n    return isPlainObject(target);\n  }, \"a plain object\");\n};\n\nvar isStringConfigValidator = function (config, animationType) {\n  return baseConfigValidator(config, animationType, function (target) {\n    return \"string\" === typeof target;\n  }, \"a string\");\n};\n\nvar CustomAnimationConfigurator = {\n  setup: function () {}\n};\nvar CssAnimationConfigurator = {\n  validateConfig: function (config) {\n    isStringConfigValidator(config, \"css\");\n  },\n  setup: function () {}\n};\nvar positionAliases = {\n  top: {\n    my: \"bottom center\",\n    at: \"top center\"\n  },\n  bottom: {\n    my: \"top center\",\n    at: \"bottom center\"\n  },\n  right: {\n    my: \"left center\",\n    at: \"right center\"\n  },\n  left: {\n    my: \"right center\",\n    at: \"left center\"\n  }\n};\nvar SlideAnimationConfigurator = {\n  validateConfig: function (config) {\n    isObjectConfigValidator(config, \"slide\");\n  },\n  setup: function ($element, config) {\n    var location = locate($element);\n\n    if (\"slide\" !== config.type) {\n      var positioningConfig = \"slideIn\" === config.type ? config.from : config.to;\n      positioningConfig.position = extend({\n        of: window\n      }, positionAliases[config.direction]);\n      setupPosition($element, positioningConfig);\n    }\n\n    this._setUpConfig(location, config.from);\n\n    this._setUpConfig(location, config.to);\n\n    clearCache($element);\n  },\n  _setUpConfig: function (location, config) {\n    config.left = \"left\" in config ? config.left : \"+=0\";\n    config.top = \"top\" in config ? config.top : \"+=0\";\n\n    this._initNewPosition(location, config);\n  },\n  _initNewPosition: function (location, config) {\n    var position = {\n      left: config.left,\n      top: config.top\n    };\n    delete config.left;\n    delete config.top;\n\n    var relativeValue = this._getRelativeValue(position.left);\n\n    if (void 0 !== relativeValue) {\n      position.left = relativeValue + location.left;\n    } else {\n      config.left = 0;\n    }\n\n    relativeValue = this._getRelativeValue(position.top);\n\n    if (void 0 !== relativeValue) {\n      position.top = relativeValue + location.top;\n    } else {\n      config.top = 0;\n    }\n\n    config[TRANSFORM_PROP] = getTranslateCss({\n      x: position.left,\n      y: position.top\n    });\n  },\n  _getRelativeValue: function (value) {\n    var relativeValue;\n\n    if (\"string\" === typeof value && (relativeValue = RELATIVE_VALUE_REGEX.exec(value))) {\n      return parseInt(relativeValue[1] + \"1\") * relativeValue[2];\n    }\n  }\n};\nvar FadeAnimationConfigurator = {\n  setup: function ($element, config) {\n    var _from$opacity, _to$opacity;\n\n    var from = config.from;\n    var to = config.to;\n    var defaultFromOpacity = \"fadeOut\" === config.type ? 1 : 0;\n    var defaultToOpacity = \"fadeOut\" === config.type ? 0 : 1;\n    var fromOpacity = isPlainObject(from) ? String(null !== (_from$opacity = from.opacity) && void 0 !== _from$opacity ? _from$opacity : defaultFromOpacity) : String(from);\n    var toOpacity = isPlainObject(to) ? String(null !== (_to$opacity = to.opacity) && void 0 !== _to$opacity ? _to$opacity : defaultToOpacity) : String(to);\n\n    if (!config.skipElementInitialStyles) {\n      fromOpacity = $element.css(\"opacity\");\n    }\n\n    switch (config.type) {\n      case \"fadeIn\":\n        toOpacity = 1;\n        break;\n\n      case \"fadeOut\":\n        toOpacity = 0;\n    }\n\n    config.from = {\n      visibility: \"visible\",\n      opacity: fromOpacity\n    };\n    config.to = {\n      opacity: toOpacity\n    };\n  }\n};\nvar PopAnimationConfigurator = {\n  validateConfig: function (config) {\n    isObjectConfigValidator(config, \"pop\");\n  },\n  setup: function ($element, config) {\n    var from = config.from;\n    var to = config.to;\n    var fromOpacity = \"opacity\" in from ? from.opacity : $element.css(\"opacity\");\n    var toOpacity = \"opacity\" in to ? to.opacity : 1;\n    var fromScale = \"scale\" in from ? from.scale : 0;\n    var toScale = \"scale\" in to ? to.scale : 1;\n    config.from = {\n      opacity: fromOpacity\n    };\n    var translate = getTranslate($element);\n    config.from[TRANSFORM_PROP] = this._getCssTransform(translate, fromScale);\n    config.to = {\n      opacity: toOpacity\n    };\n    config.to[TRANSFORM_PROP] = this._getCssTransform(translate, toScale);\n  },\n  _getCssTransform: function (translate, scale) {\n    return getTranslateCss(translate) + \"scale(\" + scale + \")\";\n  }\n};\nvar animationConfigurators = {\n  custom: CustomAnimationConfigurator,\n  slide: SlideAnimationConfigurator,\n  slideIn: SlideAnimationConfigurator,\n  slideOut: SlideAnimationConfigurator,\n  fade: FadeAnimationConfigurator,\n  fadeIn: FadeAnimationConfigurator,\n  fadeOut: FadeAnimationConfigurator,\n  pop: PopAnimationConfigurator,\n  css: CssAnimationConfigurator\n};\n\nvar getAnimationConfigurator = function (config) {\n  var result = animationConfigurators[config.type];\n\n  if (!result) {\n    throw errors.Error(\"E0011\", config.type);\n  }\n\n  return result;\n};\n\nvar defaultJSConfig = {\n  type: \"custom\",\n  from: {},\n  to: {},\n  duration: 400,\n  start: noop,\n  complete: noop,\n  easing: \"ease\",\n  delay: 0\n};\nvar defaultCssConfig = {\n  duration: 400,\n  easing: \"ease\",\n  delay: 0\n};\n\nfunction setupAnimationOnElement() {\n  var $element = this.element;\n  var config = this.config;\n  setupPosition($element, config.from);\n  setupPosition($element, config.to);\n  this.configurator.setup($element, config);\n  $element.data(ANIM_DATA_KEY, this);\n\n  if (fx.off) {\n    config.duration = 0;\n    config.delay = 0;\n  }\n\n  this.strategy.initAnimation($element, config);\n\n  if (config.start) {\n    var element = getPublicElement($element);\n    config.start.apply(this, [element, config]);\n  }\n}\n\nvar onElementAnimationComplete = function (animation) {\n  var $element = animation.element;\n  var config = animation.config;\n  $element.removeData(ANIM_DATA_KEY);\n\n  if (config.complete) {\n    var element = getPublicElement($element);\n    config.complete.apply(this, [element, config]);\n  }\n\n  animation.deferred.resolveWith(this, [$element, config]);\n};\n\nvar startAnimationOnElement = function () {\n  var animation = this;\n  var $element = animation.element;\n  var config = animation.config;\n  animation.isStarted = true;\n  return animation.strategy.animate($element, config).done(function () {\n    onElementAnimationComplete(animation);\n  }).fail(function () {\n    animation.deferred.rejectWith(this, [$element, config]);\n  });\n};\n\nvar stopAnimationOnElement = function (jumpToEnd) {\n  var $element = this.element;\n  var config = this.config;\n  clearTimeout(this.startTimeout);\n\n  if (!this.isStarted) {\n    this.start();\n  }\n\n  this.strategy.stop($element, config, jumpToEnd);\n};\n\nvar scopedRemoveEvent = addNamespace(removeEvent, \"dxFXStartAnimation\");\n\nvar subscribeToRemoveEvent = function (animation) {\n  eventsEngine.off(animation.element, scopedRemoveEvent);\n  eventsEngine.on(animation.element, scopedRemoveEvent, function () {\n    fx.stop(animation.element);\n  });\n  animation.deferred.always(function () {\n    eventsEngine.off(animation.element, scopedRemoveEvent);\n  });\n};\n\nvar createAnimation = function (element, initialConfig) {\n  var defaultConfig = \"css\" === initialConfig.type ? defaultCssConfig : defaultJSConfig;\n  var config = extend(true, {}, defaultConfig, initialConfig);\n  var configurator = getAnimationConfigurator(config);\n  var strategy = getAnimationStrategy(config);\n  var animation = {\n    element: $(element),\n    config: config,\n    configurator: configurator,\n    strategy: strategy,\n    isSynchronous: strategy.isSynchronous,\n    setup: setupAnimationOnElement,\n    start: startAnimationOnElement,\n    stop: stopAnimationOnElement,\n    deferred: new Deferred()\n  };\n\n  if (isFunction(configurator.validateConfig)) {\n    configurator.validateConfig(config);\n  }\n\n  subscribeToRemoveEvent(animation);\n  return animation;\n};\n\nvar animate = function (element, config) {\n  var $element = $(element);\n\n  if (!$element.length) {\n    return new Deferred().resolve().promise();\n  }\n\n  var animation = createAnimation($element, config);\n  pushInAnimationQueue($element, animation);\n  return animation.deferred.promise();\n};\n\nfunction pushInAnimationQueue($element, animation) {\n  var queueData = getAnimQueueData($element);\n  writeAnimQueueData($element, queueData);\n  queueData.push(animation);\n\n  if (!isAnimating($element)) {\n    shiftFromAnimationQueue($element, queueData);\n  }\n}\n\nfunction getAnimQueueData($element) {\n  return $element.data(ANIM_QUEUE_KEY) || [];\n}\n\nfunction writeAnimQueueData($element, queueData) {\n  $element.data(ANIM_QUEUE_KEY, queueData);\n}\n\nvar destroyAnimQueueData = function ($element) {\n  $element.removeData(ANIM_QUEUE_KEY);\n};\n\nfunction isAnimating($element) {\n  return !!$element.data(ANIM_DATA_KEY);\n}\n\nfunction shiftFromAnimationQueue($element, queueData) {\n  queueData = getAnimQueueData($element);\n\n  if (!queueData.length) {\n    return;\n  }\n\n  var animation = queueData.shift();\n\n  if (0 === queueData.length) {\n    destroyAnimQueueData($element);\n  }\n\n  executeAnimation(animation).done(function () {\n    if (!isAnimating($element)) {\n      shiftFromAnimationQueue($element);\n    }\n  });\n}\n\nfunction executeAnimation(animation) {\n  animation.setup();\n\n  if (fx.off || animation.isSynchronous) {\n    animation.start();\n  } else {\n    animation.startTimeout = setTimeout(function () {\n      animation.start();\n    });\n  }\n\n  return animation.deferred.promise();\n}\n\nfunction setupPosition($element, config) {\n  if (!config || !config.position) {\n    return;\n  }\n\n  var win = $(window);\n  var left = 0;\n  var top = 0;\n  var position = positionUtils.calculate($element, config.position);\n  var offset = $element.offset();\n  var currentPosition = $element.position();\n\n  if (currentPosition.top > offset.top) {\n    top = win.scrollTop();\n  }\n\n  if (currentPosition.left > offset.left) {\n    left = win.scrollLeft();\n  }\n\n  extend(config, {\n    left: position.h.location - offset.left + currentPosition.left - left,\n    top: position.v.location - offset.top + currentPosition.top - top\n  });\n  delete config.position;\n}\n\nfunction setProps($element, props) {\n  each(props, function (key, value) {\n    try {\n      $element.css(key, isFunction(value) ? value() : value);\n    } catch (e) {}\n  });\n}\n\nvar stop = function (element, jumpToEnd) {\n  var $element = $(element);\n  var queueData = getAnimQueueData($element);\n  each(queueData, function (_, animation) {\n    animation.config.delay = 0;\n    animation.config.duration = 0;\n    animation.isSynchronous = true;\n  });\n\n  if (!isAnimating($element)) {\n    shiftFromAnimationQueue($element, queueData);\n  }\n\n  var animation = $element.data(ANIM_DATA_KEY);\n\n  if (animation) {\n    animation.stop(jumpToEnd);\n  }\n\n  $element.removeData(ANIM_DATA_KEY);\n  destroyAnimQueueData($element);\n};\n\nvar fx = {\n  off: false,\n  animationTypes: animationConfigurators,\n  animate: animate,\n  createAnimation: createAnimation,\n  isAnimating: isAnimating,\n  stop: stop,\n  _simulatedTransitionEndDelay: 100\n};\nexport default fx;","map":{"version":3,"names":["$","getWindow","window","eventsEngine","errors","getPublicElement","extend","isFunction","isPlainObject","each","map","getTranslateCss","parseTranslate","clearCache","locate","getTranslate","convertTransitionTimingFuncToEasing","getEasing","requestAnimationFrame","cancelAnimationFrame","transitionEndEventName","transition","positionUtils","removeEvent","addNamespace","when","Deferred","removeEventName","noop","RELATIVE_VALUE_REGEX","ANIM_DATA_KEY","ANIM_QUEUE_KEY","TRANSFORM_PROP","TransitionAnimationStrategy","initAnimation","$element","config","css","transitionProperty","from","addClass","setProps","that","deferred","cleanupWhen","transitionAnimation","finish","_finishTransition","always","_cleanup","resolveWith","_completeAnimationCallback","done","fail","rejectWith","duration","animate","_startAnimation","promise","startTime","Date","now","delay","transitionEndFired","simulatedTransitionEndFired","simulatedEndEventTimer","transitionEndEventFullName","cleanup","clearTimeout","waitForJSCompleteTimer","off","one","reject","on","stop","setTimeout","fx","_simulatedTransitionEndDelay","resolve","bind","transitionDelay","transitionDuration","transitionTimingFunction","easing","to","className","removeClass","jumpToEnd","key","FrameAnimationStrategy","prop","_normalizeValue","_parseTransform","frameAnimation","currentValue","valueOf","draw","animationFrameId","value","substr","length","join","delayTimeout","_animationStep","transformString","result","match","i","part","translateData","scaleData","rotateData","translate","scale","parseFloat","_calcStepValue","currentDuration","calcValueRecursively","Array","isArray","propName","endPropValue","x","t","b","c","d","numericValue","FallbackToNoAnimationStrategy","isSynchronous","getAnimationStrategy","animationStrategies","frame","noAnimation","strategy","type","baseConfigValidator","animationType","validate","typeMessage","Error","isObjectConfigValidator","target","isStringConfigValidator","CustomAnimationConfigurator","setup","CssAnimationConfigurator","validateConfig","positionAliases","top","my","at","bottom","right","left","SlideAnimationConfigurator","location","positioningConfig","position","of","direction","setupPosition","_setUpConfig","_initNewPosition","relativeValue","_getRelativeValue","y","exec","parseInt","FadeAnimationConfigurator","_from$opacity","_to$opacity","defaultFromOpacity","defaultToOpacity","fromOpacity","String","opacity","toOpacity","skipElementInitialStyles","visibility","PopAnimationConfigurator","fromScale","toScale","_getCssTransform","animationConfigurators","custom","slide","slideIn","slideOut","fade","fadeIn","fadeOut","pop","getAnimationConfigurator","defaultJSConfig","start","complete","defaultCssConfig","setupAnimationOnElement","element","configurator","data","apply","onElementAnimationComplete","animation","removeData","startAnimationOnElement","isStarted","stopAnimationOnElement","startTimeout","scopedRemoveEvent","subscribeToRemoveEvent","createAnimation","initialConfig","defaultConfig","pushInAnimationQueue","queueData","getAnimQueueData","writeAnimQueueData","push","isAnimating","shiftFromAnimationQueue","destroyAnimQueueData","shift","executeAnimation","win","calculate","offset","currentPosition","scrollTop","scrollLeft","h","v","props","e","_","animationTypes"],"sources":["E:/MisaProject/W2022_06/MISA.EMIS.FE/node_modules/devextreme/esm/animation/fx.js"],"sourcesContent":["/**\r\n * DevExtreme (esm/animation/fx.js)\r\n * Version: 22.1.4\r\n * Build date: Fri Jul 22 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport $ from \"../core/renderer\";\r\nimport {\r\n    getWindow\r\n} from \"../core/utils/window\";\r\nvar window = getWindow();\r\nimport eventsEngine from \"../events/core/events_engine\";\r\nimport errors from \"../core/errors\";\r\nimport {\r\n    getPublicElement\r\n} from \"../core/element\";\r\nimport {\r\n    extend\r\n} from \"../core/utils/extend\";\r\nimport {\r\n    isFunction,\r\n    isPlainObject\r\n} from \"../core/utils/type\";\r\nimport {\r\n    each,\r\n    map\r\n} from \"../core/utils/iterator\";\r\nimport {\r\n    getTranslateCss,\r\n    parseTranslate,\r\n    clearCache,\r\n    locate,\r\n    getTranslate\r\n} from \"./translator\";\r\nimport {\r\n    convertTransitionTimingFuncToEasing,\r\n    getEasing\r\n} from \"./easing\";\r\nimport {\r\n    requestAnimationFrame,\r\n    cancelAnimationFrame\r\n} from \"./frame\";\r\nimport {\r\n    transitionEndEventName,\r\n    transition\r\n} from \"../core/utils/support\";\r\nimport positionUtils from \"./position\";\r\nimport {\r\n    removeEvent\r\n} from \"../events/remove\";\r\nimport {\r\n    addNamespace\r\n} from \"../events/utils/index\";\r\nimport {\r\n    when,\r\n    Deferred\r\n} from \"../core/utils/deferred\";\r\nvar removeEventName = addNamespace(removeEvent, \"dxFX\");\r\nimport {\r\n    noop\r\n} from \"../core/utils/common\";\r\nvar RELATIVE_VALUE_REGEX = /^([+-])=(.*)/i;\r\nvar ANIM_DATA_KEY = \"dxAnimData\";\r\nvar ANIM_QUEUE_KEY = \"dxAnimQueue\";\r\nvar TRANSFORM_PROP = \"transform\";\r\nvar TransitionAnimationStrategy = {\r\n    initAnimation: function($element, config) {\r\n        $element.css({\r\n            transitionProperty: \"none\"\r\n        });\r\n        if (\"string\" === typeof config.from) {\r\n            $element.addClass(config.from)\r\n        } else {\r\n            setProps($element, config.from)\r\n        }\r\n        var that = this;\r\n        var deferred = new Deferred;\r\n        var cleanupWhen = config.cleanupWhen;\r\n        config.transitionAnimation = {\r\n            deferred: deferred,\r\n            finish: function() {\r\n                that._finishTransition($element);\r\n                if (cleanupWhen) {\r\n                    when(deferred, cleanupWhen).always((function() {\r\n                        that._cleanup($element, config)\r\n                    }))\r\n                } else {\r\n                    that._cleanup($element, config)\r\n                }\r\n                deferred.resolveWith($element, [config, $element])\r\n            }\r\n        };\r\n        this._completeAnimationCallback($element, config).done((function() {\r\n            config.transitionAnimation.finish()\r\n        })).fail((function() {\r\n            deferred.rejectWith($element, [config, $element])\r\n        }));\r\n        if (!config.duration) {\r\n            config.transitionAnimation.finish()\r\n        }\r\n        $element.css(\"transform\")\r\n    },\r\n    animate: function($element, config) {\r\n        this._startAnimation($element, config);\r\n        return config.transitionAnimation.deferred.promise()\r\n    },\r\n    _completeAnimationCallback: function($element, config) {\r\n        var that = this;\r\n        var startTime = Date.now() + config.delay;\r\n        var deferred = new Deferred;\r\n        var transitionEndFired = new Deferred;\r\n        var simulatedTransitionEndFired = new Deferred;\r\n        var simulatedEndEventTimer;\r\n        var transitionEndEventFullName = transitionEndEventName() + \".dxFX\";\r\n        config.transitionAnimation.cleanup = function() {\r\n            clearTimeout(simulatedEndEventTimer);\r\n            clearTimeout(waitForJSCompleteTimer);\r\n            eventsEngine.off($element, transitionEndEventFullName);\r\n            eventsEngine.off($element, removeEventName)\r\n        };\r\n        eventsEngine.one($element, transitionEndEventFullName, (function() {\r\n            if (Date.now() - startTime >= config.duration) {\r\n                transitionEndFired.reject()\r\n            }\r\n        }));\r\n        eventsEngine.off($element, removeEventName);\r\n        eventsEngine.on($element, removeEventName, (function() {\r\n            that.stop($element, config);\r\n            deferred.reject()\r\n        }));\r\n        var waitForJSCompleteTimer = setTimeout((function() {\r\n            simulatedEndEventTimer = setTimeout((function() {\r\n                simulatedTransitionEndFired.reject()\r\n            }), config.duration + config.delay + fx._simulatedTransitionEndDelay);\r\n            when(transitionEndFired, simulatedTransitionEndFired).fail(function() {\r\n                deferred.resolve()\r\n            }.bind(this))\r\n        }));\r\n        return deferred.promise()\r\n    },\r\n    _startAnimation: function($element, config) {\r\n        $element.css({\r\n            transitionProperty: \"all\",\r\n            transitionDelay: config.delay + \"ms\",\r\n            transitionDuration: config.duration + \"ms\",\r\n            transitionTimingFunction: config.easing\r\n        });\r\n        if (\"string\" === typeof config.to) {\r\n            $element[0].className += \" \" + config.to\r\n        } else if (config.to) {\r\n            setProps($element, config.to)\r\n        }\r\n    },\r\n    _finishTransition: function($element) {\r\n        $element.css(\"transition\", \"none\")\r\n    },\r\n    _cleanup: function($element, config) {\r\n        config.transitionAnimation.cleanup();\r\n        if (\"string\" === typeof config.from) {\r\n            $element.removeClass(config.from);\r\n            $element.removeClass(config.to)\r\n        }\r\n    },\r\n    stop: function($element, config, jumpToEnd) {\r\n        if (!config) {\r\n            return\r\n        }\r\n        if (jumpToEnd) {\r\n            config.transitionAnimation.finish()\r\n        } else {\r\n            if (isPlainObject(config.to)) {\r\n                each(config.to, (function(key) {\r\n                    $element.css(key, $element.css(key))\r\n                }))\r\n            }\r\n            this._finishTransition($element);\r\n            this._cleanup($element, config)\r\n        }\r\n    }\r\n};\r\nvar FrameAnimationStrategy = {\r\n    initAnimation: function($element, config) {\r\n        setProps($element, config.from)\r\n    },\r\n    animate: function($element, config) {\r\n        var deferred = new Deferred;\r\n        var that = this;\r\n        if (!config) {\r\n            return deferred.reject().promise()\r\n        }\r\n        each(config.to, (function(prop) {\r\n            if (void 0 === config.from[prop]) {\r\n                config.from[prop] = that._normalizeValue($element.css(prop))\r\n            }\r\n        }));\r\n        if (config.to[TRANSFORM_PROP]) {\r\n            config.from[TRANSFORM_PROP] = that._parseTransform(config.from[TRANSFORM_PROP]);\r\n            config.to[TRANSFORM_PROP] = that._parseTransform(config.to[TRANSFORM_PROP])\r\n        }\r\n        config.frameAnimation = {\r\n            to: config.to,\r\n            from: config.from,\r\n            currentValue: config.from,\r\n            easing: convertTransitionTimingFuncToEasing(config.easing),\r\n            duration: config.duration,\r\n            startTime: (new Date).valueOf(),\r\n            finish: function() {\r\n                this.currentValue = this.to;\r\n                this.draw();\r\n                cancelAnimationFrame(config.frameAnimation.animationFrameId);\r\n                deferred.resolve()\r\n            },\r\n            draw: function() {\r\n                if (config.draw) {\r\n                    config.draw(this.currentValue);\r\n                    return\r\n                }\r\n                var currentValue = extend({}, this.currentValue);\r\n                if (currentValue[TRANSFORM_PROP]) {\r\n                    currentValue[TRANSFORM_PROP] = map(currentValue[TRANSFORM_PROP], (function(value, prop) {\r\n                        if (\"translate\" === prop) {\r\n                            return getTranslateCss(value)\r\n                        } else if (\"scale\" === prop) {\r\n                            return \"scale(\" + value + \")\"\r\n                        } else if (\"rotate\" === prop.substr(0, prop.length - 1)) {\r\n                            return prop + \"(\" + value + \"deg)\"\r\n                        }\r\n                    })).join(\" \")\r\n                }\r\n                $element.css(currentValue)\r\n            }\r\n        };\r\n        if (config.delay) {\r\n            config.frameAnimation.startTime += config.delay;\r\n            config.frameAnimation.delayTimeout = setTimeout((function() {\r\n                that._startAnimation($element, config)\r\n            }), config.delay)\r\n        } else {\r\n            that._startAnimation($element, config)\r\n        }\r\n        return deferred.promise()\r\n    },\r\n    _startAnimation: function($element, config) {\r\n        eventsEngine.off($element, removeEventName);\r\n        eventsEngine.on($element, removeEventName, (function() {\r\n            if (config.frameAnimation) {\r\n                cancelAnimationFrame(config.frameAnimation.animationFrameId)\r\n            }\r\n        }));\r\n        this._animationStep($element, config)\r\n    },\r\n    _parseTransform: function(transformString) {\r\n        var result = {};\r\n        each(transformString.match(/\\w+\\d*\\w*\\([^)]*\\)\\s*/g), (function(i, part) {\r\n            var translateData = parseTranslate(part);\r\n            var scaleData = part.match(/scale\\((.+?)\\)/);\r\n            var rotateData = part.match(/(rotate.)\\((.+)deg\\)/);\r\n            if (translateData) {\r\n                result.translate = translateData\r\n            }\r\n            if (scaleData && scaleData[1]) {\r\n                result.scale = parseFloat(scaleData[1])\r\n            }\r\n            if (rotateData && rotateData[1]) {\r\n                result[rotateData[1]] = parseFloat(rotateData[2])\r\n            }\r\n        }));\r\n        return result\r\n    },\r\n    stop: function($element, config, jumpToEnd) {\r\n        var frameAnimation = config && config.frameAnimation;\r\n        if (!frameAnimation) {\r\n            return\r\n        }\r\n        cancelAnimationFrame(frameAnimation.animationFrameId);\r\n        clearTimeout(frameAnimation.delayTimeout);\r\n        if (jumpToEnd) {\r\n            frameAnimation.finish()\r\n        }\r\n        delete config.frameAnimation\r\n    },\r\n    _animationStep: function($element, config) {\r\n        var frameAnimation = config && config.frameAnimation;\r\n        if (!frameAnimation) {\r\n            return\r\n        }\r\n        var now = (new Date).valueOf();\r\n        if (now >= frameAnimation.startTime + frameAnimation.duration) {\r\n            frameAnimation.finish();\r\n            return\r\n        }\r\n        frameAnimation.currentValue = this._calcStepValue(frameAnimation, now - frameAnimation.startTime);\r\n        frameAnimation.draw();\r\n        var that = this;\r\n        frameAnimation.animationFrameId = requestAnimationFrame((function() {\r\n            that._animationStep($element, config)\r\n        }))\r\n    },\r\n    _calcStepValue: function(frameAnimation, currentDuration) {\r\n        return function calcValueRecursively(from, to) {\r\n            var result = Array.isArray(to) ? [] : {};\r\n            each(to, (function(propName, endPropValue) {\r\n                if (\"string\" === typeof endPropValue && false === parseFloat(endPropValue, 10)) {\r\n                    return true\r\n                }\r\n                result[propName] = \"object\" === typeof endPropValue ? calcValueRecursively(from[propName], endPropValue) : function(propName) {\r\n                    var x = currentDuration / frameAnimation.duration;\r\n                    var t = currentDuration;\r\n                    var b = 1 * from[propName];\r\n                    var c = to[propName] - from[propName];\r\n                    var d = frameAnimation.duration;\r\n                    return getEasing(frameAnimation.easing)(x, t, b, c, d)\r\n                }(propName)\r\n            }));\r\n            return result\r\n        }(frameAnimation.from, frameAnimation.to)\r\n    },\r\n    _normalizeValue: function(value) {\r\n        var numericValue = parseFloat(value, 10);\r\n        if (false === numericValue) {\r\n            return value\r\n        }\r\n        return numericValue\r\n    }\r\n};\r\nvar FallbackToNoAnimationStrategy = {\r\n    initAnimation: function() {},\r\n    animate: function() {\r\n        return (new Deferred).resolve().promise()\r\n    },\r\n    stop: noop,\r\n    isSynchronous: true\r\n};\r\nvar getAnimationStrategy = function(config) {\r\n    config = config || {};\r\n    var animationStrategies = {\r\n        transition: transition() ? TransitionAnimationStrategy : FrameAnimationStrategy,\r\n        frame: FrameAnimationStrategy,\r\n        noAnimation: FallbackToNoAnimationStrategy\r\n    };\r\n    var strategy = config.strategy || \"transition\";\r\n    if (\"css\" === config.type && !transition()) {\r\n        strategy = \"noAnimation\"\r\n    }\r\n    return animationStrategies[strategy]\r\n};\r\nvar baseConfigValidator = function(config, animationType, validate, typeMessage) {\r\n    each([\"from\", \"to\"], (function() {\r\n        if (!validate(config[this])) {\r\n            throw errors.Error(\"E0010\", animationType, this, typeMessage)\r\n        }\r\n    }))\r\n};\r\nvar isObjectConfigValidator = function(config, animationType) {\r\n    return baseConfigValidator(config, animationType, (function(target) {\r\n        return isPlainObject(target)\r\n    }), \"a plain object\")\r\n};\r\nvar isStringConfigValidator = function(config, animationType) {\r\n    return baseConfigValidator(config, animationType, (function(target) {\r\n        return \"string\" === typeof target\r\n    }), \"a string\")\r\n};\r\nvar CustomAnimationConfigurator = {\r\n    setup: function() {}\r\n};\r\nvar CssAnimationConfigurator = {\r\n    validateConfig: function(config) {\r\n        isStringConfigValidator(config, \"css\")\r\n    },\r\n    setup: function() {}\r\n};\r\nvar positionAliases = {\r\n    top: {\r\n        my: \"bottom center\",\r\n        at: \"top center\"\r\n    },\r\n    bottom: {\r\n        my: \"top center\",\r\n        at: \"bottom center\"\r\n    },\r\n    right: {\r\n        my: \"left center\",\r\n        at: \"right center\"\r\n    },\r\n    left: {\r\n        my: \"right center\",\r\n        at: \"left center\"\r\n    }\r\n};\r\nvar SlideAnimationConfigurator = {\r\n    validateConfig: function(config) {\r\n        isObjectConfigValidator(config, \"slide\")\r\n    },\r\n    setup: function($element, config) {\r\n        var location = locate($element);\r\n        if (\"slide\" !== config.type) {\r\n            var positioningConfig = \"slideIn\" === config.type ? config.from : config.to;\r\n            positioningConfig.position = extend({\r\n                of: window\r\n            }, positionAliases[config.direction]);\r\n            setupPosition($element, positioningConfig)\r\n        }\r\n        this._setUpConfig(location, config.from);\r\n        this._setUpConfig(location, config.to);\r\n        clearCache($element)\r\n    },\r\n    _setUpConfig: function(location, config) {\r\n        config.left = \"left\" in config ? config.left : \"+=0\";\r\n        config.top = \"top\" in config ? config.top : \"+=0\";\r\n        this._initNewPosition(location, config)\r\n    },\r\n    _initNewPosition: function(location, config) {\r\n        var position = {\r\n            left: config.left,\r\n            top: config.top\r\n        };\r\n        delete config.left;\r\n        delete config.top;\r\n        var relativeValue = this._getRelativeValue(position.left);\r\n        if (void 0 !== relativeValue) {\r\n            position.left = relativeValue + location.left\r\n        } else {\r\n            config.left = 0\r\n        }\r\n        relativeValue = this._getRelativeValue(position.top);\r\n        if (void 0 !== relativeValue) {\r\n            position.top = relativeValue + location.top\r\n        } else {\r\n            config.top = 0\r\n        }\r\n        config[TRANSFORM_PROP] = getTranslateCss({\r\n            x: position.left,\r\n            y: position.top\r\n        })\r\n    },\r\n    _getRelativeValue: function(value) {\r\n        var relativeValue;\r\n        if (\"string\" === typeof value && (relativeValue = RELATIVE_VALUE_REGEX.exec(value))) {\r\n            return parseInt(relativeValue[1] + \"1\") * relativeValue[2]\r\n        }\r\n    }\r\n};\r\nvar FadeAnimationConfigurator = {\r\n    setup: function($element, config) {\r\n        var _from$opacity, _to$opacity;\r\n        var from = config.from;\r\n        var to = config.to;\r\n        var defaultFromOpacity = \"fadeOut\" === config.type ? 1 : 0;\r\n        var defaultToOpacity = \"fadeOut\" === config.type ? 0 : 1;\r\n        var fromOpacity = isPlainObject(from) ? String(null !== (_from$opacity = from.opacity) && void 0 !== _from$opacity ? _from$opacity : defaultFromOpacity) : String(from);\r\n        var toOpacity = isPlainObject(to) ? String(null !== (_to$opacity = to.opacity) && void 0 !== _to$opacity ? _to$opacity : defaultToOpacity) : String(to);\r\n        if (!config.skipElementInitialStyles) {\r\n            fromOpacity = $element.css(\"opacity\")\r\n        }\r\n        switch (config.type) {\r\n            case \"fadeIn\":\r\n                toOpacity = 1;\r\n                break;\r\n            case \"fadeOut\":\r\n                toOpacity = 0\r\n        }\r\n        config.from = {\r\n            visibility: \"visible\",\r\n            opacity: fromOpacity\r\n        };\r\n        config.to = {\r\n            opacity: toOpacity\r\n        }\r\n    }\r\n};\r\nvar PopAnimationConfigurator = {\r\n    validateConfig: function(config) {\r\n        isObjectConfigValidator(config, \"pop\")\r\n    },\r\n    setup: function($element, config) {\r\n        var from = config.from;\r\n        var to = config.to;\r\n        var fromOpacity = \"opacity\" in from ? from.opacity : $element.css(\"opacity\");\r\n        var toOpacity = \"opacity\" in to ? to.opacity : 1;\r\n        var fromScale = \"scale\" in from ? from.scale : 0;\r\n        var toScale = \"scale\" in to ? to.scale : 1;\r\n        config.from = {\r\n            opacity: fromOpacity\r\n        };\r\n        var translate = getTranslate($element);\r\n        config.from[TRANSFORM_PROP] = this._getCssTransform(translate, fromScale);\r\n        config.to = {\r\n            opacity: toOpacity\r\n        };\r\n        config.to[TRANSFORM_PROP] = this._getCssTransform(translate, toScale)\r\n    },\r\n    _getCssTransform: function(translate, scale) {\r\n        return getTranslateCss(translate) + \"scale(\" + scale + \")\"\r\n    }\r\n};\r\nvar animationConfigurators = {\r\n    custom: CustomAnimationConfigurator,\r\n    slide: SlideAnimationConfigurator,\r\n    slideIn: SlideAnimationConfigurator,\r\n    slideOut: SlideAnimationConfigurator,\r\n    fade: FadeAnimationConfigurator,\r\n    fadeIn: FadeAnimationConfigurator,\r\n    fadeOut: FadeAnimationConfigurator,\r\n    pop: PopAnimationConfigurator,\r\n    css: CssAnimationConfigurator\r\n};\r\nvar getAnimationConfigurator = function(config) {\r\n    var result = animationConfigurators[config.type];\r\n    if (!result) {\r\n        throw errors.Error(\"E0011\", config.type)\r\n    }\r\n    return result\r\n};\r\nvar defaultJSConfig = {\r\n    type: \"custom\",\r\n    from: {},\r\n    to: {},\r\n    duration: 400,\r\n    start: noop,\r\n    complete: noop,\r\n    easing: \"ease\",\r\n    delay: 0\r\n};\r\nvar defaultCssConfig = {\r\n    duration: 400,\r\n    easing: \"ease\",\r\n    delay: 0\r\n};\r\n\r\nfunction setupAnimationOnElement() {\r\n    var $element = this.element;\r\n    var config = this.config;\r\n    setupPosition($element, config.from);\r\n    setupPosition($element, config.to);\r\n    this.configurator.setup($element, config);\r\n    $element.data(ANIM_DATA_KEY, this);\r\n    if (fx.off) {\r\n        config.duration = 0;\r\n        config.delay = 0\r\n    }\r\n    this.strategy.initAnimation($element, config);\r\n    if (config.start) {\r\n        var element = getPublicElement($element);\r\n        config.start.apply(this, [element, config])\r\n    }\r\n}\r\nvar onElementAnimationComplete = function(animation) {\r\n    var $element = animation.element;\r\n    var config = animation.config;\r\n    $element.removeData(ANIM_DATA_KEY);\r\n    if (config.complete) {\r\n        var element = getPublicElement($element);\r\n        config.complete.apply(this, [element, config])\r\n    }\r\n    animation.deferred.resolveWith(this, [$element, config])\r\n};\r\nvar startAnimationOnElement = function() {\r\n    var animation = this;\r\n    var $element = animation.element;\r\n    var config = animation.config;\r\n    animation.isStarted = true;\r\n    return animation.strategy.animate($element, config).done((function() {\r\n        onElementAnimationComplete(animation)\r\n    })).fail((function() {\r\n        animation.deferred.rejectWith(this, [$element, config])\r\n    }))\r\n};\r\nvar stopAnimationOnElement = function(jumpToEnd) {\r\n    var $element = this.element;\r\n    var config = this.config;\r\n    clearTimeout(this.startTimeout);\r\n    if (!this.isStarted) {\r\n        this.start()\r\n    }\r\n    this.strategy.stop($element, config, jumpToEnd)\r\n};\r\nvar scopedRemoveEvent = addNamespace(removeEvent, \"dxFXStartAnimation\");\r\nvar subscribeToRemoveEvent = function(animation) {\r\n    eventsEngine.off(animation.element, scopedRemoveEvent);\r\n    eventsEngine.on(animation.element, scopedRemoveEvent, (function() {\r\n        fx.stop(animation.element)\r\n    }));\r\n    animation.deferred.always((function() {\r\n        eventsEngine.off(animation.element, scopedRemoveEvent)\r\n    }))\r\n};\r\nvar createAnimation = function(element, initialConfig) {\r\n    var defaultConfig = \"css\" === initialConfig.type ? defaultCssConfig : defaultJSConfig;\r\n    var config = extend(true, {}, defaultConfig, initialConfig);\r\n    var configurator = getAnimationConfigurator(config);\r\n    var strategy = getAnimationStrategy(config);\r\n    var animation = {\r\n        element: $(element),\r\n        config: config,\r\n        configurator: configurator,\r\n        strategy: strategy,\r\n        isSynchronous: strategy.isSynchronous,\r\n        setup: setupAnimationOnElement,\r\n        start: startAnimationOnElement,\r\n        stop: stopAnimationOnElement,\r\n        deferred: new Deferred\r\n    };\r\n    if (isFunction(configurator.validateConfig)) {\r\n        configurator.validateConfig(config)\r\n    }\r\n    subscribeToRemoveEvent(animation);\r\n    return animation\r\n};\r\nvar animate = function(element, config) {\r\n    var $element = $(element);\r\n    if (!$element.length) {\r\n        return (new Deferred).resolve().promise()\r\n    }\r\n    var animation = createAnimation($element, config);\r\n    pushInAnimationQueue($element, animation);\r\n    return animation.deferred.promise()\r\n};\r\n\r\nfunction pushInAnimationQueue($element, animation) {\r\n    var queueData = getAnimQueueData($element);\r\n    writeAnimQueueData($element, queueData);\r\n    queueData.push(animation);\r\n    if (!isAnimating($element)) {\r\n        shiftFromAnimationQueue($element, queueData)\r\n    }\r\n}\r\n\r\nfunction getAnimQueueData($element) {\r\n    return $element.data(ANIM_QUEUE_KEY) || []\r\n}\r\n\r\nfunction writeAnimQueueData($element, queueData) {\r\n    $element.data(ANIM_QUEUE_KEY, queueData)\r\n}\r\nvar destroyAnimQueueData = function($element) {\r\n    $element.removeData(ANIM_QUEUE_KEY)\r\n};\r\n\r\nfunction isAnimating($element) {\r\n    return !!$element.data(ANIM_DATA_KEY)\r\n}\r\n\r\nfunction shiftFromAnimationQueue($element, queueData) {\r\n    queueData = getAnimQueueData($element);\r\n    if (!queueData.length) {\r\n        return\r\n    }\r\n    var animation = queueData.shift();\r\n    if (0 === queueData.length) {\r\n        destroyAnimQueueData($element)\r\n    }\r\n    executeAnimation(animation).done((function() {\r\n        if (!isAnimating($element)) {\r\n            shiftFromAnimationQueue($element)\r\n        }\r\n    }))\r\n}\r\n\r\nfunction executeAnimation(animation) {\r\n    animation.setup();\r\n    if (fx.off || animation.isSynchronous) {\r\n        animation.start()\r\n    } else {\r\n        animation.startTimeout = setTimeout((function() {\r\n            animation.start()\r\n        }))\r\n    }\r\n    return animation.deferred.promise()\r\n}\r\n\r\nfunction setupPosition($element, config) {\r\n    if (!config || !config.position) {\r\n        return\r\n    }\r\n    var win = $(window);\r\n    var left = 0;\r\n    var top = 0;\r\n    var position = positionUtils.calculate($element, config.position);\r\n    var offset = $element.offset();\r\n    var currentPosition = $element.position();\r\n    if (currentPosition.top > offset.top) {\r\n        top = win.scrollTop()\r\n    }\r\n    if (currentPosition.left > offset.left) {\r\n        left = win.scrollLeft()\r\n    }\r\n    extend(config, {\r\n        left: position.h.location - offset.left + currentPosition.left - left,\r\n        top: position.v.location - offset.top + currentPosition.top - top\r\n    });\r\n    delete config.position\r\n}\r\n\r\nfunction setProps($element, props) {\r\n    each(props, (function(key, value) {\r\n        try {\r\n            $element.css(key, isFunction(value) ? value() : value)\r\n        } catch (e) {}\r\n    }))\r\n}\r\nvar stop = function(element, jumpToEnd) {\r\n    var $element = $(element);\r\n    var queueData = getAnimQueueData($element);\r\n    each(queueData, (function(_, animation) {\r\n        animation.config.delay = 0;\r\n        animation.config.duration = 0;\r\n        animation.isSynchronous = true\r\n    }));\r\n    if (!isAnimating($element)) {\r\n        shiftFromAnimationQueue($element, queueData)\r\n    }\r\n    var animation = $element.data(ANIM_DATA_KEY);\r\n    if (animation) {\r\n        animation.stop(jumpToEnd)\r\n    }\r\n    $element.removeData(ANIM_DATA_KEY);\r\n    destroyAnimQueueData($element)\r\n};\r\nvar fx = {\r\n    off: false,\r\n    animationTypes: animationConfigurators,\r\n    animate: animate,\r\n    createAnimation: createAnimation,\r\n    isAnimating: isAnimating,\r\n    stop: stop,\r\n    _simulatedTransitionEndDelay: 100\r\n};\r\nexport default fx;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}