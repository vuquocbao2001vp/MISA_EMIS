{"ast":null,"code":"/**\r\n * DevExtreme (esm/viz/vector_map/vector_map.js)\r\n * Version: 22.1.4\r\n * Build date: Fri Jul 22 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport { parseScalar as _parseScalar } from \"../core/utils\";\nimport { Projection } from \"./projection.main\";\nimport { ControlBar } from \"./control_bar\";\nimport { GestureHandler } from \"./gesture_handler\";\nimport { Tracker } from \"./tracker\";\nimport { DataExchanger } from \"./data_exchanger\";\nimport { LegendsControl } from \"./legend\";\nimport { LayoutControl } from \"./layout\";\nimport { MapLayerCollection, getMaxBound } from \"./map_layer\";\nimport { TooltipViewer } from \"./tooltip_viewer\";\nimport { generateDataKey } from \"./vector_map.utils\";\nvar DEFAULT_WIDTH = 800;\nvar DEFAULT_HEIGHT = 400;\nvar RE_STARTS_LAYERS = /^layers/;\nvar RE_ENDS_DATA_SOURCE = /\\.dataSource$/;\nimport \"./projection\";\nimport BaseWidget from \"../core/base_widget\";\n\nfunction mergeBounds(sumBounds, dataBounds) {\n  return dataBounds ? [Math.min(dataBounds[0], dataBounds[2], sumBounds[0]), Math.min(dataBounds[1], dataBounds[3], sumBounds[3]), Math.max(dataBounds[0], dataBounds[2], sumBounds[2]), Math.max(dataBounds[1], dataBounds[3], sumBounds[1])] : sumBounds;\n}\n\nvar dxVectorMap = BaseWidget.inherit({\n  _eventsMap: {\n    onClick: {\n      name: \"click\"\n    },\n    onCenterChanged: {\n      name: \"centerChanged\"\n    },\n    onZoomFactorChanged: {\n      name: \"zoomFactorChanged\"\n    },\n    onHoverChanged: {\n      name: \"hoverChanged\"\n    },\n    onSelectionChanged: {\n      name: \"selectionChanged\"\n    }\n  },\n  _rootClassPrefix: \"dxm\",\n  _rootClass: \"dxm-vector-map\",\n  _themeSection: \"map\",\n  _fontFields: [\"layer:area.label.font\", \"layer:marker:dot.label.font\", \"layer:marker:bubble.label.font\", \"layer:marker:pie.label.font\", \"layer:marker:image.label.font\", \"legend.font\", \"legend.title.font\", \"legend.title.subtitle.font\"],\n  _initLayerCollection: function (dataKey) {\n    var that = this;\n    that._layerCollection = new MapLayerCollection({\n      renderer: that._renderer,\n      projection: that._projection,\n      themeManager: that._themeManager,\n      tracker: that._tracker,\n      dataKey: dataKey,\n      eventTrigger: that._eventTrigger,\n      dataExchanger: that._dataExchanger,\n      tooltip: that._tooltip,\n      notifyDirty: that._notifyDirty,\n      notifyReady: that._notifyReady,\n\n      dataReady() {\n        var bounds;\n\n        if (that.option(\"getBoundsFromData\") && !that.option(\"bounds\")) {\n          that._preventProjectionEvents();\n\n          bounds = that._getBoundsFromData();\n\n          that._projection.setBounds(bounds);\n\n          that._allowProjectionEvents();\n        }\n\n        if (!that.option(\"projection\")) {\n          bounds = bounds || that._getBoundsFromData();\n\n          if (Math.ceil(bounds[0]) < -180 || Math.ceil(bounds[3]) < -90 || Math.floor(bounds[2]) > 180 || Math.floor(bounds[1]) > 90) {\n            var longitudeLength = bounds[2] - bounds[0];\n            var latitudeLength = bounds[1] - bounds[3];\n\n            that._projection.setEngine({\n              to: coordinates => [2 * (coordinates[0] - bounds[0]) / longitudeLength - 1, 2 * (coordinates[1] - bounds[3]) / latitudeLength - 1],\n              from: coordinates => [(coordinates[0] + 1) * longitudeLength / 2 + bounds[0], (coordinates[1] + 1) * latitudeLength / 2 + bounds[3]]\n            });\n          }\n        }\n      }\n\n    });\n  },\n\n  _getBoundsFromData() {\n    var bounds = this._getBoundingBoxFromDataSource();\n\n    if (!bounds) {\n      var boundsByData = getMaxBound(this.getLayers().map(l => l.getBounds()));\n\n      if (boundsByData) {\n        bounds = boundsByData;\n      }\n    }\n\n    bounds = bounds || [];\n    bounds = [bounds[0], bounds[3], bounds[2], bounds[1]];\n    return bounds;\n  },\n\n  _initLegendsControl: function () {\n    this._legendsControl = new LegendsControl({\n      renderer: this._renderer,\n      container: this._root,\n      widget: this,\n      layoutControl: this._layoutControl,\n      themeManager: this._themeManager,\n      dataExchanger: this._dataExchanger,\n      notifyDirty: this._notifyDirty,\n      notifyReady: this._notifyReady\n    });\n  },\n  _initControlBar: function (dataKey) {\n    this._controlBar = new ControlBar({\n      renderer: this._renderer,\n      container: this._root,\n      layoutControl: this._layoutControl,\n      projection: this._projection,\n      tracker: this._tracker,\n      dataKey: dataKey\n    });\n  },\n  _initElements: function () {\n    var that = this;\n    var dataKey = generateDataKey();\n    var notifyCounter = 0;\n    var preventProjectionEvents;\n\n    that._preventProjectionEvents = function () {\n      preventProjectionEvents = true;\n    };\n\n    that._allowProjectionEvents = function () {\n      preventProjectionEvents = false;\n    };\n\n    that._notifyDirty = function () {\n      that._resetIsReady();\n\n      ++notifyCounter;\n    };\n\n    that._notifyReady = function () {\n      that._allowProjectionEvents();\n\n      if (0 === --notifyCounter) {\n        that._drawn();\n      }\n    };\n\n    that._preventProjectionEvents();\n\n    that._dataExchanger = new DataExchanger();\n    that._projection = new Projection({\n      centerChanged: function (value) {\n        if (!preventProjectionEvents) {\n          that._eventTrigger(\"centerChanged\", {\n            center: value\n          });\n        }\n      },\n      zoomChanged: function (value) {\n        if (!preventProjectionEvents) {\n          that._eventTrigger(\"zoomFactorChanged\", {\n            zoomFactor: value\n          });\n        }\n      }\n    });\n    that._tracker = new Tracker({\n      root: that._root,\n      projection: that._projection,\n      dataKey: dataKey\n    });\n    that._gestureHandler = new GestureHandler({\n      projection: that._projection,\n      renderer: that._renderer,\n      tracker: that._tracker\n    });\n    that._layoutControl = new LayoutControl(that);\n\n    that._layoutControl.suspend();\n\n    that._initLayerCollection(dataKey);\n\n    that._createHtmlStructure();\n\n    that._initControlBar(dataKey);\n\n    that._initLegendsControl();\n\n    that._prepareExtraElements();\n\n    that._tooltipViewer = new TooltipViewer({\n      tracker: that._tracker,\n      tooltip: that._tooltip,\n      layerCollection: that._layerCollection\n    });\n  },\n  _change_RESUME_LAYOUT: function () {\n    this._layoutControl.resume();\n  },\n  _initialChanges: [\"PROJECTION\", \"RESUME_LAYOUT\", \"LAYOUT_INIT\", \"BOUNDS\", \"MAX_ZOOM_FACTOR\", \"ZOOM_FACTOR\", \"CENTER\"],\n  _layoutChangesOrder: [\"RESUME_LAYOUT\", \"LAYERS\"],\n  _customChangesOrder: [\"EXTRA_ELEMENTS\"],\n  _initCore: function () {\n    this._root = this._renderer.root.attr({\n      align: \"center\",\n      cursor: \"default\"\n    });\n\n    this._initElements();\n  },\n  _disposeCore: function () {\n    this._controlBar.dispose();\n\n    this._gestureHandler.dispose();\n\n    this._tracker.dispose();\n\n    this._legendsControl.dispose();\n\n    this._layerCollection.dispose();\n\n    this._layoutControl.dispose();\n\n    this._tooltipViewer.dispose();\n\n    this._dataExchanger.dispose();\n\n    this._projection.dispose();\n\n    this._dataExchanger = this._gestureHandler = this._projection = this._tracker = this._layoutControl = this._root = this._layerCollection = this._controlBar = this._legendsControl = null;\n  },\n  _setupInteraction: function () {\n    var options = {\n      centeringEnabled: !!_parseScalar(this._getOption(\"panningEnabled\", true), true),\n      zoomingEnabled: !!_parseScalar(this._getOption(\"zoomingEnabled\", true), true)\n    };\n\n    this._gestureHandler.setInteraction(options);\n\n    this._controlBar.setInteraction(options);\n  },\n  _getDefaultSize: function () {\n    return {\n      width: DEFAULT_WIDTH,\n      height: DEFAULT_HEIGHT\n    };\n  },\n  _applySize: function (rect) {\n    var layout = {\n      left: rect[0],\n      top: rect[1],\n      width: rect[2] - rect[0],\n      height: rect[3] - rect[1],\n      right: 0,\n      bottom: 0\n    };\n\n    this._projection.setSize(layout);\n\n    this._layoutControl.setSize(layout);\n\n    this._layerCollection.setRect([layout.left, layout.top, layout.width, layout.height]);\n\n    this._requestChange([\"EXTRA_ELEMENTS\"]);\n  },\n  _optionChanging: function (name, currentValue, nextValue) {\n    if (currentValue && nextValue) {\n      if (RE_STARTS_LAYERS.test(name)) {\n        if (currentValue.dataSource && nextValue.dataSource && currentValue !== nextValue) {\n          currentValue.dataSource = null;\n        } else if (RE_ENDS_DATA_SOURCE.test(name)) {\n          this.option(name, null);\n        }\n      }\n    }\n  },\n  _applyChanges: function () {\n    this._notifyDirty();\n\n    this.callBase.apply(this, arguments);\n\n    this._notifyReady();\n  },\n  _optionChangesMap: {\n    background: \"BACKGROUND\",\n    layers: \"LAYERS\",\n    extraElements: \"EXTRA_ELEMENTS\",\n    controlBar: \"CONTROL_BAR\",\n    legends: \"LEGENDS\",\n    touchEnabled: \"TRACKER\",\n    wheelEnabled: \"TRACKER\",\n    panningEnabled: \"INTERACTION\",\n    zoomingEnabled: \"INTERACTION\",\n    projection: \"PROJECTION\",\n    bounds: \"BOUNDS\",\n    maxZoomFactor: \"MAX_ZOOM_FACTOR\",\n    zoomFactor: \"ZOOM_FACTOR\",\n    center: \"CENTER\"\n  },\n  _optionChangesOrder: [\"PROJECTION\", \"BOUNDS\", \"MAX_ZOOM_FACTOR\", \"ZOOM_FACTOR\", \"CENTER\", \"BACKGROUND\", \"CONTROL_BAR\", \"LEGENDS\", \"TRACKER\", \"INTERACTION\"],\n  _change_PROJECTION: function () {\n    this._setProjection();\n  },\n  _change_BOUNDS: function () {\n    this._setBounds();\n  },\n  _change_MAX_ZOOM_FACTOR: function () {\n    this._setMaxZoom();\n  },\n  _change_ZOOM_FACTOR: function () {\n    this._setZoom();\n  },\n  _change_CENTER: function () {\n    this._setCenter();\n  },\n  _change_BACKGROUND: function () {\n    this._setBackgroundOptions();\n  },\n  _change_LAYERS: function () {\n    this._setLayerCollectionOptions();\n  },\n  _change_CONTROL_BAR: function () {\n    this._setControlBarOptions();\n  },\n  _change_EXTRA_ELEMENTS: function () {\n    this._renderExtraElements();\n  },\n  _change_LEGENDS: function () {\n    this._setLegendsOptions();\n  },\n  _change_TRACKER: function () {\n    this._setTrackerOptions();\n  },\n  _change_INTERACTION: function () {\n    this._setupInteraction();\n  },\n  _themeDependentChanges: [\"BACKGROUND\", \"LAYERS\", \"CONTROL_BAR\", \"LEGENDS\", \"TRACKER\", \"INTERACTION\"],\n  _setProjection: function () {\n    this._projection.setEngine(this.option(\"projection\"));\n  },\n  _setBounds: function () {\n    this._projection.setBounds(this.option(\"bounds\"));\n  },\n  _setMaxZoom: function () {\n    this._projection.setMaxZoom(this.option(\"maxZoomFactor\"));\n  },\n  _setZoom: function () {\n    this._projection.setZoom(this.option(\"zoomFactor\"));\n  },\n  _setCenter: function () {\n    this._projection.setCenter(this.option(\"center\"));\n  },\n  _setBackgroundOptions: function () {\n    this._layerCollection.setBackgroundOptions(this._getOption(\"background\"));\n  },\n  _setLayerCollectionOptions: function () {\n    this._layerCollection.setOptions(this.option(\"layers\"));\n  },\n\n  _getBoundingBoxFromDataSource() {\n    var layers = this._layerCollection.items();\n\n    var infinityBounds = [1 / 0, -1 / 0, -1 / 0, 1 / 0];\n    var resultBBox = layers && layers.length ? layers.reduce((sumBBox, l) => {\n      var layerData = l.getData();\n      var itemCount = layerData.count();\n\n      if (itemCount > 0) {\n        var rootBBox = layerData.getBBox();\n\n        if (rootBBox) {\n          sumBBox = mergeBounds(sumBBox, rootBBox);\n        } else {\n          for (var i = 0; i < itemCount; i++) {\n            sumBBox = mergeBounds(sumBBox, layerData.getBBox(i));\n          }\n        }\n      }\n\n      return sumBBox;\n    }, infinityBounds) : void 0;\n    return resultBBox === infinityBounds ? void 0 : resultBBox;\n  },\n\n  _setControlBarOptions: function () {\n    this._controlBar.setOptions(this._getOption(\"controlBar\"));\n  },\n  _setLegendsOptions: function () {\n    this._legendsControl.setOptions(this.option(\"legends\"));\n  },\n  _setTrackerOptions: function () {\n    this._tracker.setOptions({\n      touchEnabled: this._getOption(\"touchEnabled\", true),\n      wheelEnabled: this._getOption(\"wheelEnabled\", true)\n    });\n  },\n\n  getLayers() {\n    return this._layerCollection.items().map(l => l.proxy);\n  },\n\n  getLayerByIndex: function (index) {\n    var layer = this._layerCollection.byIndex(index);\n\n    return layer ? layer.proxy : null;\n  },\n  getLayerByName: function (name) {\n    var layer = this._layerCollection.byName(name);\n\n    return layer ? layer.proxy : null;\n  },\n  clearSelection: function (_noEvent) {\n    var layers = this._layerCollection.items();\n\n    var i;\n    var ii = layers.length;\n\n    for (i = 0; i < ii; ++i) {\n      layers[i].clearSelection(_noEvent);\n    }\n\n    return this;\n  },\n  center: function (value) {\n    if (void 0 === value) {\n      return this._projection.getCenter();\n    } else {\n      this._projection.setCenter(value);\n\n      return this;\n    }\n  },\n  zoomFactor: function (value) {\n    if (void 0 === value) {\n      return this._projection.getZoom();\n    } else {\n      this._projection.setZoom(value);\n\n      return this;\n    }\n  },\n  viewport: function (value) {\n    if (void 0 === value) {\n      return this._projection.getViewport();\n    } else {\n      this._projection.setViewport(value);\n\n      return this;\n    }\n  },\n  convertCoordinates: function (coordinates) {\n    coordinates = coordinates && coordinates.length ? coordinates : [arguments[0], arguments[1]];\n    return this.convertToGeo(coordinates[0], coordinates[1]);\n  },\n  convertToGeo: function (x, y) {\n    return this._projection.fromScreenPoint([x, y]);\n  },\n  convertToXY: function (longitude, latitude) {\n    return this._projection.toScreenPoint([longitude, latitude]);\n  }\n});\nimport componentRegistrator from \"../../core/component_registrator\";\ncomponentRegistrator(\"dxVectorMap\", dxVectorMap);\nexport default dxVectorMap;\nimport { plugin as ExportPlugin } from \"../core/export\";\nimport { plugin as TitlePlugin } from \"../core/title\";\nimport { plugin as TooltipPlugin } from \"../core/tooltip\";\nimport { plugin as LoadingIndicatorPlugin } from \"../core/loading_indicator\";\nimport { plugins as annotationsPlugins } from \"../core/annotations\";\ndxVectorMap.addPlugin(ExportPlugin);\ndxVectorMap.addPlugin(TitlePlugin);\ndxVectorMap.addPlugin(TooltipPlugin);\ndxVectorMap.addPlugin(LoadingIndicatorPlugin);\ndxVectorMap.addPlugin(annotationsPlugins.core);\ndxVectorMap.addPlugin(annotationsPlugins.vectorMap);","map":{"version":3,"names":["parseScalar","_parseScalar","Projection","ControlBar","GestureHandler","Tracker","DataExchanger","LegendsControl","LayoutControl","MapLayerCollection","getMaxBound","TooltipViewer","generateDataKey","DEFAULT_WIDTH","DEFAULT_HEIGHT","RE_STARTS_LAYERS","RE_ENDS_DATA_SOURCE","BaseWidget","mergeBounds","sumBounds","dataBounds","Math","min","max","dxVectorMap","inherit","_eventsMap","onClick","name","onCenterChanged","onZoomFactorChanged","onHoverChanged","onSelectionChanged","_rootClassPrefix","_rootClass","_themeSection","_fontFields","_initLayerCollection","dataKey","that","_layerCollection","renderer","_renderer","projection","_projection","themeManager","_themeManager","tracker","_tracker","eventTrigger","_eventTrigger","dataExchanger","_dataExchanger","tooltip","_tooltip","notifyDirty","_notifyDirty","notifyReady","_notifyReady","dataReady","bounds","option","_preventProjectionEvents","_getBoundsFromData","setBounds","_allowProjectionEvents","ceil","floor","longitudeLength","latitudeLength","setEngine","to","coordinates","from","_getBoundingBoxFromDataSource","boundsByData","getLayers","map","l","getBounds","_initLegendsControl","_legendsControl","container","_root","widget","layoutControl","_layoutControl","_initControlBar","_controlBar","_initElements","notifyCounter","preventProjectionEvents","_resetIsReady","_drawn","centerChanged","value","center","zoomChanged","zoomFactor","root","_gestureHandler","suspend","_createHtmlStructure","_prepareExtraElements","_tooltipViewer","layerCollection","_change_RESUME_LAYOUT","resume","_initialChanges","_layoutChangesOrder","_customChangesOrder","_initCore","attr","align","cursor","_disposeCore","dispose","_setupInteraction","options","centeringEnabled","_getOption","zoomingEnabled","setInteraction","_getDefaultSize","width","height","_applySize","rect","layout","left","top","right","bottom","setSize","setRect","_requestChange","_optionChanging","currentValue","nextValue","test","dataSource","_applyChanges","callBase","apply","arguments","_optionChangesMap","background","layers","extraElements","controlBar","legends","touchEnabled","wheelEnabled","panningEnabled","maxZoomFactor","_optionChangesOrder","_change_PROJECTION","_setProjection","_change_BOUNDS","_setBounds","_change_MAX_ZOOM_FACTOR","_setMaxZoom","_change_ZOOM_FACTOR","_setZoom","_change_CENTER","_setCenter","_change_BACKGROUND","_setBackgroundOptions","_change_LAYERS","_setLayerCollectionOptions","_change_CONTROL_BAR","_setControlBarOptions","_change_EXTRA_ELEMENTS","_renderExtraElements","_change_LEGENDS","_setLegendsOptions","_change_TRACKER","_setTrackerOptions","_change_INTERACTION","_themeDependentChanges","setMaxZoom","setZoom","setCenter","setBackgroundOptions","setOptions","items","infinityBounds","resultBBox","length","reduce","sumBBox","layerData","getData","itemCount","count","rootBBox","getBBox","i","proxy","getLayerByIndex","index","layer","byIndex","getLayerByName","byName","clearSelection","_noEvent","ii","getCenter","getZoom","viewport","getViewport","setViewport","convertCoordinates","convertToGeo","x","y","fromScreenPoint","convertToXY","longitude","latitude","toScreenPoint","componentRegistrator","plugin","ExportPlugin","TitlePlugin","TooltipPlugin","LoadingIndicatorPlugin","plugins","annotationsPlugins","addPlugin","core","vectorMap"],"sources":["E:/MisaProject/W2022_06/misa_emis/node_modules/devextreme/esm/viz/vector_map/vector_map.js"],"sourcesContent":["/**\r\n * DevExtreme (esm/viz/vector_map/vector_map.js)\r\n * Version: 22.1.4\r\n * Build date: Fri Jul 22 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport {\r\n    parseScalar as _parseScalar\r\n} from \"../core/utils\";\r\nimport {\r\n    Projection\r\n} from \"./projection.main\";\r\nimport {\r\n    ControlBar\r\n} from \"./control_bar\";\r\nimport {\r\n    GestureHandler\r\n} from \"./gesture_handler\";\r\nimport {\r\n    Tracker\r\n} from \"./tracker\";\r\nimport {\r\n    DataExchanger\r\n} from \"./data_exchanger\";\r\nimport {\r\n    LegendsControl\r\n} from \"./legend\";\r\nimport {\r\n    LayoutControl\r\n} from \"./layout\";\r\nimport {\r\n    MapLayerCollection,\r\n    getMaxBound\r\n} from \"./map_layer\";\r\nimport {\r\n    TooltipViewer\r\n} from \"./tooltip_viewer\";\r\nimport {\r\n    generateDataKey\r\n} from \"./vector_map.utils\";\r\nvar DEFAULT_WIDTH = 800;\r\nvar DEFAULT_HEIGHT = 400;\r\nvar RE_STARTS_LAYERS = /^layers/;\r\nvar RE_ENDS_DATA_SOURCE = /\\.dataSource$/;\r\nimport \"./projection\";\r\nimport BaseWidget from \"../core/base_widget\";\r\n\r\nfunction mergeBounds(sumBounds, dataBounds) {\r\n    return dataBounds ? [Math.min(dataBounds[0], dataBounds[2], sumBounds[0]), Math.min(dataBounds[1], dataBounds[3], sumBounds[3]), Math.max(dataBounds[0], dataBounds[2], sumBounds[2]), Math.max(dataBounds[1], dataBounds[3], sumBounds[1])] : sumBounds\r\n}\r\nvar dxVectorMap = BaseWidget.inherit({\r\n    _eventsMap: {\r\n        onClick: {\r\n            name: \"click\"\r\n        },\r\n        onCenterChanged: {\r\n            name: \"centerChanged\"\r\n        },\r\n        onZoomFactorChanged: {\r\n            name: \"zoomFactorChanged\"\r\n        },\r\n        onHoverChanged: {\r\n            name: \"hoverChanged\"\r\n        },\r\n        onSelectionChanged: {\r\n            name: \"selectionChanged\"\r\n        }\r\n    },\r\n    _rootClassPrefix: \"dxm\",\r\n    _rootClass: \"dxm-vector-map\",\r\n    _themeSection: \"map\",\r\n    _fontFields: [\"layer:area.label.font\", \"layer:marker:dot.label.font\", \"layer:marker:bubble.label.font\", \"layer:marker:pie.label.font\", \"layer:marker:image.label.font\", \"legend.font\", \"legend.title.font\", \"legend.title.subtitle.font\"],\r\n    _initLayerCollection: function(dataKey) {\r\n        var that = this;\r\n        that._layerCollection = new MapLayerCollection({\r\n            renderer: that._renderer,\r\n            projection: that._projection,\r\n            themeManager: that._themeManager,\r\n            tracker: that._tracker,\r\n            dataKey: dataKey,\r\n            eventTrigger: that._eventTrigger,\r\n            dataExchanger: that._dataExchanger,\r\n            tooltip: that._tooltip,\r\n            notifyDirty: that._notifyDirty,\r\n            notifyReady: that._notifyReady,\r\n            dataReady() {\r\n                var bounds;\r\n                if (that.option(\"getBoundsFromData\") && !that.option(\"bounds\")) {\r\n                    that._preventProjectionEvents();\r\n                    bounds = that._getBoundsFromData();\r\n                    that._projection.setBounds(bounds);\r\n                    that._allowProjectionEvents()\r\n                }\r\n                if (!that.option(\"projection\")) {\r\n                    bounds = bounds || that._getBoundsFromData();\r\n                    if (Math.ceil(bounds[0]) < -180 || Math.ceil(bounds[3]) < -90 || Math.floor(bounds[2]) > 180 || Math.floor(bounds[1]) > 90) {\r\n                        var longitudeLength = bounds[2] - bounds[0];\r\n                        var latitudeLength = bounds[1] - bounds[3];\r\n                        that._projection.setEngine({\r\n                            to: coordinates => [2 * (coordinates[0] - bounds[0]) / longitudeLength - 1, 2 * (coordinates[1] - bounds[3]) / latitudeLength - 1],\r\n                            from: coordinates => [(coordinates[0] + 1) * longitudeLength / 2 + bounds[0], (coordinates[1] + 1) * latitudeLength / 2 + bounds[3]]\r\n                        })\r\n                    }\r\n                }\r\n            }\r\n        })\r\n    },\r\n    _getBoundsFromData() {\r\n        var bounds = this._getBoundingBoxFromDataSource();\r\n        if (!bounds) {\r\n            var boundsByData = getMaxBound(this.getLayers().map(l => l.getBounds()));\r\n            if (boundsByData) {\r\n                bounds = boundsByData\r\n            }\r\n        }\r\n        bounds = bounds || [];\r\n        bounds = [bounds[0], bounds[3], bounds[2], bounds[1]];\r\n        return bounds\r\n    },\r\n    _initLegendsControl: function() {\r\n        this._legendsControl = new LegendsControl({\r\n            renderer: this._renderer,\r\n            container: this._root,\r\n            widget: this,\r\n            layoutControl: this._layoutControl,\r\n            themeManager: this._themeManager,\r\n            dataExchanger: this._dataExchanger,\r\n            notifyDirty: this._notifyDirty,\r\n            notifyReady: this._notifyReady\r\n        })\r\n    },\r\n    _initControlBar: function(dataKey) {\r\n        this._controlBar = new ControlBar({\r\n            renderer: this._renderer,\r\n            container: this._root,\r\n            layoutControl: this._layoutControl,\r\n            projection: this._projection,\r\n            tracker: this._tracker,\r\n            dataKey: dataKey\r\n        })\r\n    },\r\n    _initElements: function() {\r\n        var that = this;\r\n        var dataKey = generateDataKey();\r\n        var notifyCounter = 0;\r\n        var preventProjectionEvents;\r\n        that._preventProjectionEvents = function() {\r\n            preventProjectionEvents = true\r\n        };\r\n        that._allowProjectionEvents = function() {\r\n            preventProjectionEvents = false\r\n        };\r\n        that._notifyDirty = function() {\r\n            that._resetIsReady();\r\n            ++notifyCounter\r\n        };\r\n        that._notifyReady = function() {\r\n            that._allowProjectionEvents();\r\n            if (0 === --notifyCounter) {\r\n                that._drawn()\r\n            }\r\n        };\r\n        that._preventProjectionEvents();\r\n        that._dataExchanger = new DataExchanger;\r\n        that._projection = new Projection({\r\n            centerChanged: function(value) {\r\n                if (!preventProjectionEvents) {\r\n                    that._eventTrigger(\"centerChanged\", {\r\n                        center: value\r\n                    })\r\n                }\r\n            },\r\n            zoomChanged: function(value) {\r\n                if (!preventProjectionEvents) {\r\n                    that._eventTrigger(\"zoomFactorChanged\", {\r\n                        zoomFactor: value\r\n                    })\r\n                }\r\n            }\r\n        });\r\n        that._tracker = new Tracker({\r\n            root: that._root,\r\n            projection: that._projection,\r\n            dataKey: dataKey\r\n        });\r\n        that._gestureHandler = new GestureHandler({\r\n            projection: that._projection,\r\n            renderer: that._renderer,\r\n            tracker: that._tracker\r\n        });\r\n        that._layoutControl = new LayoutControl(that);\r\n        that._layoutControl.suspend();\r\n        that._initLayerCollection(dataKey);\r\n        that._createHtmlStructure();\r\n        that._initControlBar(dataKey);\r\n        that._initLegendsControl();\r\n        that._prepareExtraElements();\r\n        that._tooltipViewer = new TooltipViewer({\r\n            tracker: that._tracker,\r\n            tooltip: that._tooltip,\r\n            layerCollection: that._layerCollection\r\n        })\r\n    },\r\n    _change_RESUME_LAYOUT: function() {\r\n        this._layoutControl.resume()\r\n    },\r\n    _initialChanges: [\"PROJECTION\", \"RESUME_LAYOUT\", \"LAYOUT_INIT\", \"BOUNDS\", \"MAX_ZOOM_FACTOR\", \"ZOOM_FACTOR\", \"CENTER\"],\r\n    _layoutChangesOrder: [\"RESUME_LAYOUT\", \"LAYERS\"],\r\n    _customChangesOrder: [\"EXTRA_ELEMENTS\"],\r\n    _initCore: function() {\r\n        this._root = this._renderer.root.attr({\r\n            align: \"center\",\r\n            cursor: \"default\"\r\n        });\r\n        this._initElements()\r\n    },\r\n    _disposeCore: function() {\r\n        this._controlBar.dispose();\r\n        this._gestureHandler.dispose();\r\n        this._tracker.dispose();\r\n        this._legendsControl.dispose();\r\n        this._layerCollection.dispose();\r\n        this._layoutControl.dispose();\r\n        this._tooltipViewer.dispose();\r\n        this._dataExchanger.dispose();\r\n        this._projection.dispose();\r\n        this._dataExchanger = this._gestureHandler = this._projection = this._tracker = this._layoutControl = this._root = this._layerCollection = this._controlBar = this._legendsControl = null\r\n    },\r\n    _setupInteraction: function() {\r\n        var options = {\r\n            centeringEnabled: !!_parseScalar(this._getOption(\"panningEnabled\", true), true),\r\n            zoomingEnabled: !!_parseScalar(this._getOption(\"zoomingEnabled\", true), true)\r\n        };\r\n        this._gestureHandler.setInteraction(options);\r\n        this._controlBar.setInteraction(options)\r\n    },\r\n    _getDefaultSize: function() {\r\n        return {\r\n            width: DEFAULT_WIDTH,\r\n            height: DEFAULT_HEIGHT\r\n        }\r\n    },\r\n    _applySize: function(rect) {\r\n        var layout = {\r\n            left: rect[0],\r\n            top: rect[1],\r\n            width: rect[2] - rect[0],\r\n            height: rect[3] - rect[1],\r\n            right: 0,\r\n            bottom: 0\r\n        };\r\n        this._projection.setSize(layout);\r\n        this._layoutControl.setSize(layout);\r\n        this._layerCollection.setRect([layout.left, layout.top, layout.width, layout.height]);\r\n        this._requestChange([\"EXTRA_ELEMENTS\"])\r\n    },\r\n    _optionChanging: function(name, currentValue, nextValue) {\r\n        if (currentValue && nextValue) {\r\n            if (RE_STARTS_LAYERS.test(name)) {\r\n                if (currentValue.dataSource && nextValue.dataSource && currentValue !== nextValue) {\r\n                    currentValue.dataSource = null\r\n                } else if (RE_ENDS_DATA_SOURCE.test(name)) {\r\n                    this.option(name, null)\r\n                }\r\n            }\r\n        }\r\n    },\r\n    _applyChanges: function() {\r\n        this._notifyDirty();\r\n        this.callBase.apply(this, arguments);\r\n        this._notifyReady()\r\n    },\r\n    _optionChangesMap: {\r\n        background: \"BACKGROUND\",\r\n        layers: \"LAYERS\",\r\n        extraElements: \"EXTRA_ELEMENTS\",\r\n        controlBar: \"CONTROL_BAR\",\r\n        legends: \"LEGENDS\",\r\n        touchEnabled: \"TRACKER\",\r\n        wheelEnabled: \"TRACKER\",\r\n        panningEnabled: \"INTERACTION\",\r\n        zoomingEnabled: \"INTERACTION\",\r\n        projection: \"PROJECTION\",\r\n        bounds: \"BOUNDS\",\r\n        maxZoomFactor: \"MAX_ZOOM_FACTOR\",\r\n        zoomFactor: \"ZOOM_FACTOR\",\r\n        center: \"CENTER\"\r\n    },\r\n    _optionChangesOrder: [\"PROJECTION\", \"BOUNDS\", \"MAX_ZOOM_FACTOR\", \"ZOOM_FACTOR\", \"CENTER\", \"BACKGROUND\", \"CONTROL_BAR\", \"LEGENDS\", \"TRACKER\", \"INTERACTION\"],\r\n    _change_PROJECTION: function() {\r\n        this._setProjection()\r\n    },\r\n    _change_BOUNDS: function() {\r\n        this._setBounds()\r\n    },\r\n    _change_MAX_ZOOM_FACTOR: function() {\r\n        this._setMaxZoom()\r\n    },\r\n    _change_ZOOM_FACTOR: function() {\r\n        this._setZoom()\r\n    },\r\n    _change_CENTER: function() {\r\n        this._setCenter()\r\n    },\r\n    _change_BACKGROUND: function() {\r\n        this._setBackgroundOptions()\r\n    },\r\n    _change_LAYERS: function() {\r\n        this._setLayerCollectionOptions()\r\n    },\r\n    _change_CONTROL_BAR: function() {\r\n        this._setControlBarOptions()\r\n    },\r\n    _change_EXTRA_ELEMENTS: function() {\r\n        this._renderExtraElements()\r\n    },\r\n    _change_LEGENDS: function() {\r\n        this._setLegendsOptions()\r\n    },\r\n    _change_TRACKER: function() {\r\n        this._setTrackerOptions()\r\n    },\r\n    _change_INTERACTION: function() {\r\n        this._setupInteraction()\r\n    },\r\n    _themeDependentChanges: [\"BACKGROUND\", \"LAYERS\", \"CONTROL_BAR\", \"LEGENDS\", \"TRACKER\", \"INTERACTION\"],\r\n    _setProjection: function() {\r\n        this._projection.setEngine(this.option(\"projection\"))\r\n    },\r\n    _setBounds: function() {\r\n        this._projection.setBounds(this.option(\"bounds\"))\r\n    },\r\n    _setMaxZoom: function() {\r\n        this._projection.setMaxZoom(this.option(\"maxZoomFactor\"))\r\n    },\r\n    _setZoom: function() {\r\n        this._projection.setZoom(this.option(\"zoomFactor\"))\r\n    },\r\n    _setCenter: function() {\r\n        this._projection.setCenter(this.option(\"center\"))\r\n    },\r\n    _setBackgroundOptions: function() {\r\n        this._layerCollection.setBackgroundOptions(this._getOption(\"background\"))\r\n    },\r\n    _setLayerCollectionOptions: function() {\r\n        this._layerCollection.setOptions(this.option(\"layers\"))\r\n    },\r\n    _getBoundingBoxFromDataSource() {\r\n        var layers = this._layerCollection.items();\r\n        var infinityBounds = [1 / 0, -1 / 0, -1 / 0, 1 / 0];\r\n        var resultBBox = layers && layers.length ? layers.reduce((sumBBox, l) => {\r\n            var layerData = l.getData();\r\n            var itemCount = layerData.count();\r\n            if (itemCount > 0) {\r\n                var rootBBox = layerData.getBBox();\r\n                if (rootBBox) {\r\n                    sumBBox = mergeBounds(sumBBox, rootBBox)\r\n                } else {\r\n                    for (var i = 0; i < itemCount; i++) {\r\n                        sumBBox = mergeBounds(sumBBox, layerData.getBBox(i))\r\n                    }\r\n                }\r\n            }\r\n            return sumBBox\r\n        }, infinityBounds) : void 0;\r\n        return resultBBox === infinityBounds ? void 0 : resultBBox\r\n    },\r\n    _setControlBarOptions: function() {\r\n        this._controlBar.setOptions(this._getOption(\"controlBar\"))\r\n    },\r\n    _setLegendsOptions: function() {\r\n        this._legendsControl.setOptions(this.option(\"legends\"))\r\n    },\r\n    _setTrackerOptions: function() {\r\n        this._tracker.setOptions({\r\n            touchEnabled: this._getOption(\"touchEnabled\", true),\r\n            wheelEnabled: this._getOption(\"wheelEnabled\", true)\r\n        })\r\n    },\r\n    getLayers() {\r\n        return this._layerCollection.items().map(l => l.proxy)\r\n    },\r\n    getLayerByIndex: function(index) {\r\n        var layer = this._layerCollection.byIndex(index);\r\n        return layer ? layer.proxy : null\r\n    },\r\n    getLayerByName: function(name) {\r\n        var layer = this._layerCollection.byName(name);\r\n        return layer ? layer.proxy : null\r\n    },\r\n    clearSelection: function(_noEvent) {\r\n        var layers = this._layerCollection.items();\r\n        var i;\r\n        var ii = layers.length;\r\n        for (i = 0; i < ii; ++i) {\r\n            layers[i].clearSelection(_noEvent)\r\n        }\r\n        return this\r\n    },\r\n    center: function(value) {\r\n        if (void 0 === value) {\r\n            return this._projection.getCenter()\r\n        } else {\r\n            this._projection.setCenter(value);\r\n            return this\r\n        }\r\n    },\r\n    zoomFactor: function(value) {\r\n        if (void 0 === value) {\r\n            return this._projection.getZoom()\r\n        } else {\r\n            this._projection.setZoom(value);\r\n            return this\r\n        }\r\n    },\r\n    viewport: function(value) {\r\n        if (void 0 === value) {\r\n            return this._projection.getViewport()\r\n        } else {\r\n            this._projection.setViewport(value);\r\n            return this\r\n        }\r\n    },\r\n    convertCoordinates: function(coordinates) {\r\n        coordinates = coordinates && coordinates.length ? coordinates : [arguments[0], arguments[1]];\r\n        return this.convertToGeo(coordinates[0], coordinates[1])\r\n    },\r\n    convertToGeo: function(x, y) {\r\n        return this._projection.fromScreenPoint([x, y])\r\n    },\r\n    convertToXY: function(longitude, latitude) {\r\n        return this._projection.toScreenPoint([longitude, latitude])\r\n    }\r\n});\r\nimport componentRegistrator from \"../../core/component_registrator\";\r\ncomponentRegistrator(\"dxVectorMap\", dxVectorMap);\r\nexport default dxVectorMap;\r\nimport {\r\n    plugin as ExportPlugin\r\n} from \"../core/export\";\r\nimport {\r\n    plugin as TitlePlugin\r\n} from \"../core/title\";\r\nimport {\r\n    plugin as TooltipPlugin\r\n} from \"../core/tooltip\";\r\nimport {\r\n    plugin as LoadingIndicatorPlugin\r\n} from \"../core/loading_indicator\";\r\nimport {\r\n    plugins as annotationsPlugins\r\n} from \"../core/annotations\";\r\ndxVectorMap.addPlugin(ExportPlugin);\r\ndxVectorMap.addPlugin(TitlePlugin);\r\ndxVectorMap.addPlugin(TooltipPlugin);\r\ndxVectorMap.addPlugin(LoadingIndicatorPlugin);\r\ndxVectorMap.addPlugin(annotationsPlugins.core);\r\ndxVectorMap.addPlugin(annotationsPlugins.vectorMap);\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}