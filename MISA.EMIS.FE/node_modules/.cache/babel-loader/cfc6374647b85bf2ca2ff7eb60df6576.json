{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/selection/selection.strategy.deferred.js)\r\n * Version: 22.1.4\r\n * Build date: Fri Jul 22 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport { isString } from \"../../core/utils/type\";\nimport SelectionStrategy from \"./selection.strategy\";\nimport errors from \"../widget/ui.errors\";\nimport dataQuery from \"../../data/query\";\nimport { Deferred } from \"../../core/utils/deferred\";\nexport default SelectionStrategy.inherit({\n  getSelectedItems: function () {\n    return this._loadFilteredData(this.options.selectionFilter);\n  },\n  getSelectedItemKeys: function () {\n    var d = new Deferred();\n    var that = this;\n    var key = this.options.key();\n    var select = isString(key) ? [key] : key;\n\n    this._loadFilteredData(this.options.selectionFilter, null, select).done(function (items) {\n      var keys = items.map(function (item) {\n        return that.options.keyOf(item);\n      });\n      d.resolve(keys);\n    }).fail(d.reject);\n\n    return d.promise();\n  },\n  selectedItemKeys: function (keys, preserve, isDeselect, isSelectAll) {\n    if (isSelectAll) {\n      var filter = this.options.filter();\n      var needResetSelectionFilter = !filter || JSON.stringify(filter) === JSON.stringify(this.options.selectionFilter) && isDeselect;\n\n      if (needResetSelectionFilter) {\n        this._setOption(\"selectionFilter\", isDeselect ? [] : null);\n      } else {\n        this._addSelectionFilter(isDeselect, filter, isSelectAll);\n      }\n    } else {\n      if (!preserve) {\n        this._setOption(\"selectionFilter\", []);\n      }\n\n      for (var i = 0; i < keys.length; i++) {\n        if (isDeselect) {\n          this.removeSelectedItem(keys[i]);\n        } else {\n          this.addSelectedItem(keys[i]);\n        }\n      }\n    }\n\n    this.onSelectionChanged();\n    return new Deferred().resolve();\n  },\n  setSelectedItems: function (keys) {\n    this._setOption(\"selectionFilter\", null);\n\n    for (var i = 0; i < keys.length; i++) {\n      this.addSelectedItem(keys[i]);\n    }\n  },\n  isItemDataSelected: function (itemData) {\n    return this.isItemKeySelected(itemData);\n  },\n  isItemKeySelected: function (itemData) {\n    var selectionFilter = this.options.selectionFilter;\n\n    if (!selectionFilter) {\n      return true;\n    }\n\n    return !!dataQuery([itemData]).filter(selectionFilter).toArray().length;\n  },\n  _getKeyExpr: function () {\n    var keyField = this.options.key();\n\n    if (Array.isArray(keyField) && 1 === keyField.length) {\n      return keyField[0];\n    }\n\n    return keyField;\n  },\n  _normalizeKey: function (key) {\n    var keyExpr = this.options.key();\n\n    if (Array.isArray(keyExpr) && 1 === keyExpr.length) {\n      return key[keyExpr[0]];\n    }\n\n    return key;\n  },\n  _getFilterByKey: function (key) {\n    var keyField = this._getKeyExpr();\n\n    var filter = [keyField, \"=\", this._normalizeKey(key)];\n\n    if (Array.isArray(keyField)) {\n      filter = [];\n\n      for (var i = 0; i < keyField.length; i++) {\n        filter.push([keyField[i], \"=\", key[keyField[i]]]);\n\n        if (i !== keyField.length - 1) {\n          filter.push(\"and\");\n        }\n      }\n    }\n\n    return filter;\n  },\n  addSelectedItem: function (key) {\n    var filter = this._getFilterByKey(key);\n\n    this._addSelectionFilter(false, filter);\n  },\n  removeSelectedItem: function (key) {\n    var filter = this._getFilterByKey(key);\n\n    this._addSelectionFilter(true, filter);\n  },\n  validate: function () {\n    var key = this.options.key;\n\n    if (key && void 0 === key()) {\n      throw errors.Error(\"E1042\", \"Deferred selection\");\n    }\n  },\n  _findSubFilter: function (selectionFilter, filter) {\n    if (!selectionFilter) {\n      return -1;\n    }\n\n    var filterString = JSON.stringify(filter);\n\n    for (var index = 0; index < selectionFilter.length; index++) {\n      var subFilter = selectionFilter[index];\n\n      if (subFilter && JSON.stringify(subFilter) === filterString) {\n        return index;\n      }\n    }\n\n    return -1;\n  },\n  _isLastSubFilter: function (selectionFilter, filter) {\n    if (selectionFilter && filter) {\n      return this._findSubFilter(selectionFilter, filter) === selectionFilter.length - 1 || 0 === this._findSubFilter([selectionFilter], filter);\n    }\n\n    return false;\n  },\n  _addFilterOperator: function (selectionFilter, filterOperator) {\n    if (selectionFilter.length > 1 && isString(selectionFilter[1]) && selectionFilter[1] !== filterOperator) {\n      selectionFilter = [selectionFilter];\n    }\n\n    if (selectionFilter.length) {\n      selectionFilter.push(filterOperator);\n    }\n\n    return selectionFilter;\n  },\n  _denormalizeFilter: function (filter) {\n    if (filter && isString(filter[0])) {\n      filter = [filter];\n    }\n\n    return filter;\n  },\n  _isOnlyNegativeFiltersLeft: function (filters) {\n    return filters.every((filterItem, i) => {\n      if (i % 2 === 0) {\n        return Array.isArray(filterItem) && \"!\" === filterItem[0];\n      } else {\n        return \"and\" === filterItem;\n      }\n    });\n  },\n  _addSelectionFilter: function (isDeselect, filter, isSelectAll) {\n    var currentFilter = isDeselect ? [\"!\", filter] : filter;\n    var currentOperation = isDeselect ? \"and\" : \"or\";\n    var needAddFilter = true;\n    var selectionFilter = this.options.selectionFilter || [];\n    selectionFilter = this._denormalizeFilter(selectionFilter);\n\n    if (selectionFilter && selectionFilter.length) {\n      var removedIndex = this._removeSameFilter(selectionFilter, filter, isDeselect, isSelectAll);\n\n      var filterIndex = this._removeSameFilter(selectionFilter, filter, !isDeselect);\n\n      var shouldCleanFilter = isDeselect && (-1 !== removedIndex || -1 !== filterIndex) && this._isOnlyNegativeFiltersLeft(selectionFilter);\n\n      if (shouldCleanFilter) {\n        selectionFilter = [];\n      }\n\n      var isKeyOperatorsAfterRemoved = this._isKeyFilter(filter) && this._hasKeyFiltersOnlyStartingFromIndex(selectionFilter, filterIndex);\n\n      needAddFilter = filter.length && !isKeyOperatorsAfterRemoved;\n\n      if (needAddFilter) {\n        selectionFilter = this._addFilterOperator(selectionFilter, currentOperation);\n      }\n    }\n\n    if (needAddFilter) {\n      selectionFilter.push(currentFilter);\n    }\n\n    selectionFilter = this._normalizeFilter(selectionFilter);\n\n    this._setOption(\"selectionFilter\", !isDeselect && !selectionFilter.length ? null : selectionFilter);\n  },\n  _normalizeFilter: function (filter) {\n    if (filter && 1 === filter.length) {\n      filter = filter[0];\n    }\n\n    return filter;\n  },\n  _removeFilterByIndex: function (filter, filterIndex, isSelectAll) {\n    var operation = filter[1];\n\n    if (filterIndex > 0) {\n      filter.splice(filterIndex - 1, 2);\n    } else {\n      filter.splice(filterIndex, 2);\n    }\n\n    if (isSelectAll && \"and\" === operation) {\n      filter.splice(0, filter.length);\n    }\n  },\n  _isSimpleKeyFilter: function (filter, key) {\n    return 3 === filter.length && filter[0] === key && \"=\" === filter[1];\n  },\n  _isKeyFilter: function (filter) {\n    if (2 === filter.length && \"!\" === filter[0]) {\n      return this._isKeyFilter(filter[1]);\n    }\n\n    var keyField = this._getKeyExpr();\n\n    if (Array.isArray(keyField)) {\n      if (filter.length !== 2 * keyField.length - 1) {\n        return false;\n      }\n\n      for (var i = 0; i < keyField.length; i++) {\n        if (i > 0 && \"and\" !== filter[2 * i - 1]) {\n          return false;\n        }\n\n        if (!this._isSimpleKeyFilter(filter[2 * i], keyField[i])) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n\n    return this._isSimpleKeyFilter(filter, keyField);\n  },\n  _hasKeyFiltersOnlyStartingFromIndex: function (selectionFilter, filterIndex) {\n    if (filterIndex >= 0) {\n      for (var i = filterIndex; i < selectionFilter.length; i++) {\n        if (\"string\" !== typeof selectionFilter[i] && !this._isKeyFilter(selectionFilter[i])) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n\n    return false;\n  },\n  _removeSameFilter: function (selectionFilter, filter, inverted, isSelectAll) {\n    filter = inverted ? [\"!\", filter] : filter;\n\n    if (JSON.stringify(filter) === JSON.stringify(selectionFilter)) {\n      selectionFilter.splice(0, selectionFilter.length);\n      return 0;\n    }\n\n    var filterIndex = this._findSubFilter(selectionFilter, filter);\n\n    if (filterIndex >= 0) {\n      this._removeFilterByIndex(selectionFilter, filterIndex, isSelectAll);\n\n      return filterIndex;\n    } else {\n      for (var i = 0; i < selectionFilter.length; i++) {\n        if (Array.isArray(selectionFilter[i]) && selectionFilter[i].length > 2) {\n          var _filterIndex = this._removeSameFilter(selectionFilter[i], filter, false, isSelectAll);\n\n          if (_filterIndex >= 0) {\n            if (!selectionFilter[i].length) {\n              this._removeFilterByIndex(selectionFilter, i, isSelectAll);\n            } else if (1 === selectionFilter[i].length) {\n              selectionFilter[i] = selectionFilter[i][0];\n            }\n\n            return _filterIndex;\n          }\n        }\n      }\n\n      return -1;\n    }\n  },\n  getSelectAllState: function () {\n    var filter = this.options.filter();\n    var selectionFilter = this.options.selectionFilter;\n\n    if (!selectionFilter) {\n      return true;\n    }\n\n    if (!selectionFilter.length) {\n      return false;\n    }\n\n    if (!filter || !filter.length) {\n      return;\n    }\n\n    selectionFilter = this._denormalizeFilter(selectionFilter);\n\n    if (this._isLastSubFilter(selectionFilter, filter)) {\n      return true;\n    }\n\n    if (this._isLastSubFilter(selectionFilter, [\"!\", filter])) {\n      return false;\n    }\n\n    return;\n  }\n});","map":{"version":3,"names":["isString","SelectionStrategy","errors","dataQuery","Deferred","inherit","getSelectedItems","_loadFilteredData","options","selectionFilter","getSelectedItemKeys","d","that","key","select","done","items","keys","map","item","keyOf","resolve","fail","reject","promise","selectedItemKeys","preserve","isDeselect","isSelectAll","filter","needResetSelectionFilter","JSON","stringify","_setOption","_addSelectionFilter","i","length","removeSelectedItem","addSelectedItem","onSelectionChanged","setSelectedItems","isItemDataSelected","itemData","isItemKeySelected","toArray","_getKeyExpr","keyField","Array","isArray","_normalizeKey","keyExpr","_getFilterByKey","push","validate","Error","_findSubFilter","filterString","index","subFilter","_isLastSubFilter","_addFilterOperator","filterOperator","_denormalizeFilter","_isOnlyNegativeFiltersLeft","filters","every","filterItem","currentFilter","currentOperation","needAddFilter","removedIndex","_removeSameFilter","filterIndex","shouldCleanFilter","isKeyOperatorsAfterRemoved","_isKeyFilter","_hasKeyFiltersOnlyStartingFromIndex","_normalizeFilter","_removeFilterByIndex","operation","splice","_isSimpleKeyFilter","inverted","_filterIndex","getSelectAllState"],"sources":["E:/MisaProject/MISA_EMIS/MISA.EMIS.FE/node_modules/devextreme/esm/ui/selection/selection.strategy.deferred.js"],"sourcesContent":["/**\r\n * DevExtreme (esm/ui/selection/selection.strategy.deferred.js)\r\n * Version: 22.1.4\r\n * Build date: Fri Jul 22 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport {\r\n    isString\r\n} from \"../../core/utils/type\";\r\nimport SelectionStrategy from \"./selection.strategy\";\r\nimport errors from \"../widget/ui.errors\";\r\nimport dataQuery from \"../../data/query\";\r\nimport {\r\n    Deferred\r\n} from \"../../core/utils/deferred\";\r\nexport default SelectionStrategy.inherit({\r\n    getSelectedItems: function() {\r\n        return this._loadFilteredData(this.options.selectionFilter)\r\n    },\r\n    getSelectedItemKeys: function() {\r\n        var d = new Deferred;\r\n        var that = this;\r\n        var key = this.options.key();\r\n        var select = isString(key) ? [key] : key;\r\n        this._loadFilteredData(this.options.selectionFilter, null, select).done((function(items) {\r\n            var keys = items.map((function(item) {\r\n                return that.options.keyOf(item)\r\n            }));\r\n            d.resolve(keys)\r\n        })).fail(d.reject);\r\n        return d.promise()\r\n    },\r\n    selectedItemKeys: function(keys, preserve, isDeselect, isSelectAll) {\r\n        if (isSelectAll) {\r\n            var filter = this.options.filter();\r\n            var needResetSelectionFilter = !filter || JSON.stringify(filter) === JSON.stringify(this.options.selectionFilter) && isDeselect;\r\n            if (needResetSelectionFilter) {\r\n                this._setOption(\"selectionFilter\", isDeselect ? [] : null)\r\n            } else {\r\n                this._addSelectionFilter(isDeselect, filter, isSelectAll)\r\n            }\r\n        } else {\r\n            if (!preserve) {\r\n                this._setOption(\"selectionFilter\", [])\r\n            }\r\n            for (var i = 0; i < keys.length; i++) {\r\n                if (isDeselect) {\r\n                    this.removeSelectedItem(keys[i])\r\n                } else {\r\n                    this.addSelectedItem(keys[i])\r\n                }\r\n            }\r\n        }\r\n        this.onSelectionChanged();\r\n        return (new Deferred).resolve()\r\n    },\r\n    setSelectedItems: function(keys) {\r\n        this._setOption(\"selectionFilter\", null);\r\n        for (var i = 0; i < keys.length; i++) {\r\n            this.addSelectedItem(keys[i])\r\n        }\r\n    },\r\n    isItemDataSelected: function(itemData) {\r\n        return this.isItemKeySelected(itemData)\r\n    },\r\n    isItemKeySelected: function(itemData) {\r\n        var selectionFilter = this.options.selectionFilter;\r\n        if (!selectionFilter) {\r\n            return true\r\n        }\r\n        return !!dataQuery([itemData]).filter(selectionFilter).toArray().length\r\n    },\r\n    _getKeyExpr: function() {\r\n        var keyField = this.options.key();\r\n        if (Array.isArray(keyField) && 1 === keyField.length) {\r\n            return keyField[0]\r\n        }\r\n        return keyField\r\n    },\r\n    _normalizeKey: function(key) {\r\n        var keyExpr = this.options.key();\r\n        if (Array.isArray(keyExpr) && 1 === keyExpr.length) {\r\n            return key[keyExpr[0]]\r\n        }\r\n        return key\r\n    },\r\n    _getFilterByKey: function(key) {\r\n        var keyField = this._getKeyExpr();\r\n        var filter = [keyField, \"=\", this._normalizeKey(key)];\r\n        if (Array.isArray(keyField)) {\r\n            filter = [];\r\n            for (var i = 0; i < keyField.length; i++) {\r\n                filter.push([keyField[i], \"=\", key[keyField[i]]]);\r\n                if (i !== keyField.length - 1) {\r\n                    filter.push(\"and\")\r\n                }\r\n            }\r\n        }\r\n        return filter\r\n    },\r\n    addSelectedItem: function(key) {\r\n        var filter = this._getFilterByKey(key);\r\n        this._addSelectionFilter(false, filter)\r\n    },\r\n    removeSelectedItem: function(key) {\r\n        var filter = this._getFilterByKey(key);\r\n        this._addSelectionFilter(true, filter)\r\n    },\r\n    validate: function() {\r\n        var key = this.options.key;\r\n        if (key && void 0 === key()) {\r\n            throw errors.Error(\"E1042\", \"Deferred selection\")\r\n        }\r\n    },\r\n    _findSubFilter: function(selectionFilter, filter) {\r\n        if (!selectionFilter) {\r\n            return -1\r\n        }\r\n        var filterString = JSON.stringify(filter);\r\n        for (var index = 0; index < selectionFilter.length; index++) {\r\n            var subFilter = selectionFilter[index];\r\n            if (subFilter && JSON.stringify(subFilter) === filterString) {\r\n                return index\r\n            }\r\n        }\r\n        return -1\r\n    },\r\n    _isLastSubFilter: function(selectionFilter, filter) {\r\n        if (selectionFilter && filter) {\r\n            return this._findSubFilter(selectionFilter, filter) === selectionFilter.length - 1 || 0 === this._findSubFilter([selectionFilter], filter)\r\n        }\r\n        return false\r\n    },\r\n    _addFilterOperator: function(selectionFilter, filterOperator) {\r\n        if (selectionFilter.length > 1 && isString(selectionFilter[1]) && selectionFilter[1] !== filterOperator) {\r\n            selectionFilter = [selectionFilter]\r\n        }\r\n        if (selectionFilter.length) {\r\n            selectionFilter.push(filterOperator)\r\n        }\r\n        return selectionFilter\r\n    },\r\n    _denormalizeFilter: function(filter) {\r\n        if (filter && isString(filter[0])) {\r\n            filter = [filter]\r\n        }\r\n        return filter\r\n    },\r\n    _isOnlyNegativeFiltersLeft: function(filters) {\r\n        return filters.every((filterItem, i) => {\r\n            if (i % 2 === 0) {\r\n                return Array.isArray(filterItem) && \"!\" === filterItem[0]\r\n            } else {\r\n                return \"and\" === filterItem\r\n            }\r\n        })\r\n    },\r\n    _addSelectionFilter: function(isDeselect, filter, isSelectAll) {\r\n        var currentFilter = isDeselect ? [\"!\", filter] : filter;\r\n        var currentOperation = isDeselect ? \"and\" : \"or\";\r\n        var needAddFilter = true;\r\n        var selectionFilter = this.options.selectionFilter || [];\r\n        selectionFilter = this._denormalizeFilter(selectionFilter);\r\n        if (selectionFilter && selectionFilter.length) {\r\n            var removedIndex = this._removeSameFilter(selectionFilter, filter, isDeselect, isSelectAll);\r\n            var filterIndex = this._removeSameFilter(selectionFilter, filter, !isDeselect);\r\n            var shouldCleanFilter = isDeselect && (-1 !== removedIndex || -1 !== filterIndex) && this._isOnlyNegativeFiltersLeft(selectionFilter);\r\n            if (shouldCleanFilter) {\r\n                selectionFilter = []\r\n            }\r\n            var isKeyOperatorsAfterRemoved = this._isKeyFilter(filter) && this._hasKeyFiltersOnlyStartingFromIndex(selectionFilter, filterIndex);\r\n            needAddFilter = filter.length && !isKeyOperatorsAfterRemoved;\r\n            if (needAddFilter) {\r\n                selectionFilter = this._addFilterOperator(selectionFilter, currentOperation)\r\n            }\r\n        }\r\n        if (needAddFilter) {\r\n            selectionFilter.push(currentFilter)\r\n        }\r\n        selectionFilter = this._normalizeFilter(selectionFilter);\r\n        this._setOption(\"selectionFilter\", !isDeselect && !selectionFilter.length ? null : selectionFilter)\r\n    },\r\n    _normalizeFilter: function(filter) {\r\n        if (filter && 1 === filter.length) {\r\n            filter = filter[0]\r\n        }\r\n        return filter\r\n    },\r\n    _removeFilterByIndex: function(filter, filterIndex, isSelectAll) {\r\n        var operation = filter[1];\r\n        if (filterIndex > 0) {\r\n            filter.splice(filterIndex - 1, 2)\r\n        } else {\r\n            filter.splice(filterIndex, 2)\r\n        }\r\n        if (isSelectAll && \"and\" === operation) {\r\n            filter.splice(0, filter.length)\r\n        }\r\n    },\r\n    _isSimpleKeyFilter: function(filter, key) {\r\n        return 3 === filter.length && filter[0] === key && \"=\" === filter[1]\r\n    },\r\n    _isKeyFilter: function(filter) {\r\n        if (2 === filter.length && \"!\" === filter[0]) {\r\n            return this._isKeyFilter(filter[1])\r\n        }\r\n        var keyField = this._getKeyExpr();\r\n        if (Array.isArray(keyField)) {\r\n            if (filter.length !== 2 * keyField.length - 1) {\r\n                return false\r\n            }\r\n            for (var i = 0; i < keyField.length; i++) {\r\n                if (i > 0 && \"and\" !== filter[2 * i - 1]) {\r\n                    return false\r\n                }\r\n                if (!this._isSimpleKeyFilter(filter[2 * i], keyField[i])) {\r\n                    return false\r\n                }\r\n            }\r\n            return true\r\n        }\r\n        return this._isSimpleKeyFilter(filter, keyField)\r\n    },\r\n    _hasKeyFiltersOnlyStartingFromIndex: function(selectionFilter, filterIndex) {\r\n        if (filterIndex >= 0) {\r\n            for (var i = filterIndex; i < selectionFilter.length; i++) {\r\n                if (\"string\" !== typeof selectionFilter[i] && !this._isKeyFilter(selectionFilter[i])) {\r\n                    return false\r\n                }\r\n            }\r\n            return true\r\n        }\r\n        return false\r\n    },\r\n    _removeSameFilter: function(selectionFilter, filter, inverted, isSelectAll) {\r\n        filter = inverted ? [\"!\", filter] : filter;\r\n        if (JSON.stringify(filter) === JSON.stringify(selectionFilter)) {\r\n            selectionFilter.splice(0, selectionFilter.length);\r\n            return 0\r\n        }\r\n        var filterIndex = this._findSubFilter(selectionFilter, filter);\r\n        if (filterIndex >= 0) {\r\n            this._removeFilterByIndex(selectionFilter, filterIndex, isSelectAll);\r\n            return filterIndex\r\n        } else {\r\n            for (var i = 0; i < selectionFilter.length; i++) {\r\n                if (Array.isArray(selectionFilter[i]) && selectionFilter[i].length > 2) {\r\n                    var _filterIndex = this._removeSameFilter(selectionFilter[i], filter, false, isSelectAll);\r\n                    if (_filterIndex >= 0) {\r\n                        if (!selectionFilter[i].length) {\r\n                            this._removeFilterByIndex(selectionFilter, i, isSelectAll)\r\n                        } else if (1 === selectionFilter[i].length) {\r\n                            selectionFilter[i] = selectionFilter[i][0]\r\n                        }\r\n                        return _filterIndex\r\n                    }\r\n                }\r\n            }\r\n            return -1\r\n        }\r\n    },\r\n    getSelectAllState: function() {\r\n        var filter = this.options.filter();\r\n        var selectionFilter = this.options.selectionFilter;\r\n        if (!selectionFilter) {\r\n            return true\r\n        }\r\n        if (!selectionFilter.length) {\r\n            return false\r\n        }\r\n        if (!filter || !filter.length) {\r\n            return\r\n        }\r\n        selectionFilter = this._denormalizeFilter(selectionFilter);\r\n        if (this._isLastSubFilter(selectionFilter, filter)) {\r\n            return true\r\n        }\r\n        if (this._isLastSubFilter(selectionFilter, [\"!\", filter])) {\r\n            return false\r\n        }\r\n        return\r\n    }\r\n});\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}