{"ast":null,"code":"/**\r\n * DevExtreme (esm/viz/sankey/link_item.js)\r\n * Version: 22.1.4\r\n * Build date: Fri Jul 22 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport { COLOR_MODE_GRADIENT, COLOR_MODE_SOURCE, COLOR_MODE_TARGET } from \"./constants\";\nvar states = [\"normal\", \"adjacentNodeHover\", \"hover\"];\nimport { isDefined } from \"../../core/utils/type\";\n\nfunction compileAttrs(color, itemOptions, itemBaseOptions, gradient) {\n  var border = itemOptions.border;\n  var baseBorder = itemBaseOptions.border;\n  var borderVisible = isDefined(border.visible) ? border.visible : baseBorder.visible;\n  var borderWidth = isDefined(border.width) ? border.width : baseBorder.width;\n  var borderOpacity = isDefined(border.opacity) ? border.opacity : isDefined(baseBorder.opacity) ? baseBorder.opacity : 1;\n  var opacity = isDefined(itemOptions.opacity) ? itemOptions.opacity : isDefined(itemBaseOptions.opacity) ? itemBaseOptions.opacity : 1;\n  var fill = itemOptions.color || color;\n\n  if (itemBaseOptions.colorMode === COLOR_MODE_TARGET || itemBaseOptions.colorMode === COLOR_MODE_SOURCE) {\n    fill = color;\n  } else if (itemBaseOptions.colorMode === COLOR_MODE_GRADIENT && gradient && isDefined(gradient.id)) {\n    fill = gradient.id;\n  }\n\n  return {\n    fill: fill,\n    \"stroke-width\": borderVisible ? borderWidth : 0,\n    stroke: itemOptions.border.color || itemBaseOptions.border.color,\n    \"stroke-opacity\": borderOpacity,\n    opacity: opacity,\n    hatching: itemOptions.hatching\n  };\n}\n\nfunction Link(widget, params) {\n  var widgetOffset = widget._renderer.getRootOffset();\n\n  this.code = 0;\n  this.widget = widget;\n  this.color = params.color;\n  this.connection = params.connection;\n  this.d = params.d;\n  this.options = params.options;\n  this.boundingRect = params.boundingRect, this.coords = {\n    x: params.boundingRect.x + params.boundingRect.width / 2 + widgetOffset.left,\n    y: params.boundingRect.y + params.boundingRect.height / 2 + widgetOffset.top\n  };\n  this.states = {\n    normal: compileAttrs(this.color, this.options, this.options, params.gradient),\n    adjacentNodeHover: compileAttrs(this.color, {\n      opacity: 0,\n      border: {}\n    }, this.options, params.gradient),\n    hover: compileAttrs(this.color, {\n      opacity: 0,\n      border: {}\n    }, this.options, params.gradient)\n  };\n  this.overlayStates = {\n    normal: compileAttrs(this.color, {\n      opacity: 0,\n      border: {}\n    }, this.options),\n    adjacentNodeHover: compileAttrs(this.color, this.options.hoverStyle, this.options),\n    hover: compileAttrs(this.color, this.options.hoverStyle, this.options)\n  };\n}\n\nLink.prototype = {\n  getState: function () {\n    return states[this.code];\n  },\n  isHovered: function () {\n    return 2 === this.code;\n  },\n  isAdjacentNodeHovered: function () {\n    return 1 === this.code;\n  },\n  setState: function (code, state) {\n    if (state) {\n      this.code = code;\n    } else {\n      this.code = 0;\n      this.hideTooltip();\n    }\n\n    this.widget._applyLinksAppearance();\n  },\n  setHover: function () {\n    this.hover(true);\n  },\n  hover: function (state) {\n    if (!this.widget._getOption(\"hoverEnabled\", true) || state === this.isHovered()) {\n      return;\n    }\n\n    this.widget._suspend();\n\n    state && this.widget.clearHover();\n    this.setState(2, state);\n\n    this.widget._eventTrigger(\"linkHoverChanged\", {\n      target: this\n    });\n\n    this.widget._resume();\n  },\n  adjacentNodeHover: function (state) {\n    if (!this.widget._getOption(\"hoverEnabled\", true) || state === this.isAdjacentNodeHovered()) {\n      return;\n    }\n\n    this.widget._suspend();\n\n    this.setState(1, state);\n\n    this.widget._resume();\n  },\n  setAdjacentNodeHover: function () {\n    this.adjacentNodeHover(true);\n  },\n  showTooltip: function (coords) {\n    this.widget._getOption(\"hoverEnabled\", true) && this.widget._tooltip && this.widget._tooltip.show({\n      type: \"link\",\n      info: {\n        source: this.connection.source,\n        target: this.connection.target,\n        weight: this.connection.weight\n      }\n    }, \"undefined\" !== typeof coords ? {\n      x: coords[0],\n      y: coords[1]\n    } : this.coords);\n  },\n  hideTooltip: function () {\n    this.widget._tooltip && this.widget._tooltip.hide();\n  }\n};\nexport default Link;","map":{"version":3,"names":["COLOR_MODE_GRADIENT","COLOR_MODE_SOURCE","COLOR_MODE_TARGET","states","isDefined","compileAttrs","color","itemOptions","itemBaseOptions","gradient","border","baseBorder","borderVisible","visible","borderWidth","width","borderOpacity","opacity","fill","colorMode","id","stroke","hatching","Link","widget","params","widgetOffset","_renderer","getRootOffset","code","connection","d","options","boundingRect","coords","x","left","y","height","top","normal","adjacentNodeHover","hover","overlayStates","hoverStyle","prototype","getState","isHovered","isAdjacentNodeHovered","setState","state","hideTooltip","_applyLinksAppearance","setHover","_getOption","_suspend","clearHover","_eventTrigger","target","_resume","setAdjacentNodeHover","showTooltip","_tooltip","show","type","info","source","weight","hide"],"sources":["E:/MisaProject/W2022_06/misa_emis/node_modules/devextreme/esm/viz/sankey/link_item.js"],"sourcesContent":["/**\r\n * DevExtreme (esm/viz/sankey/link_item.js)\r\n * Version: 22.1.4\r\n * Build date: Fri Jul 22 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport {\r\n    COLOR_MODE_GRADIENT,\r\n    COLOR_MODE_SOURCE,\r\n    COLOR_MODE_TARGET\r\n} from \"./constants\";\r\nvar states = [\"normal\", \"adjacentNodeHover\", \"hover\"];\r\nimport {\r\n    isDefined\r\n} from \"../../core/utils/type\";\r\n\r\nfunction compileAttrs(color, itemOptions, itemBaseOptions, gradient) {\r\n    var border = itemOptions.border;\r\n    var baseBorder = itemBaseOptions.border;\r\n    var borderVisible = isDefined(border.visible) ? border.visible : baseBorder.visible;\r\n    var borderWidth = isDefined(border.width) ? border.width : baseBorder.width;\r\n    var borderOpacity = isDefined(border.opacity) ? border.opacity : isDefined(baseBorder.opacity) ? baseBorder.opacity : 1;\r\n    var opacity = isDefined(itemOptions.opacity) ? itemOptions.opacity : isDefined(itemBaseOptions.opacity) ? itemBaseOptions.opacity : 1;\r\n    var fill = itemOptions.color || color;\r\n    if (itemBaseOptions.colorMode === COLOR_MODE_TARGET || itemBaseOptions.colorMode === COLOR_MODE_SOURCE) {\r\n        fill = color\r\n    } else if (itemBaseOptions.colorMode === COLOR_MODE_GRADIENT && gradient && isDefined(gradient.id)) {\r\n        fill = gradient.id\r\n    }\r\n    return {\r\n        fill: fill,\r\n        \"stroke-width\": borderVisible ? borderWidth : 0,\r\n        stroke: itemOptions.border.color || itemBaseOptions.border.color,\r\n        \"stroke-opacity\": borderOpacity,\r\n        opacity: opacity,\r\n        hatching: itemOptions.hatching\r\n    }\r\n}\r\n\r\nfunction Link(widget, params) {\r\n    var widgetOffset = widget._renderer.getRootOffset();\r\n    this.code = 0;\r\n    this.widget = widget;\r\n    this.color = params.color;\r\n    this.connection = params.connection;\r\n    this.d = params.d;\r\n    this.options = params.options;\r\n    this.boundingRect = params.boundingRect, this.coords = {\r\n        x: params.boundingRect.x + params.boundingRect.width / 2 + widgetOffset.left,\r\n        y: params.boundingRect.y + params.boundingRect.height / 2 + widgetOffset.top\r\n    };\r\n    this.states = {\r\n        normal: compileAttrs(this.color, this.options, this.options, params.gradient),\r\n        adjacentNodeHover: compileAttrs(this.color, {\r\n            opacity: 0,\r\n            border: {}\r\n        }, this.options, params.gradient),\r\n        hover: compileAttrs(this.color, {\r\n            opacity: 0,\r\n            border: {}\r\n        }, this.options, params.gradient)\r\n    };\r\n    this.overlayStates = {\r\n        normal: compileAttrs(this.color, {\r\n            opacity: 0,\r\n            border: {}\r\n        }, this.options),\r\n        adjacentNodeHover: compileAttrs(this.color, this.options.hoverStyle, this.options),\r\n        hover: compileAttrs(this.color, this.options.hoverStyle, this.options)\r\n    }\r\n}\r\nLink.prototype = {\r\n    getState: function() {\r\n        return states[this.code]\r\n    },\r\n    isHovered: function() {\r\n        return 2 === this.code\r\n    },\r\n    isAdjacentNodeHovered: function() {\r\n        return 1 === this.code\r\n    },\r\n    setState: function(code, state) {\r\n        if (state) {\r\n            this.code = code\r\n        } else {\r\n            this.code = 0;\r\n            this.hideTooltip()\r\n        }\r\n        this.widget._applyLinksAppearance()\r\n    },\r\n    setHover: function() {\r\n        this.hover(true)\r\n    },\r\n    hover: function(state) {\r\n        if (!this.widget._getOption(\"hoverEnabled\", true) || state === this.isHovered()) {\r\n            return\r\n        }\r\n        this.widget._suspend();\r\n        state && this.widget.clearHover();\r\n        this.setState(2, state);\r\n        this.widget._eventTrigger(\"linkHoverChanged\", {\r\n            target: this\r\n        });\r\n        this.widget._resume()\r\n    },\r\n    adjacentNodeHover: function(state) {\r\n        if (!this.widget._getOption(\"hoverEnabled\", true) || state === this.isAdjacentNodeHovered()) {\r\n            return\r\n        }\r\n        this.widget._suspend();\r\n        this.setState(1, state);\r\n        this.widget._resume()\r\n    },\r\n    setAdjacentNodeHover: function() {\r\n        this.adjacentNodeHover(true)\r\n    },\r\n    showTooltip: function(coords) {\r\n        this.widget._getOption(\"hoverEnabled\", true) && this.widget._tooltip && this.widget._tooltip.show({\r\n            type: \"link\",\r\n            info: {\r\n                source: this.connection.source,\r\n                target: this.connection.target,\r\n                weight: this.connection.weight\r\n            }\r\n        }, \"undefined\" !== typeof coords ? {\r\n            x: coords[0],\r\n            y: coords[1]\r\n        } : this.coords)\r\n    },\r\n    hideTooltip: function() {\r\n        this.widget._tooltip && this.widget._tooltip.hide()\r\n    }\r\n};\r\nexport default Link;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}