{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/map/provider.js)\r\n * Version: 22.1.4\r\n * Build date: Fri Jul 22 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport Class from \"../../core/class\";\nimport { map } from \"../../core/utils/iterator\";\nimport { isPlainObject, isNumeric } from \"../../core/utils/type\";\nimport { addNamespace } from \"../../events/utils/index\";\nvar abstract = Class.abstract;\nvar Provider = Class.inherit({\n  _defaultRouteWeight: function () {\n    return 5;\n  },\n  _defaultRouteOpacity: function () {\n    return .5;\n  },\n  _defaultRouteColor: function () {\n    return \"#0000FF\";\n  },\n  ctor: function (map, $container) {\n    this._mapWidget = map;\n    this._$container = $container;\n  },\n  render: function (markerOptions, routeOptions) {\n    return this._renderImpl().then(function () {\n      return Promise.all([this._applyFunctionIfNeeded(\"addMarkers\", markerOptions), this._applyFunctionIfNeeded(\"addRoutes\", routeOptions)]).then(function () {\n        return true;\n      });\n    }.bind(this));\n  },\n  _renderImpl: abstract,\n  updateDimensions: abstract,\n  updateMapType: abstract,\n  updateBounds: abstract,\n  updateCenter: abstract,\n  updateZoom: abstract,\n  updateControls: abstract,\n  updateMarkers: function (markerOptionsToRemove, markerOptionsToAdd) {\n    return new Promise(function (resolve) {\n      return this._applyFunctionIfNeeded(\"removeMarkers\", markerOptionsToRemove).then(function (removeValue) {\n        this._applyFunctionIfNeeded(\"addMarkers\", markerOptionsToAdd).then(function (addValue) {\n          resolve(addValue ? addValue : removeValue);\n        });\n      }.bind(this));\n    }.bind(this));\n  },\n  addMarkers: abstract,\n  removeMarkers: abstract,\n  adjustViewport: abstract,\n  updateRoutes: function (routeOptionsToRemove, routeOptionsToAdd) {\n    return new Promise(function (resolve) {\n      return this._applyFunctionIfNeeded(\"removeRoutes\", routeOptionsToRemove).then(function (removeValue) {\n        this._applyFunctionIfNeeded(\"addRoutes\", routeOptionsToAdd).then(function (addValue) {\n          resolve(addValue ? addValue : removeValue);\n        });\n      }.bind(this));\n    }.bind(this));\n  },\n  addRoutes: abstract,\n  removeRoutes: abstract,\n  clean: abstract,\n  map: function () {\n    return this._map;\n  },\n  isEventsCanceled: function () {\n    return false;\n  },\n  _option: function (name, value) {\n    if (void 0 === value) {\n      return this._mapWidget.option(name);\n    }\n\n    this._mapWidget.setOptionSilent(name, value);\n  },\n  _keyOption: function (providerName) {\n    var key = this._option(\"apiKey\");\n\n    return void 0 === key[providerName] ? key : key[providerName];\n  },\n  _parseTooltipOptions: function (option) {\n    return {\n      text: option.text || option,\n      visible: option.isShown || false\n    };\n  },\n  _getLatLng: function (location) {\n    if (\"string\" === typeof location) {\n      var coords = map(location.split(\",\"), function (item) {\n        return item.trim();\n      });\n      var numericRegex = /^[-+]?[0-9]*\\.?[0-9]*$/;\n\n      if (2 === coords.length && coords[0].match(numericRegex) && coords[1].match(numericRegex)) {\n        return {\n          lat: parseFloat(coords[0]),\n          lng: parseFloat(coords[1])\n        };\n      }\n    } else if (Array.isArray(location) && 2 === location.length) {\n      return {\n        lat: location[0],\n        lng: location[1]\n      };\n    } else if (isPlainObject(location) && isNumeric(location.lat) && isNumeric(location.lng)) {\n      return location;\n    }\n\n    return null;\n  },\n  _areBoundsSet: function () {\n    return this._option(\"bounds.northEast\") && this._option(\"bounds.southWest\");\n  },\n  _addEventNamespace: function (name) {\n    return addNamespace(name, this._mapWidget.NAME);\n  },\n  _applyFunctionIfNeeded: function (fnName, array) {\n    if (!array.length) {\n      return Promise.resolve();\n    }\n\n    return this[fnName](array);\n  },\n  _fireAction: function (name, actionArguments) {\n    this._mapWidget._createActionByOption(name)(actionArguments);\n  },\n  _fireClickAction: function (actionArguments) {\n    this._fireAction(\"onClick\", actionArguments);\n  },\n  _fireMarkerAddedAction: function (actionArguments) {\n    this._fireAction(\"onMarkerAdded\", actionArguments);\n  },\n  _fireMarkerRemovedAction: function (actionArguments) {\n    this._fireAction(\"onMarkerRemoved\", actionArguments);\n  },\n  _fireRouteAddedAction: function (actionArguments) {\n    this._fireAction(\"onRouteAdded\", actionArguments);\n  },\n  _fireRouteRemovedAction: function (actionArguments) {\n    this._fireAction(\"onRouteRemoved\", actionArguments);\n  }\n});\nexport default Provider;","map":{"version":3,"names":["Class","map","isPlainObject","isNumeric","addNamespace","abstract","Provider","inherit","_defaultRouteWeight","_defaultRouteOpacity","_defaultRouteColor","ctor","$container","_mapWidget","_$container","render","markerOptions","routeOptions","_renderImpl","then","Promise","all","_applyFunctionIfNeeded","bind","updateDimensions","updateMapType","updateBounds","updateCenter","updateZoom","updateControls","updateMarkers","markerOptionsToRemove","markerOptionsToAdd","resolve","removeValue","addValue","addMarkers","removeMarkers","adjustViewport","updateRoutes","routeOptionsToRemove","routeOptionsToAdd","addRoutes","removeRoutes","clean","_map","isEventsCanceled","_option","name","value","option","setOptionSilent","_keyOption","providerName","key","_parseTooltipOptions","text","visible","isShown","_getLatLng","location","coords","split","item","trim","numericRegex","length","match","lat","parseFloat","lng","Array","isArray","_areBoundsSet","_addEventNamespace","NAME","fnName","array","_fireAction","actionArguments","_createActionByOption","_fireClickAction","_fireMarkerAddedAction","_fireMarkerRemovedAction","_fireRouteAddedAction","_fireRouteRemovedAction"],"sources":["E:/MisaProject/W2022_06/misa_emis/node_modules/devextreme/esm/ui/map/provider.js"],"sourcesContent":["/**\r\n * DevExtreme (esm/ui/map/provider.js)\r\n * Version: 22.1.4\r\n * Build date: Fri Jul 22 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport Class from \"../../core/class\";\r\nimport {\r\n    map\r\n} from \"../../core/utils/iterator\";\r\nimport {\r\n    isPlainObject,\r\n    isNumeric\r\n} from \"../../core/utils/type\";\r\nimport {\r\n    addNamespace\r\n} from \"../../events/utils/index\";\r\nvar abstract = Class.abstract;\r\nvar Provider = Class.inherit({\r\n    _defaultRouteWeight: function() {\r\n        return 5\r\n    },\r\n    _defaultRouteOpacity: function() {\r\n        return .5\r\n    },\r\n    _defaultRouteColor: function() {\r\n        return \"#0000FF\"\r\n    },\r\n    ctor: function(map, $container) {\r\n        this._mapWidget = map;\r\n        this._$container = $container\r\n    },\r\n    render: function(markerOptions, routeOptions) {\r\n        return this._renderImpl().then(function() {\r\n            return Promise.all([this._applyFunctionIfNeeded(\"addMarkers\", markerOptions), this._applyFunctionIfNeeded(\"addRoutes\", routeOptions)]).then((function() {\r\n                return true\r\n            }))\r\n        }.bind(this))\r\n    },\r\n    _renderImpl: abstract,\r\n    updateDimensions: abstract,\r\n    updateMapType: abstract,\r\n    updateBounds: abstract,\r\n    updateCenter: abstract,\r\n    updateZoom: abstract,\r\n    updateControls: abstract,\r\n    updateMarkers: function(markerOptionsToRemove, markerOptionsToAdd) {\r\n        return new Promise(function(resolve) {\r\n            return this._applyFunctionIfNeeded(\"removeMarkers\", markerOptionsToRemove).then(function(removeValue) {\r\n                this._applyFunctionIfNeeded(\"addMarkers\", markerOptionsToAdd).then((function(addValue) {\r\n                    resolve(addValue ? addValue : removeValue)\r\n                }))\r\n            }.bind(this))\r\n        }.bind(this))\r\n    },\r\n    addMarkers: abstract,\r\n    removeMarkers: abstract,\r\n    adjustViewport: abstract,\r\n    updateRoutes: function(routeOptionsToRemove, routeOptionsToAdd) {\r\n        return new Promise(function(resolve) {\r\n            return this._applyFunctionIfNeeded(\"removeRoutes\", routeOptionsToRemove).then(function(removeValue) {\r\n                this._applyFunctionIfNeeded(\"addRoutes\", routeOptionsToAdd).then((function(addValue) {\r\n                    resolve(addValue ? addValue : removeValue)\r\n                }))\r\n            }.bind(this))\r\n        }.bind(this))\r\n    },\r\n    addRoutes: abstract,\r\n    removeRoutes: abstract,\r\n    clean: abstract,\r\n    map: function() {\r\n        return this._map\r\n    },\r\n    isEventsCanceled: function() {\r\n        return false\r\n    },\r\n    _option: function(name, value) {\r\n        if (void 0 === value) {\r\n            return this._mapWidget.option(name)\r\n        }\r\n        this._mapWidget.setOptionSilent(name, value)\r\n    },\r\n    _keyOption: function(providerName) {\r\n        var key = this._option(\"apiKey\");\r\n        return void 0 === key[providerName] ? key : key[providerName]\r\n    },\r\n    _parseTooltipOptions: function(option) {\r\n        return {\r\n            text: option.text || option,\r\n            visible: option.isShown || false\r\n        }\r\n    },\r\n    _getLatLng: function(location) {\r\n        if (\"string\" === typeof location) {\r\n            var coords = map(location.split(\",\"), (function(item) {\r\n                return item.trim()\r\n            }));\r\n            var numericRegex = /^[-+]?[0-9]*\\.?[0-9]*$/;\r\n            if (2 === coords.length && coords[0].match(numericRegex) && coords[1].match(numericRegex)) {\r\n                return {\r\n                    lat: parseFloat(coords[0]),\r\n                    lng: parseFloat(coords[1])\r\n                }\r\n            }\r\n        } else if (Array.isArray(location) && 2 === location.length) {\r\n            return {\r\n                lat: location[0],\r\n                lng: location[1]\r\n            }\r\n        } else if (isPlainObject(location) && isNumeric(location.lat) && isNumeric(location.lng)) {\r\n            return location\r\n        }\r\n        return null\r\n    },\r\n    _areBoundsSet: function() {\r\n        return this._option(\"bounds.northEast\") && this._option(\"bounds.southWest\")\r\n    },\r\n    _addEventNamespace: function(name) {\r\n        return addNamespace(name, this._mapWidget.NAME)\r\n    },\r\n    _applyFunctionIfNeeded: function(fnName, array) {\r\n        if (!array.length) {\r\n            return Promise.resolve()\r\n        }\r\n        return this[fnName](array)\r\n    },\r\n    _fireAction: function(name, actionArguments) {\r\n        this._mapWidget._createActionByOption(name)(actionArguments)\r\n    },\r\n    _fireClickAction: function(actionArguments) {\r\n        this._fireAction(\"onClick\", actionArguments)\r\n    },\r\n    _fireMarkerAddedAction: function(actionArguments) {\r\n        this._fireAction(\"onMarkerAdded\", actionArguments)\r\n    },\r\n    _fireMarkerRemovedAction: function(actionArguments) {\r\n        this._fireAction(\"onMarkerRemoved\", actionArguments)\r\n    },\r\n    _fireRouteAddedAction: function(actionArguments) {\r\n        this._fireAction(\"onRouteAdded\", actionArguments)\r\n    },\r\n    _fireRouteRemovedAction: function(actionArguments) {\r\n        this._fireAction(\"onRouteRemoved\", actionArguments)\r\n    }\r\n});\r\nexport default Provider;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}