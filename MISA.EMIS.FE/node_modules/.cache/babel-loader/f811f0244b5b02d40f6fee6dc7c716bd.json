{"ast":null,"code":"/**\r\n * DevExtreme (esm/viz/vector_map/legend.js)\r\n * Version: 22.1.4\r\n * Build date: Fri Jul 22 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport { extend } from \"../../core/utils/extend\";\nimport { each } from \"../../core/utils/iterator\";\nimport { clone } from \"../../core/utils/object\";\nvar _extend = extend;\nvar _each = each;\nimport { Legend as _BaseLegend } from \"../components/legend\";\nvar unknownSource = {\n  category: \"UNKNOWN\",\n  name: \"UNKNOWN\"\n};\n\nfunction buildData(partition, values, field) {\n  var i;\n  var ii = values.length;\n  var list = [];\n  var item;\n\n  for (i = 0; i < ii; ++i) {\n    list[i] = item = {\n      start: partition[i],\n      end: partition[i + 1],\n      index: i\n    };\n    item[field] = values[i];\n    item.states = {\n      normal: {\n        fill: item.color\n      }\n    };\n    item.visible = true;\n  }\n\n  return list;\n}\n\nvar Legend = function (parameters) {\n  var that = this;\n  that._params = parameters;\n  that._root = parameters.renderer.g().attr({\n    class: \"dxm-legend\"\n  }).linkOn(parameters.container, {\n    name: \"legend\",\n    after: \"legend-base\"\n  }).enableLinks().linkAppend();\n  parameters.layoutControl.addItem(that);\n\n  _BaseLegend.call(that, {\n    renderer: parameters.renderer,\n    widget: parameters.widget,\n    group: that._root,\n    backgroundClass: null,\n    itemsGroupClass: null,\n    textField: \"text\",\n    getFormatObject: function (data) {\n      return data;\n    }\n  });\n\n  that._onDataChanged = function (data) {\n    that._updateData(data);\n  };\n};\n\nLegend.prototype = _extend(clone(_BaseLegend.prototype), {\n  constructor: Legend,\n  dispose: function () {\n    var that = this;\n\n    that._params.layoutControl.removeItem(that);\n\n    that._unbindData();\n\n    that._root.linkRemove().linkOff();\n\n    that._params = that._root = that._onDataChanged = null;\n    return _BaseLegend.prototype.dispose.apply(that, arguments);\n  },\n  resize: function (size) {\n    this._params.notifyDirty();\n\n    if (null === size) {\n      this.erase();\n    } else {\n      this.draw(size.width, size.height);\n    }\n\n    this._params.notifyReady();\n  },\n  locate: _BaseLegend.prototype.shift,\n  _updateData: function (data) {\n    this._options.defaultColor = data && data.defaultColor;\n    this.update(data ? buildData(data.partition, data.values, this._dataName) : [], this._options, this._params.themeManager.theme(\"legend\").title);\n    this.updateLayout();\n  },\n  _unbindData: function () {\n    if (this._dataCategory) {\n      this._params.dataExchanger.unbind(this._dataCategory, this._dataName, this._onDataChanged);\n    }\n  },\n  _bindData: function (arg) {\n    this._params.dataExchanger.bind(this._dataCategory = arg.category, this._dataName = arg.name, this._onDataChanged);\n  },\n  setOptions: function (options) {\n    this.update(this._data, options, this._params.themeManager.theme(\"legend\").title);\n\n    this._unbindData();\n\n    var source = options.source;\n\n    this._bindData(source ? {\n      category: source.layer,\n      name: source.grouping\n    } : unknownSource);\n\n    this.updateLayout();\n    return this;\n  }\n});\nexport function LegendsControl(parameters) {\n  this._params = parameters;\n  this._items = [];\n  parameters.container.virtualLink(\"legend-base\");\n}\nLegendsControl.prototype = {\n  constructor: LegendsControl,\n  dispose: function () {\n    _each(this._items, function (_, item) {\n      item.dispose();\n    });\n\n    this._params = this._items = null;\n  },\n  setOptions: function (options) {\n    var optionList = options && options.length ? options : [];\n    var items = this._items;\n    var i;\n    var ii = optionList.length;\n    var params = this._params;\n    var theme = params.themeManager.theme(\"legend\");\n\n    for (i = items.length; i < ii; ++i) {\n      items[i] = new Legend(params);\n    }\n\n    for (i = items.length - 1; i >= ii; --i) {\n      items[i].dispose();\n      items.splice(i, 1);\n    }\n\n    params.layoutControl.suspend();\n\n    for (i = 0; i < ii; ++i) {\n      items[i].setOptions(_extend(true, {}, theme, optionList[i]));\n    }\n\n    params.layoutControl.resume();\n  }\n};","map":{"version":3,"names":["extend","each","clone","_extend","_each","Legend","_BaseLegend","unknownSource","category","name","buildData","partition","values","field","i","ii","length","list","item","start","end","index","states","normal","fill","color","visible","parameters","that","_params","_root","renderer","g","attr","class","linkOn","container","after","enableLinks","linkAppend","layoutControl","addItem","call","widget","group","backgroundClass","itemsGroupClass","textField","getFormatObject","data","_onDataChanged","_updateData","prototype","constructor","dispose","removeItem","_unbindData","linkRemove","linkOff","apply","arguments","resize","size","notifyDirty","erase","draw","width","height","notifyReady","locate","shift","_options","defaultColor","update","_dataName","themeManager","theme","title","updateLayout","_dataCategory","dataExchanger","unbind","_bindData","arg","bind","setOptions","options","_data","source","layer","grouping","LegendsControl","_items","virtualLink","_","optionList","items","params","splice","suspend","resume"],"sources":["E:/MisaProject/W2022_06/misa_emis/node_modules/devextreme/esm/viz/vector_map/legend.js"],"sourcesContent":["/**\r\n * DevExtreme (esm/viz/vector_map/legend.js)\r\n * Version: 22.1.4\r\n * Build date: Fri Jul 22 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport {\r\n    extend\r\n} from \"../../core/utils/extend\";\r\nimport {\r\n    each\r\n} from \"../../core/utils/iterator\";\r\nimport {\r\n    clone\r\n} from \"../../core/utils/object\";\r\nvar _extend = extend;\r\nvar _each = each;\r\nimport {\r\n    Legend as _BaseLegend\r\n} from \"../components/legend\";\r\nvar unknownSource = {\r\n    category: \"UNKNOWN\",\r\n    name: \"UNKNOWN\"\r\n};\r\n\r\nfunction buildData(partition, values, field) {\r\n    var i;\r\n    var ii = values.length;\r\n    var list = [];\r\n    var item;\r\n    for (i = 0; i < ii; ++i) {\r\n        list[i] = item = {\r\n            start: partition[i],\r\n            end: partition[i + 1],\r\n            index: i\r\n        };\r\n        item[field] = values[i];\r\n        item.states = {\r\n            normal: {\r\n                fill: item.color\r\n            }\r\n        };\r\n        item.visible = true\r\n    }\r\n    return list\r\n}\r\nvar Legend = function(parameters) {\r\n    var that = this;\r\n    that._params = parameters;\r\n    that._root = parameters.renderer.g().attr({\r\n        class: \"dxm-legend\"\r\n    }).linkOn(parameters.container, {\r\n        name: \"legend\",\r\n        after: \"legend-base\"\r\n    }).enableLinks().linkAppend();\r\n    parameters.layoutControl.addItem(that);\r\n    _BaseLegend.call(that, {\r\n        renderer: parameters.renderer,\r\n        widget: parameters.widget,\r\n        group: that._root,\r\n        backgroundClass: null,\r\n        itemsGroupClass: null,\r\n        textField: \"text\",\r\n        getFormatObject: function(data) {\r\n            return data\r\n        }\r\n    });\r\n    that._onDataChanged = function(data) {\r\n        that._updateData(data)\r\n    }\r\n};\r\nLegend.prototype = _extend(clone(_BaseLegend.prototype), {\r\n    constructor: Legend,\r\n    dispose: function() {\r\n        var that = this;\r\n        that._params.layoutControl.removeItem(that);\r\n        that._unbindData();\r\n        that._root.linkRemove().linkOff();\r\n        that._params = that._root = that._onDataChanged = null;\r\n        return _BaseLegend.prototype.dispose.apply(that, arguments)\r\n    },\r\n    resize: function(size) {\r\n        this._params.notifyDirty();\r\n        if (null === size) {\r\n            this.erase()\r\n        } else {\r\n            this.draw(size.width, size.height)\r\n        }\r\n        this._params.notifyReady()\r\n    },\r\n    locate: _BaseLegend.prototype.shift,\r\n    _updateData: function(data) {\r\n        this._options.defaultColor = data && data.defaultColor;\r\n        this.update(data ? buildData(data.partition, data.values, this._dataName) : [], this._options, this._params.themeManager.theme(\"legend\").title);\r\n        this.updateLayout()\r\n    },\r\n    _unbindData: function() {\r\n        if (this._dataCategory) {\r\n            this._params.dataExchanger.unbind(this._dataCategory, this._dataName, this._onDataChanged)\r\n        }\r\n    },\r\n    _bindData: function(arg) {\r\n        this._params.dataExchanger.bind(this._dataCategory = arg.category, this._dataName = arg.name, this._onDataChanged)\r\n    },\r\n    setOptions: function(options) {\r\n        this.update(this._data, options, this._params.themeManager.theme(\"legend\").title);\r\n        this._unbindData();\r\n        var source = options.source;\r\n        this._bindData(source ? {\r\n            category: source.layer,\r\n            name: source.grouping\r\n        } : unknownSource);\r\n        this.updateLayout();\r\n        return this\r\n    }\r\n});\r\nexport function LegendsControl(parameters) {\r\n    this._params = parameters;\r\n    this._items = [];\r\n    parameters.container.virtualLink(\"legend-base\")\r\n}\r\nLegendsControl.prototype = {\r\n    constructor: LegendsControl,\r\n    dispose: function() {\r\n        _each(this._items, (function(_, item) {\r\n            item.dispose()\r\n        }));\r\n        this._params = this._items = null\r\n    },\r\n    setOptions: function(options) {\r\n        var optionList = options && options.length ? options : [];\r\n        var items = this._items;\r\n        var i;\r\n        var ii = optionList.length;\r\n        var params = this._params;\r\n        var theme = params.themeManager.theme(\"legend\");\r\n        for (i = items.length; i < ii; ++i) {\r\n            items[i] = new Legend(params)\r\n        }\r\n        for (i = items.length - 1; i >= ii; --i) {\r\n            items[i].dispose();\r\n            items.splice(i, 1)\r\n        }\r\n        params.layoutControl.suspend();\r\n        for (i = 0; i < ii; ++i) {\r\n            items[i].setOptions(_extend(true, {}, theme, optionList[i]))\r\n        }\r\n        params.layoutControl.resume()\r\n    }\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}