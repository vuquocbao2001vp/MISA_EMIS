{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/html_editor/modules/imageCursor.js)\r\n * Version: 22.1.4\r\n * Build date: Fri Jul 22 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport Quill from \"devextreme-quill\";\nimport BaseModule from \"./base\";\nimport eventsEngine from \"../../../events/core/events_engine\";\nimport { addNamespace } from \"../../../events/utils/index\";\nvar MODULE_NAMESPACE = \"dxHtmlEditorImageCursor\";\nvar clickEvent = addNamespace(\"dxclick\", MODULE_NAMESPACE);\nvar ImageCursorModule = BaseModule;\n\nif (Quill) {\n  ImageCursorModule = class extends BaseModule {\n    constructor(quill, options) {\n      super(quill, options);\n      this.addCleanCallback(this.clean.bind(this));\n\n      this._attachEvents();\n    }\n\n    _attachEvents() {\n      eventsEngine.on(this.quill.root, clickEvent, this._clickHandler.bind(this));\n    }\n\n    _detachEvents() {\n      eventsEngine.off(this.quill.root, clickEvent);\n    }\n\n    _clickHandler(e) {\n      if (this._isAllowedTarget(e.target)) {\n        this._adjustSelection(e);\n      }\n    }\n\n    _isAllowedTarget(targetElement) {\n      return this._isImage(targetElement);\n    }\n\n    _isImage(targetElement) {\n      return \"IMG\" === targetElement.tagName.toUpperCase();\n    }\n\n    _adjustSelection(e) {\n      var blot = this.quill.scroll.find(e.target);\n\n      if (blot) {\n        var index = blot.offset(this.quill.scroll);\n        this.quill.setSelection(index + 1, 0);\n      } else {\n        this.quill.setSelection(0, 0);\n      }\n    }\n\n    clean() {\n      this._detachEvents();\n    }\n\n  };\n}\n\nexport default ImageCursorModule;","map":{"version":3,"names":["Quill","BaseModule","eventsEngine","addNamespace","MODULE_NAMESPACE","clickEvent","ImageCursorModule","constructor","quill","options","addCleanCallback","clean","bind","_attachEvents","on","root","_clickHandler","_detachEvents","off","e","_isAllowedTarget","target","_adjustSelection","targetElement","_isImage","tagName","toUpperCase","blot","scroll","find","index","offset","setSelection"],"sources":["E:/MisaProject/W2022_06/misa_emis/node_modules/devextreme/esm/ui/html_editor/modules/imageCursor.js"],"sourcesContent":["/**\r\n * DevExtreme (esm/ui/html_editor/modules/imageCursor.js)\r\n * Version: 22.1.4\r\n * Build date: Fri Jul 22 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport Quill from \"devextreme-quill\";\r\nimport BaseModule from \"./base\";\r\nimport eventsEngine from \"../../../events/core/events_engine\";\r\nimport {\r\n    addNamespace\r\n} from \"../../../events/utils/index\";\r\nvar MODULE_NAMESPACE = \"dxHtmlEditorImageCursor\";\r\nvar clickEvent = addNamespace(\"dxclick\", MODULE_NAMESPACE);\r\nvar ImageCursorModule = BaseModule;\r\nif (Quill) {\r\n    ImageCursorModule = class extends BaseModule {\r\n        constructor(quill, options) {\r\n            super(quill, options);\r\n            this.addCleanCallback(this.clean.bind(this));\r\n            this._attachEvents()\r\n        }\r\n        _attachEvents() {\r\n            eventsEngine.on(this.quill.root, clickEvent, this._clickHandler.bind(this))\r\n        }\r\n        _detachEvents() {\r\n            eventsEngine.off(this.quill.root, clickEvent)\r\n        }\r\n        _clickHandler(e) {\r\n            if (this._isAllowedTarget(e.target)) {\r\n                this._adjustSelection(e)\r\n            }\r\n        }\r\n        _isAllowedTarget(targetElement) {\r\n            return this._isImage(targetElement)\r\n        }\r\n        _isImage(targetElement) {\r\n            return \"IMG\" === targetElement.tagName.toUpperCase()\r\n        }\r\n        _adjustSelection(e) {\r\n            var blot = this.quill.scroll.find(e.target);\r\n            if (blot) {\r\n                var index = blot.offset(this.quill.scroll);\r\n                this.quill.setSelection(index + 1, 0)\r\n            } else {\r\n                this.quill.setSelection(0, 0)\r\n            }\r\n        }\r\n        clean() {\r\n            this._detachEvents()\r\n        }\r\n    }\r\n}\r\nexport default ImageCursorModule;\r\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAOA,KAAP,MAAkB,kBAAlB;AACA,OAAOC,UAAP,MAAuB,QAAvB;AACA,OAAOC,YAAP,MAAyB,oCAAzB;AACA,SACIC,YADJ,QAEO,6BAFP;AAGA,IAAIC,gBAAgB,GAAG,yBAAvB;AACA,IAAIC,UAAU,GAAGF,YAAY,CAAC,SAAD,EAAYC,gBAAZ,CAA7B;AACA,IAAIE,iBAAiB,GAAGL,UAAxB;;AACA,IAAID,KAAJ,EAAW;EACPM,iBAAiB,GAAG,cAAcL,UAAd,CAAyB;IACzCM,WAAW,CAACC,KAAD,EAAQC,OAAR,EAAiB;MACxB,MAAMD,KAAN,EAAaC,OAAb;MACA,KAAKC,gBAAL,CAAsB,KAAKC,KAAL,CAAWC,IAAX,CAAgB,IAAhB,CAAtB;;MACA,KAAKC,aAAL;IACH;;IACDA,aAAa,GAAG;MACZX,YAAY,CAACY,EAAb,CAAgB,KAAKN,KAAL,CAAWO,IAA3B,EAAiCV,UAAjC,EAA6C,KAAKW,aAAL,CAAmBJ,IAAnB,CAAwB,IAAxB,CAA7C;IACH;;IACDK,aAAa,GAAG;MACZf,YAAY,CAACgB,GAAb,CAAiB,KAAKV,KAAL,CAAWO,IAA5B,EAAkCV,UAAlC;IACH;;IACDW,aAAa,CAACG,CAAD,EAAI;MACb,IAAI,KAAKC,gBAAL,CAAsBD,CAAC,CAACE,MAAxB,CAAJ,EAAqC;QACjC,KAAKC,gBAAL,CAAsBH,CAAtB;MACH;IACJ;;IACDC,gBAAgB,CAACG,aAAD,EAAgB;MAC5B,OAAO,KAAKC,QAAL,CAAcD,aAAd,CAAP;IACH;;IACDC,QAAQ,CAACD,aAAD,EAAgB;MACpB,OAAO,UAAUA,aAAa,CAACE,OAAd,CAAsBC,WAAtB,EAAjB;IACH;;IACDJ,gBAAgB,CAACH,CAAD,EAAI;MAChB,IAAIQ,IAAI,GAAG,KAAKnB,KAAL,CAAWoB,MAAX,CAAkBC,IAAlB,CAAuBV,CAAC,CAACE,MAAzB,CAAX;;MACA,IAAIM,IAAJ,EAAU;QACN,IAAIG,KAAK,GAAGH,IAAI,CAACI,MAAL,CAAY,KAAKvB,KAAL,CAAWoB,MAAvB,CAAZ;QACA,KAAKpB,KAAL,CAAWwB,YAAX,CAAwBF,KAAK,GAAG,CAAhC,EAAmC,CAAnC;MACH,CAHD,MAGO;QACH,KAAKtB,KAAL,CAAWwB,YAAX,CAAwB,CAAxB,EAA2B,CAA3B;MACH;IACJ;;IACDrB,KAAK,GAAG;MACJ,KAAKM,aAAL;IACH;;EAlCwC,CAA7C;AAoCH;;AACD,eAAeX,iBAAf"},"metadata":{},"sourceType":"module"}