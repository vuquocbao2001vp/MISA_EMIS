{"ast":null,"code":"/**\n * This class helps us to emulate python's generators, sorta.\n */\nvar IterResult =\n/** @class */\nfunction () {\n  function IterResult(method, args) {\n    this.minDate = null;\n    this.maxDate = null;\n    this._result = [];\n    this.total = 0;\n    this.method = method;\n    this.args = args;\n\n    if (method === 'between') {\n      this.maxDate = args.inc ? args.before : new Date(args.before.getTime() - 1);\n      this.minDate = args.inc ? args.after : new Date(args.after.getTime() + 1);\n    } else if (method === 'before') {\n      this.maxDate = args.inc ? args.dt : new Date(args.dt.getTime() - 1);\n    } else if (method === 'after') {\n      this.minDate = args.inc ? args.dt : new Date(args.dt.getTime() + 1);\n    }\n  }\n  /**\n   * Possibly adds a date into the result.\n   *\n   * @param {Date} date - the date isn't necessarly added to the result\n   *                      list (if it is too late/too early)\n   * @return {Boolean} true if it makes sense to continue the iteration\n   *                   false if we're done.\n   */\n\n\n  IterResult.prototype.accept = function (date) {\n    ++this.total;\n    var tooEarly = this.minDate && date < this.minDate;\n    var tooLate = this.maxDate && date > this.maxDate;\n\n    if (this.method === 'between') {\n      if (tooEarly) return true;\n      if (tooLate) return false;\n    } else if (this.method === 'before') {\n      if (tooLate) return false;\n    } else if (this.method === 'after') {\n      if (tooEarly) return true;\n      this.add(date);\n      return false;\n    }\n\n    return this.add(date);\n  };\n  /**\n   *\n   * @param {Date} date that is part of the result.\n   * @return {Boolean} whether we are interested in more values.\n   */\n\n\n  IterResult.prototype.add = function (date) {\n    this._result.push(date);\n\n    return true;\n  };\n  /**\n   * 'before' and 'after' return only one date, whereas 'all'\n   * and 'between' an array.\n   * @return {Date,Array?}\n   */\n\n\n  IterResult.prototype.getValue = function () {\n    var res = this._result;\n\n    switch (this.method) {\n      case 'all':\n      case 'between':\n        return res;\n\n      case 'before':\n      case 'after':\n      default:\n        return res.length ? res[res.length - 1] : null;\n    }\n  };\n\n  IterResult.prototype.clone = function () {\n    return new IterResult(this.method, this.args);\n  };\n\n  return IterResult;\n}();\n\nexport default IterResult;","map":{"version":3,"mappings":"AAcA;;;AAGA;AAAA;AAAA;EAQE,oBAAaA,MAAb,EAAwBC,IAAxB,EAA+C;IAL/B,eAAuB,IAAvB;IACA,eAAuB,IAAvB;IACT,eAAkB,EAAlB;IACA,aAAQ,CAAR;IAGL,KAAKD,MAAL,GAAcA,MAAd;IACA,KAAKC,IAAL,GAAYA,IAAZ;;IAEA,IAAID,MAAM,KAAK,SAAf,EAA0B;MACxB,KAAKE,OAAL,GAAeD,IAAI,CAACE,GAAL,GACXF,IAAI,CAACG,MADM,GAEX,IAAIC,IAAJ,CAASJ,IAAI,CAACG,MAAL,CAAaE,OAAb,KAAyB,CAAlC,CAFJ;MAGA,KAAKC,OAAL,GAAeN,IAAI,CAACE,GAAL,GAAWF,IAAI,CAACO,KAAhB,GAAyB,IAAIH,IAAJ,CAASJ,IAAI,CAACO,KAAL,CAAYF,OAAZ,KAAwB,CAAjC,CAAxC;IACD,CALD,MAKO,IAAIN,MAAM,KAAK,QAAf,EAAyB;MAC9B,KAAKE,OAAL,GAAeD,IAAI,CAACE,GAAL,GAAWF,IAAI,CAACQ,EAAhB,GAAsB,IAAIJ,IAAJ,CAASJ,IAAI,CAACQ,EAAL,CAASH,OAAT,KAAqB,CAA9B,CAArC;IACD,CAFM,MAEA,IAAIN,MAAM,KAAK,OAAf,EAAwB;MAC7B,KAAKO,OAAL,GAAeN,IAAI,CAACE,GAAL,GAAWF,IAAI,CAACQ,EAAhB,GAAsB,IAAIJ,IAAJ,CAASJ,IAAI,CAACQ,EAAL,CAASH,OAAT,KAAqB,CAA9B,CAArC;IACD;EACF;EAED;;;;;;;;;;EAQAI,wCAAQC,IAAR,EAAkB;IAChB,EAAE,KAAKC,KAAP;IACA,IAAMC,QAAQ,GAAG,KAAKN,OAAL,IAAgBI,IAAI,GAAG,KAAKJ,OAA7C;IACA,IAAMO,OAAO,GAAG,KAAKZ,OAAL,IAAgBS,IAAI,GAAG,KAAKT,OAA5C;;IAEA,IAAI,KAAKF,MAAL,KAAgB,SAApB,EAA+B;MAC7B,IAAIa,QAAJ,EAAc,OAAO,IAAP;MACd,IAAIC,OAAJ,EAAa,OAAO,KAAP;IACd,CAHD,MAGO,IAAI,KAAKd,MAAL,KAAgB,QAApB,EAA8B;MACnC,IAAIc,OAAJ,EAAa,OAAO,KAAP;IACd,CAFM,MAEA,IAAI,KAAKd,MAAL,KAAgB,OAApB,EAA6B;MAClC,IAAIa,QAAJ,EAAc,OAAO,IAAP;MACd,KAAKE,GAAL,CAASJ,IAAT;MACA,OAAO,KAAP;IACD;;IAED,OAAO,KAAKI,GAAL,CAASJ,IAAT,CAAP;EACD,CAjBD;EAmBA;;;;;;;EAKAD,qCAAKC,IAAL,EAAe;IACb,KAAKK,OAAL,CAAaC,IAAb,CAAkBN,IAAlB;;IACA,OAAO,IAAP;EACD,CAHD;EAKA;;;;;;;EAKAD;IACE,IAAMQ,GAAG,GAAG,KAAKF,OAAjB;;IACA,QAAQ,KAAKhB,MAAb;MACE,KAAK,KAAL;MACA,KAAK,SAAL;QACE,OAAOkB,GAAP;;MACF,KAAK,QAAL;MACA,KAAK,OAAL;MACA;QACE,OAAQA,GAAG,CAACC,MAAJ,GAAaD,GAAG,CAACA,GAAG,CAACC,MAAJ,GAAa,CAAd,CAAhB,GAAmC,IAA3C;IAPJ;EASD,CAXD;;EAaAT;IACE,OAAO,IAAIA,UAAJ,CAAe,KAAKV,MAApB,EAA4B,KAAKC,IAAjC,CAAP;EACD,CAFD;;EAGF;AAAC,CAlFD","names":["method","args","maxDate","inc","before","Date","getTime","minDate","after","dt","IterResult","date","total","tooEarly","tooLate","add","_result","push","res","length"],"sourceRoot":"","sources":["../../../src/iterresult.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}