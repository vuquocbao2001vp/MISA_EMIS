{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/widget/ui.search_box_mixin.js)\r\n * Version: 22.1.4\r\n * Build date: Fri Jul 22 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport $ from \"../../core/renderer\";\nimport { extend } from \"../../core/utils/extend\";\nimport messageLocalization from \"../../localization/message\";\nimport errors from \"../widget/ui.errors\";\nimport { Deferred } from \"../../core/utils/deferred\";\nimport { stubComponent } from \"../../core/utils/stubs\";\nvar EditorClass = stubComponent(\"TextBox\");\nexport default {\n  _getDefaultOptions: function () {\n    return extend(this.callBase(), {\n      searchMode: \"\",\n      searchExpr: null,\n      searchValue: \"\",\n      searchEnabled: false,\n      searchEditorOptions: {}\n    });\n  },\n  _initMarkup: function () {\n    this._renderSearch();\n\n    this.callBase();\n  },\n  _renderSearch: function () {\n    var $element = this.$element();\n    var searchEnabled = this.option(\"searchEnabled\");\n\n    var searchBoxClassName = this._addWidgetPrefix(\"search\");\n\n    var rootElementClassName = this._addWidgetPrefix(\"with-search\");\n\n    if (!searchEnabled) {\n      $element.removeClass(rootElementClassName);\n\n      this._removeSearchBox();\n\n      return;\n    }\n\n    var editorOptions = this._getSearchEditorOptions();\n\n    if (this._searchEditor) {\n      this._searchEditor.option(editorOptions);\n    } else {\n      $element.addClass(rootElementClassName);\n      this._$searchEditorElement = $(\"<div>\").addClass(searchBoxClassName).prependTo($element);\n      this._searchEditor = this._createComponent(this._$searchEditorElement, EditorClass, editorOptions);\n    }\n  },\n  _removeSearchBox: function () {\n    this._$searchEditorElement && this._$searchEditorElement.remove();\n    delete this._$searchEditorElement;\n    delete this._searchEditor;\n  },\n  _getSearchEditorOptions: function () {\n    var that = this;\n    var userEditorOptions = that.option(\"searchEditorOptions\");\n    var searchText = messageLocalization.format(\"Search\");\n    return extend({\n      mode: \"search\",\n      placeholder: searchText,\n      tabIndex: that.option(\"tabIndex\"),\n      value: that.option(\"searchValue\"),\n      valueChangeEvent: \"input\",\n      inputAttr: {\n        \"aria-label\": searchText\n      },\n      onValueChanged: function (e) {\n        var searchTimeout = that.option(\"searchTimeout\");\n        that._valueChangeDeferred = new Deferred();\n        clearTimeout(that._valueChangeTimeout);\n\n        that._valueChangeDeferred.done(function () {\n          this.option(\"searchValue\", e.value);\n        }.bind(that));\n\n        if (e.event && \"input\" === e.event.type && searchTimeout) {\n          that._valueChangeTimeout = setTimeout(function () {\n            that._valueChangeDeferred.resolve();\n          }, searchTimeout);\n        } else {\n          that._valueChangeDeferred.resolve();\n        }\n      }\n    }, userEditorOptions);\n  },\n  _getAriaTarget: function () {\n    if (this.option(\"searchEnabled\")) {\n      return this._itemContainer(true);\n    }\n\n    return this.$element();\n  },\n  _focusTarget: function () {\n    if (this.option(\"searchEnabled\")) {\n      return this._itemContainer(true);\n    }\n\n    return this.callBase();\n  },\n  _updateFocusState: function (e, isFocused) {\n    if (this.option(\"searchEnabled\")) {\n      this._toggleFocusClass(isFocused, this.$element());\n    }\n\n    this.callBase(e, isFocused);\n  },\n  getOperationBySearchMode: function (searchMode) {\n    return \"equals\" === searchMode ? \"=\" : searchMode;\n  },\n  _cleanAria: function ($target) {\n    this.setAria({\n      role: null,\n      activedescendant: null\n    }, $target);\n    $target.attr(\"tabIndex\", null);\n  },\n  _optionChanged: function (args) {\n    switch (args.name) {\n      case \"searchEnabled\":\n      case \"searchEditorOptions\":\n        this._cleanAria(this.option(\"searchEnabled\") ? this.$element() : this._itemContainer());\n\n        this._invalidate();\n\n        break;\n\n      case \"searchExpr\":\n      case \"searchMode\":\n      case \"searchValue\":\n        if (!this._dataSource) {\n          errors.log(\"W1009\");\n          return;\n        }\n\n        if (\"searchMode\" === args.name) {\n          this._dataSource.searchOperation(this.getOperationBySearchMode(args.value));\n        } else {\n          this._dataSource[args.name](args.value);\n        }\n\n        this._dataSource.load();\n\n        break;\n\n      case \"searchTimeout\":\n        break;\n\n      default:\n        this.callBase(args);\n    }\n  },\n  focus: function () {\n    if (!this.option(\"focusedElement\") && this.option(\"searchEnabled\")) {\n      this._searchEditor && this._searchEditor.focus();\n      return;\n    }\n\n    this.callBase();\n  },\n  _refresh: function () {\n    if (this._valueChangeDeferred) {\n      this._valueChangeDeferred.resolve();\n    }\n\n    this.callBase();\n  },\n  setEditorClass: function (value) {\n    EditorClass = value;\n  }\n};","map":{"version":3,"names":["$","extend","messageLocalization","errors","Deferred","stubComponent","EditorClass","_getDefaultOptions","callBase","searchMode","searchExpr","searchValue","searchEnabled","searchEditorOptions","_initMarkup","_renderSearch","$element","option","searchBoxClassName","_addWidgetPrefix","rootElementClassName","removeClass","_removeSearchBox","editorOptions","_getSearchEditorOptions","_searchEditor","addClass","_$searchEditorElement","prependTo","_createComponent","remove","that","userEditorOptions","searchText","format","mode","placeholder","tabIndex","value","valueChangeEvent","inputAttr","onValueChanged","e","searchTimeout","_valueChangeDeferred","clearTimeout","_valueChangeTimeout","done","bind","event","type","setTimeout","resolve","_getAriaTarget","_itemContainer","_focusTarget","_updateFocusState","isFocused","_toggleFocusClass","getOperationBySearchMode","_cleanAria","$target","setAria","role","activedescendant","attr","_optionChanged","args","name","_invalidate","_dataSource","log","searchOperation","load","focus","_refresh","setEditorClass"],"sources":["E:/MisaProject/MISA_EMIS/MISA.EMIS.FE/node_modules/devextreme/esm/ui/widget/ui.search_box_mixin.js"],"sourcesContent":["/**\r\n * DevExtreme (esm/ui/widget/ui.search_box_mixin.js)\r\n * Version: 22.1.4\r\n * Build date: Fri Jul 22 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport $ from \"../../core/renderer\";\r\nimport {\r\n    extend\r\n} from \"../../core/utils/extend\";\r\nimport messageLocalization from \"../../localization/message\";\r\nimport errors from \"../widget/ui.errors\";\r\nimport {\r\n    Deferred\r\n} from \"../../core/utils/deferred\";\r\nimport {\r\n    stubComponent\r\n} from \"../../core/utils/stubs\";\r\nvar EditorClass = stubComponent(\"TextBox\");\r\nexport default {\r\n    _getDefaultOptions: function() {\r\n        return extend(this.callBase(), {\r\n            searchMode: \"\",\r\n            searchExpr: null,\r\n            searchValue: \"\",\r\n            searchEnabled: false,\r\n            searchEditorOptions: {}\r\n        })\r\n    },\r\n    _initMarkup: function() {\r\n        this._renderSearch();\r\n        this.callBase()\r\n    },\r\n    _renderSearch: function() {\r\n        var $element = this.$element();\r\n        var searchEnabled = this.option(\"searchEnabled\");\r\n        var searchBoxClassName = this._addWidgetPrefix(\"search\");\r\n        var rootElementClassName = this._addWidgetPrefix(\"with-search\");\r\n        if (!searchEnabled) {\r\n            $element.removeClass(rootElementClassName);\r\n            this._removeSearchBox();\r\n            return\r\n        }\r\n        var editorOptions = this._getSearchEditorOptions();\r\n        if (this._searchEditor) {\r\n            this._searchEditor.option(editorOptions)\r\n        } else {\r\n            $element.addClass(rootElementClassName);\r\n            this._$searchEditorElement = $(\"<div>\").addClass(searchBoxClassName).prependTo($element);\r\n            this._searchEditor = this._createComponent(this._$searchEditorElement, EditorClass, editorOptions)\r\n        }\r\n    },\r\n    _removeSearchBox: function() {\r\n        this._$searchEditorElement && this._$searchEditorElement.remove();\r\n        delete this._$searchEditorElement;\r\n        delete this._searchEditor\r\n    },\r\n    _getSearchEditorOptions: function() {\r\n        var that = this;\r\n        var userEditorOptions = that.option(\"searchEditorOptions\");\r\n        var searchText = messageLocalization.format(\"Search\");\r\n        return extend({\r\n            mode: \"search\",\r\n            placeholder: searchText,\r\n            tabIndex: that.option(\"tabIndex\"),\r\n            value: that.option(\"searchValue\"),\r\n            valueChangeEvent: \"input\",\r\n            inputAttr: {\r\n                \"aria-label\": searchText\r\n            },\r\n            onValueChanged: function(e) {\r\n                var searchTimeout = that.option(\"searchTimeout\");\r\n                that._valueChangeDeferred = new Deferred;\r\n                clearTimeout(that._valueChangeTimeout);\r\n                that._valueChangeDeferred.done(function() {\r\n                    this.option(\"searchValue\", e.value)\r\n                }.bind(that));\r\n                if (e.event && \"input\" === e.event.type && searchTimeout) {\r\n                    that._valueChangeTimeout = setTimeout((function() {\r\n                        that._valueChangeDeferred.resolve()\r\n                    }), searchTimeout)\r\n                } else {\r\n                    that._valueChangeDeferred.resolve()\r\n                }\r\n            }\r\n        }, userEditorOptions)\r\n    },\r\n    _getAriaTarget: function() {\r\n        if (this.option(\"searchEnabled\")) {\r\n            return this._itemContainer(true)\r\n        }\r\n        return this.$element()\r\n    },\r\n    _focusTarget: function() {\r\n        if (this.option(\"searchEnabled\")) {\r\n            return this._itemContainer(true)\r\n        }\r\n        return this.callBase()\r\n    },\r\n    _updateFocusState: function(e, isFocused) {\r\n        if (this.option(\"searchEnabled\")) {\r\n            this._toggleFocusClass(isFocused, this.$element())\r\n        }\r\n        this.callBase(e, isFocused)\r\n    },\r\n    getOperationBySearchMode: function(searchMode) {\r\n        return \"equals\" === searchMode ? \"=\" : searchMode\r\n    },\r\n    _cleanAria: function($target) {\r\n        this.setAria({\r\n            role: null,\r\n            activedescendant: null\r\n        }, $target);\r\n        $target.attr(\"tabIndex\", null)\r\n    },\r\n    _optionChanged: function(args) {\r\n        switch (args.name) {\r\n            case \"searchEnabled\":\r\n            case \"searchEditorOptions\":\r\n                this._cleanAria(this.option(\"searchEnabled\") ? this.$element() : this._itemContainer());\r\n                this._invalidate();\r\n                break;\r\n            case \"searchExpr\":\r\n            case \"searchMode\":\r\n            case \"searchValue\":\r\n                if (!this._dataSource) {\r\n                    errors.log(\"W1009\");\r\n                    return\r\n                }\r\n                if (\"searchMode\" === args.name) {\r\n                    this._dataSource.searchOperation(this.getOperationBySearchMode(args.value))\r\n                } else {\r\n                    this._dataSource[args.name](args.value)\r\n                }\r\n                this._dataSource.load();\r\n                break;\r\n            case \"searchTimeout\":\r\n                break;\r\n            default:\r\n                this.callBase(args)\r\n        }\r\n    },\r\n    focus: function() {\r\n        if (!this.option(\"focusedElement\") && this.option(\"searchEnabled\")) {\r\n            this._searchEditor && this._searchEditor.focus();\r\n            return\r\n        }\r\n        this.callBase()\r\n    },\r\n    _refresh: function() {\r\n        if (this._valueChangeDeferred) {\r\n            this._valueChangeDeferred.resolve()\r\n        }\r\n        this.callBase()\r\n    },\r\n    setEditorClass: function(value) {\r\n        EditorClass = value\r\n    }\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}