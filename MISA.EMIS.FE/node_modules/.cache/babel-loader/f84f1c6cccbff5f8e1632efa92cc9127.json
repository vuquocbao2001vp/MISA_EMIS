{"ast":null,"code":"/**\r\n * DevExtreme (esm/viz/funnel/label.js)\r\n * Version: 22.1.4\r\n * Build date: Fri Jul 22 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport { Label } from \"../series/points/label\";\nimport { normalizeEnum } from \"../core/utils\";\nimport { extend } from \"../../core/utils/extend\";\nimport { noop } from \"../../core/utils/common\";\nvar OUTSIDE_POSITION = \"outside\";\nvar INSIDE_POSITION = \"inside\";\nvar OUTSIDE_LABEL_INDENT = 5;\nvar COLUMNS_LABEL_INDENT = 20;\nvar CONNECTOR_INDENT = 4;\nvar PREVENT_EMPTY_PIXEL_OFFSET = 1;\n\nfunction getLabelIndent(pos) {\n  pos = normalizeEnum(pos);\n\n  if (pos === OUTSIDE_POSITION) {\n    return OUTSIDE_LABEL_INDENT;\n  } else if (pos === INSIDE_POSITION) {\n    return 0;\n  }\n\n  return COLUMNS_LABEL_INDENT;\n}\n\nfunction isOutsidePosition(pos) {\n  pos = normalizeEnum(pos);\n  return pos === OUTSIDE_POSITION || pos !== INSIDE_POSITION;\n}\n\nfunction correctYForInverted(y, bBox, inverted) {\n  return inverted ? y - bBox.height : y;\n}\n\nfunction getOutsideRightLabelPosition(coords, bBox, options, inverted) {\n  return {\n    x: coords[2] + options.horizontalOffset + OUTSIDE_LABEL_INDENT,\n    y: correctYForInverted(coords[3] + options.verticalOffset, bBox, inverted)\n  };\n}\n\nfunction getOutsideLeftLabelPosition(coords, bBox, options, inverted) {\n  return {\n    x: coords[0] - bBox.width - options.horizontalOffset - OUTSIDE_LABEL_INDENT,\n    y: correctYForInverted(coords[1] + options.verticalOffset, bBox, inverted)\n  };\n}\n\nfunction getInsideLabelPosition(coords, bBox, options) {\n  var width = coords[2] - coords[0];\n  var height = coords[7] - coords[1];\n  return {\n    x: coords[0] + width / 2 + options.horizontalOffset - bBox.width / 2,\n    y: coords[1] + options.verticalOffset + height / 2 - bBox.height / 2\n  };\n}\n\nfunction getColumnLabelRightPosition(labelRect, rect, textAlignment) {\n  return function (coords, bBox, options, inverted) {\n    return {\n      x: \"left\" === textAlignment ? rect[2] + options.horizontalOffset + COLUMNS_LABEL_INDENT : labelRect[2] - bBox.width,\n      y: correctYForInverted(coords[3] + options.verticalOffset, bBox, inverted)\n    };\n  };\n}\n\nfunction getColumnLabelLeftPosition(labelRect, rect, textAlignment) {\n  return function (coords, bBox, options, inverted) {\n    return {\n      x: \"left\" === textAlignment ? labelRect[0] : rect[0] - bBox.width - options.horizontalOffset - COLUMNS_LABEL_INDENT,\n      y: correctYForInverted(coords[3] + options.verticalOffset, bBox, inverted)\n    };\n  };\n}\n\nfunction getConnectorStrategy(options, inverted) {\n  var isLeftPos = \"left\" === options.horizontalAlignment;\n  var connectorIndent = isLeftPos ? CONNECTOR_INDENT : -CONNECTOR_INDENT;\n  var verticalCorrection = inverted ? -PREVENT_EMPTY_PIXEL_OFFSET : 0;\n\n  function getFigureCenter(figure) {\n    return isLeftPos ? [figure[0] + PREVENT_EMPTY_PIXEL_OFFSET, figure[1] + verticalCorrection] : [figure[2] - PREVENT_EMPTY_PIXEL_OFFSET, figure[3] + verticalCorrection];\n  }\n\n  return {\n    isLabelInside: function () {\n      return !isOutsidePosition(options.position);\n    },\n    getFigureCenter: getFigureCenter,\n    prepareLabelPoints: function (bBox) {\n      var x = bBox.x + connectorIndent;\n      var y = bBox.y;\n      var x1 = x + bBox.width;\n      return [...Array(bBox.height + 1)].map((_, i) => [x, y + i]).concat([...Array(bBox.height + 1)].map((_, i) => [x1, y + i]));\n    },\n    isHorizontal: function () {\n      return true;\n    },\n    findFigurePoint: function (figure) {\n      return getFigureCenter(figure);\n    },\n    adjustPoints: function (points) {\n      return points.map(Math.round);\n    }\n  };\n}\n\nfunction getLabelOptions(labelOptions, defaultColor, defaultTextAlignment) {\n  var opt = labelOptions || {};\n  var labelFont = extend({}, opt.font) || {};\n  var labelBorder = opt.border || {};\n  var labelConnector = opt.connector || {};\n  var backgroundAttr = {\n    fill: opt.backgroundColor || defaultColor,\n    \"stroke-width\": labelBorder.visible ? labelBorder.width || 0 : 0,\n    stroke: labelBorder.visible && labelBorder.width ? labelBorder.color : \"none\",\n    dashStyle: labelBorder.dashStyle\n  };\n  var connectorAttr = {\n    stroke: labelConnector.visible && labelConnector.width ? labelConnector.color || defaultColor : \"none\",\n    \"stroke-width\": labelConnector.visible ? labelConnector.width || 0 : 0,\n    opacity: labelConnector.opacity\n  };\n  labelFont.color = \"none\" === opt.backgroundColor && \"#ffffff\" === normalizeEnum(labelFont.color) && \"inside\" !== opt.position ? defaultColor : labelFont.color;\n  return {\n    format: opt.format,\n    textAlignment: opt.textAlignment || (isOutsidePosition(opt.position) ? defaultTextAlignment : \"center\"),\n    customizeText: opt.customizeText,\n    attributes: {\n      font: labelFont\n    },\n    visible: 0 !== labelFont.size ? opt.visible : false,\n    showForZeroValues: opt.showForZeroValues,\n    horizontalOffset: opt.horizontalOffset,\n    verticalOffset: opt.verticalOffset,\n    background: backgroundAttr,\n    connector: connectorAttr,\n    wordWrap: labelOptions.wordWrap,\n    textOverflow: labelOptions.textOverflow\n  };\n}\n\nfunction correctLabelPosition(pos, bBox, rect) {\n  if (pos.x < rect[0]) {\n    pos.x = rect[0];\n  }\n\n  if (pos.x + bBox.width > rect[2]) {\n    pos.x = rect[2] - bBox.width;\n  }\n\n  if (pos.y < rect[1]) {\n    pos.y = rect[1];\n  }\n\n  if (pos.y + bBox.height > rect[3]) {\n    pos.y = rect[3] - bBox.height;\n  }\n\n  return pos;\n}\n\nfunction removeEmptySpace(labels, requiredSpace, startPoint) {\n  labels.reduce((requiredSpace, label, index, labels) => {\n    var prevLabel = labels[index + 1];\n\n    if (requiredSpace > 0) {\n      var bBox = label.getBoundingRect();\n      var point = prevLabel ? prevLabel.getBoundingRect().y + prevLabel.getBoundingRect().height : startPoint;\n      var emptySpace = bBox.y - point;\n      var shift = Math.min(emptySpace, requiredSpace);\n      labels.slice(0, index + 1).forEach(label => {\n        var bBox = label.getBoundingRect();\n        label.shift(bBox.x, bBox.y - shift);\n      });\n      requiredSpace -= shift;\n    }\n\n    return requiredSpace;\n  }, requiredSpace);\n}\n\nexport var plugin = {\n  name: \"lables\",\n  init: noop,\n  dispose: noop,\n  extenders: {\n    _initCore: function () {\n      this._labelsGroup = this._renderer.g().attr({\n        class: this._rootClassPrefix + \"-labels\"\n      }).append(this._renderer.root);\n      this._labels = [];\n    },\n    _applySize: function () {\n      var options = this._getOption(\"label\");\n\n      var adaptiveLayout = this._getOption(\"adaptiveLayout\");\n\n      var rect = this._rect;\n      var labelWidth = 0;\n      var width = rect[2] - rect[0];\n      this._labelRect = rect.slice();\n\n      if (!this._labels.length || !isOutsidePosition(options.position)) {\n        if (normalizeEnum(\"none\" !== this._getOption(\"resolveLabelOverlapping\", true))) {\n          this._labels.forEach(l => !l.isVisible() && l.draw(true));\n        }\n\n        return;\n      }\n\n      var groupWidth = this._labels.map(function (label) {\n        label.resetEllipsis();\n        return label.getBoundingRect().width;\n      }).reduce(function (max, width) {\n        return Math.max(max, width);\n      }, 0);\n\n      labelWidth = groupWidth + options.horizontalOffset + getLabelIndent(options.position);\n\n      if (!adaptiveLayout.keepLabels && width - labelWidth < adaptiveLayout.width) {\n        this._labels.forEach(function (label) {\n          label.draw(false);\n        });\n\n        return;\n      } else {\n        if (width - labelWidth < adaptiveLayout.width) {\n          labelWidth = width - adaptiveLayout.width;\n          labelWidth = labelWidth > 0 ? labelWidth : 0;\n        }\n\n        this._labels.forEach(function (label) {\n          label.draw(true);\n        });\n      }\n\n      if (\"left\" === options.horizontalAlignment) {\n        rect[0] += labelWidth;\n      } else {\n        rect[2] -= labelWidth;\n      }\n    },\n    _buildNodes: function () {\n      this._createLabels();\n    },\n    _change_TILING: function () {\n      var that = this;\n\n      var options = that._getOption(\"label\");\n\n      var getCoords = getInsideLabelPosition;\n\n      var inverted = that._getOption(\"inverted\", true);\n\n      var textAlignment;\n\n      if (isOutsidePosition(options.position)) {\n        if (normalizeEnum(options.position) === OUTSIDE_POSITION) {\n          getCoords = \"left\" === options.horizontalAlignment ? getOutsideLeftLabelPosition : getOutsideRightLabelPosition;\n        } else {\n          textAlignment = this._defaultLabelTextAlignment();\n          getCoords = \"left\" === options.horizontalAlignment ? getColumnLabelLeftPosition(this._labelRect, this._rect, textAlignment) : getColumnLabelRightPosition(this._labelRect, this._rect, textAlignment);\n        }\n      }\n\n      that._labels.forEach(function (label, index) {\n        var item = that._items[index];\n        var borderWidth = item.getNormalStyle()[\"stroke-width\"];\n        var halfBorderWidth = inverted ? borderWidth / 2 : -borderWidth / 2;\n        var coords = halfBorderWidth ? item.coords.map(function (coord, index) {\n          if (1 === index || 3 === index) {\n            return coord - halfBorderWidth;\n          } else if (2 === index) {\n            return coord - borderWidth;\n          } else if (0 === index) {\n            return coord + borderWidth;\n          }\n\n          return coord;\n        }) : item.coords;\n\n        if (!options.showForZeroValues && 0 === item.value) {\n          label.draw(false);\n          return;\n        }\n\n        if (isOutsidePosition(options.position)) {\n          that._correctLabelWidth(label, item.coords, options);\n        }\n\n        var bBox = label.getBoundingRect();\n        var pos = correctLabelPosition(getCoords(coords, bBox, options, inverted), bBox, that._labelRect);\n        label.setFigureToDrawConnector(coords);\n        label.shift(pos.x, pos.y);\n      });\n\n      that._resolveLabelOverlapping();\n    }\n  },\n  members: {\n    _resolveLabelOverlapping() {\n      var that = this;\n      var resolveLabelOverlapping = normalizeEnum(that._getOption(\"resolveLabelOverlapping\", true));\n      var labels = this._getOption(\"inverted\", true) ? that._labels.slice().reverse() : that._labels;\n\n      if (\"hide\" === resolveLabelOverlapping) {\n        labels.reduce((height, label) => {\n          if (label.getBoundingRect().y < height) {\n            label.hide();\n          } else {\n            height = label.getBoundingRect().y + label.getBoundingRect().height;\n          }\n\n          return height;\n        }, 0);\n      } else if (\"shift\" === resolveLabelOverlapping) {\n        var maxHeight = this._labelRect[3];\n        labels.reduce((_ref, label, index, labels) => {\n          var [height, emptySpace] = _ref;\n          var bBox = label.getBoundingRect();\n          var y = bBox.y;\n\n          if (bBox.y < height) {\n            label.shift(bBox.x, height);\n            y = height;\n          }\n\n          if (y - height > 0) {\n            emptySpace += y - height;\n          }\n\n          if (y + bBox.height > maxHeight) {\n            if (emptySpace && emptySpace > y + bBox.height - maxHeight) {\n              removeEmptySpace(labels.slice(0, index).reverse(), y + bBox.height - maxHeight, that._labelRect[1]);\n              emptySpace -= y + bBox.height - maxHeight;\n              label.shift(bBox.x, y - (y + bBox.height - maxHeight));\n              height = y - (y + bBox.height - maxHeight) + bBox.height;\n            } else {\n              label.hide();\n            }\n          } else {\n            height = y + bBox.height;\n          }\n\n          return [height, emptySpace];\n        }, [this._labelRect[1], 0]);\n      }\n    },\n\n    _defaultLabelTextAlignment: function () {\n      return this._getOption(\"rtlEnabled\", true) ? \"right\" : \"left\";\n    },\n    _correctLabelWidth: function (label, item, options) {\n      var isLeftPos = \"left\" === options.horizontalAlignment;\n      var minX = isLeftPos ? this._labelRect[0] : item[2];\n      var maxX = isLeftPos ? item[0] : this._labelRect[2];\n      var maxWidth = maxX - minX;\n\n      if (label.getBoundingRect().width > maxWidth) {\n        label.fit(maxWidth);\n      }\n    },\n    _createLabels: function () {\n      var that = this;\n\n      var labelOptions = that._getOption(\"label\");\n\n      var connectorStrategy = getConnectorStrategy(labelOptions, that._getOption(\"inverted\", true));\n\n      this._labelsGroup.clear();\n\n      if (!labelOptions.visible) {\n        return;\n      }\n\n      this._labels = that._items.map(function (item) {\n        var label = new Label({\n          renderer: that._renderer,\n          labelsGroup: that._labelsGroup,\n          strategy: connectorStrategy\n        });\n        label.setOptions(getLabelOptions(labelOptions, item.color, that._defaultLabelTextAlignment()));\n        label.setData({\n          item: item,\n          value: item.value,\n          percent: item.percent\n        });\n        label.draw(true);\n        return label;\n      });\n\n      if (this._labels.length && isOutsidePosition(labelOptions.position)) {\n        this._requestChange([\"LAYOUT\"]);\n      }\n    }\n  },\n  customize: function (constructor) {\n    constructor.prototype._proxyData.push(function (x, y) {\n      var that = this;\n      var data;\n\n      that._labels.forEach(function (label, index) {\n        var rect = label.getBoundingRect();\n\n        if (x >= rect.x && x <= rect.x + rect.width && y >= rect.y && y <= rect.y + rect.height) {\n          var pos = isOutsidePosition(that._getOption(\"label\").position) ? \"outside\" : \"inside\";\n          data = {\n            id: index,\n            type: pos + \"-label\"\n          };\n          return true;\n        }\n      });\n\n      return data;\n    });\n\n    [\"label\", \"resolveLabelOverlapping\"].forEach(optionName => {\n      constructor.addChange({\n        code: optionName.toUpperCase(),\n        handler: function () {\n          this._createLabels();\n\n          this._requestChange([\"LAYOUT\"]);\n        },\n        isThemeDependent: true,\n        isOptionChange: true,\n        option: optionName\n      });\n    });\n  },\n  fontFields: [\"label.font\"]\n};","map":{"version":3,"names":["Label","normalizeEnum","extend","noop","OUTSIDE_POSITION","INSIDE_POSITION","OUTSIDE_LABEL_INDENT","COLUMNS_LABEL_INDENT","CONNECTOR_INDENT","PREVENT_EMPTY_PIXEL_OFFSET","getLabelIndent","pos","isOutsidePosition","correctYForInverted","y","bBox","inverted","height","getOutsideRightLabelPosition","coords","options","x","horizontalOffset","verticalOffset","getOutsideLeftLabelPosition","width","getInsideLabelPosition","getColumnLabelRightPosition","labelRect","rect","textAlignment","getColumnLabelLeftPosition","getConnectorStrategy","isLeftPos","horizontalAlignment","connectorIndent","verticalCorrection","getFigureCenter","figure","isLabelInside","position","prepareLabelPoints","x1","Array","map","_","i","concat","isHorizontal","findFigurePoint","adjustPoints","points","Math","round","getLabelOptions","labelOptions","defaultColor","defaultTextAlignment","opt","labelFont","font","labelBorder","border","labelConnector","connector","backgroundAttr","fill","backgroundColor","visible","stroke","color","dashStyle","connectorAttr","opacity","format","customizeText","attributes","size","showForZeroValues","background","wordWrap","textOverflow","correctLabelPosition","removeEmptySpace","labels","requiredSpace","startPoint","reduce","label","index","prevLabel","getBoundingRect","point","emptySpace","shift","min","slice","forEach","plugin","name","init","dispose","extenders","_initCore","_labelsGroup","_renderer","g","attr","class","_rootClassPrefix","append","root","_labels","_applySize","_getOption","adaptiveLayout","_rect","labelWidth","_labelRect","length","l","isVisible","draw","groupWidth","resetEllipsis","max","keepLabels","_buildNodes","_createLabels","_change_TILING","that","getCoords","_defaultLabelTextAlignment","item","_items","borderWidth","getNormalStyle","halfBorderWidth","coord","value","_correctLabelWidth","setFigureToDrawConnector","_resolveLabelOverlapping","members","resolveLabelOverlapping","reverse","hide","maxHeight","_ref","minX","maxX","maxWidth","fit","connectorStrategy","clear","renderer","labelsGroup","strategy","setOptions","setData","percent","_requestChange","customize","constructor","prototype","_proxyData","push","data","id","type","optionName","addChange","code","toUpperCase","handler","isThemeDependent","isOptionChange","option","fontFields"],"sources":["E:/MisaProject/W2022_06/misa_emis/node_modules/devextreme/esm/viz/funnel/label.js"],"sourcesContent":["/**\r\n * DevExtreme (esm/viz/funnel/label.js)\r\n * Version: 22.1.4\r\n * Build date: Fri Jul 22 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport {\r\n    Label\r\n} from \"../series/points/label\";\r\nimport {\r\n    normalizeEnum\r\n} from \"../core/utils\";\r\nimport {\r\n    extend\r\n} from \"../../core/utils/extend\";\r\nimport {\r\n    noop\r\n} from \"../../core/utils/common\";\r\nvar OUTSIDE_POSITION = \"outside\";\r\nvar INSIDE_POSITION = \"inside\";\r\nvar OUTSIDE_LABEL_INDENT = 5;\r\nvar COLUMNS_LABEL_INDENT = 20;\r\nvar CONNECTOR_INDENT = 4;\r\nvar PREVENT_EMPTY_PIXEL_OFFSET = 1;\r\n\r\nfunction getLabelIndent(pos) {\r\n    pos = normalizeEnum(pos);\r\n    if (pos === OUTSIDE_POSITION) {\r\n        return OUTSIDE_LABEL_INDENT\r\n    } else if (pos === INSIDE_POSITION) {\r\n        return 0\r\n    }\r\n    return COLUMNS_LABEL_INDENT\r\n}\r\n\r\nfunction isOutsidePosition(pos) {\r\n    pos = normalizeEnum(pos);\r\n    return pos === OUTSIDE_POSITION || pos !== INSIDE_POSITION\r\n}\r\n\r\nfunction correctYForInverted(y, bBox, inverted) {\r\n    return inverted ? y - bBox.height : y\r\n}\r\n\r\nfunction getOutsideRightLabelPosition(coords, bBox, options, inverted) {\r\n    return {\r\n        x: coords[2] + options.horizontalOffset + OUTSIDE_LABEL_INDENT,\r\n        y: correctYForInverted(coords[3] + options.verticalOffset, bBox, inverted)\r\n    }\r\n}\r\n\r\nfunction getOutsideLeftLabelPosition(coords, bBox, options, inverted) {\r\n    return {\r\n        x: coords[0] - bBox.width - options.horizontalOffset - OUTSIDE_LABEL_INDENT,\r\n        y: correctYForInverted(coords[1] + options.verticalOffset, bBox, inverted)\r\n    }\r\n}\r\n\r\nfunction getInsideLabelPosition(coords, bBox, options) {\r\n    var width = coords[2] - coords[0];\r\n    var height = coords[7] - coords[1];\r\n    return {\r\n        x: coords[0] + width / 2 + options.horizontalOffset - bBox.width / 2,\r\n        y: coords[1] + options.verticalOffset + height / 2 - bBox.height / 2\r\n    }\r\n}\r\n\r\nfunction getColumnLabelRightPosition(labelRect, rect, textAlignment) {\r\n    return function(coords, bBox, options, inverted) {\r\n        return {\r\n            x: \"left\" === textAlignment ? rect[2] + options.horizontalOffset + COLUMNS_LABEL_INDENT : labelRect[2] - bBox.width,\r\n            y: correctYForInverted(coords[3] + options.verticalOffset, bBox, inverted)\r\n        }\r\n    }\r\n}\r\n\r\nfunction getColumnLabelLeftPosition(labelRect, rect, textAlignment) {\r\n    return function(coords, bBox, options, inverted) {\r\n        return {\r\n            x: \"left\" === textAlignment ? labelRect[0] : rect[0] - bBox.width - options.horizontalOffset - COLUMNS_LABEL_INDENT,\r\n            y: correctYForInverted(coords[3] + options.verticalOffset, bBox, inverted)\r\n        }\r\n    }\r\n}\r\n\r\nfunction getConnectorStrategy(options, inverted) {\r\n    var isLeftPos = \"left\" === options.horizontalAlignment;\r\n    var connectorIndent = isLeftPos ? CONNECTOR_INDENT : -CONNECTOR_INDENT;\r\n    var verticalCorrection = inverted ? -PREVENT_EMPTY_PIXEL_OFFSET : 0;\r\n\r\n    function getFigureCenter(figure) {\r\n        return isLeftPos ? [figure[0] + PREVENT_EMPTY_PIXEL_OFFSET, figure[1] + verticalCorrection] : [figure[2] - PREVENT_EMPTY_PIXEL_OFFSET, figure[3] + verticalCorrection]\r\n    }\r\n    return {\r\n        isLabelInside: function() {\r\n            return !isOutsidePosition(options.position)\r\n        },\r\n        getFigureCenter: getFigureCenter,\r\n        prepareLabelPoints: function(bBox) {\r\n            var x = bBox.x + connectorIndent;\r\n            var y = bBox.y;\r\n            var x1 = x + bBox.width;\r\n            return [...Array(bBox.height + 1)].map((_, i) => [x, y + i]).concat([...Array(bBox.height + 1)].map((_, i) => [x1, y + i]))\r\n        },\r\n        isHorizontal: function() {\r\n            return true\r\n        },\r\n        findFigurePoint: function(figure) {\r\n            return getFigureCenter(figure)\r\n        },\r\n        adjustPoints: function(points) {\r\n            return points.map(Math.round)\r\n        }\r\n    }\r\n}\r\n\r\nfunction getLabelOptions(labelOptions, defaultColor, defaultTextAlignment) {\r\n    var opt = labelOptions || {};\r\n    var labelFont = extend({}, opt.font) || {};\r\n    var labelBorder = opt.border || {};\r\n    var labelConnector = opt.connector || {};\r\n    var backgroundAttr = {\r\n        fill: opt.backgroundColor || defaultColor,\r\n        \"stroke-width\": labelBorder.visible ? labelBorder.width || 0 : 0,\r\n        stroke: labelBorder.visible && labelBorder.width ? labelBorder.color : \"none\",\r\n        dashStyle: labelBorder.dashStyle\r\n    };\r\n    var connectorAttr = {\r\n        stroke: labelConnector.visible && labelConnector.width ? labelConnector.color || defaultColor : \"none\",\r\n        \"stroke-width\": labelConnector.visible ? labelConnector.width || 0 : 0,\r\n        opacity: labelConnector.opacity\r\n    };\r\n    labelFont.color = \"none\" === opt.backgroundColor && \"#ffffff\" === normalizeEnum(labelFont.color) && \"inside\" !== opt.position ? defaultColor : labelFont.color;\r\n    return {\r\n        format: opt.format,\r\n        textAlignment: opt.textAlignment || (isOutsidePosition(opt.position) ? defaultTextAlignment : \"center\"),\r\n        customizeText: opt.customizeText,\r\n        attributes: {\r\n            font: labelFont\r\n        },\r\n        visible: 0 !== labelFont.size ? opt.visible : false,\r\n        showForZeroValues: opt.showForZeroValues,\r\n        horizontalOffset: opt.horizontalOffset,\r\n        verticalOffset: opt.verticalOffset,\r\n        background: backgroundAttr,\r\n        connector: connectorAttr,\r\n        wordWrap: labelOptions.wordWrap,\r\n        textOverflow: labelOptions.textOverflow\r\n    }\r\n}\r\n\r\nfunction correctLabelPosition(pos, bBox, rect) {\r\n    if (pos.x < rect[0]) {\r\n        pos.x = rect[0]\r\n    }\r\n    if (pos.x + bBox.width > rect[2]) {\r\n        pos.x = rect[2] - bBox.width\r\n    }\r\n    if (pos.y < rect[1]) {\r\n        pos.y = rect[1]\r\n    }\r\n    if (pos.y + bBox.height > rect[3]) {\r\n        pos.y = rect[3] - bBox.height\r\n    }\r\n    return pos\r\n}\r\n\r\nfunction removeEmptySpace(labels, requiredSpace, startPoint) {\r\n    labels.reduce((requiredSpace, label, index, labels) => {\r\n        var prevLabel = labels[index + 1];\r\n        if (requiredSpace > 0) {\r\n            var bBox = label.getBoundingRect();\r\n            var point = prevLabel ? prevLabel.getBoundingRect().y + prevLabel.getBoundingRect().height : startPoint;\r\n            var emptySpace = bBox.y - point;\r\n            var shift = Math.min(emptySpace, requiredSpace);\r\n            labels.slice(0, index + 1).forEach(label => {\r\n                var bBox = label.getBoundingRect();\r\n                label.shift(bBox.x, bBox.y - shift)\r\n            });\r\n            requiredSpace -= shift\r\n        }\r\n        return requiredSpace\r\n    }, requiredSpace)\r\n}\r\nexport var plugin = {\r\n    name: \"lables\",\r\n    init: noop,\r\n    dispose: noop,\r\n    extenders: {\r\n        _initCore: function() {\r\n            this._labelsGroup = this._renderer.g().attr({\r\n                class: this._rootClassPrefix + \"-labels\"\r\n            }).append(this._renderer.root);\r\n            this._labels = []\r\n        },\r\n        _applySize: function() {\r\n            var options = this._getOption(\"label\");\r\n            var adaptiveLayout = this._getOption(\"adaptiveLayout\");\r\n            var rect = this._rect;\r\n            var labelWidth = 0;\r\n            var width = rect[2] - rect[0];\r\n            this._labelRect = rect.slice();\r\n            if (!this._labels.length || !isOutsidePosition(options.position)) {\r\n                if (normalizeEnum(\"none\" !== this._getOption(\"resolveLabelOverlapping\", true))) {\r\n                    this._labels.forEach(l => !l.isVisible() && l.draw(true))\r\n                }\r\n                return\r\n            }\r\n            var groupWidth = this._labels.map((function(label) {\r\n                label.resetEllipsis();\r\n                return label.getBoundingRect().width\r\n            })).reduce((function(max, width) {\r\n                return Math.max(max, width)\r\n            }), 0);\r\n            labelWidth = groupWidth + options.horizontalOffset + getLabelIndent(options.position);\r\n            if (!adaptiveLayout.keepLabels && width - labelWidth < adaptiveLayout.width) {\r\n                this._labels.forEach((function(label) {\r\n                    label.draw(false)\r\n                }));\r\n                return\r\n            } else {\r\n                if (width - labelWidth < adaptiveLayout.width) {\r\n                    labelWidth = width - adaptiveLayout.width;\r\n                    labelWidth = labelWidth > 0 ? labelWidth : 0\r\n                }\r\n                this._labels.forEach((function(label) {\r\n                    label.draw(true)\r\n                }))\r\n            }\r\n            if (\"left\" === options.horizontalAlignment) {\r\n                rect[0] += labelWidth\r\n            } else {\r\n                rect[2] -= labelWidth\r\n            }\r\n        },\r\n        _buildNodes: function() {\r\n            this._createLabels()\r\n        },\r\n        _change_TILING: function() {\r\n            var that = this;\r\n            var options = that._getOption(\"label\");\r\n            var getCoords = getInsideLabelPosition;\r\n            var inverted = that._getOption(\"inverted\", true);\r\n            var textAlignment;\r\n            if (isOutsidePosition(options.position)) {\r\n                if (normalizeEnum(options.position) === OUTSIDE_POSITION) {\r\n                    getCoords = \"left\" === options.horizontalAlignment ? getOutsideLeftLabelPosition : getOutsideRightLabelPosition\r\n                } else {\r\n                    textAlignment = this._defaultLabelTextAlignment();\r\n                    getCoords = \"left\" === options.horizontalAlignment ? getColumnLabelLeftPosition(this._labelRect, this._rect, textAlignment) : getColumnLabelRightPosition(this._labelRect, this._rect, textAlignment)\r\n                }\r\n            }\r\n            that._labels.forEach((function(label, index) {\r\n                var item = that._items[index];\r\n                var borderWidth = item.getNormalStyle()[\"stroke-width\"];\r\n                var halfBorderWidth = inverted ? borderWidth / 2 : -borderWidth / 2;\r\n                var coords = halfBorderWidth ? item.coords.map((function(coord, index) {\r\n                    if (1 === index || 3 === index) {\r\n                        return coord - halfBorderWidth\r\n                    } else if (2 === index) {\r\n                        return coord - borderWidth\r\n                    } else if (0 === index) {\r\n                        return coord + borderWidth\r\n                    }\r\n                    return coord\r\n                })) : item.coords;\r\n                if (!options.showForZeroValues && 0 === item.value) {\r\n                    label.draw(false);\r\n                    return\r\n                }\r\n                if (isOutsidePosition(options.position)) {\r\n                    that._correctLabelWidth(label, item.coords, options)\r\n                }\r\n                var bBox = label.getBoundingRect();\r\n                var pos = correctLabelPosition(getCoords(coords, bBox, options, inverted), bBox, that._labelRect);\r\n                label.setFigureToDrawConnector(coords);\r\n                label.shift(pos.x, pos.y)\r\n            }));\r\n            that._resolveLabelOverlapping()\r\n        }\r\n    },\r\n    members: {\r\n        _resolveLabelOverlapping() {\r\n            var that = this;\r\n            var resolveLabelOverlapping = normalizeEnum(that._getOption(\"resolveLabelOverlapping\", true));\r\n            var labels = this._getOption(\"inverted\", true) ? that._labels.slice().reverse() : that._labels;\r\n            if (\"hide\" === resolveLabelOverlapping) {\r\n                labels.reduce((height, label) => {\r\n                    if (label.getBoundingRect().y < height) {\r\n                        label.hide()\r\n                    } else {\r\n                        height = label.getBoundingRect().y + label.getBoundingRect().height\r\n                    }\r\n                    return height\r\n                }, 0)\r\n            } else if (\"shift\" === resolveLabelOverlapping) {\r\n                var maxHeight = this._labelRect[3];\r\n                labels.reduce((_ref, label, index, labels) => {\r\n                    var [height, emptySpace] = _ref;\r\n                    var bBox = label.getBoundingRect();\r\n                    var y = bBox.y;\r\n                    if (bBox.y < height) {\r\n                        label.shift(bBox.x, height);\r\n                        y = height\r\n                    }\r\n                    if (y - height > 0) {\r\n                        emptySpace += y - height\r\n                    }\r\n                    if (y + bBox.height > maxHeight) {\r\n                        if (emptySpace && emptySpace > y + bBox.height - maxHeight) {\r\n                            removeEmptySpace(labels.slice(0, index).reverse(), y + bBox.height - maxHeight, that._labelRect[1]);\r\n                            emptySpace -= y + bBox.height - maxHeight;\r\n                            label.shift(bBox.x, y - (y + bBox.height - maxHeight));\r\n                            height = y - (y + bBox.height - maxHeight) + bBox.height\r\n                        } else {\r\n                            label.hide()\r\n                        }\r\n                    } else {\r\n                        height = y + bBox.height\r\n                    }\r\n                    return [height, emptySpace]\r\n                }, [this._labelRect[1], 0])\r\n            }\r\n        },\r\n        _defaultLabelTextAlignment: function() {\r\n            return this._getOption(\"rtlEnabled\", true) ? \"right\" : \"left\"\r\n        },\r\n        _correctLabelWidth: function(label, item, options) {\r\n            var isLeftPos = \"left\" === options.horizontalAlignment;\r\n            var minX = isLeftPos ? this._labelRect[0] : item[2];\r\n            var maxX = isLeftPos ? item[0] : this._labelRect[2];\r\n            var maxWidth = maxX - minX;\r\n            if (label.getBoundingRect().width > maxWidth) {\r\n                label.fit(maxWidth)\r\n            }\r\n        },\r\n        _createLabels: function() {\r\n            var that = this;\r\n            var labelOptions = that._getOption(\"label\");\r\n            var connectorStrategy = getConnectorStrategy(labelOptions, that._getOption(\"inverted\", true));\r\n            this._labelsGroup.clear();\r\n            if (!labelOptions.visible) {\r\n                return\r\n            }\r\n            this._labels = that._items.map((function(item) {\r\n                var label = new Label({\r\n                    renderer: that._renderer,\r\n                    labelsGroup: that._labelsGroup,\r\n                    strategy: connectorStrategy\r\n                });\r\n                label.setOptions(getLabelOptions(labelOptions, item.color, that._defaultLabelTextAlignment()));\r\n                label.setData({\r\n                    item: item,\r\n                    value: item.value,\r\n                    percent: item.percent\r\n                });\r\n                label.draw(true);\r\n                return label\r\n            }));\r\n            if (this._labels.length && isOutsidePosition(labelOptions.position)) {\r\n                this._requestChange([\"LAYOUT\"])\r\n            }\r\n        }\r\n    },\r\n    customize: function(constructor) {\r\n        constructor.prototype._proxyData.push((function(x, y) {\r\n            var that = this;\r\n            var data;\r\n            that._labels.forEach((function(label, index) {\r\n                var rect = label.getBoundingRect();\r\n                if (x >= rect.x && x <= rect.x + rect.width && y >= rect.y && y <= rect.y + rect.height) {\r\n                    var pos = isOutsidePosition(that._getOption(\"label\").position) ? \"outside\" : \"inside\";\r\n                    data = {\r\n                        id: index,\r\n                        type: pos + \"-label\"\r\n                    };\r\n                    return true\r\n                }\r\n            }));\r\n            return data\r\n        }));\r\n        [\"label\", \"resolveLabelOverlapping\"].forEach(optionName => {\r\n            constructor.addChange({\r\n                code: optionName.toUpperCase(),\r\n                handler: function() {\r\n                    this._createLabels();\r\n                    this._requestChange([\"LAYOUT\"])\r\n                },\r\n                isThemeDependent: true,\r\n                isOptionChange: true,\r\n                option: optionName\r\n            })\r\n        })\r\n    },\r\n    fontFields: [\"label.font\"]\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}