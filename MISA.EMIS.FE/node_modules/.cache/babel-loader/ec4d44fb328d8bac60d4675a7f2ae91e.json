{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/diagram/ui.diagram.menu_helper.js)\r\n * Version: 22.1.4\r\n * Build date: Fri Jul 22 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport $ from \"../../core/renderer\";\nimport { getImageContainer } from \"../../core/utils/icon\";\nvar DIAGRAM_CONTEXT_MENU_CLASS = \"dx-diagram-contextmenu\";\nvar DiagramMenuHelper = {\n  getContextMenuItemTemplate(contextMenu, itemData, itemIndex, itemElement) {\n    var $itemElement = $(itemElement);\n    $itemElement.empty();\n    var itemKey = void 0 !== itemData.rootCommand ? itemData.rootCommand : -1;\n\n    if (itemData.icon && !itemData.checked) {\n      var $iconElement = getImageContainer(itemData.icon);\n      $itemElement.append($iconElement);\n    } else if (contextMenu._menuHasCheckedItems && true === contextMenu._menuHasCheckedItems[itemKey]) {\n      var $checkElement = getImageContainer(\"check\");\n      $checkElement.css(\"visibility\", !itemData.checked ? \"hidden\" : \"visible\");\n      $itemElement.append($checkElement);\n    }\n\n    $itemElement.append('<span class=\"dx-menu-item-text\">' + itemData.text + \"</span>\");\n\n    if (Array.isArray(itemData.items) && itemData.items.length > 0) {\n      $itemElement.append('<span class=\"dx-menu-item-popout-container\"><div class=\"dx-menu-item-popout\"></div></span>');\n    }\n  },\n\n  getContextMenuCssClass: () => DIAGRAM_CONTEXT_MENU_CLASS,\n\n  onContextMenuItemClick(widget, itemData, actionHandler) {\n    if ((void 0 !== itemData.command || void 0 !== itemData.name) && (!Array.isArray(itemData.items) || !itemData.items.length)) {\n      var parameter = DiagramMenuHelper.getItemCommandParameter(widget, itemData);\n      actionHandler.call(this, itemData.command, itemData.name, parameter);\n    } else if (void 0 !== itemData.rootCommand && void 0 !== itemData.value) {\n      var _parameter = DiagramMenuHelper.getItemCommandParameter(widget, itemData, itemData.value);\n\n      actionHandler.call(this, itemData.rootCommand, void 0, _parameter);\n    }\n  },\n\n  getItemValue: item => \"object\" === typeof item.value ? JSON.stringify(item.value) : item.value,\n\n  getItemOptionText(contextMenu, indexPath) {\n    if (contextMenu) {\n      indexPath = indexPath.slice();\n\n      var parentItemOptionText = this._getParentItemOptionText(indexPath);\n\n      if (contextMenu._originalItemsInfo && contextMenu._originalItemsInfo[parentItemOptionText]) {\n        indexPath[indexPath.length - 1] += contextMenu._originalItemsInfo[parentItemOptionText].indexPathCorrection;\n      }\n    }\n\n    return this._getItemOptionTextCore(indexPath);\n  },\n\n  _getParentItemOptionText(indexPath) {\n    var parentIndexPath = indexPath.slice(0, indexPath.length - 1);\n    return this._getItemOptionTextCore(parentIndexPath);\n  },\n\n  _getItemOptionTextCore: indexPath => indexPath.reduce((r, i) => r + \"items[\".concat(i, \"].\"), \"\"),\n\n  getItemCommandParameter(widget, item, value) {\n    if (item.getParameter) {\n      return item.getParameter(widget);\n    }\n\n    return value;\n  },\n\n  updateContextMenuItems(contextMenu, itemOptionText, rootCommandKey, items) {\n    if (!contextMenu._originalItemsInfo) {\n      contextMenu._originalItemsInfo = {};\n    }\n\n    if (!contextMenu._originalItemsInfo[itemOptionText]) {\n      contextMenu._originalItemsInfo[itemOptionText] = {\n        items: contextMenu.option(itemOptionText + \"items\") || []\n      };\n    }\n\n    items = items.map(item => ({\n      value: this.getItemValue(item),\n      text: item.text,\n      checked: item.checked,\n      widget: contextMenu,\n      rootCommand: rootCommandKey\n    }));\n    var originalItems = contextMenu._originalItemsInfo[itemOptionText].items;\n    contextMenu.option(itemOptionText + \"items\", items.concat(originalItems));\n\n    if (contextMenu._originalItemsInfo[itemOptionText] && originalItems.length) {\n      contextMenu._originalItemsInfo[itemOptionText].indexPathCorrection = items.length;\n    }\n  },\n\n  updateContextMenuItemVisible(contextMenu, itemOptionText, visible) {\n    contextMenu.option(itemOptionText + \"visible\", visible);\n  },\n\n  updateContextMenuItemValue(contextMenu, itemOptionText, rootCommandKey, value) {\n    var items = contextMenu.option(itemOptionText + \"items\");\n\n    if (\"boolean\" === typeof value && (!items || !items.length)) {\n      this._setContextMenuHasCheckedItems(contextMenu, -1);\n\n      contextMenu.option(itemOptionText + \"checked\", value);\n    } else if (void 0 !== value) {\n      this._setContextMenuHasCheckedItems(contextMenu, rootCommandKey);\n\n      if (Array.isArray(items)) {\n        items.forEach((item, index) => {\n          item.checked = item.value === value;\n        });\n      }\n    }\n  },\n\n  _setContextMenuHasCheckedItems(contextMenu, key) {\n    if (!contextMenu._menuHasCheckedItems) {\n      contextMenu._menuHasCheckedItems = {};\n    }\n\n    contextMenu._menuHasCheckedItems[key] = true;\n  }\n\n};\nexport default DiagramMenuHelper;","map":{"version":3,"names":["$","getImageContainer","DIAGRAM_CONTEXT_MENU_CLASS","DiagramMenuHelper","getContextMenuItemTemplate","contextMenu","itemData","itemIndex","itemElement","$itemElement","empty","itemKey","rootCommand","icon","checked","$iconElement","append","_menuHasCheckedItems","$checkElement","css","text","Array","isArray","items","length","getContextMenuCssClass","onContextMenuItemClick","widget","actionHandler","command","name","parameter","getItemCommandParameter","call","value","_parameter","getItemValue","item","JSON","stringify","getItemOptionText","indexPath","slice","parentItemOptionText","_getParentItemOptionText","_originalItemsInfo","indexPathCorrection","_getItemOptionTextCore","parentIndexPath","reduce","r","i","concat","getParameter","updateContextMenuItems","itemOptionText","rootCommandKey","option","map","originalItems","updateContextMenuItemVisible","visible","updateContextMenuItemValue","_setContextMenuHasCheckedItems","forEach","index","key"],"sources":["E:/MisaProject/W2022_06/misa_emis/node_modules/devextreme/esm/ui/diagram/ui.diagram.menu_helper.js"],"sourcesContent":["/**\r\n * DevExtreme (esm/ui/diagram/ui.diagram.menu_helper.js)\r\n * Version: 22.1.4\r\n * Build date: Fri Jul 22 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport $ from \"../../core/renderer\";\r\nimport {\r\n    getImageContainer\r\n} from \"../../core/utils/icon\";\r\nvar DIAGRAM_CONTEXT_MENU_CLASS = \"dx-diagram-contextmenu\";\r\nvar DiagramMenuHelper = {\r\n    getContextMenuItemTemplate(contextMenu, itemData, itemIndex, itemElement) {\r\n        var $itemElement = $(itemElement);\r\n        $itemElement.empty();\r\n        var itemKey = void 0 !== itemData.rootCommand ? itemData.rootCommand : -1;\r\n        if (itemData.icon && !itemData.checked) {\r\n            var $iconElement = getImageContainer(itemData.icon);\r\n            $itemElement.append($iconElement)\r\n        } else if (contextMenu._menuHasCheckedItems && true === contextMenu._menuHasCheckedItems[itemKey]) {\r\n            var $checkElement = getImageContainer(\"check\");\r\n            $checkElement.css(\"visibility\", !itemData.checked ? \"hidden\" : \"visible\");\r\n            $itemElement.append($checkElement)\r\n        }\r\n        $itemElement.append('<span class=\"dx-menu-item-text\">' + itemData.text + \"</span>\");\r\n        if (Array.isArray(itemData.items) && itemData.items.length > 0) {\r\n            $itemElement.append('<span class=\"dx-menu-item-popout-container\"><div class=\"dx-menu-item-popout\"></div></span>')\r\n        }\r\n    },\r\n    getContextMenuCssClass: () => DIAGRAM_CONTEXT_MENU_CLASS,\r\n    onContextMenuItemClick(widget, itemData, actionHandler) {\r\n        if ((void 0 !== itemData.command || void 0 !== itemData.name) && (!Array.isArray(itemData.items) || !itemData.items.length)) {\r\n            var parameter = DiagramMenuHelper.getItemCommandParameter(widget, itemData);\r\n            actionHandler.call(this, itemData.command, itemData.name, parameter)\r\n        } else if (void 0 !== itemData.rootCommand && void 0 !== itemData.value) {\r\n            var _parameter = DiagramMenuHelper.getItemCommandParameter(widget, itemData, itemData.value);\r\n            actionHandler.call(this, itemData.rootCommand, void 0, _parameter)\r\n        }\r\n    },\r\n    getItemValue: item => \"object\" === typeof item.value ? JSON.stringify(item.value) : item.value,\r\n    getItemOptionText(contextMenu, indexPath) {\r\n        if (contextMenu) {\r\n            indexPath = indexPath.slice();\r\n            var parentItemOptionText = this._getParentItemOptionText(indexPath);\r\n            if (contextMenu._originalItemsInfo && contextMenu._originalItemsInfo[parentItemOptionText]) {\r\n                indexPath[indexPath.length - 1] += contextMenu._originalItemsInfo[parentItemOptionText].indexPathCorrection\r\n            }\r\n        }\r\n        return this._getItemOptionTextCore(indexPath)\r\n    },\r\n    _getParentItemOptionText(indexPath) {\r\n        var parentIndexPath = indexPath.slice(0, indexPath.length - 1);\r\n        return this._getItemOptionTextCore(parentIndexPath)\r\n    },\r\n    _getItemOptionTextCore: indexPath => indexPath.reduce((r, i) => r + \"items[\".concat(i, \"].\"), \"\"),\r\n    getItemCommandParameter(widget, item, value) {\r\n        if (item.getParameter) {\r\n            return item.getParameter(widget)\r\n        }\r\n        return value\r\n    },\r\n    updateContextMenuItems(contextMenu, itemOptionText, rootCommandKey, items) {\r\n        if (!contextMenu._originalItemsInfo) {\r\n            contextMenu._originalItemsInfo = {}\r\n        }\r\n        if (!contextMenu._originalItemsInfo[itemOptionText]) {\r\n            contextMenu._originalItemsInfo[itemOptionText] = {\r\n                items: contextMenu.option(itemOptionText + \"items\") || []\r\n            }\r\n        }\r\n        items = items.map(item => ({\r\n            value: this.getItemValue(item),\r\n            text: item.text,\r\n            checked: item.checked,\r\n            widget: contextMenu,\r\n            rootCommand: rootCommandKey\r\n        }));\r\n        var originalItems = contextMenu._originalItemsInfo[itemOptionText].items;\r\n        contextMenu.option(itemOptionText + \"items\", items.concat(originalItems));\r\n        if (contextMenu._originalItemsInfo[itemOptionText] && originalItems.length) {\r\n            contextMenu._originalItemsInfo[itemOptionText].indexPathCorrection = items.length\r\n        }\r\n    },\r\n    updateContextMenuItemVisible(contextMenu, itemOptionText, visible) {\r\n        contextMenu.option(itemOptionText + \"visible\", visible)\r\n    },\r\n    updateContextMenuItemValue(contextMenu, itemOptionText, rootCommandKey, value) {\r\n        var items = contextMenu.option(itemOptionText + \"items\");\r\n        if (\"boolean\" === typeof value && (!items || !items.length)) {\r\n            this._setContextMenuHasCheckedItems(contextMenu, -1);\r\n            contextMenu.option(itemOptionText + \"checked\", value)\r\n        } else if (void 0 !== value) {\r\n            this._setContextMenuHasCheckedItems(contextMenu, rootCommandKey);\r\n            if (Array.isArray(items)) {\r\n                items.forEach((item, index) => {\r\n                    item.checked = item.value === value\r\n                })\r\n            }\r\n        }\r\n    },\r\n    _setContextMenuHasCheckedItems(contextMenu, key) {\r\n        if (!contextMenu._menuHasCheckedItems) {\r\n            contextMenu._menuHasCheckedItems = {}\r\n        }\r\n        contextMenu._menuHasCheckedItems[key] = true\r\n    }\r\n};\r\nexport default DiagramMenuHelper;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}