{"ast":null,"code":"/**\r\n * DevExtreme (esm/data/data_source/data_source.js)\r\n * Version: 22.1.4\r\n * Build date: Fri Jul 22 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport Class from \"../../core/class\";\nimport { extend } from \"../../core/utils/extend\";\nimport { executeAsync } from \"../../core/utils/common\";\nimport { each } from \"../../core/utils/iterator\";\nimport { isString, isNumeric, isBoolean, isDefined, isPlainObject } from \"../../core/utils/type\";\nimport { throttleChanges } from \"../utils\";\nimport { applyBatch } from \"../array_utils\";\nimport CustomStore from \"../custom_store\";\nimport { EventsStrategy } from \"../../core/events_strategy\";\nimport { errors } from \"../errors\";\nimport { create } from \"../../core/utils/queue\";\nimport { Deferred, when } from \"../../core/utils/deferred\";\nimport OperationManager from \"./operation_manager\";\nimport { normalizeDataSourceOptions, normalizeStoreLoadOptionAccessorArguments, CANCELED_TOKEN, isPending, normalizeLoadResult, mapDataRespectingGrouping } from \"./utils\";\nexport var DataSource = Class.inherit({\n  ctor(options) {\n    var _options$reshapeOnPus;\n\n    options = normalizeDataSourceOptions(options);\n    this._eventsStrategy = new EventsStrategy(this, {\n      syncStrategy: true\n    });\n    this._store = options.store;\n    this._changedTime = 0;\n    var needThrottling = 0 !== options.pushAggregationTimeout;\n\n    if (needThrottling) {\n      var throttlingTimeout = void 0 === options.pushAggregationTimeout ? () => 5 * this._changedTime : options.pushAggregationTimeout;\n      var pushDeferred;\n      var lastPushWaiters;\n      var throttlingPushHandler = throttleChanges(changes => {\n        pushDeferred.resolve();\n        var storePushPending = when(...lastPushWaiters);\n        storePushPending.done(() => this._onPush(changes));\n        lastPushWaiters = void 0;\n        pushDeferred = void 0;\n      }, throttlingTimeout);\n\n      this._onPushHandler = args => {\n        this._aggregationTimeoutId = throttlingPushHandler(args.changes);\n\n        if (!pushDeferred) {\n          pushDeferred = new Deferred();\n        }\n\n        lastPushWaiters = args.waitFor;\n        args.waitFor.push(pushDeferred.promise());\n      };\n\n      this._store.on(\"beforePush\", this._onPushHandler);\n    } else {\n      this._onPushHandler = changes => this._onPush(changes);\n\n      this._store.on(\"push\", this._onPushHandler);\n    }\n\n    this._storeLoadOptions = this._extractLoadOptions(options);\n    this._mapFunc = options.map;\n    this._postProcessFunc = options.postProcess;\n    this._pageIndex = void 0 !== options.pageIndex ? options.pageIndex : 0;\n    this._pageSize = void 0 !== options.pageSize ? options.pageSize : 20;\n    this._loadingCount = 0;\n    this._loadQueue = this._createLoadQueue();\n    this._searchValue = \"searchValue\" in options ? options.searchValue : null;\n    this._searchOperation = options.searchOperation || \"contains\";\n    this._searchExpr = options.searchExpr;\n    this._paginate = options.paginate;\n    this._reshapeOnPush = null !== (_options$reshapeOnPus = options.reshapeOnPush) && void 0 !== _options$reshapeOnPus ? _options$reshapeOnPus : false;\n    each([\"onChanged\", \"onLoadError\", \"onLoadingChanged\", \"onCustomizeLoadResult\", \"onCustomizeStoreLoadOptions\"], (_, optionName) => {\n      if (optionName in options) {\n        this.on(optionName.substr(2, 1).toLowerCase() + optionName.substr(3), options[optionName]);\n      }\n    });\n    this._operationManager = new OperationManager();\n\n    this._init();\n  },\n\n  _init() {\n    this._items = [];\n    this._userData = {};\n    this._totalCount = -1;\n    this._isLoaded = false;\n\n    if (!isDefined(this._paginate)) {\n      this._paginate = !this.group();\n    }\n\n    this._isLastPage = !this._paginate;\n  },\n\n  dispose() {\n    var _this$_delayedLoadTas;\n\n    this._store.off(\"beforePush\", this._onPushHandler);\n\n    this._store.off(\"push\", this._onPushHandler);\n\n    this._eventsStrategy.dispose();\n\n    clearTimeout(this._aggregationTimeoutId);\n    null === (_this$_delayedLoadTas = this._delayedLoadTask) || void 0 === _this$_delayedLoadTas ? void 0 : _this$_delayedLoadTas.abort();\n\n    this._operationManager.cancelAll();\n\n    delete this._store;\n    delete this._items;\n    delete this._delayedLoadTask;\n    this._disposed = true;\n  },\n\n  _extractLoadOptions(options) {\n    var result = {};\n    var names = [\"sort\", \"filter\", \"select\", \"group\", \"requireTotalCount\"];\n\n    var customNames = this._store._customLoadOptions();\n\n    if (customNames) {\n      names = names.concat(customNames);\n    }\n\n    each(names, function () {\n      result[this] = options[this];\n    });\n    return result;\n  },\n\n  loadOptions() {\n    return this._storeLoadOptions;\n  },\n\n  items() {\n    return this._items;\n  },\n\n  pageIndex(newIndex) {\n    if (!isNumeric(newIndex)) {\n      return this._pageIndex;\n    }\n\n    this._pageIndex = newIndex;\n    this._isLastPage = !this._paginate;\n  },\n\n  paginate(value) {\n    if (!isBoolean(value)) {\n      return this._paginate;\n    }\n\n    if (this._paginate !== value) {\n      this._paginate = value;\n      this.pageIndex(0);\n    }\n  },\n\n  pageSize(value) {\n    if (!isNumeric(value)) {\n      return this._pageSize;\n    }\n\n    this._pageSize = value;\n  },\n\n  isLastPage() {\n    return this._isLastPage;\n  },\n\n  generateStoreLoadOptionAccessor(optionName) {\n    return args => {\n      var normalizedArgs = normalizeStoreLoadOptionAccessorArguments(args);\n\n      if (void 0 === normalizedArgs) {\n        return this._storeLoadOptions[optionName];\n      }\n\n      this._storeLoadOptions[optionName] = normalizedArgs;\n    };\n  },\n\n  sort() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return this.generateStoreLoadOptionAccessor(\"sort\")(args);\n  },\n\n  filter() {\n    var newFilter = normalizeStoreLoadOptionAccessorArguments(arguments);\n\n    if (void 0 === newFilter) {\n      return this._storeLoadOptions.filter;\n    }\n\n    this._storeLoadOptions.filter = newFilter;\n    this.pageIndex(0);\n  },\n\n  group() {\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    return this.generateStoreLoadOptionAccessor(\"group\")(args);\n  },\n\n  select() {\n    for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      args[_key3] = arguments[_key3];\n    }\n\n    return this.generateStoreLoadOptionAccessor(\"select\")(args);\n  },\n\n  requireTotalCount(value) {\n    if (!isBoolean(value)) {\n      return this._storeLoadOptions.requireTotalCount;\n    }\n\n    this._storeLoadOptions.requireTotalCount = value;\n  },\n\n  searchValue(value) {\n    if (arguments.length < 1) {\n      return this._searchValue;\n    }\n\n    this._searchValue = value;\n    this.pageIndex(0);\n  },\n\n  searchOperation(op) {\n    if (!isString(op)) {\n      return this._searchOperation;\n    }\n\n    this._searchOperation = op;\n    this.pageIndex(0);\n  },\n\n  searchExpr(expr) {\n    var argc = arguments.length;\n\n    if (0 === argc) {\n      return this._searchExpr;\n    }\n\n    if (argc > 1) {\n      expr = [].slice.call(arguments);\n    }\n\n    this._searchExpr = expr;\n    this.pageIndex(0);\n  },\n\n  store() {\n    return this._store;\n  },\n\n  key() {\n    var _this$_store;\n\n    return null === (_this$_store = this._store) || void 0 === _this$_store ? void 0 : _this$_store.key();\n  },\n\n  totalCount() {\n    return this._totalCount;\n  },\n\n  isLoaded() {\n    return this._isLoaded;\n  },\n\n  isLoading() {\n    return this._loadingCount > 0;\n  },\n\n  beginLoading() {\n    this._changeLoadingCount(1);\n  },\n\n  endLoading() {\n    this._changeLoadingCount(-1);\n  },\n\n  _createLoadQueue: () => create(),\n\n  _changeLoadingCount(increment) {\n    var oldLoading = this.isLoading();\n    this._loadingCount += increment;\n    var newLoading = this.isLoading();\n\n    if (oldLoading ^ newLoading) {\n      this._eventsStrategy.fireEvent(\"loadingChanged\", [newLoading]);\n    }\n  },\n\n  _scheduleLoadCallbacks(deferred) {\n    this.beginLoading();\n    deferred.always(() => {\n      this.endLoading();\n    });\n  },\n\n  _scheduleFailCallbacks(deferred) {\n    var _this = this;\n\n    deferred.fail(function () {\n      for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n        args[_key4] = arguments[_key4];\n      }\n\n      if (args[0] === CANCELED_TOKEN) {\n        return;\n      }\n\n      _this._eventsStrategy.fireEvent(\"loadError\", args);\n    });\n  },\n\n  _fireChanged(args) {\n    var date = new Date();\n\n    this._eventsStrategy.fireEvent(\"changed\", args);\n\n    this._changedTime = new Date() - date;\n  },\n\n  _scheduleChangedCallbacks(deferred) {\n    deferred.done(() => this._fireChanged());\n  },\n\n  loadSingle(propName, propValue) {\n    var d = new Deferred();\n    var key = this.key();\n    var store = this._store;\n\n    var options = this._createStoreLoadOptions();\n\n    this._scheduleFailCallbacks(d);\n\n    if (arguments.length < 2) {\n      propValue = propName;\n      propName = key;\n    }\n\n    delete options.skip;\n    delete options.group;\n    delete options.refresh;\n    delete options.pageIndex;\n    delete options.searchString;\n    (() => {\n      if (propName === key || store instanceof CustomStore && !store._byKeyViaLoad()) {\n        return store.byKey(propValue, options);\n      }\n\n      options.take = 1;\n      options.filter = options.filter ? [options.filter, [propName, propValue]] : [propName, propValue];\n      return store.load(options);\n    })().fail(d.reject).done(data => {\n      var isEmptyArray = Array.isArray(data) && !data.length;\n\n      if (!isDefined(data) || isEmptyArray) {\n        d.reject(new errors.Error(\"E4009\"));\n      } else {\n        if (!Array.isArray(data)) {\n          data = [data];\n        }\n\n        d.resolve(this._applyMapFunction(data)[0]);\n      }\n    });\n    return d.promise();\n  },\n\n  load() {\n    var d = new Deferred();\n\n    var loadTask = () => {\n      if (this._disposed) {\n        return;\n      }\n\n      if (!isPending(d)) {\n        return;\n      }\n\n      return this._loadFromStore(loadOperation, d);\n    };\n\n    this._scheduleLoadCallbacks(d);\n\n    this._scheduleFailCallbacks(d);\n\n    this._scheduleChangedCallbacks(d);\n\n    var loadOperation = this._createLoadOperation(d);\n\n    this._eventsStrategy.fireEvent(\"customizeStoreLoadOptions\", [loadOperation]);\n\n    this._loadQueue.add(() => {\n      if (\"number\" === typeof loadOperation.delay) {\n        this._delayedLoadTask = executeAsync(loadTask, loadOperation.delay);\n      } else {\n        loadTask();\n      }\n\n      return d.promise();\n    });\n\n    return d.promise({\n      operationId: loadOperation.operationId\n    });\n  },\n\n  _onPush(changes) {\n    if (this._reshapeOnPush) {\n      this.load();\n    } else {\n      this._eventsStrategy.fireEvent(\"changing\", [{\n        changes: changes\n      }]);\n\n      var group = this.group();\n      var items = this.items();\n      var groupLevel = 0;\n      var dataSourceChanges = this.paginate() || group ? changes.filter(item => \"update\" === item.type) : changes;\n\n      if (group) {\n        groupLevel = Array.isArray(group) ? group.length : 1;\n      }\n\n      if (this._mapFunc) {\n        dataSourceChanges.forEach(item => {\n          if (\"insert\" === item.type) {\n            item.data = this._mapFunc(item.data);\n          }\n        });\n      }\n\n      applyBatch({\n        keyInfo: this.store(),\n        data: items,\n        changes: dataSourceChanges,\n        groupCount: groupLevel,\n        useInsertIndex: true\n      });\n\n      this._fireChanged([{\n        changes: changes\n      }]);\n    }\n  },\n\n  _createLoadOperation(deferred) {\n    var operationId = this._operationManager.add(deferred);\n\n    var storeLoadOptions = this._createStoreLoadOptions();\n\n    deferred.always(() => this._operationManager.remove(operationId));\n    return {\n      operationId: operationId,\n      storeLoadOptions: storeLoadOptions\n    };\n  },\n\n  reload() {\n    var store = this.store();\n\n    if (store instanceof CustomStore) {\n      store.clearRawDataCache();\n    }\n\n    this._init();\n\n    return this.load();\n  },\n\n  cancel(operationId) {\n    return this._operationManager.cancel(operationId);\n  },\n\n  cancelAll() {\n    return this._operationManager.cancelAll();\n  },\n\n  _addSearchOptions(storeLoadOptions) {\n    if (this._disposed) {\n      return;\n    }\n\n    if (this.store()._useDefaultSearch) {\n      this._addSearchFilter(storeLoadOptions);\n    } else {\n      storeLoadOptions.searchOperation = this._searchOperation;\n      storeLoadOptions.searchValue = this._searchValue;\n      storeLoadOptions.searchExpr = this._searchExpr;\n    }\n  },\n\n  _createStoreLoadOptions() {\n    var result = extend({}, this._storeLoadOptions);\n\n    this._addSearchOptions(result);\n\n    if (this._paginate) {\n      if (this._pageSize) {\n        result.skip = this._pageIndex * this._pageSize;\n        result.take = this._pageSize;\n      }\n    }\n\n    result.userData = this._userData;\n    return result;\n  },\n\n  _addSearchFilter(storeLoadOptions) {\n    var value = this._searchValue;\n    var op = this._searchOperation;\n    var selector = this._searchExpr;\n    var searchFilter = [];\n\n    if (!value) {\n      return;\n    }\n\n    if (!selector) {\n      selector = \"this\";\n    }\n\n    if (!Array.isArray(selector)) {\n      selector = [selector];\n    }\n\n    each(selector, function (i, item) {\n      if (searchFilter.length) {\n        searchFilter.push(\"or\");\n      }\n\n      searchFilter.push([item, op, value]);\n    });\n\n    if (storeLoadOptions.filter) {\n      storeLoadOptions.filter = [searchFilter, storeLoadOptions.filter];\n    } else {\n      storeLoadOptions.filter = searchFilter;\n    }\n  },\n\n  _loadFromStore(loadOptions, pendingDeferred) {\n    var handleSuccess = (data, extra) => {\n      if (this._disposed) {\n        return;\n      }\n\n      if (!isPending(pendingDeferred)) {\n        return;\n      }\n\n      var loadResult = extend(normalizeLoadResult(data, extra), loadOptions);\n\n      this._eventsStrategy.fireEvent(\"customizeLoadResult\", [loadResult]);\n\n      when(loadResult.data).done(data => {\n        loadResult.data = data;\n\n        this._processStoreLoadResult(loadResult, pendingDeferred);\n      }).fail(pendingDeferred.reject);\n    };\n\n    if (loadOptions.data) {\n      return new Deferred().resolve(loadOptions.data).done(handleSuccess);\n    }\n\n    return this.store().load(loadOptions.storeLoadOptions).done(handleSuccess).fail(pendingDeferred.reject);\n  },\n\n  _processStoreLoadResult(loadResult, pendingDeferred) {\n    var data = loadResult.data;\n    var extra = loadResult.extra;\n    var storeLoadOptions = loadResult.storeLoadOptions;\n\n    var resolvePendingDeferred = () => {\n      this._isLoaded = true;\n      this._totalCount = isFinite(extra.totalCount) ? extra.totalCount : -1;\n      return pendingDeferred.resolve(data, extra);\n    };\n\n    if (this._disposed) {\n      return;\n    }\n\n    data = this._applyPostProcessFunction(this._applyMapFunction(data));\n\n    if (!isPlainObject(extra)) {\n      extra = {};\n    }\n\n    this._items = data;\n\n    if (!data.length || !this._paginate || this._pageSize && data.length < this._pageSize) {\n      this._isLastPage = true;\n    }\n\n    if (storeLoadOptions.requireTotalCount && !isFinite(extra.totalCount)) {\n      (() => {\n        this.store().totalCount(storeLoadOptions).done(function (count) {\n          extra.totalCount = count;\n          resolvePendingDeferred();\n        }).fail(pendingDeferred.reject);\n      })();\n    } else {\n      resolvePendingDeferred();\n    }\n  },\n\n  _applyMapFunction(data) {\n    if (this._mapFunc) {\n      return mapDataRespectingGrouping(data, this._mapFunc, this.group());\n    }\n\n    return data;\n  },\n\n  _applyPostProcessFunction(data) {\n    if (this._postProcessFunc) {\n      return this._postProcessFunc(data);\n    }\n\n    return data;\n  },\n\n  on(eventName, eventHandler) {\n    this._eventsStrategy.on(eventName, eventHandler);\n\n    return this;\n  },\n\n  off(eventName, eventHandler) {\n    this._eventsStrategy.off(eventName, eventHandler);\n\n    return this;\n  }\n\n});","map":{"version":3,"names":["Class","extend","executeAsync","each","isString","isNumeric","isBoolean","isDefined","isPlainObject","throttleChanges","applyBatch","CustomStore","EventsStrategy","errors","create","Deferred","when","OperationManager","normalizeDataSourceOptions","normalizeStoreLoadOptionAccessorArguments","CANCELED_TOKEN","isPending","normalizeLoadResult","mapDataRespectingGrouping","DataSource","inherit","ctor","options","_options$reshapeOnPus","_eventsStrategy","syncStrategy","_store","store","_changedTime","needThrottling","pushAggregationTimeout","throttlingTimeout","pushDeferred","lastPushWaiters","throttlingPushHandler","changes","resolve","storePushPending","done","_onPush","_onPushHandler","args","_aggregationTimeoutId","waitFor","push","promise","on","_storeLoadOptions","_extractLoadOptions","_mapFunc","map","_postProcessFunc","postProcess","_pageIndex","pageIndex","_pageSize","pageSize","_loadingCount","_loadQueue","_createLoadQueue","_searchValue","searchValue","_searchOperation","searchOperation","_searchExpr","searchExpr","_paginate","paginate","_reshapeOnPush","reshapeOnPush","_","optionName","substr","toLowerCase","_operationManager","_init","_items","_userData","_totalCount","_isLoaded","group","_isLastPage","dispose","_this$_delayedLoadTas","off","clearTimeout","_delayedLoadTask","abort","cancelAll","_disposed","result","names","customNames","_customLoadOptions","concat","loadOptions","items","newIndex","value","isLastPage","generateStoreLoadOptionAccessor","normalizedArgs","sort","_len","arguments","length","Array","_key","filter","newFilter","_len2","_key2","select","_len3","_key3","requireTotalCount","op","expr","argc","slice","call","key","_this$_store","totalCount","isLoaded","isLoading","beginLoading","_changeLoadingCount","endLoading","increment","oldLoading","newLoading","fireEvent","_scheduleLoadCallbacks","deferred","always","_scheduleFailCallbacks","_this","fail","_len4","_key4","_fireChanged","date","Date","_scheduleChangedCallbacks","loadSingle","propName","propValue","d","_createStoreLoadOptions","skip","refresh","searchString","_byKeyViaLoad","byKey","take","load","reject","data","isEmptyArray","isArray","Error","_applyMapFunction","loadTask","_loadFromStore","loadOperation","_createLoadOperation","add","delay","operationId","groupLevel","dataSourceChanges","item","type","forEach","keyInfo","groupCount","useInsertIndex","storeLoadOptions","remove","reload","clearRawDataCache","cancel","_addSearchOptions","_useDefaultSearch","_addSearchFilter","userData","selector","searchFilter","i","pendingDeferred","handleSuccess","extra","loadResult","_processStoreLoadResult","resolvePendingDeferred","isFinite","_applyPostProcessFunction","count","eventName","eventHandler"],"sources":["E:/MisaProject/W2022_06/MISA.EMIS.FE/node_modules/devextreme/esm/data/data_source/data_source.js"],"sourcesContent":["/**\r\n * DevExtreme (esm/data/data_source/data_source.js)\r\n * Version: 22.1.4\r\n * Build date: Fri Jul 22 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport Class from \"../../core/class\";\r\nimport {\r\n    extend\r\n} from \"../../core/utils/extend\";\r\nimport {\r\n    executeAsync\r\n} from \"../../core/utils/common\";\r\nimport {\r\n    each\r\n} from \"../../core/utils/iterator\";\r\nimport {\r\n    isString,\r\n    isNumeric,\r\n    isBoolean,\r\n    isDefined,\r\n    isPlainObject\r\n} from \"../../core/utils/type\";\r\nimport {\r\n    throttleChanges\r\n} from \"../utils\";\r\nimport {\r\n    applyBatch\r\n} from \"../array_utils\";\r\nimport CustomStore from \"../custom_store\";\r\nimport {\r\n    EventsStrategy\r\n} from \"../../core/events_strategy\";\r\nimport {\r\n    errors\r\n} from \"../errors\";\r\nimport {\r\n    create\r\n} from \"../../core/utils/queue\";\r\nimport {\r\n    Deferred,\r\n    when\r\n} from \"../../core/utils/deferred\";\r\nimport OperationManager from \"./operation_manager\";\r\nimport {\r\n    normalizeDataSourceOptions,\r\n    normalizeStoreLoadOptionAccessorArguments,\r\n    CANCELED_TOKEN,\r\n    isPending,\r\n    normalizeLoadResult,\r\n    mapDataRespectingGrouping\r\n} from \"./utils\";\r\nexport var DataSource = Class.inherit({\r\n    ctor(options) {\r\n        var _options$reshapeOnPus;\r\n        options = normalizeDataSourceOptions(options);\r\n        this._eventsStrategy = new EventsStrategy(this, {\r\n            syncStrategy: true\r\n        });\r\n        this._store = options.store;\r\n        this._changedTime = 0;\r\n        var needThrottling = 0 !== options.pushAggregationTimeout;\r\n        if (needThrottling) {\r\n            var throttlingTimeout = void 0 === options.pushAggregationTimeout ? () => 5 * this._changedTime : options.pushAggregationTimeout;\r\n            var pushDeferred;\r\n            var lastPushWaiters;\r\n            var throttlingPushHandler = throttleChanges(changes => {\r\n                pushDeferred.resolve();\r\n                var storePushPending = when(...lastPushWaiters);\r\n                storePushPending.done(() => this._onPush(changes));\r\n                lastPushWaiters = void 0;\r\n                pushDeferred = void 0\r\n            }, throttlingTimeout);\r\n            this._onPushHandler = args => {\r\n                this._aggregationTimeoutId = throttlingPushHandler(args.changes);\r\n                if (!pushDeferred) {\r\n                    pushDeferred = new Deferred\r\n                }\r\n                lastPushWaiters = args.waitFor;\r\n                args.waitFor.push(pushDeferred.promise())\r\n            };\r\n            this._store.on(\"beforePush\", this._onPushHandler)\r\n        } else {\r\n            this._onPushHandler = changes => this._onPush(changes);\r\n            this._store.on(\"push\", this._onPushHandler)\r\n        }\r\n        this._storeLoadOptions = this._extractLoadOptions(options);\r\n        this._mapFunc = options.map;\r\n        this._postProcessFunc = options.postProcess;\r\n        this._pageIndex = void 0 !== options.pageIndex ? options.pageIndex : 0;\r\n        this._pageSize = void 0 !== options.pageSize ? options.pageSize : 20;\r\n        this._loadingCount = 0;\r\n        this._loadQueue = this._createLoadQueue();\r\n        this._searchValue = \"searchValue\" in options ? options.searchValue : null;\r\n        this._searchOperation = options.searchOperation || \"contains\";\r\n        this._searchExpr = options.searchExpr;\r\n        this._paginate = options.paginate;\r\n        this._reshapeOnPush = null !== (_options$reshapeOnPus = options.reshapeOnPush) && void 0 !== _options$reshapeOnPus ? _options$reshapeOnPus : false;\r\n        each([\"onChanged\", \"onLoadError\", \"onLoadingChanged\", \"onCustomizeLoadResult\", \"onCustomizeStoreLoadOptions\"], (_, optionName) => {\r\n            if (optionName in options) {\r\n                this.on(optionName.substr(2, 1).toLowerCase() + optionName.substr(3), options[optionName])\r\n            }\r\n        });\r\n        this._operationManager = new OperationManager;\r\n        this._init()\r\n    },\r\n    _init() {\r\n        this._items = [];\r\n        this._userData = {};\r\n        this._totalCount = -1;\r\n        this._isLoaded = false;\r\n        if (!isDefined(this._paginate)) {\r\n            this._paginate = !this.group()\r\n        }\r\n        this._isLastPage = !this._paginate\r\n    },\r\n    dispose() {\r\n        var _this$_delayedLoadTas;\r\n        this._store.off(\"beforePush\", this._onPushHandler);\r\n        this._store.off(\"push\", this._onPushHandler);\r\n        this._eventsStrategy.dispose();\r\n        clearTimeout(this._aggregationTimeoutId);\r\n        null === (_this$_delayedLoadTas = this._delayedLoadTask) || void 0 === _this$_delayedLoadTas ? void 0 : _this$_delayedLoadTas.abort();\r\n        this._operationManager.cancelAll();\r\n        delete this._store;\r\n        delete this._items;\r\n        delete this._delayedLoadTask;\r\n        this._disposed = true\r\n    },\r\n    _extractLoadOptions(options) {\r\n        var result = {};\r\n        var names = [\"sort\", \"filter\", \"select\", \"group\", \"requireTotalCount\"];\r\n        var customNames = this._store._customLoadOptions();\r\n        if (customNames) {\r\n            names = names.concat(customNames)\r\n        }\r\n        each(names, (function() {\r\n            result[this] = options[this]\r\n        }));\r\n        return result\r\n    },\r\n    loadOptions() {\r\n        return this._storeLoadOptions\r\n    },\r\n    items() {\r\n        return this._items\r\n    },\r\n    pageIndex(newIndex) {\r\n        if (!isNumeric(newIndex)) {\r\n            return this._pageIndex\r\n        }\r\n        this._pageIndex = newIndex;\r\n        this._isLastPage = !this._paginate\r\n    },\r\n    paginate(value) {\r\n        if (!isBoolean(value)) {\r\n            return this._paginate\r\n        }\r\n        if (this._paginate !== value) {\r\n            this._paginate = value;\r\n            this.pageIndex(0)\r\n        }\r\n    },\r\n    pageSize(value) {\r\n        if (!isNumeric(value)) {\r\n            return this._pageSize\r\n        }\r\n        this._pageSize = value\r\n    },\r\n    isLastPage() {\r\n        return this._isLastPage\r\n    },\r\n    generateStoreLoadOptionAccessor(optionName) {\r\n        return args => {\r\n            var normalizedArgs = normalizeStoreLoadOptionAccessorArguments(args);\r\n            if (void 0 === normalizedArgs) {\r\n                return this._storeLoadOptions[optionName]\r\n            }\r\n            this._storeLoadOptions[optionName] = normalizedArgs\r\n        }\r\n    },\r\n    sort() {\r\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\r\n            args[_key] = arguments[_key]\r\n        }\r\n        return this.generateStoreLoadOptionAccessor(\"sort\")(args)\r\n    },\r\n    filter() {\r\n        var newFilter = normalizeStoreLoadOptionAccessorArguments(arguments);\r\n        if (void 0 === newFilter) {\r\n            return this._storeLoadOptions.filter\r\n        }\r\n        this._storeLoadOptions.filter = newFilter;\r\n        this.pageIndex(0)\r\n    },\r\n    group() {\r\n        for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\r\n            args[_key2] = arguments[_key2]\r\n        }\r\n        return this.generateStoreLoadOptionAccessor(\"group\")(args)\r\n    },\r\n    select() {\r\n        for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\r\n            args[_key3] = arguments[_key3]\r\n        }\r\n        return this.generateStoreLoadOptionAccessor(\"select\")(args)\r\n    },\r\n    requireTotalCount(value) {\r\n        if (!isBoolean(value)) {\r\n            return this._storeLoadOptions.requireTotalCount\r\n        }\r\n        this._storeLoadOptions.requireTotalCount = value\r\n    },\r\n    searchValue(value) {\r\n        if (arguments.length < 1) {\r\n            return this._searchValue\r\n        }\r\n        this._searchValue = value;\r\n        this.pageIndex(0)\r\n    },\r\n    searchOperation(op) {\r\n        if (!isString(op)) {\r\n            return this._searchOperation\r\n        }\r\n        this._searchOperation = op;\r\n        this.pageIndex(0)\r\n    },\r\n    searchExpr(expr) {\r\n        var argc = arguments.length;\r\n        if (0 === argc) {\r\n            return this._searchExpr\r\n        }\r\n        if (argc > 1) {\r\n            expr = [].slice.call(arguments)\r\n        }\r\n        this._searchExpr = expr;\r\n        this.pageIndex(0)\r\n    },\r\n    store() {\r\n        return this._store\r\n    },\r\n    key() {\r\n        var _this$_store;\r\n        return null === (_this$_store = this._store) || void 0 === _this$_store ? void 0 : _this$_store.key()\r\n    },\r\n    totalCount() {\r\n        return this._totalCount\r\n    },\r\n    isLoaded() {\r\n        return this._isLoaded\r\n    },\r\n    isLoading() {\r\n        return this._loadingCount > 0\r\n    },\r\n    beginLoading() {\r\n        this._changeLoadingCount(1)\r\n    },\r\n    endLoading() {\r\n        this._changeLoadingCount(-1)\r\n    },\r\n    _createLoadQueue: () => create(),\r\n    _changeLoadingCount(increment) {\r\n        var oldLoading = this.isLoading();\r\n        this._loadingCount += increment;\r\n        var newLoading = this.isLoading();\r\n        if (oldLoading ^ newLoading) {\r\n            this._eventsStrategy.fireEvent(\"loadingChanged\", [newLoading])\r\n        }\r\n    },\r\n    _scheduleLoadCallbacks(deferred) {\r\n        this.beginLoading();\r\n        deferred.always(() => {\r\n            this.endLoading()\r\n        })\r\n    },\r\n    _scheduleFailCallbacks(deferred) {\r\n        var _this = this;\r\n        deferred.fail((function() {\r\n            for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\r\n                args[_key4] = arguments[_key4]\r\n            }\r\n            if (args[0] === CANCELED_TOKEN) {\r\n                return\r\n            }\r\n            _this._eventsStrategy.fireEvent(\"loadError\", args)\r\n        }))\r\n    },\r\n    _fireChanged(args) {\r\n        var date = new Date;\r\n        this._eventsStrategy.fireEvent(\"changed\", args);\r\n        this._changedTime = new Date - date\r\n    },\r\n    _scheduleChangedCallbacks(deferred) {\r\n        deferred.done(() => this._fireChanged())\r\n    },\r\n    loadSingle(propName, propValue) {\r\n        var d = new Deferred;\r\n        var key = this.key();\r\n        var store = this._store;\r\n        var options = this._createStoreLoadOptions();\r\n        this._scheduleFailCallbacks(d);\r\n        if (arguments.length < 2) {\r\n            propValue = propName;\r\n            propName = key\r\n        }\r\n        delete options.skip;\r\n        delete options.group;\r\n        delete options.refresh;\r\n        delete options.pageIndex;\r\n        delete options.searchString;\r\n        (() => {\r\n            if (propName === key || store instanceof CustomStore && !store._byKeyViaLoad()) {\r\n                return store.byKey(propValue, options)\r\n            }\r\n            options.take = 1;\r\n            options.filter = options.filter ? [options.filter, [propName, propValue]] : [propName, propValue];\r\n            return store.load(options)\r\n        })().fail(d.reject).done(data => {\r\n            var isEmptyArray = Array.isArray(data) && !data.length;\r\n            if (!isDefined(data) || isEmptyArray) {\r\n                d.reject(new errors.Error(\"E4009\"))\r\n            } else {\r\n                if (!Array.isArray(data)) {\r\n                    data = [data]\r\n                }\r\n                d.resolve(this._applyMapFunction(data)[0])\r\n            }\r\n        });\r\n        return d.promise()\r\n    },\r\n    load() {\r\n        var d = new Deferred;\r\n        var loadTask = () => {\r\n            if (this._disposed) {\r\n                return\r\n            }\r\n            if (!isPending(d)) {\r\n                return\r\n            }\r\n            return this._loadFromStore(loadOperation, d)\r\n        };\r\n        this._scheduleLoadCallbacks(d);\r\n        this._scheduleFailCallbacks(d);\r\n        this._scheduleChangedCallbacks(d);\r\n        var loadOperation = this._createLoadOperation(d);\r\n        this._eventsStrategy.fireEvent(\"customizeStoreLoadOptions\", [loadOperation]);\r\n        this._loadQueue.add(() => {\r\n            if (\"number\" === typeof loadOperation.delay) {\r\n                this._delayedLoadTask = executeAsync(loadTask, loadOperation.delay)\r\n            } else {\r\n                loadTask()\r\n            }\r\n            return d.promise()\r\n        });\r\n        return d.promise({\r\n            operationId: loadOperation.operationId\r\n        })\r\n    },\r\n    _onPush(changes) {\r\n        if (this._reshapeOnPush) {\r\n            this.load()\r\n        } else {\r\n            this._eventsStrategy.fireEvent(\"changing\", [{\r\n                changes: changes\r\n            }]);\r\n            var group = this.group();\r\n            var items = this.items();\r\n            var groupLevel = 0;\r\n            var dataSourceChanges = this.paginate() || group ? changes.filter(item => \"update\" === item.type) : changes;\r\n            if (group) {\r\n                groupLevel = Array.isArray(group) ? group.length : 1\r\n            }\r\n            if (this._mapFunc) {\r\n                dataSourceChanges.forEach(item => {\r\n                    if (\"insert\" === item.type) {\r\n                        item.data = this._mapFunc(item.data)\r\n                    }\r\n                })\r\n            }\r\n            applyBatch({\r\n                keyInfo: this.store(),\r\n                data: items,\r\n                changes: dataSourceChanges,\r\n                groupCount: groupLevel,\r\n                useInsertIndex: true\r\n            });\r\n            this._fireChanged([{\r\n                changes: changes\r\n            }])\r\n        }\r\n    },\r\n    _createLoadOperation(deferred) {\r\n        var operationId = this._operationManager.add(deferred);\r\n        var storeLoadOptions = this._createStoreLoadOptions();\r\n        deferred.always(() => this._operationManager.remove(operationId));\r\n        return {\r\n            operationId: operationId,\r\n            storeLoadOptions: storeLoadOptions\r\n        }\r\n    },\r\n    reload() {\r\n        var store = this.store();\r\n        if (store instanceof CustomStore) {\r\n            store.clearRawDataCache()\r\n        }\r\n        this._init();\r\n        return this.load()\r\n    },\r\n    cancel(operationId) {\r\n        return this._operationManager.cancel(operationId)\r\n    },\r\n    cancelAll() {\r\n        return this._operationManager.cancelAll()\r\n    },\r\n    _addSearchOptions(storeLoadOptions) {\r\n        if (this._disposed) {\r\n            return\r\n        }\r\n        if (this.store()._useDefaultSearch) {\r\n            this._addSearchFilter(storeLoadOptions)\r\n        } else {\r\n            storeLoadOptions.searchOperation = this._searchOperation;\r\n            storeLoadOptions.searchValue = this._searchValue;\r\n            storeLoadOptions.searchExpr = this._searchExpr\r\n        }\r\n    },\r\n    _createStoreLoadOptions() {\r\n        var result = extend({}, this._storeLoadOptions);\r\n        this._addSearchOptions(result);\r\n        if (this._paginate) {\r\n            if (this._pageSize) {\r\n                result.skip = this._pageIndex * this._pageSize;\r\n                result.take = this._pageSize\r\n            }\r\n        }\r\n        result.userData = this._userData;\r\n        return result\r\n    },\r\n    _addSearchFilter(storeLoadOptions) {\r\n        var value = this._searchValue;\r\n        var op = this._searchOperation;\r\n        var selector = this._searchExpr;\r\n        var searchFilter = [];\r\n        if (!value) {\r\n            return\r\n        }\r\n        if (!selector) {\r\n            selector = \"this\"\r\n        }\r\n        if (!Array.isArray(selector)) {\r\n            selector = [selector]\r\n        }\r\n        each(selector, (function(i, item) {\r\n            if (searchFilter.length) {\r\n                searchFilter.push(\"or\")\r\n            }\r\n            searchFilter.push([item, op, value])\r\n        }));\r\n        if (storeLoadOptions.filter) {\r\n            storeLoadOptions.filter = [searchFilter, storeLoadOptions.filter]\r\n        } else {\r\n            storeLoadOptions.filter = searchFilter\r\n        }\r\n    },\r\n    _loadFromStore(loadOptions, pendingDeferred) {\r\n        var handleSuccess = (data, extra) => {\r\n            if (this._disposed) {\r\n                return\r\n            }\r\n            if (!isPending(pendingDeferred)) {\r\n                return\r\n            }\r\n            var loadResult = extend(normalizeLoadResult(data, extra), loadOptions);\r\n            this._eventsStrategy.fireEvent(\"customizeLoadResult\", [loadResult]);\r\n            when(loadResult.data).done(data => {\r\n                loadResult.data = data;\r\n                this._processStoreLoadResult(loadResult, pendingDeferred)\r\n            }).fail(pendingDeferred.reject)\r\n        };\r\n        if (loadOptions.data) {\r\n            return (new Deferred).resolve(loadOptions.data).done(handleSuccess)\r\n        }\r\n        return this.store().load(loadOptions.storeLoadOptions).done(handleSuccess).fail(pendingDeferred.reject)\r\n    },\r\n    _processStoreLoadResult(loadResult, pendingDeferred) {\r\n        var data = loadResult.data;\r\n        var extra = loadResult.extra;\r\n        var storeLoadOptions = loadResult.storeLoadOptions;\r\n        var resolvePendingDeferred = () => {\r\n            this._isLoaded = true;\r\n            this._totalCount = isFinite(extra.totalCount) ? extra.totalCount : -1;\r\n            return pendingDeferred.resolve(data, extra)\r\n        };\r\n        if (this._disposed) {\r\n            return\r\n        }\r\n        data = this._applyPostProcessFunction(this._applyMapFunction(data));\r\n        if (!isPlainObject(extra)) {\r\n            extra = {}\r\n        }\r\n        this._items = data;\r\n        if (!data.length || !this._paginate || this._pageSize && data.length < this._pageSize) {\r\n            this._isLastPage = true\r\n        }\r\n        if (storeLoadOptions.requireTotalCount && !isFinite(extra.totalCount)) {\r\n            (() => {\r\n                this.store().totalCount(storeLoadOptions).done((function(count) {\r\n                    extra.totalCount = count;\r\n                    resolvePendingDeferred()\r\n                })).fail(pendingDeferred.reject)\r\n            })()\r\n        } else {\r\n            resolvePendingDeferred()\r\n        }\r\n    },\r\n    _applyMapFunction(data) {\r\n        if (this._mapFunc) {\r\n            return mapDataRespectingGrouping(data, this._mapFunc, this.group())\r\n        }\r\n        return data\r\n    },\r\n    _applyPostProcessFunction(data) {\r\n        if (this._postProcessFunc) {\r\n            return this._postProcessFunc(data)\r\n        }\r\n        return data\r\n    },\r\n    on(eventName, eventHandler) {\r\n        this._eventsStrategy.on(eventName, eventHandler);\r\n        return this\r\n    },\r\n    off(eventName, eventHandler) {\r\n        this._eventsStrategy.off(eventName, eventHandler);\r\n        return this\r\n    }\r\n});\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}