{"ast":null,"code":"/**\r\n * DevExtreme (esm/viz/core/tooltip.js)\r\n * Version: 22.1.4\r\n * Build date: Fri Jul 22 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport { getWidth, getHeight } from \"../../core/utils/size\";\nimport domAdapter from \"../../core/dom_adapter\";\nimport { getWindow } from \"../../core/utils/window\";\nimport { replaceWith } from \"../../core/utils/dom\";\nimport { camelize } from \"../../core/utils/inflector\";\nimport $ from \"../../core/renderer\";\nimport { Renderer } from \"./renderers/renderer\";\nimport { isFunction, isPlainObject, isDefined } from \"../../core/utils/type\";\nimport { extend } from \"../../core/utils/extend\";\nimport { patchFontOptions, normalizeEnum } from \"./utils\";\nimport formatHelper from \"../../format_helper\";\nimport { Plaque } from \"./plaque\";\nvar format = formatHelper.format;\nvar mathCeil = Math.ceil;\nvar mathMax = Math.max;\nvar mathMin = Math.min;\nvar window = getWindow();\nvar DEFAULT_HTML_GROUP_WIDTH = 3e3;\n\nfunction hideElement($element) {\n  $element.css({\n    left: \"-9999px\"\n  }).detach();\n}\n\nfunction getSpecialFormatOptions(options, specialFormat) {\n  var result = options;\n\n  switch (specialFormat) {\n    case \"argument\":\n      result = {\n        format: options.argumentFormat\n      };\n      break;\n\n    case \"percent\":\n      result = {\n        format: {\n          type: \"percent\",\n          precision: options.format && options.format.percentPrecision\n        }\n      };\n  }\n\n  return result;\n}\n\nfunction createTextHtml() {\n  return $(\"<div>\").css({\n    position: \"relative\",\n    display: \"inline-block\",\n    padding: 0,\n    margin: 0,\n    border: \"0px solid transparent\"\n  });\n}\n\nfunction removeElements(elements) {\n  elements.forEach(el => el.remove());\n}\n\nexport var Tooltip = function (params) {\n  this._eventTrigger = params.eventTrigger;\n  this._widgetRoot = params.widgetRoot;\n  this._widget = params.widget;\n  this._textHtmlContainers = [];\n  this._wrapper = $(\"<div>\").css({\n    position: \"absolute\",\n    overflow: \"hidden\",\n    pointerEvents: \"none\"\n  }).addClass(params.cssClass);\n  var renderer = this._renderer = new Renderer({\n    pathModified: params.pathModified,\n    container: this._wrapper[0]\n  });\n  var root = renderer.root;\n  root.attr({\n    \"pointer-events\": \"none\"\n  });\n  this._text = renderer.text(void 0, 0, 0);\n  this._textGroupHtml = $(\"<div>\").css({\n    position: \"absolute\",\n    padding: 0,\n    margin: 0,\n    border: \"0px solid transparent\"\n  }).appendTo(this._wrapper);\n  this._textHtml = createTextHtml().appendTo(this._textGroupHtml);\n};\nTooltip.prototype = {\n  constructor: Tooltip,\n  dispose: function () {\n    this._wrapper.remove();\n\n    this._renderer.dispose();\n\n    this._options = this._widgetRoot = null;\n  },\n  _getContainer: function () {\n    var options = this._options;\n    var container = $(this._widgetRoot).closest(options.container);\n\n    if (0 === container.length) {\n      container = $(options.container);\n    }\n\n    return (container.length ? container : $(\"body\")).get(0);\n  },\n\n  setTemplate(contentTemplate) {\n    this._template = contentTemplate ? this._widget._getTemplate(contentTemplate) : null;\n  },\n\n  setOptions: function (options) {\n    options = options || {};\n    var that = this;\n    that._options = options;\n    that._textFontStyles = patchFontOptions(options.font);\n    that._textFontStyles.color = that._textFontStyles.fill;\n\n    that._wrapper.css({\n      zIndex: options.zIndex\n    });\n\n    that._customizeTooltip = options.customizeTooltip;\n    var textGroupHtml = that._textGroupHtml;\n\n    if (this.plaque) {\n      this.plaque.clear();\n    }\n\n    this.setTemplate(options.contentTemplate);\n    var pointerEvents = options.interactive ? \"auto\" : \"none\";\n\n    if (options.interactive) {\n      this._renderer.root.css({\n        \"-ms-user-select\": \"auto\",\n        \"-moz-user-select\": \"auto\",\n        \"-webkit-user-select\": \"auto\"\n      });\n    }\n\n    this.plaque = new Plaque({\n      opacity: that._options.opacity,\n      color: that._options.color,\n      border: that._options.border,\n      paddingLeftRight: that._options.paddingLeftRight,\n      paddingTopBottom: that._options.paddingTopBottom,\n      arrowLength: that._options.arrowLength,\n      arrowWidth: 20,\n      shadow: that._options.shadow,\n      cornerRadius: that._options.cornerRadius\n    }, that, that._renderer.root, _ref => {\n      var {\n        group: group,\n        onRender: onRender,\n        eventData: eventData,\n        isMoving: isMoving,\n        templateCallback = () => {}\n      } = _ref;\n      var state = that._state;\n\n      if (!isMoving) {\n        var template = that._template;\n        var useTemplate = template && !state.formatObject.skipTemplate;\n\n        if (state.html || useTemplate) {\n          textGroupHtml.css({\n            color: state.textColor,\n            width: DEFAULT_HTML_GROUP_WIDTH,\n            pointerEvents: pointerEvents\n          });\n\n          if (useTemplate) {\n            var htmlContainers = that._textHtmlContainers;\n            var containerToTemplateRender = createTextHtml().appendTo(that._textGroupHtml);\n            htmlContainers.push(containerToTemplateRender);\n            template.render({\n              model: state.formatObject,\n              container: containerToTemplateRender,\n              onRendered: () => {\n                removeElements(htmlContainers.splice(0, htmlContainers.length - 1));\n                that._textHtml = replaceWith(that._textHtml, containerToTemplateRender);\n                state.html = that._textHtml.html();\n\n                if (0 === getWidth(that._textHtml) && 0 === getHeight(that._textHtml)) {\n                  this.plaque.clear();\n                  templateCallback(false);\n                  return;\n                }\n\n                onRender();\n\n                that._riseEvents(eventData);\n\n                that._moveWrapper();\n\n                that.plaque.customizeCloud({\n                  fill: state.color,\n                  stroke: state.borderColor,\n                  \"pointer-events\": pointerEvents\n                });\n                templateCallback(true);\n                that._textHtmlContainers = [];\n              }\n            });\n            return;\n          } else {\n            that._text.attr({\n              text: \"\"\n            });\n\n            that._textHtml.html(state.html);\n          }\n        } else {\n          that._text.css({\n            fill: state.textColor\n          }).attr({\n            text: state.text,\n            class: options.cssClass,\n            \"pointer-events\": pointerEvents\n          }).append(group.attr({\n            align: options.textAlignment\n          }));\n        }\n\n        that._riseEvents(eventData);\n\n        that.plaque.customizeCloud({\n          fill: state.color,\n          stroke: state.borderColor,\n          \"pointer-events\": pointerEvents\n        });\n      }\n\n      onRender();\n\n      that._moveWrapper();\n\n      return true;\n    }, true, (tooltip, g) => {\n      var state = tooltip._state;\n\n      if (state.html) {\n        var bBox = window.getComputedStyle(that._textHtml.get(0));\n        bBox = {\n          x: 0,\n          y: 0,\n          width: mathCeil(parseFloat(bBox.width)),\n          height: mathCeil(parseFloat(bBox.height))\n        };\n        return bBox;\n      }\n\n      return g.getBBox();\n    }, (tooltip, g, x, y) => {\n      var state = tooltip._state;\n\n      if (state.html) {\n        that._textGroupHtml.css({\n          left: x,\n          top: y\n        });\n      } else {\n        g.move(x, y);\n      }\n    });\n    return that;\n  },\n  _riseEvents: function (eventData) {\n    this._eventData && this._eventTrigger(\"tooltipHidden\", this._eventData);\n    this._eventData = eventData;\n\n    this._eventTrigger(\"tooltipShown\", this._eventData);\n  },\n  setRendererOptions: function (options) {\n    this._renderer.setOptions(options);\n\n    this._textGroupHtml.css({\n      direction: options.rtl ? \"rtl\" : \"ltr\"\n    });\n\n    return this;\n  },\n  update: function (options) {\n    this.setOptions(options);\n    hideElement(this._wrapper);\n    var normalizedCSS = {};\n\n    for (var name in this._textFontStyles) {\n      normalizedCSS[camelize(name)] = this._textFontStyles[name];\n    }\n\n    this._textGroupHtml.css(normalizedCSS);\n\n    this._text.css(this._textFontStyles);\n\n    this._eventData = null;\n    return this;\n  },\n  _prepare: function (formatObject, state) {\n    var customizeTooltip = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : this._customizeTooltip;\n    var options = this._options;\n    var customize = {};\n\n    if (isFunction(customizeTooltip)) {\n      customize = customizeTooltip.call(formatObject, formatObject);\n      customize = isPlainObject(customize) ? customize : {};\n\n      if (\"text\" in customize) {\n        state.text = isDefined(customize.text) ? String(customize.text) : \"\";\n      }\n\n      if (\"html\" in customize) {\n        state.html = isDefined(customize.html) ? String(customize.html) : \"\";\n      }\n    }\n\n    if (!(\"text\" in state) && !(\"html\" in state)) {\n      state.text = formatObject.valueText || formatObject.description || \"\";\n    }\n\n    state.color = customize.color || options.color;\n    state.borderColor = customize.borderColor || (options.border || {}).color;\n    state.textColor = customize.fontColor || (this._textFontStyles || {}).color;\n    return !!state.text || !!state.html || !!this._template;\n  },\n  show: function (formatObject, params, eventData, customizeTooltip, templateCallback) {\n    if (this._options.forceEvents) {\n      eventData.x = params.x;\n      eventData.y = params.y - params.offset;\n\n      this._riseEvents(eventData);\n\n      return true;\n    }\n\n    var state = {\n      formatObject: formatObject,\n      eventData: eventData,\n      templateCallback: templateCallback\n    };\n\n    if (!this._prepare(formatObject, state, customizeTooltip)) {\n      return false;\n    }\n\n    this._state = state;\n\n    this._wrapper.appendTo(this._getContainer());\n\n    this._clear();\n\n    var parameters = extend({}, this._options, {\n      canvas: this._getCanvas()\n    }, state, {\n      x: params.x,\n      y: params.y,\n      offset: params.offset\n    });\n    return this.plaque.clear().draw(parameters);\n  },\n  isCursorOnTooltip: function (x, y) {\n    if (this._options.interactive) {\n      var box = this.plaque.getBBox();\n      return x > box.x && x < box.x + box.width && y > box.y && y < box.y + box.height;\n    }\n\n    return false;\n  },\n  hide: function (isPointerOut) {\n    hideElement(this._wrapper);\n\n    if (this._eventData) {\n      this._eventTrigger(\"tooltipHidden\", this._options.forceEvents ? extend({\n        isPointerOut: isPointerOut\n      }, this._eventData) : this._eventData);\n\n      this._clear();\n\n      this._eventData = null;\n    }\n  },\n\n  _clear() {\n    this._textHtml.empty();\n  },\n\n  move: function (x, y, offset) {\n    this.plaque.draw({\n      x: x,\n      y: y,\n      offset: offset,\n      canvas: this._getCanvas(),\n      isMoving: true\n    });\n  },\n  _moveWrapper: function () {\n    var plaqueBBox = this.plaque.getBBox();\n\n    this._renderer.resize(plaqueBBox.width, plaqueBBox.height);\n\n    var offset = this._wrapper.css({\n      left: 0,\n      top: 0\n    }).offset();\n\n    var left = plaqueBBox.x;\n    var top = plaqueBBox.y;\n\n    this._wrapper.css({\n      left: left - offset.left,\n      top: top - offset.top\n    });\n\n    this.plaque.moveRoot(-left, -top);\n\n    if (this._state.html) {\n      this._textHtml.css({\n        left: -left,\n        top: -top\n      });\n\n      this._textGroupHtml.css({\n        width: mathCeil(getWidth(this._textHtml))\n      });\n    }\n  },\n  formatValue: function (value, _specialFormat) {\n    var options = _specialFormat ? getSpecialFormatOptions(this._options, _specialFormat) : this._options;\n    return format(value, options.format);\n  },\n\n  getOptions() {\n    return this._options;\n  },\n\n  getLocation: function () {\n    return normalizeEnum(this._options.location);\n  },\n  isEnabled: function () {\n    return !!this._options.enabled || !!this._options.forceEvents;\n  },\n  isShared: function () {\n    return !!this._options.shared;\n  },\n  _getCanvas: function () {\n    var container = this._getContainer();\n\n    var containerBox = container.getBoundingClientRect();\n    var html = domAdapter.getDocumentElement();\n    var document = domAdapter.getDocument();\n    var left = window.pageXOffset || html.scrollLeft || 0;\n    var top = window.pageYOffset || html.scrollTop || 0;\n    var box = {\n      left: left,\n      top: top,\n      width: mathMax(html.clientWidth, document.body.clientWidth) + left,\n      height: mathMax(document.body.scrollHeight, html.scrollHeight, document.body.offsetHeight, html.offsetHeight, document.body.clientHeight, html.clientHeight),\n      right: 0,\n      bottom: 0\n    };\n\n    if (container !== domAdapter.getBody()) {\n      left = mathMax(box.left, box.left + containerBox.left);\n      top = mathMax(box.top, box.top + containerBox.top);\n      box.width = mathMin(containerBox.width, box.width) + left + box.left;\n      box.height = mathMin(containerBox.height, box.height) + top + box.top;\n      box.left = left;\n      box.top = top;\n    }\n\n    return box;\n  }\n};\nexport var plugin = {\n  name: \"tooltip\",\n  init: function () {\n    this._initTooltip();\n  },\n  dispose: function () {\n    this._disposeTooltip();\n  },\n  members: {\n    _initTooltip: function () {\n      this._tooltip = new Tooltip({\n        cssClass: this._rootClassPrefix + \"-tooltip\",\n        eventTrigger: this._eventTrigger,\n        pathModified: this.option(\"pathModified\"),\n        widgetRoot: this.element(),\n        widget: this\n      });\n    },\n    _disposeTooltip: function () {\n      this._tooltip.dispose();\n\n      this._tooltip = null;\n    },\n    _setTooltipRendererOptions: function () {\n      this._tooltip.setRendererOptions(this._getRendererOptions());\n    },\n    _setTooltipOptions: function () {\n      this._tooltip.update(this._getOption(\"tooltip\"));\n    }\n  },\n  extenders: {\n    _stopCurrentHandling() {\n      this._tooltip && this._tooltip.hide();\n    }\n\n  },\n  customize: function (constructor) {\n    var proto = constructor.prototype;\n    proto._eventsMap.onTooltipShown = {\n      name: \"tooltipShown\"\n    };\n    proto._eventsMap.onTooltipHidden = {\n      name: \"tooltipHidden\"\n    };\n    constructor.addChange({\n      code: \"TOOLTIP_RENDERER\",\n      handler: function () {\n        this._setTooltipRendererOptions();\n      },\n      isThemeDependent: true,\n      isOptionChange: true\n    });\n    constructor.addChange({\n      code: \"TOOLTIP\",\n      handler: function () {\n        this._setTooltipOptions();\n      },\n      isThemeDependent: true,\n      isOptionChange: true,\n      option: \"tooltip\"\n    });\n  },\n  fontFields: [\"tooltip.font\"]\n};","map":{"version":3,"names":["getWidth","getHeight","domAdapter","getWindow","replaceWith","camelize","$","Renderer","isFunction","isPlainObject","isDefined","extend","patchFontOptions","normalizeEnum","formatHelper","Plaque","format","mathCeil","Math","ceil","mathMax","max","mathMin","min","window","DEFAULT_HTML_GROUP_WIDTH","hideElement","$element","css","left","detach","getSpecialFormatOptions","options","specialFormat","result","argumentFormat","type","precision","percentPrecision","createTextHtml","position","display","padding","margin","border","removeElements","elements","forEach","el","remove","Tooltip","params","_eventTrigger","eventTrigger","_widgetRoot","widgetRoot","_widget","widget","_textHtmlContainers","_wrapper","overflow","pointerEvents","addClass","cssClass","renderer","_renderer","pathModified","container","root","attr","_text","text","_textGroupHtml","appendTo","_textHtml","prototype","constructor","dispose","_options","_getContainer","closest","length","get","setTemplate","contentTemplate","_template","_getTemplate","setOptions","that","_textFontStyles","font","color","fill","zIndex","_customizeTooltip","customizeTooltip","textGroupHtml","plaque","clear","interactive","opacity","paddingLeftRight","paddingTopBottom","arrowLength","arrowWidth","shadow","cornerRadius","_ref","group","onRender","eventData","isMoving","templateCallback","state","_state","template","useTemplate","formatObject","skipTemplate","html","textColor","width","htmlContainers","containerToTemplateRender","push","render","model","onRendered","splice","_riseEvents","_moveWrapper","customizeCloud","stroke","borderColor","class","append","align","textAlignment","tooltip","g","bBox","getComputedStyle","x","y","parseFloat","height","getBBox","top","move","_eventData","setRendererOptions","direction","rtl","update","normalizedCSS","name","_prepare","arguments","customize","call","String","valueText","description","fontColor","show","forceEvents","offset","_clear","parameters","canvas","_getCanvas","draw","isCursorOnTooltip","box","hide","isPointerOut","empty","plaqueBBox","resize","moveRoot","formatValue","value","_specialFormat","getOptions","getLocation","location","isEnabled","enabled","isShared","shared","containerBox","getBoundingClientRect","getDocumentElement","document","getDocument","pageXOffset","scrollLeft","pageYOffset","scrollTop","clientWidth","body","scrollHeight","offsetHeight","clientHeight","right","bottom","getBody","plugin","init","_initTooltip","_disposeTooltip","members","_tooltip","_rootClassPrefix","option","element","_setTooltipRendererOptions","_getRendererOptions","_setTooltipOptions","_getOption","extenders","_stopCurrentHandling","proto","_eventsMap","onTooltipShown","onTooltipHidden","addChange","code","handler","isThemeDependent","isOptionChange","fontFields"],"sources":["E:/MisaProject/W2022_06/misa_emis/node_modules/devextreme/esm/viz/core/tooltip.js"],"sourcesContent":["/**\r\n * DevExtreme (esm/viz/core/tooltip.js)\r\n * Version: 22.1.4\r\n * Build date: Fri Jul 22 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport {\r\n    getWidth,\r\n    getHeight\r\n} from \"../../core/utils/size\";\r\nimport domAdapter from \"../../core/dom_adapter\";\r\nimport {\r\n    getWindow\r\n} from \"../../core/utils/window\";\r\nimport {\r\n    replaceWith\r\n} from \"../../core/utils/dom\";\r\nimport {\r\n    camelize\r\n} from \"../../core/utils/inflector\";\r\nimport $ from \"../../core/renderer\";\r\nimport {\r\n    Renderer\r\n} from \"./renderers/renderer\";\r\nimport {\r\n    isFunction,\r\n    isPlainObject,\r\n    isDefined\r\n} from \"../../core/utils/type\";\r\nimport {\r\n    extend\r\n} from \"../../core/utils/extend\";\r\nimport {\r\n    patchFontOptions,\r\n    normalizeEnum\r\n} from \"./utils\";\r\nimport formatHelper from \"../../format_helper\";\r\nimport {\r\n    Plaque\r\n} from \"./plaque\";\r\nvar format = formatHelper.format;\r\nvar mathCeil = Math.ceil;\r\nvar mathMax = Math.max;\r\nvar mathMin = Math.min;\r\nvar window = getWindow();\r\nvar DEFAULT_HTML_GROUP_WIDTH = 3e3;\r\n\r\nfunction hideElement($element) {\r\n    $element.css({\r\n        left: \"-9999px\"\r\n    }).detach()\r\n}\r\n\r\nfunction getSpecialFormatOptions(options, specialFormat) {\r\n    var result = options;\r\n    switch (specialFormat) {\r\n        case \"argument\":\r\n            result = {\r\n                format: options.argumentFormat\r\n            };\r\n            break;\r\n        case \"percent\":\r\n            result = {\r\n                format: {\r\n                    type: \"percent\",\r\n                    precision: options.format && options.format.percentPrecision\r\n                }\r\n            }\r\n    }\r\n    return result\r\n}\r\n\r\nfunction createTextHtml() {\r\n    return $(\"<div>\").css({\r\n        position: \"relative\",\r\n        display: \"inline-block\",\r\n        padding: 0,\r\n        margin: 0,\r\n        border: \"0px solid transparent\"\r\n    })\r\n}\r\n\r\nfunction removeElements(elements) {\r\n    elements.forEach(el => el.remove())\r\n}\r\nexport var Tooltip = function(params) {\r\n    this._eventTrigger = params.eventTrigger;\r\n    this._widgetRoot = params.widgetRoot;\r\n    this._widget = params.widget;\r\n    this._textHtmlContainers = [];\r\n    this._wrapper = $(\"<div>\").css({\r\n        position: \"absolute\",\r\n        overflow: \"hidden\",\r\n        pointerEvents: \"none\"\r\n    }).addClass(params.cssClass);\r\n    var renderer = this._renderer = new Renderer({\r\n        pathModified: params.pathModified,\r\n        container: this._wrapper[0]\r\n    });\r\n    var root = renderer.root;\r\n    root.attr({\r\n        \"pointer-events\": \"none\"\r\n    });\r\n    this._text = renderer.text(void 0, 0, 0);\r\n    this._textGroupHtml = $(\"<div>\").css({\r\n        position: \"absolute\",\r\n        padding: 0,\r\n        margin: 0,\r\n        border: \"0px solid transparent\"\r\n    }).appendTo(this._wrapper);\r\n    this._textHtml = createTextHtml().appendTo(this._textGroupHtml)\r\n};\r\nTooltip.prototype = {\r\n    constructor: Tooltip,\r\n    dispose: function() {\r\n        this._wrapper.remove();\r\n        this._renderer.dispose();\r\n        this._options = this._widgetRoot = null\r\n    },\r\n    _getContainer: function() {\r\n        var options = this._options;\r\n        var container = $(this._widgetRoot).closest(options.container);\r\n        if (0 === container.length) {\r\n            container = $(options.container)\r\n        }\r\n        return (container.length ? container : $(\"body\")).get(0)\r\n    },\r\n    setTemplate(contentTemplate) {\r\n        this._template = contentTemplate ? this._widget._getTemplate(contentTemplate) : null\r\n    },\r\n    setOptions: function(options) {\r\n        options = options || {};\r\n        var that = this;\r\n        that._options = options;\r\n        that._textFontStyles = patchFontOptions(options.font);\r\n        that._textFontStyles.color = that._textFontStyles.fill;\r\n        that._wrapper.css({\r\n            zIndex: options.zIndex\r\n        });\r\n        that._customizeTooltip = options.customizeTooltip;\r\n        var textGroupHtml = that._textGroupHtml;\r\n        if (this.plaque) {\r\n            this.plaque.clear()\r\n        }\r\n        this.setTemplate(options.contentTemplate);\r\n        var pointerEvents = options.interactive ? \"auto\" : \"none\";\r\n        if (options.interactive) {\r\n            this._renderer.root.css({\r\n                \"-ms-user-select\": \"auto\",\r\n                \"-moz-user-select\": \"auto\",\r\n                \"-webkit-user-select\": \"auto\"\r\n            })\r\n        }\r\n        this.plaque = new Plaque({\r\n            opacity: that._options.opacity,\r\n            color: that._options.color,\r\n            border: that._options.border,\r\n            paddingLeftRight: that._options.paddingLeftRight,\r\n            paddingTopBottom: that._options.paddingTopBottom,\r\n            arrowLength: that._options.arrowLength,\r\n            arrowWidth: 20,\r\n            shadow: that._options.shadow,\r\n            cornerRadius: that._options.cornerRadius\r\n        }, that, that._renderer.root, _ref => {\r\n            var {\r\n                group: group,\r\n                onRender: onRender,\r\n                eventData: eventData,\r\n                isMoving: isMoving,\r\n                templateCallback: templateCallback = (() => {})\r\n            } = _ref;\r\n            var state = that._state;\r\n            if (!isMoving) {\r\n                var template = that._template;\r\n                var useTemplate = template && !state.formatObject.skipTemplate;\r\n                if (state.html || useTemplate) {\r\n                    textGroupHtml.css({\r\n                        color: state.textColor,\r\n                        width: DEFAULT_HTML_GROUP_WIDTH,\r\n                        pointerEvents: pointerEvents\r\n                    });\r\n                    if (useTemplate) {\r\n                        var htmlContainers = that._textHtmlContainers;\r\n                        var containerToTemplateRender = createTextHtml().appendTo(that._textGroupHtml);\r\n                        htmlContainers.push(containerToTemplateRender);\r\n                        template.render({\r\n                            model: state.formatObject,\r\n                            container: containerToTemplateRender,\r\n                            onRendered: () => {\r\n                                removeElements(htmlContainers.splice(0, htmlContainers.length - 1));\r\n                                that._textHtml = replaceWith(that._textHtml, containerToTemplateRender);\r\n                                state.html = that._textHtml.html();\r\n                                if (0 === getWidth(that._textHtml) && 0 === getHeight(that._textHtml)) {\r\n                                    this.plaque.clear();\r\n                                    templateCallback(false);\r\n                                    return\r\n                                }\r\n                                onRender();\r\n                                that._riseEvents(eventData);\r\n                                that._moveWrapper();\r\n                                that.plaque.customizeCloud({\r\n                                    fill: state.color,\r\n                                    stroke: state.borderColor,\r\n                                    \"pointer-events\": pointerEvents\r\n                                });\r\n                                templateCallback(true);\r\n                                that._textHtmlContainers = []\r\n                            }\r\n                        });\r\n                        return\r\n                    } else {\r\n                        that._text.attr({\r\n                            text: \"\"\r\n                        });\r\n                        that._textHtml.html(state.html)\r\n                    }\r\n                } else {\r\n                    that._text.css({\r\n                        fill: state.textColor\r\n                    }).attr({\r\n                        text: state.text,\r\n                        class: options.cssClass,\r\n                        \"pointer-events\": pointerEvents\r\n                    }).append(group.attr({\r\n                        align: options.textAlignment\r\n                    }))\r\n                }\r\n                that._riseEvents(eventData);\r\n                that.plaque.customizeCloud({\r\n                    fill: state.color,\r\n                    stroke: state.borderColor,\r\n                    \"pointer-events\": pointerEvents\r\n                })\r\n            }\r\n            onRender();\r\n            that._moveWrapper();\r\n            return true\r\n        }, true, (tooltip, g) => {\r\n            var state = tooltip._state;\r\n            if (state.html) {\r\n                var bBox = window.getComputedStyle(that._textHtml.get(0));\r\n                bBox = {\r\n                    x: 0,\r\n                    y: 0,\r\n                    width: mathCeil(parseFloat(bBox.width)),\r\n                    height: mathCeil(parseFloat(bBox.height))\r\n                };\r\n                return bBox\r\n            }\r\n            return g.getBBox()\r\n        }, (tooltip, g, x, y) => {\r\n            var state = tooltip._state;\r\n            if (state.html) {\r\n                that._textGroupHtml.css({\r\n                    left: x,\r\n                    top: y\r\n                })\r\n            } else {\r\n                g.move(x, y)\r\n            }\r\n        });\r\n        return that\r\n    },\r\n    _riseEvents: function(eventData) {\r\n        this._eventData && this._eventTrigger(\"tooltipHidden\", this._eventData);\r\n        this._eventData = eventData;\r\n        this._eventTrigger(\"tooltipShown\", this._eventData)\r\n    },\r\n    setRendererOptions: function(options) {\r\n        this._renderer.setOptions(options);\r\n        this._textGroupHtml.css({\r\n            direction: options.rtl ? \"rtl\" : \"ltr\"\r\n        });\r\n        return this\r\n    },\r\n    update: function(options) {\r\n        this.setOptions(options);\r\n        hideElement(this._wrapper);\r\n        var normalizedCSS = {};\r\n        for (var name in this._textFontStyles) {\r\n            normalizedCSS[camelize(name)] = this._textFontStyles[name]\r\n        }\r\n        this._textGroupHtml.css(normalizedCSS);\r\n        this._text.css(this._textFontStyles);\r\n        this._eventData = null;\r\n        return this\r\n    },\r\n    _prepare: function(formatObject, state) {\r\n        var customizeTooltip = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : this._customizeTooltip;\r\n        var options = this._options;\r\n        var customize = {};\r\n        if (isFunction(customizeTooltip)) {\r\n            customize = customizeTooltip.call(formatObject, formatObject);\r\n            customize = isPlainObject(customize) ? customize : {};\r\n            if (\"text\" in customize) {\r\n                state.text = isDefined(customize.text) ? String(customize.text) : \"\"\r\n            }\r\n            if (\"html\" in customize) {\r\n                state.html = isDefined(customize.html) ? String(customize.html) : \"\"\r\n            }\r\n        }\r\n        if (!(\"text\" in state) && !(\"html\" in state)) {\r\n            state.text = formatObject.valueText || formatObject.description || \"\"\r\n        }\r\n        state.color = customize.color || options.color;\r\n        state.borderColor = customize.borderColor || (options.border || {}).color;\r\n        state.textColor = customize.fontColor || (this._textFontStyles || {}).color;\r\n        return !!state.text || !!state.html || !!this._template\r\n    },\r\n    show: function(formatObject, params, eventData, customizeTooltip, templateCallback) {\r\n        if (this._options.forceEvents) {\r\n            eventData.x = params.x;\r\n            eventData.y = params.y - params.offset;\r\n            this._riseEvents(eventData);\r\n            return true\r\n        }\r\n        var state = {\r\n            formatObject: formatObject,\r\n            eventData: eventData,\r\n            templateCallback: templateCallback\r\n        };\r\n        if (!this._prepare(formatObject, state, customizeTooltip)) {\r\n            return false\r\n        }\r\n        this._state = state;\r\n        this._wrapper.appendTo(this._getContainer());\r\n        this._clear();\r\n        var parameters = extend({}, this._options, {\r\n            canvas: this._getCanvas()\r\n        }, state, {\r\n            x: params.x,\r\n            y: params.y,\r\n            offset: params.offset\r\n        });\r\n        return this.plaque.clear().draw(parameters)\r\n    },\r\n    isCursorOnTooltip: function(x, y) {\r\n        if (this._options.interactive) {\r\n            var box = this.plaque.getBBox();\r\n            return x > box.x && x < box.x + box.width && y > box.y && y < box.y + box.height\r\n        }\r\n        return false\r\n    },\r\n    hide: function(isPointerOut) {\r\n        hideElement(this._wrapper);\r\n        if (this._eventData) {\r\n            this._eventTrigger(\"tooltipHidden\", this._options.forceEvents ? extend({\r\n                isPointerOut: isPointerOut\r\n            }, this._eventData) : this._eventData);\r\n            this._clear();\r\n            this._eventData = null\r\n        }\r\n    },\r\n    _clear() {\r\n        this._textHtml.empty()\r\n    },\r\n    move: function(x, y, offset) {\r\n        this.plaque.draw({\r\n            x: x,\r\n            y: y,\r\n            offset: offset,\r\n            canvas: this._getCanvas(),\r\n            isMoving: true\r\n        })\r\n    },\r\n    _moveWrapper: function() {\r\n        var plaqueBBox = this.plaque.getBBox();\r\n        this._renderer.resize(plaqueBBox.width, plaqueBBox.height);\r\n        var offset = this._wrapper.css({\r\n            left: 0,\r\n            top: 0\r\n        }).offset();\r\n        var left = plaqueBBox.x;\r\n        var top = plaqueBBox.y;\r\n        this._wrapper.css({\r\n            left: left - offset.left,\r\n            top: top - offset.top\r\n        });\r\n        this.plaque.moveRoot(-left, -top);\r\n        if (this._state.html) {\r\n            this._textHtml.css({\r\n                left: -left,\r\n                top: -top\r\n            });\r\n            this._textGroupHtml.css({\r\n                width: mathCeil(getWidth(this._textHtml))\r\n            })\r\n        }\r\n    },\r\n    formatValue: function(value, _specialFormat) {\r\n        var options = _specialFormat ? getSpecialFormatOptions(this._options, _specialFormat) : this._options;\r\n        return format(value, options.format)\r\n    },\r\n    getOptions() {\r\n        return this._options\r\n    },\r\n    getLocation: function() {\r\n        return normalizeEnum(this._options.location)\r\n    },\r\n    isEnabled: function() {\r\n        return !!this._options.enabled || !!this._options.forceEvents\r\n    },\r\n    isShared: function() {\r\n        return !!this._options.shared\r\n    },\r\n    _getCanvas: function() {\r\n        var container = this._getContainer();\r\n        var containerBox = container.getBoundingClientRect();\r\n        var html = domAdapter.getDocumentElement();\r\n        var document = domAdapter.getDocument();\r\n        var left = window.pageXOffset || html.scrollLeft || 0;\r\n        var top = window.pageYOffset || html.scrollTop || 0;\r\n        var box = {\r\n            left: left,\r\n            top: top,\r\n            width: mathMax(html.clientWidth, document.body.clientWidth) + left,\r\n            height: mathMax(document.body.scrollHeight, html.scrollHeight, document.body.offsetHeight, html.offsetHeight, document.body.clientHeight, html.clientHeight),\r\n            right: 0,\r\n            bottom: 0\r\n        };\r\n        if (container !== domAdapter.getBody()) {\r\n            left = mathMax(box.left, box.left + containerBox.left);\r\n            top = mathMax(box.top, box.top + containerBox.top);\r\n            box.width = mathMin(containerBox.width, box.width) + left + box.left;\r\n            box.height = mathMin(containerBox.height, box.height) + top + box.top;\r\n            box.left = left;\r\n            box.top = top\r\n        }\r\n        return box\r\n    }\r\n};\r\nexport var plugin = {\r\n    name: \"tooltip\",\r\n    init: function() {\r\n        this._initTooltip()\r\n    },\r\n    dispose: function() {\r\n        this._disposeTooltip()\r\n    },\r\n    members: {\r\n        _initTooltip: function() {\r\n            this._tooltip = new Tooltip({\r\n                cssClass: this._rootClassPrefix + \"-tooltip\",\r\n                eventTrigger: this._eventTrigger,\r\n                pathModified: this.option(\"pathModified\"),\r\n                widgetRoot: this.element(),\r\n                widget: this\r\n            })\r\n        },\r\n        _disposeTooltip: function() {\r\n            this._tooltip.dispose();\r\n            this._tooltip = null\r\n        },\r\n        _setTooltipRendererOptions: function() {\r\n            this._tooltip.setRendererOptions(this._getRendererOptions())\r\n        },\r\n        _setTooltipOptions: function() {\r\n            this._tooltip.update(this._getOption(\"tooltip\"))\r\n        }\r\n    },\r\n    extenders: {\r\n        _stopCurrentHandling() {\r\n            this._tooltip && this._tooltip.hide()\r\n        }\r\n    },\r\n    customize: function(constructor) {\r\n        var proto = constructor.prototype;\r\n        proto._eventsMap.onTooltipShown = {\r\n            name: \"tooltipShown\"\r\n        };\r\n        proto._eventsMap.onTooltipHidden = {\r\n            name: \"tooltipHidden\"\r\n        };\r\n        constructor.addChange({\r\n            code: \"TOOLTIP_RENDERER\",\r\n            handler: function() {\r\n                this._setTooltipRendererOptions()\r\n            },\r\n            isThemeDependent: true,\r\n            isOptionChange: true\r\n        });\r\n        constructor.addChange({\r\n            code: \"TOOLTIP\",\r\n            handler: function() {\r\n                this._setTooltipOptions()\r\n            },\r\n            isThemeDependent: true,\r\n            isOptionChange: true,\r\n            option: \"tooltip\"\r\n        })\r\n    },\r\n    fontFields: [\"tooltip.font\"]\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}