{"ast":null,"code":"/**\r\n * DevExtreme (esm/viz/vector_map/tracker.js)\r\n * Version: 22.1.4\r\n * Build date: Fri Jul 22 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport eventsEngine from \"../../events/core/events_engine\";\nimport { getNavigator, hasProperty } from \"../../core/utils/window\";\nimport domAdapter from \"../../core/dom_adapter\";\nimport { makeEventEmitter } from \"./event_emitter\";\nimport { addNamespace } from \"../../events/utils/index\";\nimport { name as wheelEventName } from \"../../events/core/wheel\";\nimport { parseScalar } from \"../core/utils\";\nvar navigator = getNavigator();\nvar _math = Math;\nvar _abs = _math.abs;\nvar _sqrt = _math.sqrt;\nvar _round = _math.round;\nvar _addNamespace = addNamespace;\nvar _NAME = \"dxVectorMap\";\nvar EVENT_START = \"start\";\nvar EVENT_MOVE = \"move\";\nvar EVENT_END = \"end\";\nvar EVENT_ZOOM = \"zoom\";\nvar EVENT_HOVER_ON = \"hover-on\";\nvar EVENT_HOVER_OFF = \"hover-off\";\nvar EVENT_CLICK = \"click\";\nvar EVENT_FOCUS_ON = \"focus-on\";\nvar EVENT_FOCUS_MOVE = \"focus-move\";\nvar EVENT_FOCUS_OFF = \"focus-off\";\nvar CLICK_TIME_THRESHOLD = 500;\nvar CLICK_COORD_THRESHOLD_MOUSE = 5;\nvar CLICK_COORD_THRESHOLD_TOUCH = 20;\nvar DRAG_COORD_THRESHOLD_MOUSE = 5;\nvar DRAG_COORD_THRESHOLD_TOUCH = 10;\nvar FOCUS_OFF_DELAY = 100;\nvar WHEEL_COOLDOWN = 50;\nvar WHEEL_DIRECTION_COOLDOWN = 300;\nvar EVENTS;\nvar Focus;\nsetupEvents();\nexport function Tracker(parameters) {\n  var that = this;\n  that._root = parameters.root;\n\n  that._createEventHandlers(parameters.dataKey);\n\n  that._createProjectionHandlers(parameters.projection);\n\n  that._initEvents();\n\n  that._focus = new Focus(function (name, arg) {\n    that._fire(name, arg);\n  });\n\n  that._attachHandlers();\n}\nTracker.prototype = {\n  constructor: Tracker,\n  dispose: function () {\n    this._detachHandlers();\n\n    this._disposeEvents();\n\n    this._focus.dispose();\n\n    this._root = this._focus = this._docHandlers = this._rootHandlers = null;\n  },\n  _eventNames: [EVENT_START, EVENT_MOVE, EVENT_END, EVENT_ZOOM, EVENT_CLICK, EVENT_HOVER_ON, EVENT_HOVER_OFF, EVENT_FOCUS_ON, EVENT_FOCUS_OFF, EVENT_FOCUS_MOVE],\n  _startClick: function (event, data) {\n    if (!data) {\n      return;\n    }\n\n    var coords = getEventCoords(event);\n    this._clickState = {\n      x: coords.x,\n      y: coords.y,\n      threshold: isTouchEvent(event) ? CLICK_COORD_THRESHOLD_TOUCH : CLICK_COORD_THRESHOLD_MOUSE,\n      time: Date.now()\n    };\n  },\n  _endClick: function (event, data) {\n    var state = this._clickState;\n    var threshold;\n    var coords;\n\n    if (!state) {\n      return;\n    }\n\n    if (data && Date.now() - state.time <= CLICK_TIME_THRESHOLD) {\n      threshold = state.threshold;\n      coords = getEventCoords(event);\n\n      if (_abs(coords.x - state.x) <= threshold && _abs(coords.y - state.y) <= threshold) {\n        this._fire(EVENT_CLICK, {\n          data: data,\n          x: coords.x,\n          y: coords.y,\n          $event: event\n        });\n      }\n    }\n\n    this._clickState = null;\n  },\n  _startDrag: function (event, data) {\n    if (!data) {\n      return;\n    }\n\n    var coords = getEventCoords(event);\n    var state = this._dragState = {\n      x: coords.x,\n      y: coords.y,\n      data: data\n    };\n\n    this._fire(EVENT_START, {\n      x: state.x,\n      y: state.y,\n      data: state.data\n    });\n  },\n  _moveDrag: function (event, data) {\n    var state = this._dragState;\n\n    if (!state) {\n      return;\n    }\n\n    var coords = getEventCoords(event);\n    var threshold = isTouchEvent(event) ? DRAG_COORD_THRESHOLD_TOUCH : DRAG_COORD_THRESHOLD_MOUSE;\n\n    if (state.active || _abs(coords.x - state.x) > threshold || _abs(coords.y - state.y) > threshold) {\n      state.x = coords.x;\n      state.y = coords.y;\n      state.active = true;\n      state.data = data || {};\n\n      this._fire(EVENT_MOVE, {\n        x: state.x,\n        y: state.y,\n        data: state.data\n      });\n    }\n  },\n  _endDrag: function () {\n    var state = this._dragState;\n\n    if (!state) {\n      return;\n    }\n\n    this._dragState = null;\n\n    this._fire(EVENT_END, {\n      x: state.x,\n      y: state.y,\n      data: state.data\n    });\n  },\n  _wheelZoom: function (event, data) {\n    if (!data) {\n      return;\n    }\n\n    var lock = this._wheelLock;\n    var time = Date.now();\n\n    if (time - lock.time <= WHEEL_COOLDOWN) {\n      return;\n    }\n\n    if (time - lock.dirTime > WHEEL_DIRECTION_COOLDOWN) {\n      lock.dir = 0;\n    }\n\n    var delta = adjustWheelDelta(event.delta / 120 || 0, lock);\n\n    if (0 === delta) {\n      return;\n    }\n\n    var coords = getEventCoords(event);\n\n    this._fire(EVENT_ZOOM, {\n      delta: delta,\n      x: coords.x,\n      y: coords.y\n    });\n\n    lock.time = lock.dirTime = time;\n  },\n  _startZoom: function (event, data) {\n    if (!isTouchEvent(event) || !data) {\n      return;\n    }\n\n    var state = this._zoomState = this._zoomState || {};\n    var coords;\n    var pointer2;\n\n    if (state.pointer1 && state.pointer2) {\n      return;\n    }\n\n    if (void 0 === state.pointer1) {\n      state.pointer1 = getPointerId(event) || 0;\n      coords = getMultitouchEventCoords(event, state.pointer1);\n      state.x1 = state.x1_0 = coords.x;\n      state.y1 = state.y1_0 = coords.y;\n    }\n\n    if (void 0 === state.pointer2) {\n      pointer2 = getPointerId(event) || 1;\n\n      if (pointer2 !== state.pointer1) {\n        coords = getMultitouchEventCoords(event, pointer2);\n\n        if (coords) {\n          state.x2 = state.x2_0 = coords.x;\n          state.y2 = state.y2_0 = coords.y;\n          state.pointer2 = pointer2;\n          state.ready = true;\n\n          this._endDrag();\n        }\n      }\n    }\n  },\n  _moveZoom: function (event) {\n    var state = this._zoomState;\n    var coords;\n\n    if (!state || !isTouchEvent(event)) {\n      return;\n    }\n\n    if (void 0 !== state.pointer1) {\n      coords = getMultitouchEventCoords(event, state.pointer1);\n\n      if (coords) {\n        state.x1 = coords.x;\n        state.y1 = coords.y;\n      }\n    }\n\n    if (void 0 !== state.pointer2) {\n      coords = getMultitouchEventCoords(event, state.pointer2);\n\n      if (coords) {\n        state.x2 = coords.x;\n        state.y2 = coords.y;\n      }\n    }\n  },\n  _endZoom: function (event) {\n    var state = this._zoomState;\n    var startDistance;\n    var currentDistance;\n\n    if (!state || !isTouchEvent(event)) {\n      return;\n    }\n\n    if (state.ready) {\n      startDistance = getDistance(state.x1_0, state.y1_0, state.x2_0, state.y2_0);\n      currentDistance = getDistance(state.x1, state.y1, state.x2, state.y2);\n\n      this._fire(EVENT_ZOOM, {\n        ratio: currentDistance / startDistance,\n        x: (state.x1_0 + state.x2_0) / 2,\n        y: (state.y1_0 + state.y2_0) / 2\n      });\n    }\n\n    this._zoomState = null;\n  },\n  _startHover: function (event, data) {\n    this._doHover(event, data, true);\n  },\n  _moveHover: function (event, data) {\n    this._doHover(event, data, false);\n  },\n  _doHover: function (event, data, isTouch) {\n    if (this._dragState && this._dragState.active || this._zoomState && this._zoomState.ready) {\n      this._cancelHover();\n\n      return;\n    }\n\n    if (isTouchEvent(event) !== isTouch || this._hoverTarget === event.target || this._hoverState && this._hoverState.data === data) {\n      return;\n    }\n\n    this._cancelHover();\n\n    if (data) {\n      this._hoverState = {\n        data: data\n      };\n\n      this._fire(EVENT_HOVER_ON, {\n        data: data\n      });\n    }\n\n    this._hoverTarget = event.target;\n  },\n  _cancelHover: function () {\n    var state = this._hoverState;\n    this._hoverState = this._hoverTarget = null;\n\n    if (state) {\n      this._fire(EVENT_HOVER_OFF, {\n        data: state.data\n      });\n    }\n  },\n  _startFocus: function (event, data) {\n    this._doFocus(event, data, true);\n  },\n  _moveFocus: function (event, data) {\n    this._doFocus(event, data, false);\n  },\n  _doFocus: function (event, data, isTouch) {\n    if (this._dragState && this._dragState.active || this._zoomState && this._zoomState.ready) {\n      this._cancelFocus();\n\n      return;\n    }\n\n    if (isTouchEvent(event) !== isTouch) {\n      return;\n    }\n\n    this._focus.turnOff();\n\n    data && this._focus.turnOn(data, getEventCoords(event));\n  },\n  _cancelFocus: function () {\n    this._focus.cancel();\n  },\n  _createEventHandlers: function (DATA_KEY) {\n    var that = this;\n    that._docHandlers = {};\n    that._rootHandlers = {};\n\n    that._rootHandlers[EVENTS.start] = that._docHandlers[EVENTS.start] = function (event) {\n      var isTouch = isTouchEvent(event);\n      var data = getData(event);\n\n      if (isTouch && !that._isTouchEnabled) {\n        return;\n      }\n\n      if (data) {\n        event.preventDefault();\n        event.stopPropagation();\n      }\n\n      that._startClick(event, data);\n\n      that._startDrag(event, data);\n\n      that._startZoom(event, data);\n\n      that._startHover(event, data);\n\n      that._startFocus(event, data);\n    };\n\n    that._docHandlers[EVENTS.move] = function (event) {\n      var isTouch = isTouchEvent(event);\n      var data = getData(event);\n\n      if (isTouch && !that._isTouchEnabled) {\n        return;\n      }\n\n      that._moveDrag(event, data);\n\n      that._moveZoom(event, data);\n\n      that._moveHover(event, data);\n\n      that._moveFocus(event, data);\n    };\n\n    that._docHandlers[EVENTS.end] = function (event) {\n      var isTouch = isTouchEvent(event);\n      var data = getData(event);\n\n      if (isTouch && !that._isTouchEnabled) {\n        return;\n      }\n\n      that._endClick(event, data);\n\n      that._endDrag(event, data);\n\n      that._endZoom(event, data);\n    };\n\n    that._rootHandlers[EVENTS.wheel] = function (event) {\n      that._cancelFocus();\n\n      if (!that._isWheelEnabled) {\n        return;\n      }\n\n      var data = getData(event);\n\n      if (data) {\n        event.preventDefault();\n        event.stopPropagation();\n\n        that._wheelZoom(event, data);\n      }\n    };\n\n    that._wheelLock = {\n      dir: 0\n    };\n\n    function getData(event) {\n      var target = event.target;\n      return (\"tspan\" === target.tagName ? target.parentNode : target)[DATA_KEY];\n    }\n  },\n  _createProjectionHandlers: function (projection) {\n    var that = this;\n    projection.on({\n      center: handler,\n      zoom: handler\n    });\n\n    function handler() {\n      that._cancelFocus();\n    }\n  },\n  reset: function () {\n    this._clickState = null;\n\n    this._endDrag();\n\n    this._cancelHover();\n\n    this._cancelFocus();\n  },\n  setOptions: function (options) {\n    this.reset();\n\n    this._detachHandlers();\n\n    this._isTouchEnabled = !!parseScalar(options.touchEnabled, true);\n    this._isWheelEnabled = !!parseScalar(options.wheelEnabled, true);\n\n    this._attachHandlers();\n  },\n  _detachHandlers: function () {\n    if (this._isTouchEnabled) {\n      this._root.css({\n        \"touch-action\": \"\",\n        \"-webkit-user-select\": \"\"\n      }).off(_addNamespace(\"MSHoldVisual\", _NAME)).off(_addNamespace(\"contextmenu\", _NAME));\n    }\n\n    eventsEngine.off(domAdapter.getDocument(), this._docHandlers);\n\n    this._root.off(this._rootHandlers);\n  },\n  _attachHandlers: function () {\n    if (this._isTouchEnabled) {\n      this._root.css({\n        \"touch-action\": \"none\",\n        \"-webkit-user-select\": \"none\"\n      }).on(_addNamespace(\"MSHoldVisual\", _NAME), function (event) {\n        event.preventDefault();\n      }).on(_addNamespace(\"contextmenu\", _NAME), function (event) {\n        isTouchEvent(event) && event.preventDefault();\n      });\n    }\n\n    eventsEngine.on(domAdapter.getDocument(), this._docHandlers);\n\n    this._root.on(this._rootHandlers);\n  }\n};\n\nFocus = function (fire) {\n  var that = this;\n  var _activeData = null;\n  var _data = null;\n  var _disabled = false;\n  var _offTimer = null;\n\n  var _x;\n\n  var _y;\n\n  that.dispose = function () {\n    clearTimeout(_offTimer);\n    that.turnOn = that.turnOff = that.cancel = that.dispose = that = fire = _activeData = _data = _offTimer = null;\n  };\n\n  that.turnOn = function (data, coords) {\n    if (data === _data && _disabled) {\n      return;\n    }\n\n    _disabled = false;\n    _data = data;\n\n    if (_activeData) {\n      _x = coords.x;\n      _y = coords.y;\n\n      if (_data === _activeData) {\n        fire(EVENT_FOCUS_MOVE, {\n          data: _data,\n          x: _x,\n          y: _y\n        });\n        onCheck(true);\n      } else {\n        fire(EVENT_FOCUS_ON, {\n          data: _data,\n          x: _x,\n          y: _y,\n          done: onCheck\n        });\n      }\n    } else {\n      _x = coords.x;\n      _y = coords.y;\n      fire(EVENT_FOCUS_ON, {\n        data: _data,\n        x: _x,\n        y: _y,\n        done: onCheck\n      });\n    }\n\n    function onCheck(result) {\n      _disabled = !result;\n\n      if (result) {\n        _activeData = _data;\n        clearTimeout(_offTimer);\n        _offTimer = null;\n      }\n    }\n  };\n\n  that.turnOff = function () {\n    _data = null;\n\n    if (_activeData && !_disabled) {\n      _offTimer = _offTimer || setTimeout(function () {\n        _offTimer = null;\n        fire(EVENT_FOCUS_OFF, {\n          data: _activeData\n        });\n        _activeData = null;\n      }, FOCUS_OFF_DELAY);\n    }\n  };\n\n  that.cancel = function () {\n    clearTimeout(_offTimer);\n\n    if (_activeData) {\n      fire(EVENT_FOCUS_OFF, {\n        data: _activeData\n      });\n    }\n\n    _activeData = _data = _offTimer = null;\n  };\n};\n\nmakeEventEmitter(Tracker);\n\nfunction getDistance(x1, y1, x2, y2) {\n  return _sqrt((x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2));\n}\n\nfunction isTouchEvent(event) {\n  var type = event.originalEvent.type;\n  var pointerType = event.originalEvent.pointerType;\n  return /^touch/.test(type) || /^MSPointer/.test(type) && 4 !== pointerType || /^pointer/.test(type) && \"mouse\" !== pointerType;\n}\n\nfunction selectItem(flags, items) {\n  var i = 0;\n  var ii = flags.length;\n  var item;\n\n  for (; i < ii; ++i) {\n    if (flags[i]) {\n      item = items[i];\n      break;\n    }\n  }\n\n  return _addNamespace(item || items[i], _NAME);\n}\n\nfunction setupEvents() {\n  var flags = [navigator.pointerEnabled, navigator.msPointerEnabled, hasProperty(\"ontouchstart\")];\n  EVENTS = {\n    start: selectItem(flags, [\"pointerdown\", \"MSPointerDown\", \"touchstart mousedown\", \"mousedown\"]),\n    move: selectItem(flags, [\"pointermove\", \"MSPointerMove\", \"touchmove mousemove\", \"mousemove\"]),\n    end: selectItem(flags, [\"pointerup\", \"MSPointerUp\", \"touchend mouseup\", \"mouseup\"]),\n    wheel: _addNamespace(wheelEventName, _NAME)\n  };\n}\n\nfunction getEventCoords(event) {\n  var originalEvent = event.originalEvent;\n  var touch = originalEvent.touches && originalEvent.touches[0] || {};\n  return {\n    x: touch.pageX || originalEvent.pageX || event.pageX,\n    y: touch.pageY || originalEvent.pageY || event.pageY\n  };\n}\n\nfunction getPointerId(event) {\n  return event.originalEvent.pointerId;\n}\n\nfunction getMultitouchEventCoords(event, pointerId) {\n  var originalEvent = event.originalEvent;\n\n  if (void 0 !== originalEvent.pointerId) {\n    originalEvent = originalEvent.pointerId === pointerId ? originalEvent : null;\n  } else {\n    originalEvent = originalEvent.touches[pointerId];\n  }\n\n  return originalEvent ? {\n    x: originalEvent.pageX || event.pageX,\n    y: originalEvent.pageY || event.pageY\n  } : null;\n}\n\nfunction adjustWheelDelta(delta, lock) {\n  if (0 === delta) {\n    return 0;\n  }\n\n  var _delta = _abs(delta);\n\n  var sign = _round(delta / _delta);\n\n  if (lock.dir && sign !== lock.dir) {\n    return 0;\n  }\n\n  lock.dir = sign;\n\n  if (_delta < .1) {\n    _delta = 0;\n  } else if (_delta < 1) {\n    _delta = 1;\n  } else if (_delta > 4) {\n    _delta = 4;\n  } else {\n    _delta = _round(_delta);\n  }\n\n  return sign * _delta;\n}","map":{"version":3,"names":["eventsEngine","getNavigator","hasProperty","domAdapter","makeEventEmitter","addNamespace","name","wheelEventName","parseScalar","navigator","_math","Math","_abs","abs","_sqrt","sqrt","_round","round","_addNamespace","_NAME","EVENT_START","EVENT_MOVE","EVENT_END","EVENT_ZOOM","EVENT_HOVER_ON","EVENT_HOVER_OFF","EVENT_CLICK","EVENT_FOCUS_ON","EVENT_FOCUS_MOVE","EVENT_FOCUS_OFF","CLICK_TIME_THRESHOLD","CLICK_COORD_THRESHOLD_MOUSE","CLICK_COORD_THRESHOLD_TOUCH","DRAG_COORD_THRESHOLD_MOUSE","DRAG_COORD_THRESHOLD_TOUCH","FOCUS_OFF_DELAY","WHEEL_COOLDOWN","WHEEL_DIRECTION_COOLDOWN","EVENTS","Focus","setupEvents","Tracker","parameters","that","_root","root","_createEventHandlers","dataKey","_createProjectionHandlers","projection","_initEvents","_focus","arg","_fire","_attachHandlers","prototype","constructor","dispose","_detachHandlers","_disposeEvents","_docHandlers","_rootHandlers","_eventNames","_startClick","event","data","coords","getEventCoords","_clickState","x","y","threshold","isTouchEvent","time","Date","now","_endClick","state","$event","_startDrag","_dragState","_moveDrag","active","_endDrag","_wheelZoom","lock","_wheelLock","dirTime","dir","delta","adjustWheelDelta","_startZoom","_zoomState","pointer2","pointer1","getPointerId","getMultitouchEventCoords","x1","x1_0","y1","y1_0","x2","x2_0","y2","y2_0","ready","_moveZoom","_endZoom","startDistance","currentDistance","getDistance","ratio","_startHover","_doHover","_moveHover","isTouch","_cancelHover","_hoverTarget","target","_hoverState","_startFocus","_doFocus","_moveFocus","_cancelFocus","turnOff","turnOn","cancel","DATA_KEY","start","getData","_isTouchEnabled","preventDefault","stopPropagation","move","end","wheel","_isWheelEnabled","tagName","parentNode","on","center","handler","zoom","reset","setOptions","options","touchEnabled","wheelEnabled","css","off","getDocument","fire","_activeData","_data","_disabled","_offTimer","_x","_y","clearTimeout","onCheck","done","result","setTimeout","type","originalEvent","pointerType","test","selectItem","flags","items","i","ii","length","item","pointerEnabled","msPointerEnabled","touch","touches","pageX","pageY","pointerId","_delta","sign"],"sources":["E:/MisaProject/W2022_06/misa_emis/node_modules/devextreme/esm/viz/vector_map/tracker.js"],"sourcesContent":["/**\r\n * DevExtreme (esm/viz/vector_map/tracker.js)\r\n * Version: 22.1.4\r\n * Build date: Fri Jul 22 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport eventsEngine from \"../../events/core/events_engine\";\r\nimport {\r\n    getNavigator,\r\n    hasProperty\r\n} from \"../../core/utils/window\";\r\nimport domAdapter from \"../../core/dom_adapter\";\r\nimport {\r\n    makeEventEmitter\r\n} from \"./event_emitter\";\r\nimport {\r\n    addNamespace\r\n} from \"../../events/utils/index\";\r\nimport {\r\n    name as wheelEventName\r\n} from \"../../events/core/wheel\";\r\nimport {\r\n    parseScalar\r\n} from \"../core/utils\";\r\nvar navigator = getNavigator();\r\nvar _math = Math;\r\nvar _abs = _math.abs;\r\nvar _sqrt = _math.sqrt;\r\nvar _round = _math.round;\r\nvar _addNamespace = addNamespace;\r\nvar _NAME = \"dxVectorMap\";\r\nvar EVENT_START = \"start\";\r\nvar EVENT_MOVE = \"move\";\r\nvar EVENT_END = \"end\";\r\nvar EVENT_ZOOM = \"zoom\";\r\nvar EVENT_HOVER_ON = \"hover-on\";\r\nvar EVENT_HOVER_OFF = \"hover-off\";\r\nvar EVENT_CLICK = \"click\";\r\nvar EVENT_FOCUS_ON = \"focus-on\";\r\nvar EVENT_FOCUS_MOVE = \"focus-move\";\r\nvar EVENT_FOCUS_OFF = \"focus-off\";\r\nvar CLICK_TIME_THRESHOLD = 500;\r\nvar CLICK_COORD_THRESHOLD_MOUSE = 5;\r\nvar CLICK_COORD_THRESHOLD_TOUCH = 20;\r\nvar DRAG_COORD_THRESHOLD_MOUSE = 5;\r\nvar DRAG_COORD_THRESHOLD_TOUCH = 10;\r\nvar FOCUS_OFF_DELAY = 100;\r\nvar WHEEL_COOLDOWN = 50;\r\nvar WHEEL_DIRECTION_COOLDOWN = 300;\r\nvar EVENTS;\r\nvar Focus;\r\nsetupEvents();\r\nexport function Tracker(parameters) {\r\n    var that = this;\r\n    that._root = parameters.root;\r\n    that._createEventHandlers(parameters.dataKey);\r\n    that._createProjectionHandlers(parameters.projection);\r\n    that._initEvents();\r\n    that._focus = new Focus((function(name, arg) {\r\n        that._fire(name, arg)\r\n    }));\r\n    that._attachHandlers()\r\n}\r\nTracker.prototype = {\r\n    constructor: Tracker,\r\n    dispose: function() {\r\n        this._detachHandlers();\r\n        this._disposeEvents();\r\n        this._focus.dispose();\r\n        this._root = this._focus = this._docHandlers = this._rootHandlers = null\r\n    },\r\n    _eventNames: [EVENT_START, EVENT_MOVE, EVENT_END, EVENT_ZOOM, EVENT_CLICK, EVENT_HOVER_ON, EVENT_HOVER_OFF, EVENT_FOCUS_ON, EVENT_FOCUS_OFF, EVENT_FOCUS_MOVE],\r\n    _startClick: function(event, data) {\r\n        if (!data) {\r\n            return\r\n        }\r\n        var coords = getEventCoords(event);\r\n        this._clickState = {\r\n            x: coords.x,\r\n            y: coords.y,\r\n            threshold: isTouchEvent(event) ? CLICK_COORD_THRESHOLD_TOUCH : CLICK_COORD_THRESHOLD_MOUSE,\r\n            time: Date.now()\r\n        }\r\n    },\r\n    _endClick: function(event, data) {\r\n        var state = this._clickState;\r\n        var threshold;\r\n        var coords;\r\n        if (!state) {\r\n            return\r\n        }\r\n        if (data && Date.now() - state.time <= CLICK_TIME_THRESHOLD) {\r\n            threshold = state.threshold;\r\n            coords = getEventCoords(event);\r\n            if (_abs(coords.x - state.x) <= threshold && _abs(coords.y - state.y) <= threshold) {\r\n                this._fire(EVENT_CLICK, {\r\n                    data: data,\r\n                    x: coords.x,\r\n                    y: coords.y,\r\n                    $event: event\r\n                })\r\n            }\r\n        }\r\n        this._clickState = null\r\n    },\r\n    _startDrag: function(event, data) {\r\n        if (!data) {\r\n            return\r\n        }\r\n        var coords = getEventCoords(event);\r\n        var state = this._dragState = {\r\n            x: coords.x,\r\n            y: coords.y,\r\n            data: data\r\n        };\r\n        this._fire(EVENT_START, {\r\n            x: state.x,\r\n            y: state.y,\r\n            data: state.data\r\n        })\r\n    },\r\n    _moveDrag: function(event, data) {\r\n        var state = this._dragState;\r\n        if (!state) {\r\n            return\r\n        }\r\n        var coords = getEventCoords(event);\r\n        var threshold = isTouchEvent(event) ? DRAG_COORD_THRESHOLD_TOUCH : DRAG_COORD_THRESHOLD_MOUSE;\r\n        if (state.active || _abs(coords.x - state.x) > threshold || _abs(coords.y - state.y) > threshold) {\r\n            state.x = coords.x;\r\n            state.y = coords.y;\r\n            state.active = true;\r\n            state.data = data || {};\r\n            this._fire(EVENT_MOVE, {\r\n                x: state.x,\r\n                y: state.y,\r\n                data: state.data\r\n            })\r\n        }\r\n    },\r\n    _endDrag: function() {\r\n        var state = this._dragState;\r\n        if (!state) {\r\n            return\r\n        }\r\n        this._dragState = null;\r\n        this._fire(EVENT_END, {\r\n            x: state.x,\r\n            y: state.y,\r\n            data: state.data\r\n        })\r\n    },\r\n    _wheelZoom: function(event, data) {\r\n        if (!data) {\r\n            return\r\n        }\r\n        var lock = this._wheelLock;\r\n        var time = Date.now();\r\n        if (time - lock.time <= WHEEL_COOLDOWN) {\r\n            return\r\n        }\r\n        if (time - lock.dirTime > WHEEL_DIRECTION_COOLDOWN) {\r\n            lock.dir = 0\r\n        }\r\n        var delta = adjustWheelDelta(event.delta / 120 || 0, lock);\r\n        if (0 === delta) {\r\n            return\r\n        }\r\n        var coords = getEventCoords(event);\r\n        this._fire(EVENT_ZOOM, {\r\n            delta: delta,\r\n            x: coords.x,\r\n            y: coords.y\r\n        });\r\n        lock.time = lock.dirTime = time\r\n    },\r\n    _startZoom: function(event, data) {\r\n        if (!isTouchEvent(event) || !data) {\r\n            return\r\n        }\r\n        var state = this._zoomState = this._zoomState || {};\r\n        var coords;\r\n        var pointer2;\r\n        if (state.pointer1 && state.pointer2) {\r\n            return\r\n        }\r\n        if (void 0 === state.pointer1) {\r\n            state.pointer1 = getPointerId(event) || 0;\r\n            coords = getMultitouchEventCoords(event, state.pointer1);\r\n            state.x1 = state.x1_0 = coords.x;\r\n            state.y1 = state.y1_0 = coords.y\r\n        }\r\n        if (void 0 === state.pointer2) {\r\n            pointer2 = getPointerId(event) || 1;\r\n            if (pointer2 !== state.pointer1) {\r\n                coords = getMultitouchEventCoords(event, pointer2);\r\n                if (coords) {\r\n                    state.x2 = state.x2_0 = coords.x;\r\n                    state.y2 = state.y2_0 = coords.y;\r\n                    state.pointer2 = pointer2;\r\n                    state.ready = true;\r\n                    this._endDrag()\r\n                }\r\n            }\r\n        }\r\n    },\r\n    _moveZoom: function(event) {\r\n        var state = this._zoomState;\r\n        var coords;\r\n        if (!state || !isTouchEvent(event)) {\r\n            return\r\n        }\r\n        if (void 0 !== state.pointer1) {\r\n            coords = getMultitouchEventCoords(event, state.pointer1);\r\n            if (coords) {\r\n                state.x1 = coords.x;\r\n                state.y1 = coords.y\r\n            }\r\n        }\r\n        if (void 0 !== state.pointer2) {\r\n            coords = getMultitouchEventCoords(event, state.pointer2);\r\n            if (coords) {\r\n                state.x2 = coords.x;\r\n                state.y2 = coords.y\r\n            }\r\n        }\r\n    },\r\n    _endZoom: function(event) {\r\n        var state = this._zoomState;\r\n        var startDistance;\r\n        var currentDistance;\r\n        if (!state || !isTouchEvent(event)) {\r\n            return\r\n        }\r\n        if (state.ready) {\r\n            startDistance = getDistance(state.x1_0, state.y1_0, state.x2_0, state.y2_0);\r\n            currentDistance = getDistance(state.x1, state.y1, state.x2, state.y2);\r\n            this._fire(EVENT_ZOOM, {\r\n                ratio: currentDistance / startDistance,\r\n                x: (state.x1_0 + state.x2_0) / 2,\r\n                y: (state.y1_0 + state.y2_0) / 2\r\n            })\r\n        }\r\n        this._zoomState = null\r\n    },\r\n    _startHover: function(event, data) {\r\n        this._doHover(event, data, true)\r\n    },\r\n    _moveHover: function(event, data) {\r\n        this._doHover(event, data, false)\r\n    },\r\n    _doHover: function(event, data, isTouch) {\r\n        if (this._dragState && this._dragState.active || this._zoomState && this._zoomState.ready) {\r\n            this._cancelHover();\r\n            return\r\n        }\r\n        if (isTouchEvent(event) !== isTouch || this._hoverTarget === event.target || this._hoverState && this._hoverState.data === data) {\r\n            return\r\n        }\r\n        this._cancelHover();\r\n        if (data) {\r\n            this._hoverState = {\r\n                data: data\r\n            };\r\n            this._fire(EVENT_HOVER_ON, {\r\n                data: data\r\n            })\r\n        }\r\n        this._hoverTarget = event.target\r\n    },\r\n    _cancelHover: function() {\r\n        var state = this._hoverState;\r\n        this._hoverState = this._hoverTarget = null;\r\n        if (state) {\r\n            this._fire(EVENT_HOVER_OFF, {\r\n                data: state.data\r\n            })\r\n        }\r\n    },\r\n    _startFocus: function(event, data) {\r\n        this._doFocus(event, data, true)\r\n    },\r\n    _moveFocus: function(event, data) {\r\n        this._doFocus(event, data, false)\r\n    },\r\n    _doFocus: function(event, data, isTouch) {\r\n        if (this._dragState && this._dragState.active || this._zoomState && this._zoomState.ready) {\r\n            this._cancelFocus();\r\n            return\r\n        }\r\n        if (isTouchEvent(event) !== isTouch) {\r\n            return\r\n        }\r\n        this._focus.turnOff();\r\n        data && this._focus.turnOn(data, getEventCoords(event))\r\n    },\r\n    _cancelFocus: function() {\r\n        this._focus.cancel()\r\n    },\r\n    _createEventHandlers: function(DATA_KEY) {\r\n        var that = this;\r\n        that._docHandlers = {};\r\n        that._rootHandlers = {};\r\n        that._rootHandlers[EVENTS.start] = that._docHandlers[EVENTS.start] = function(event) {\r\n            var isTouch = isTouchEvent(event);\r\n            var data = getData(event);\r\n            if (isTouch && !that._isTouchEnabled) {\r\n                return\r\n            }\r\n            if (data) {\r\n                event.preventDefault();\r\n                event.stopPropagation()\r\n            }\r\n            that._startClick(event, data);\r\n            that._startDrag(event, data);\r\n            that._startZoom(event, data);\r\n            that._startHover(event, data);\r\n            that._startFocus(event, data)\r\n        };\r\n        that._docHandlers[EVENTS.move] = function(event) {\r\n            var isTouch = isTouchEvent(event);\r\n            var data = getData(event);\r\n            if (isTouch && !that._isTouchEnabled) {\r\n                return\r\n            }\r\n            that._moveDrag(event, data);\r\n            that._moveZoom(event, data);\r\n            that._moveHover(event, data);\r\n            that._moveFocus(event, data)\r\n        };\r\n        that._docHandlers[EVENTS.end] = function(event) {\r\n            var isTouch = isTouchEvent(event);\r\n            var data = getData(event);\r\n            if (isTouch && !that._isTouchEnabled) {\r\n                return\r\n            }\r\n            that._endClick(event, data);\r\n            that._endDrag(event, data);\r\n            that._endZoom(event, data)\r\n        };\r\n        that._rootHandlers[EVENTS.wheel] = function(event) {\r\n            that._cancelFocus();\r\n            if (!that._isWheelEnabled) {\r\n                return\r\n            }\r\n            var data = getData(event);\r\n            if (data) {\r\n                event.preventDefault();\r\n                event.stopPropagation();\r\n                that._wheelZoom(event, data)\r\n            }\r\n        };\r\n        that._wheelLock = {\r\n            dir: 0\r\n        };\r\n\r\n        function getData(event) {\r\n            var target = event.target;\r\n            return (\"tspan\" === target.tagName ? target.parentNode : target)[DATA_KEY]\r\n        }\r\n    },\r\n    _createProjectionHandlers: function(projection) {\r\n        var that = this;\r\n        projection.on({\r\n            center: handler,\r\n            zoom: handler\r\n        });\r\n\r\n        function handler() {\r\n            that._cancelFocus()\r\n        }\r\n    },\r\n    reset: function() {\r\n        this._clickState = null;\r\n        this._endDrag();\r\n        this._cancelHover();\r\n        this._cancelFocus()\r\n    },\r\n    setOptions: function(options) {\r\n        this.reset();\r\n        this._detachHandlers();\r\n        this._isTouchEnabled = !!parseScalar(options.touchEnabled, true);\r\n        this._isWheelEnabled = !!parseScalar(options.wheelEnabled, true);\r\n        this._attachHandlers()\r\n    },\r\n    _detachHandlers: function() {\r\n        if (this._isTouchEnabled) {\r\n            this._root.css({\r\n                \"touch-action\": \"\",\r\n                \"-webkit-user-select\": \"\"\r\n            }).off(_addNamespace(\"MSHoldVisual\", _NAME)).off(_addNamespace(\"contextmenu\", _NAME))\r\n        }\r\n        eventsEngine.off(domAdapter.getDocument(), this._docHandlers);\r\n        this._root.off(this._rootHandlers)\r\n    },\r\n    _attachHandlers: function() {\r\n        if (this._isTouchEnabled) {\r\n            this._root.css({\r\n                \"touch-action\": \"none\",\r\n                \"-webkit-user-select\": \"none\"\r\n            }).on(_addNamespace(\"MSHoldVisual\", _NAME), (function(event) {\r\n                event.preventDefault()\r\n            })).on(_addNamespace(\"contextmenu\", _NAME), (function(event) {\r\n                isTouchEvent(event) && event.preventDefault()\r\n            }))\r\n        }\r\n        eventsEngine.on(domAdapter.getDocument(), this._docHandlers);\r\n        this._root.on(this._rootHandlers)\r\n    }\r\n};\r\nFocus = function(fire) {\r\n    var that = this;\r\n    var _activeData = null;\r\n    var _data = null;\r\n    var _disabled = false;\r\n    var _offTimer = null;\r\n    var _x;\r\n    var _y;\r\n    that.dispose = function() {\r\n        clearTimeout(_offTimer);\r\n        that.turnOn = that.turnOff = that.cancel = that.dispose = that = fire = _activeData = _data = _offTimer = null\r\n    };\r\n    that.turnOn = function(data, coords) {\r\n        if (data === _data && _disabled) {\r\n            return\r\n        }\r\n        _disabled = false;\r\n        _data = data;\r\n        if (_activeData) {\r\n            _x = coords.x;\r\n            _y = coords.y;\r\n            if (_data === _activeData) {\r\n                fire(EVENT_FOCUS_MOVE, {\r\n                    data: _data,\r\n                    x: _x,\r\n                    y: _y\r\n                });\r\n                onCheck(true)\r\n            } else {\r\n                fire(EVENT_FOCUS_ON, {\r\n                    data: _data,\r\n                    x: _x,\r\n                    y: _y,\r\n                    done: onCheck\r\n                })\r\n            }\r\n        } else {\r\n            _x = coords.x;\r\n            _y = coords.y;\r\n            fire(EVENT_FOCUS_ON, {\r\n                data: _data,\r\n                x: _x,\r\n                y: _y,\r\n                done: onCheck\r\n            })\r\n        }\r\n\r\n        function onCheck(result) {\r\n            _disabled = !result;\r\n            if (result) {\r\n                _activeData = _data;\r\n                clearTimeout(_offTimer);\r\n                _offTimer = null\r\n            }\r\n        }\r\n    };\r\n    that.turnOff = function() {\r\n        _data = null;\r\n        if (_activeData && !_disabled) {\r\n            _offTimer = _offTimer || setTimeout((function() {\r\n                _offTimer = null;\r\n                fire(EVENT_FOCUS_OFF, {\r\n                    data: _activeData\r\n                });\r\n                _activeData = null\r\n            }), FOCUS_OFF_DELAY)\r\n        }\r\n    };\r\n    that.cancel = function() {\r\n        clearTimeout(_offTimer);\r\n        if (_activeData) {\r\n            fire(EVENT_FOCUS_OFF, {\r\n                data: _activeData\r\n            })\r\n        }\r\n        _activeData = _data = _offTimer = null\r\n    }\r\n};\r\nmakeEventEmitter(Tracker);\r\n\r\nfunction getDistance(x1, y1, x2, y2) {\r\n    return _sqrt((x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2))\r\n}\r\n\r\nfunction isTouchEvent(event) {\r\n    var type = event.originalEvent.type;\r\n    var pointerType = event.originalEvent.pointerType;\r\n    return /^touch/.test(type) || /^MSPointer/.test(type) && 4 !== pointerType || /^pointer/.test(type) && \"mouse\" !== pointerType\r\n}\r\n\r\nfunction selectItem(flags, items) {\r\n    var i = 0;\r\n    var ii = flags.length;\r\n    var item;\r\n    for (; i < ii; ++i) {\r\n        if (flags[i]) {\r\n            item = items[i];\r\n            break\r\n        }\r\n    }\r\n    return _addNamespace(item || items[i], _NAME)\r\n}\r\n\r\nfunction setupEvents() {\r\n    var flags = [navigator.pointerEnabled, navigator.msPointerEnabled, hasProperty(\"ontouchstart\")];\r\n    EVENTS = {\r\n        start: selectItem(flags, [\"pointerdown\", \"MSPointerDown\", \"touchstart mousedown\", \"mousedown\"]),\r\n        move: selectItem(flags, [\"pointermove\", \"MSPointerMove\", \"touchmove mousemove\", \"mousemove\"]),\r\n        end: selectItem(flags, [\"pointerup\", \"MSPointerUp\", \"touchend mouseup\", \"mouseup\"]),\r\n        wheel: _addNamespace(wheelEventName, _NAME)\r\n    }\r\n}\r\n\r\nfunction getEventCoords(event) {\r\n    var originalEvent = event.originalEvent;\r\n    var touch = originalEvent.touches && originalEvent.touches[0] || {};\r\n    return {\r\n        x: touch.pageX || originalEvent.pageX || event.pageX,\r\n        y: touch.pageY || originalEvent.pageY || event.pageY\r\n    }\r\n}\r\n\r\nfunction getPointerId(event) {\r\n    return event.originalEvent.pointerId\r\n}\r\n\r\nfunction getMultitouchEventCoords(event, pointerId) {\r\n    var originalEvent = event.originalEvent;\r\n    if (void 0 !== originalEvent.pointerId) {\r\n        originalEvent = originalEvent.pointerId === pointerId ? originalEvent : null\r\n    } else {\r\n        originalEvent = originalEvent.touches[pointerId]\r\n    }\r\n    return originalEvent ? {\r\n        x: originalEvent.pageX || event.pageX,\r\n        y: originalEvent.pageY || event.pageY\r\n    } : null\r\n}\r\n\r\nfunction adjustWheelDelta(delta, lock) {\r\n    if (0 === delta) {\r\n        return 0\r\n    }\r\n    var _delta = _abs(delta);\r\n    var sign = _round(delta / _delta);\r\n    if (lock.dir && sign !== lock.dir) {\r\n        return 0\r\n    }\r\n    lock.dir = sign;\r\n    if (_delta < .1) {\r\n        _delta = 0\r\n    } else if (_delta < 1) {\r\n        _delta = 1\r\n    } else if (_delta > 4) {\r\n        _delta = 4\r\n    } else {\r\n        _delta = _round(_delta)\r\n    }\r\n    return sign * _delta\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}