{"ast":null,"code":"/**\r\n * DevExtreme (esm/core/utils/deferred.js)\r\n * Version: 22.1.4\r\n * Build date: Fri Jul 22 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport { isDeferred, isDefined, isPromise } from \"../utils/type\";\nimport { extend } from \"../utils/extend\";\nimport Callbacks from \"../utils/callbacks\";\nvar deferredConfig = [{\n  method: \"resolve\",\n  handler: \"done\",\n  state: \"resolved\"\n}, {\n  method: \"reject\",\n  handler: \"fail\",\n  state: \"rejected\"\n}, {\n  method: \"notify\",\n  handler: \"progress\"\n}];\n\nvar _DeferredObj = function () {\n  var that = this;\n  this._state = \"pending\";\n  this._promise = {};\n  deferredConfig.forEach(function (config) {\n    var methodName = config.method;\n    this[methodName + \"Callbacks\"] = new Callbacks();\n\n    this[methodName] = function () {\n      return this[methodName + \"With\"](this._promise, arguments);\n    }.bind(this);\n\n    this._promise[config.handler] = function (handler) {\n      if (!handler) {\n        return this;\n      }\n\n      var callbacks = that[methodName + \"Callbacks\"];\n\n      if (callbacks.fired()) {\n        handler.apply(that[methodName + \"Context\"], that[methodName + \"Args\"]);\n      } else {\n        callbacks.add(function (context, args) {\n          handler.apply(context, args);\n        }.bind(this));\n      }\n\n      return this;\n    };\n  }.bind(this));\n\n  this._promise.always = function (handler) {\n    return this.done(handler).fail(handler);\n  };\n\n  this._promise.catch = function (handler) {\n    return this.then(null, handler);\n  };\n\n  this._promise.then = function (resolve, reject) {\n    var result = new _DeferredObj();\n    [\"done\", \"fail\"].forEach(function (method) {\n      var callback = \"done\" === method ? resolve : reject;\n      this[method](function () {\n        if (!callback) {\n          result[\"done\" === method ? \"resolve\" : \"reject\"].apply(this, arguments);\n          return;\n        }\n\n        var callbackResult = callback && callback.apply(this, arguments);\n\n        if (isDeferred(callbackResult)) {\n          callbackResult.done(result.resolve).fail(result.reject);\n        } else if (isPromise(callbackResult)) {\n          callbackResult.then(result.resolve, result.reject);\n        } else {\n          result.resolve.apply(this, isDefined(callbackResult) ? [callbackResult] : arguments);\n        }\n      });\n    }.bind(this));\n    return result.promise();\n  };\n\n  this._promise.state = function () {\n    return that._state;\n  };\n\n  this._promise.promise = function (args) {\n    return args ? extend(args, that._promise) : that._promise;\n  };\n\n  this._promise.promise(this);\n};\n\ndeferredConfig.forEach(function (config) {\n  var methodName = config.method;\n  var state = config.state;\n\n  _DeferredObj.prototype[methodName + \"With\"] = function (context, args) {\n    var callbacks = this[methodName + \"Callbacks\"];\n\n    if (\"pending\" === this.state()) {\n      this[methodName + \"Args\"] = args;\n      this[methodName + \"Context\"] = context;\n\n      if (state) {\n        this._state = state;\n      }\n\n      callbacks.fire(context, args);\n    }\n\n    return this;\n  };\n});\nexport function fromPromise(promise, context) {\n  if (isDeferred(promise)) {\n    return promise;\n  } else if (isPromise(promise)) {\n    var d = new _DeferredObj();\n    promise.then(function () {\n      d.resolveWith.apply(d, [context].concat([[].slice.call(arguments)]));\n    }, function () {\n      d.rejectWith.apply(d, [context].concat([[].slice.call(arguments)]));\n    });\n    return d;\n  }\n\n  return new _DeferredObj().resolveWith(context, [promise]);\n}\n\nvar whenFunc = function () {\n  if (1 === arguments.length) {\n    return fromPromise(arguments[0]);\n  }\n\n  var values = [].slice.call(arguments);\n  var contexts = [];\n  var resolvedCount = 0;\n  var deferred = new _DeferredObj();\n\n  var updateState = function (i) {\n    return function (value) {\n      contexts[i] = this;\n      values[i] = arguments.length > 1 ? [].slice.call(arguments) : value;\n      resolvedCount++;\n\n      if (resolvedCount === values.length) {\n        deferred.resolveWith(contexts, values);\n      }\n    };\n  };\n\n  for (var i = 0; i < values.length; i++) {\n    if (isDeferred(values[i])) {\n      values[i].promise().done(updateState(i)).fail(deferred.reject);\n    } else {\n      resolvedCount++;\n    }\n  }\n\n  if (resolvedCount === values.length) {\n    deferred.resolveWith(contexts, values);\n  }\n\n  return deferred.promise();\n};\n\nexport function setStrategy(value) {\n  _DeferredObj = value.Deferred;\n  whenFunc = value.when;\n}\nexport function Deferred() {\n  return new _DeferredObj();\n}\nexport function when() {\n  return whenFunc.apply(this, arguments);\n}","map":{"version":3,"names":["isDeferred","isDefined","isPromise","extend","Callbacks","deferredConfig","method","handler","state","_DeferredObj","that","_state","_promise","forEach","config","methodName","arguments","bind","callbacks","fired","apply","add","context","args","always","done","fail","catch","then","resolve","reject","result","callback","callbackResult","promise","prototype","fire","fromPromise","d","resolveWith","concat","slice","call","rejectWith","whenFunc","length","values","contexts","resolvedCount","deferred","updateState","i","value","setStrategy","Deferred","when"],"sources":["E:/MisaProject/W2022_06/misa_emis/node_modules/devextreme/esm/core/utils/deferred.js"],"sourcesContent":["/**\r\n * DevExtreme (esm/core/utils/deferred.js)\r\n * Version: 22.1.4\r\n * Build date: Fri Jul 22 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport {\r\n    isDeferred,\r\n    isDefined,\r\n    isPromise\r\n} from \"../utils/type\";\r\nimport {\r\n    extend\r\n} from \"../utils/extend\";\r\nimport Callbacks from \"../utils/callbacks\";\r\nvar deferredConfig = [{\r\n    method: \"resolve\",\r\n    handler: \"done\",\r\n    state: \"resolved\"\r\n}, {\r\n    method: \"reject\",\r\n    handler: \"fail\",\r\n    state: \"rejected\"\r\n}, {\r\n    method: \"notify\",\r\n    handler: \"progress\"\r\n}];\r\nvar _DeferredObj = function() {\r\n    var that = this;\r\n    this._state = \"pending\";\r\n    this._promise = {};\r\n    deferredConfig.forEach(function(config) {\r\n        var methodName = config.method;\r\n        this[methodName + \"Callbacks\"] = new Callbacks;\r\n        this[methodName] = function() {\r\n            return this[methodName + \"With\"](this._promise, arguments)\r\n        }.bind(this);\r\n        this._promise[config.handler] = function(handler) {\r\n            if (!handler) {\r\n                return this\r\n            }\r\n            var callbacks = that[methodName + \"Callbacks\"];\r\n            if (callbacks.fired()) {\r\n                handler.apply(that[methodName + \"Context\"], that[methodName + \"Args\"])\r\n            } else {\r\n                callbacks.add(function(context, args) {\r\n                    handler.apply(context, args)\r\n                }.bind(this))\r\n            }\r\n            return this\r\n        }\r\n    }.bind(this));\r\n    this._promise.always = function(handler) {\r\n        return this.done(handler).fail(handler)\r\n    };\r\n    this._promise.catch = function(handler) {\r\n        return this.then(null, handler)\r\n    };\r\n    this._promise.then = function(resolve, reject) {\r\n        var result = new _DeferredObj;\r\n        [\"done\", \"fail\"].forEach(function(method) {\r\n            var callback = \"done\" === method ? resolve : reject;\r\n            this[method]((function() {\r\n                if (!callback) {\r\n                    result[\"done\" === method ? \"resolve\" : \"reject\"].apply(this, arguments);\r\n                    return\r\n                }\r\n                var callbackResult = callback && callback.apply(this, arguments);\r\n                if (isDeferred(callbackResult)) {\r\n                    callbackResult.done(result.resolve).fail(result.reject)\r\n                } else if (isPromise(callbackResult)) {\r\n                    callbackResult.then(result.resolve, result.reject)\r\n                } else {\r\n                    result.resolve.apply(this, isDefined(callbackResult) ? [callbackResult] : arguments)\r\n                }\r\n            }))\r\n        }.bind(this));\r\n        return result.promise()\r\n    };\r\n    this._promise.state = function() {\r\n        return that._state\r\n    };\r\n    this._promise.promise = function(args) {\r\n        return args ? extend(args, that._promise) : that._promise\r\n    };\r\n    this._promise.promise(this)\r\n};\r\ndeferredConfig.forEach((function(config) {\r\n    var methodName = config.method;\r\n    var state = config.state;\r\n    _DeferredObj.prototype[methodName + \"With\"] = function(context, args) {\r\n        var callbacks = this[methodName + \"Callbacks\"];\r\n        if (\"pending\" === this.state()) {\r\n            this[methodName + \"Args\"] = args;\r\n            this[methodName + \"Context\"] = context;\r\n            if (state) {\r\n                this._state = state\r\n            }\r\n            callbacks.fire(context, args)\r\n        }\r\n        return this\r\n    }\r\n}));\r\nexport function fromPromise(promise, context) {\r\n    if (isDeferred(promise)) {\r\n        return promise\r\n    } else if (isPromise(promise)) {\r\n        var d = new _DeferredObj;\r\n        promise.then((function() {\r\n            d.resolveWith.apply(d, [context].concat([\r\n                [].slice.call(arguments)\r\n            ]))\r\n        }), (function() {\r\n            d.rejectWith.apply(d, [context].concat([\r\n                [].slice.call(arguments)\r\n            ]))\r\n        }));\r\n        return d\r\n    }\r\n    return (new _DeferredObj).resolveWith(context, [promise])\r\n}\r\nvar whenFunc = function() {\r\n    if (1 === arguments.length) {\r\n        return fromPromise(arguments[0])\r\n    }\r\n    var values = [].slice.call(arguments);\r\n    var contexts = [];\r\n    var resolvedCount = 0;\r\n    var deferred = new _DeferredObj;\r\n    var updateState = function(i) {\r\n        return function(value) {\r\n            contexts[i] = this;\r\n            values[i] = arguments.length > 1 ? [].slice.call(arguments) : value;\r\n            resolvedCount++;\r\n            if (resolvedCount === values.length) {\r\n                deferred.resolveWith(contexts, values)\r\n            }\r\n        }\r\n    };\r\n    for (var i = 0; i < values.length; i++) {\r\n        if (isDeferred(values[i])) {\r\n            values[i].promise().done(updateState(i)).fail(deferred.reject)\r\n        } else {\r\n            resolvedCount++\r\n        }\r\n    }\r\n    if (resolvedCount === values.length) {\r\n        deferred.resolveWith(contexts, values)\r\n    }\r\n    return deferred.promise()\r\n};\r\nexport function setStrategy(value) {\r\n    _DeferredObj = value.Deferred;\r\n    whenFunc = value.when\r\n}\r\nexport function Deferred() {\r\n    return new _DeferredObj\r\n}\r\nexport function when() {\r\n    return whenFunc.apply(this, arguments)\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}