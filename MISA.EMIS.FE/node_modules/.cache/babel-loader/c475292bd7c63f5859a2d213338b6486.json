{"ast":null,"code":"/**\r\n * DevExtreme (esm/viz/translators/translator2d.js)\r\n * Version: 22.1.4\r\n * Build date: Fri Jul 22 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport { extend } from \"../../core/utils/extend\";\nimport { each } from \"../../core/utils/iterator\";\nimport { Range } from \"./range\";\nimport categoryTranslator from \"./category_translator\";\nimport intervalTranslator from \"./interval_translator\";\nimport datetimeTranslator from \"./datetime_translator\";\nimport logarithmicTranslator from \"./logarithmic_translator\";\nimport { getLogExt as getLog, getPower, raiseToExt, getCategoriesInfo } from \"../core/utils\";\nimport { isDefined, isDate } from \"../../core/utils/type\";\nimport { adjust } from \"../../core/utils/math\";\nimport dateUtils from \"../../core/utils/date\";\nvar _abs = Math.abs;\nvar CANVAS_PROP = [\"width\", \"height\", \"left\", \"top\", \"bottom\", \"right\"];\nvar dummyTranslator = {\n  to(value) {\n    var coord = this._canvasOptions.startPoint + (this._options.conversionValue ? value : Math.round(value));\n    return coord > this._canvasOptions.endPoint ? this._canvasOptions.endPoint : coord;\n  },\n\n  from(value) {\n    return value - this._canvasOptions.startPoint;\n  }\n\n};\n\nvar validateCanvas = function (canvas) {\n  each(CANVAS_PROP, function (_, prop) {\n    canvas[prop] = parseInt(canvas[prop]) || 0;\n  });\n  return canvas;\n};\n\nvar makeCategoriesToPoints = function (categories) {\n  var categoriesToPoints = {};\n  categories.forEach(function (item, i) {\n    categoriesToPoints[item.valueOf()] = i;\n  });\n  return categoriesToPoints;\n};\n\nvar validateBusinessRange = function (businessRange) {\n  if (!(businessRange instanceof Range)) {\n    businessRange = new Range(businessRange);\n  }\n\n  function validate(valueSelector, baseValueSelector) {\n    if (!isDefined(businessRange[valueSelector]) && isDefined(businessRange[baseValueSelector])) {\n      businessRange[valueSelector] = businessRange[baseValueSelector];\n    }\n  }\n\n  validate(\"minVisible\", \"min\");\n  validate(\"maxVisible\", \"max\");\n  return businessRange;\n};\n\nfunction prepareBreaks(breaks, range) {\n  var transform = \"logarithmic\" === range.axisType ? function (value) {\n    return getLog(value, range.base);\n  } : function (value) {\n    return value;\n  };\n  var array = [];\n  var br;\n  var transformFrom;\n  var transformTo;\n  var i;\n  var length = breaks.length;\n  var sum = 0;\n\n  for (i = 0; i < length; i++) {\n    br = breaks[i];\n    transformFrom = transform(br.from);\n    transformTo = transform(br.to);\n    sum += transformTo - transformFrom;\n    array.push({\n      trFrom: transformFrom,\n      trTo: transformTo,\n      from: br.from,\n      to: br.to,\n      length: sum,\n      cumulativeWidth: br.cumulativeWidth\n    });\n  }\n\n  return array;\n}\n\nfunction getCanvasBounds(range) {\n  var min = range.min;\n  var max = range.max;\n  var minVisible = range.minVisible;\n  var maxVisible = range.maxVisible;\n  var isLogarithmic = \"logarithmic\" === range.axisType;\n\n  if (isLogarithmic) {\n    maxVisible = getLog(maxVisible, range.base, range.allowNegatives, range.linearThreshold);\n    minVisible = getLog(minVisible, range.base, range.allowNegatives, range.linearThreshold);\n    min = getLog(min, range.base, range.allowNegatives, range.linearThreshold);\n    max = getLog(max, range.base, range.allowNegatives, range.linearThreshold);\n  }\n\n  return {\n    base: range.base,\n    rangeMin: min,\n    rangeMax: max,\n    rangeMinVisible: minVisible,\n    rangeMaxVisible: maxVisible\n  };\n}\n\nfunction getCheckingMethodsAboutBreaks(inverted) {\n  return {\n    isStartSide: !inverted ? function (pos, breaks, start, end) {\n      return pos < breaks[0][start];\n    } : function (pos, breaks, start, end) {\n      return pos <= breaks[breaks.length - 1][end];\n    },\n    isEndSide: !inverted ? function (pos, breaks, start, end) {\n      return pos >= breaks[breaks.length - 1][end];\n    } : function (pos, breaks, start, end) {\n      return pos > breaks[0][start];\n    },\n    isInBreak: !inverted ? function (pos, br, start, end) {\n      return pos >= br[start] && pos < br[end];\n    } : function (pos, br, start, end) {\n      return pos > br[end] && pos <= br[start];\n    },\n    isBetweenBreaks: !inverted ? function (pos, br, prevBreak, start, end) {\n      return pos < br[start] && pos >= prevBreak[end];\n    } : function (pos, br, prevBreak, start, end) {\n      return pos >= br[end] && pos < prevBreak[start];\n    },\n    getLength: !inverted ? function (br) {\n      return br.length;\n    } : function (br, lastBreak) {\n      return lastBreak.length - br.length;\n    },\n    getBreaksSize: !inverted ? function (br) {\n      return br.cumulativeWidth;\n    } : function (br, lastBreak) {\n      return lastBreak.cumulativeWidth - br.cumulativeWidth;\n    }\n  };\n}\n\nvar _Translator2d = function (businessRange, canvas, options) {\n  this.update(businessRange, canvas, options);\n};\n\n_Translator2d.prototype = {\n  constructor: _Translator2d,\n  reinit: function () {\n    var that = this;\n    var options = that._options;\n    var range = that._businessRange;\n    var categories = range.categories || [];\n    var script = {};\n\n    var canvasOptions = that._prepareCanvasOptions();\n\n    var visibleCategories = getCategoriesInfo(categories, range.minVisible, range.maxVisible).categories;\n    var categoriesLength = visibleCategories.length;\n\n    if (range.isEmpty()) {\n      script = dummyTranslator;\n    } else {\n      switch (range.axisType) {\n        case \"logarithmic\":\n          script = logarithmicTranslator;\n          break;\n\n        case \"semidiscrete\":\n          script = intervalTranslator;\n          canvasOptions.ratioOfCanvasRange = canvasOptions.canvasLength / (dateUtils.addInterval(canvasOptions.rangeMaxVisible, options.interval) - canvasOptions.rangeMinVisible);\n          break;\n\n        case \"discrete\":\n          script = categoryTranslator;\n          that._categories = categories;\n          canvasOptions.interval = that._getDiscreteInterval(options.addSpiderCategory ? categoriesLength + 1 : categoriesLength, canvasOptions);\n          that._categoriesToPoints = makeCategoriesToPoints(categories);\n\n          if (categoriesLength) {\n            canvasOptions.startPointIndex = that._categoriesToPoints[visibleCategories[0].valueOf()];\n            that.visibleCategories = visibleCategories;\n          }\n\n          break;\n\n        default:\n          if (\"datetime\" === range.dataType) {\n            script = datetimeTranslator;\n          }\n\n      }\n    }\n\n    (that._oldMethods || []).forEach(function (methodName) {\n      delete that[methodName];\n    });\n    that._oldMethods = Object.keys(script);\n    extend(that, script);\n    that._conversionValue = options.conversionValue ? function (value) {\n      return value;\n    } : function (value) {\n      return Math.round(value);\n    };\n    that.sc = {};\n    that._checkingMethodsAboutBreaks = [getCheckingMethodsAboutBreaks(false), getCheckingMethodsAboutBreaks(that.isInverted())];\n\n    that._translateBreaks();\n\n    that._calculateSpecialValues();\n  },\n  _translateBreaks: function () {\n    var breaks = this._breaks;\n    var size = this._options.breaksSize;\n    var i;\n    var b;\n    var end;\n    var length;\n\n    if (void 0 === breaks) {\n      return;\n    }\n\n    for (i = 0, length = breaks.length; i < length; i++) {\n      b = breaks[i];\n      end = this.translate(b.to);\n      b.end = end;\n      b.start = !b.gapSize ? !this.isInverted() ? end - size : end + size : end;\n    }\n  },\n  _checkValueAboutBreaks: function (breaks, pos, start, end, methods) {\n    var i;\n    var length;\n    var prop = {\n      length: 0,\n      breaksSize: void 0,\n      inBreak: false\n    };\n    var br;\n    var prevBreak;\n    var lastBreak = breaks[breaks.length - 1];\n\n    if (methods.isStartSide(pos, breaks, start, end)) {\n      return prop;\n    } else if (methods.isEndSide(pos, breaks, start, end)) {\n      return {\n        length: lastBreak.length,\n        breaksSize: lastBreak.cumulativeWidth,\n        inBreak: false\n      };\n    }\n\n    for (i = 0, length = breaks.length; i < length; i++) {\n      br = breaks[i];\n      prevBreak = breaks[i - 1];\n\n      if (methods.isInBreak(pos, br, start, end)) {\n        prop.inBreak = true;\n        prop.break = br;\n        break;\n      }\n\n      if (prevBreak && methods.isBetweenBreaks(pos, br, prevBreak, start, end)) {\n        prop = {\n          length: methods.getLength(prevBreak, lastBreak),\n          breaksSize: methods.getBreaksSize(prevBreak, lastBreak),\n          inBreak: false\n        };\n        break;\n      }\n    }\n\n    return prop;\n  },\n  isInverted: function () {\n    return !(this._options.isHorizontal ^ this._businessRange.invert);\n  },\n  _getDiscreteInterval: function (categoriesLength, canvasOptions) {\n    var correctedCategoriesCount = categoriesLength - (this._options.stick ? 1 : 0);\n    return correctedCategoriesCount > 0 ? canvasOptions.canvasLength / correctedCategoriesCount : canvasOptions.canvasLength;\n  },\n\n  _prepareCanvasOptions() {\n    var businessRange = this._businessRange;\n    var canvasOptions = this._canvasOptions = getCanvasBounds(businessRange);\n    var canvas = this._canvas;\n    var breaks = this._breaks;\n    var length;\n    canvasOptions.startPadding = canvas.startPadding || 0;\n    canvasOptions.endPadding = canvas.endPadding || 0;\n\n    if (this._options.isHorizontal) {\n      canvasOptions.startPoint = canvas.left + canvasOptions.startPadding;\n      length = canvas.width;\n      canvasOptions.endPoint = canvas.width - canvas.right - canvasOptions.endPadding;\n      canvasOptions.invert = businessRange.invert;\n    } else {\n      canvasOptions.startPoint = canvas.top + canvasOptions.startPadding;\n      length = canvas.height;\n      canvasOptions.endPoint = canvas.height - canvas.bottom - canvasOptions.endPadding;\n      canvasOptions.invert = !businessRange.invert;\n    }\n\n    this.canvasLength = canvasOptions.canvasLength = canvasOptions.endPoint - canvasOptions.startPoint;\n    canvasOptions.rangeDoubleError = Math.pow(10, getPower(canvasOptions.rangeMax - canvasOptions.rangeMin) - getPower(length) - 2);\n    canvasOptions.ratioOfCanvasRange = canvasOptions.canvasLength / (canvasOptions.rangeMaxVisible - canvasOptions.rangeMinVisible);\n\n    if (void 0 !== breaks) {\n      canvasOptions.ratioOfCanvasRange = (canvasOptions.canvasLength - breaks[breaks.length - 1].cumulativeWidth) / (canvasOptions.rangeMaxVisible - canvasOptions.rangeMinVisible - breaks[breaks.length - 1].length);\n    }\n\n    return canvasOptions;\n  },\n\n  updateCanvas: function (canvas) {\n    this._canvas = validateCanvas(canvas);\n    this.reinit();\n  },\n  updateBusinessRange: function (businessRange) {\n    var breaks = businessRange.breaks || [];\n    this._userBreaks = businessRange.userBreaks || [];\n    this._businessRange = validateBusinessRange(businessRange);\n    this._breaks = breaks.length ? prepareBreaks(breaks, this._businessRange) : void 0;\n    this.reinit();\n  },\n  update: function (businessRange, canvas, options) {\n    this._options = extend(this._options || {}, options);\n    this._canvas = validateCanvas(canvas);\n    this.updateBusinessRange(businessRange);\n  },\n  getBusinessRange: function () {\n    return this._businessRange;\n  },\n  getEventScale: function (zoomEvent) {\n    return zoomEvent.deltaScale || 1;\n  },\n  getCanvasVisibleArea: function () {\n    return {\n      min: this._canvasOptions.startPoint,\n      max: this._canvasOptions.endPoint\n    };\n  },\n  _calculateSpecialValues: function () {\n    var canvasOptions = this._canvasOptions;\n    var startPoint = canvasOptions.startPoint - canvasOptions.startPadding;\n    var endPoint = canvasOptions.endPoint + canvasOptions.endPadding;\n    var range = this._businessRange;\n    var minVisible = range.minVisible;\n    var maxVisible = range.maxVisible;\n    var canvas_position_center_middle = startPoint + canvasOptions.canvasLength / 2;\n    var canvas_position_default;\n\n    if (minVisible < 0 && maxVisible > 0 && minVisible !== maxVisible) {\n      canvas_position_default = this.translate(0, 1);\n    }\n\n    if (!isDefined(canvas_position_default)) {\n      var invert = range.invert ^ (minVisible < 0 && maxVisible <= 0);\n\n      if (this._options.isHorizontal) {\n        canvas_position_default = invert ? endPoint : startPoint;\n      } else {\n        canvas_position_default = invert ? startPoint : endPoint;\n      }\n    }\n\n    this.sc = {\n      canvas_position_default: canvas_position_default,\n      canvas_position_left: startPoint,\n      canvas_position_top: startPoint,\n      canvas_position_center: canvas_position_center_middle,\n      canvas_position_middle: canvas_position_center_middle,\n      canvas_position_right: endPoint,\n      canvas_position_bottom: endPoint,\n      canvas_position_start: canvasOptions.invert ? endPoint : startPoint,\n      canvas_position_end: canvasOptions.invert ? startPoint : endPoint\n    };\n  },\n\n  translateSpecialCase(value) {\n    return this.sc[value];\n  },\n\n  _calculateProjection: function (distance) {\n    var canvasOptions = this._canvasOptions;\n    return canvasOptions.invert ? canvasOptions.endPoint - distance : canvasOptions.startPoint + distance;\n  },\n  _calculateUnProjection: function (distance) {\n    var canvasOptions = this._canvasOptions;\n    \"datetime\" === this._businessRange.dataType && (distance = Math.round(distance));\n    return canvasOptions.invert ? canvasOptions.rangeMaxVisible.valueOf() - distance : canvasOptions.rangeMinVisible.valueOf() + distance;\n  },\n  getMinBarSize: function (minBarSize) {\n    var visibleArea = this.getCanvasVisibleArea();\n    var minValue = this.from(visibleArea.min + minBarSize);\n    return _abs(this.from(visibleArea.min) - (!isDefined(minValue) ? this.from(visibleArea.max) : minValue));\n  },\n  checkMinBarSize: function (value, minShownValue, stackValue) {\n    return _abs(value) < minShownValue ? value >= 0 ? minShownValue : -minShownValue : value;\n  },\n\n  translate(bp, direction) {\n    var specialValue = this.translateSpecialCase(bp);\n\n    if (isDefined(specialValue)) {\n      return Math.round(specialValue);\n    }\n\n    if (isNaN(bp)) {\n      return null;\n    }\n\n    return this.to(bp, direction);\n  },\n\n  getInterval: function (interval) {\n    var _interval;\n\n    var canvasOptions = this._canvasOptions;\n    interval = null !== (_interval = interval) && void 0 !== _interval ? _interval : this._businessRange.interval;\n\n    if (interval) {\n      return Math.round(canvasOptions.ratioOfCanvasRange * interval);\n    }\n\n    return Math.round(canvasOptions.endPoint - canvasOptions.startPoint);\n  },\n\n  zoom(translate, scale, wholeRange) {\n    var canvasOptions = this._canvasOptions;\n\n    if (canvasOptions.rangeMinVisible.valueOf() === canvasOptions.rangeMaxVisible.valueOf() && 0 !== translate) {\n      return this.zoomZeroLengthRange(translate, scale);\n    }\n\n    var startPoint = canvasOptions.startPoint;\n    var endPoint = canvasOptions.endPoint;\n    var isInverted = this.isInverted();\n    var newStart = (startPoint + translate) / scale;\n    var newEnd = (endPoint + translate) / scale;\n    wholeRange = wholeRange || {};\n    var minPoint = this.to(isInverted ? wholeRange.endValue : wholeRange.startValue);\n    var maxPoint = this.to(isInverted ? wholeRange.startValue : wholeRange.endValue);\n    var min;\n    var max;\n\n    if (minPoint > newStart) {\n      newEnd -= newStart - minPoint;\n      newStart = minPoint;\n      min = isInverted ? wholeRange.endValue : wholeRange.startValue;\n    }\n\n    if (maxPoint < newEnd) {\n      newStart -= newEnd - maxPoint;\n      newEnd = maxPoint;\n      max = isInverted ? wholeRange.startValue : wholeRange.endValue;\n    }\n\n    if (maxPoint - minPoint < newEnd - newStart) {\n      newStart = minPoint;\n      newEnd = maxPoint;\n    }\n\n    translate = (endPoint - startPoint) * newStart / (newEnd - newStart) - startPoint;\n    scale = (startPoint + translate) / newStart || 1;\n    min = isDefined(min) ? min : adjust(this.from(newStart, 1));\n    max = isDefined(max) ? max : adjust(this.from(newEnd, -1));\n\n    if (scale <= 1) {\n      min = this._correctValueAboutBreaks(min, 1 === scale ? translate : -1);\n      max = this._correctValueAboutBreaks(max, 1 === scale ? translate : 1);\n    }\n\n    if (min > max) {\n      min = min > wholeRange.endValue ? wholeRange.endValue : min;\n      max = max < wholeRange.startValue ? wholeRange.startValue : max;\n    } else {\n      min = min < wholeRange.startValue ? wholeRange.startValue : min;\n      max = max > wholeRange.endValue ? wholeRange.endValue : max;\n    }\n\n    return {\n      min: min,\n      max: max,\n      translate: adjust(translate),\n      scale: adjust(scale)\n    };\n  },\n\n  _correctValueAboutBreaks(value, direction) {\n    var br = this._userBreaks.filter(br => value >= br.from && value <= br.to);\n\n    if (br.length) {\n      return direction > 0 ? br[0].to : br[0].from;\n    } else {\n      return value;\n    }\n  },\n\n  zoomZeroLengthRange(translate, scale) {\n    var canvasOptions = this._canvasOptions;\n    var min = canvasOptions.rangeMin;\n    var max = canvasOptions.rangeMax;\n    var correction = (max.valueOf() !== min.valueOf() ? max.valueOf() - min.valueOf() : _abs(canvasOptions.rangeMinVisible.valueOf() - min.valueOf())) / canvasOptions.canvasLength;\n    var isDateTime = isDate(max) || isDate(min);\n    var isLogarithmic = \"logarithmic\" === this._businessRange.axisType;\n    var newMin = canvasOptions.rangeMinVisible.valueOf() - correction;\n    var newMax = canvasOptions.rangeMaxVisible.valueOf() + correction;\n    newMin = isLogarithmic ? adjust(raiseToExt(newMin, canvasOptions.base)) : isDateTime ? new Date(newMin) : newMin;\n    newMax = isLogarithmic ? adjust(raiseToExt(newMax, canvasOptions.base)) : isDateTime ? new Date(newMax) : newMax;\n    return {\n      min: newMin,\n      max: newMax,\n      translate: translate,\n      scale: scale\n    };\n  },\n\n  getMinScale: function (zoom) {\n    var {\n      dataType: dataType,\n      interval: interval\n    } = this._businessRange;\n\n    if (\"datetime\" === dataType && 1 === interval) {\n      return this.getDateTimeMinScale(zoom);\n    }\n\n    return zoom ? 1.1 : .9;\n  },\n\n  getDateTimeMinScale(zoom) {\n    var canvasOptions = this._canvasOptions;\n    var length = canvasOptions.canvasLength / canvasOptions.ratioOfCanvasRange;\n    length += (parseInt(.1 * length) || 1) * (zoom ? -2 : 2);\n    return canvasOptions.canvasLength / (Math.max(length, 1) * canvasOptions.ratioOfCanvasRange);\n  },\n\n  getScale: function (val1, val2) {\n    var canvasOptions = this._canvasOptions;\n\n    if (canvasOptions.rangeMax === canvasOptions.rangeMin) {\n      return 1;\n    }\n\n    val1 = isDefined(val1) ? this.fromValue(val1) : canvasOptions.rangeMin;\n    val2 = isDefined(val2) ? this.fromValue(val2) : canvasOptions.rangeMax;\n    return (canvasOptions.rangeMax - canvasOptions.rangeMin) / Math.abs(val1 - val2);\n  },\n  isValid: function (value) {\n    var co = this._canvasOptions;\n    value = this.fromValue(value);\n    return null !== value && !isNaN(value) && value.valueOf() + co.rangeDoubleError >= co.rangeMin && value.valueOf() - co.rangeDoubleError <= co.rangeMax;\n  },\n  getCorrectValue: function (value, direction) {\n    var breaks = this._breaks;\n    var prop;\n    value = this.fromValue(value);\n\n    if (this._breaks) {\n      prop = this._checkValueAboutBreaks(breaks, value, \"trFrom\", \"trTo\", this._checkingMethodsAboutBreaks[0]);\n\n      if (true === prop.inBreak) {\n        return this.toValue(direction > 0 ? prop.break.trTo : prop.break.trFrom);\n      }\n    }\n\n    return this.toValue(value);\n  },\n  to: function (bp, direction) {\n    var range = this.getBusinessRange();\n\n    if (isDefined(range.maxVisible) && isDefined(range.minVisible) && range.maxVisible.valueOf() === range.minVisible.valueOf()) {\n      if (!isDefined(bp) || range.maxVisible.valueOf() !== bp.valueOf()) {\n        return null;\n      }\n\n      return this.translateSpecialCase(0 === bp && this._options.shiftZeroValue ? \"canvas_position_default\" : \"canvas_position_middle\");\n    }\n\n    bp = this.fromValue(bp);\n    var canvasOptions = this._canvasOptions;\n    var breaks = this._breaks;\n    var prop = {\n      length: 0\n    };\n    var commonBreakSize = 0;\n\n    if (void 0 !== breaks) {\n      prop = this._checkValueAboutBreaks(breaks, bp, \"trFrom\", \"trTo\", this._checkingMethodsAboutBreaks[0]);\n      commonBreakSize = isDefined(prop.breaksSize) ? prop.breaksSize : 0;\n    }\n\n    if (true === prop.inBreak) {\n      if (direction > 0) {\n        return prop.break.start;\n      } else if (direction < 0) {\n        return prop.break.end;\n      } else {\n        return null;\n      }\n    }\n\n    return this._conversionValue(this._calculateProjection((bp - canvasOptions.rangeMinVisible - prop.length) * canvasOptions.ratioOfCanvasRange + commonBreakSize));\n  },\n  from: function (pos, direction) {\n    var breaks = this._breaks;\n    var prop = {\n      length: 0\n    };\n    var canvasOptions = this._canvasOptions;\n    var startPoint = canvasOptions.startPoint;\n    var commonBreakSize = 0;\n\n    if (void 0 !== breaks) {\n      prop = this._checkValueAboutBreaks(breaks, pos, \"start\", \"end\", this._checkingMethodsAboutBreaks[1]);\n      commonBreakSize = isDefined(prop.breaksSize) ? prop.breaksSize : 0;\n    }\n\n    if (true === prop.inBreak) {\n      if (direction > 0) {\n        return this.toValue(prop.break.trTo);\n      } else if (direction < 0) {\n        return this.toValue(prop.break.trFrom);\n      } else {\n        return null;\n      }\n    }\n\n    return this.toValue(this._calculateUnProjection((pos - startPoint - commonBreakSize) / canvasOptions.ratioOfCanvasRange + prop.length));\n  },\n  isValueProlonged: false,\n  getRange: function () {\n    return [this.toValue(this._canvasOptions.rangeMin), this.toValue(this._canvasOptions.rangeMax)];\n  },\n  getScreenRange: function () {\n    return [this._canvasOptions.startPoint, this._canvasOptions.endPoint];\n  },\n  add: function (value, diff, dir) {\n    return this._add(value, diff, (this._businessRange.invert ? -1 : 1) * dir);\n  },\n  _add: function (value, diff, coeff) {\n    return this.toValue(this.fromValue(value) + diff * coeff);\n  },\n  fromValue: function (value) {\n    return null !== value ? Number(value) : null;\n  },\n  toValue: function (value) {\n    return null !== value ? Number(value) : null;\n  },\n\n  ratioOfCanvasRange() {\n    return this._canvasOptions.ratioOfCanvasRange;\n  },\n\n  convert: value => value,\n\n  getRangeByMinZoomValue(minZoom, visualRange) {\n    if (visualRange.minVisible + minZoom <= this._businessRange.max) {\n      return [visualRange.minVisible, visualRange.minVisible + minZoom];\n    } else {\n      return [visualRange.maxVisible - minZoom, visualRange.maxVisible];\n    }\n  }\n\n};\nexport { _Translator2d as Translator2D };","map":{"version":3,"names":["extend","each","Range","categoryTranslator","intervalTranslator","datetimeTranslator","logarithmicTranslator","getLogExt","getLog","getPower","raiseToExt","getCategoriesInfo","isDefined","isDate","adjust","dateUtils","_abs","Math","abs","CANVAS_PROP","dummyTranslator","to","value","coord","_canvasOptions","startPoint","_options","conversionValue","round","endPoint","from","validateCanvas","canvas","_","prop","parseInt","makeCategoriesToPoints","categories","categoriesToPoints","forEach","item","i","valueOf","validateBusinessRange","businessRange","validate","valueSelector","baseValueSelector","prepareBreaks","breaks","range","transform","axisType","base","array","br","transformFrom","transformTo","length","sum","push","trFrom","trTo","cumulativeWidth","getCanvasBounds","min","max","minVisible","maxVisible","isLogarithmic","allowNegatives","linearThreshold","rangeMin","rangeMax","rangeMinVisible","rangeMaxVisible","getCheckingMethodsAboutBreaks","inverted","isStartSide","pos","start","end","isEndSide","isInBreak","isBetweenBreaks","prevBreak","getLength","lastBreak","getBreaksSize","_Translator2d","options","update","prototype","constructor","reinit","that","_businessRange","script","canvasOptions","_prepareCanvasOptions","visibleCategories","categoriesLength","isEmpty","ratioOfCanvasRange","canvasLength","addInterval","interval","_categories","_getDiscreteInterval","addSpiderCategory","_categoriesToPoints","startPointIndex","dataType","_oldMethods","methodName","Object","keys","_conversionValue","sc","_checkingMethodsAboutBreaks","isInverted","_translateBreaks","_calculateSpecialValues","_breaks","size","breaksSize","b","translate","gapSize","_checkValueAboutBreaks","methods","inBreak","break","isHorizontal","invert","correctedCategoriesCount","stick","_canvas","startPadding","endPadding","left","width","right","top","height","bottom","rangeDoubleError","pow","updateCanvas","updateBusinessRange","_userBreaks","userBreaks","getBusinessRange","getEventScale","zoomEvent","deltaScale","getCanvasVisibleArea","canvas_position_center_middle","canvas_position_default","canvas_position_left","canvas_position_top","canvas_position_center","canvas_position_middle","canvas_position_right","canvas_position_bottom","canvas_position_start","canvas_position_end","translateSpecialCase","_calculateProjection","distance","_calculateUnProjection","getMinBarSize","minBarSize","visibleArea","minValue","checkMinBarSize","minShownValue","stackValue","bp","direction","specialValue","isNaN","getInterval","_interval","zoom","scale","wholeRange","zoomZeroLengthRange","newStart","newEnd","minPoint","endValue","startValue","maxPoint","_correctValueAboutBreaks","filter","correction","isDateTime","newMin","newMax","Date","getMinScale","getDateTimeMinScale","getScale","val1","val2","fromValue","isValid","co","getCorrectValue","toValue","shiftZeroValue","commonBreakSize","isValueProlonged","getRange","getScreenRange","add","diff","dir","_add","coeff","Number","convert","getRangeByMinZoomValue","minZoom","visualRange","Translator2D"],"sources":["E:/MisaProject/W2022_06/misa_emis/node_modules/devextreme/esm/viz/translators/translator2d.js"],"sourcesContent":["/**\r\n * DevExtreme (esm/viz/translators/translator2d.js)\r\n * Version: 22.1.4\r\n * Build date: Fri Jul 22 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport {\r\n    extend\r\n} from \"../../core/utils/extend\";\r\nimport {\r\n    each\r\n} from \"../../core/utils/iterator\";\r\nimport {\r\n    Range\r\n} from \"./range\";\r\nimport categoryTranslator from \"./category_translator\";\r\nimport intervalTranslator from \"./interval_translator\";\r\nimport datetimeTranslator from \"./datetime_translator\";\r\nimport logarithmicTranslator from \"./logarithmic_translator\";\r\nimport {\r\n    getLogExt as getLog,\r\n    getPower,\r\n    raiseToExt,\r\n    getCategoriesInfo\r\n} from \"../core/utils\";\r\nimport {\r\n    isDefined,\r\n    isDate\r\n} from \"../../core/utils/type\";\r\nimport {\r\n    adjust\r\n} from \"../../core/utils/math\";\r\nimport dateUtils from \"../../core/utils/date\";\r\nvar _abs = Math.abs;\r\nvar CANVAS_PROP = [\"width\", \"height\", \"left\", \"top\", \"bottom\", \"right\"];\r\nvar dummyTranslator = {\r\n    to(value) {\r\n        var coord = this._canvasOptions.startPoint + (this._options.conversionValue ? value : Math.round(value));\r\n        return coord > this._canvasOptions.endPoint ? this._canvasOptions.endPoint : coord\r\n    },\r\n    from(value) {\r\n        return value - this._canvasOptions.startPoint\r\n    }\r\n};\r\nvar validateCanvas = function(canvas) {\r\n    each(CANVAS_PROP, (function(_, prop) {\r\n        canvas[prop] = parseInt(canvas[prop]) || 0\r\n    }));\r\n    return canvas\r\n};\r\nvar makeCategoriesToPoints = function(categories) {\r\n    var categoriesToPoints = {};\r\n    categories.forEach((function(item, i) {\r\n        categoriesToPoints[item.valueOf()] = i\r\n    }));\r\n    return categoriesToPoints\r\n};\r\nvar validateBusinessRange = function(businessRange) {\r\n    if (!(businessRange instanceof Range)) {\r\n        businessRange = new Range(businessRange)\r\n    }\r\n\r\n    function validate(valueSelector, baseValueSelector) {\r\n        if (!isDefined(businessRange[valueSelector]) && isDefined(businessRange[baseValueSelector])) {\r\n            businessRange[valueSelector] = businessRange[baseValueSelector]\r\n        }\r\n    }\r\n    validate(\"minVisible\", \"min\");\r\n    validate(\"maxVisible\", \"max\");\r\n    return businessRange\r\n};\r\n\r\nfunction prepareBreaks(breaks, range) {\r\n    var transform = \"logarithmic\" === range.axisType ? function(value) {\r\n        return getLog(value, range.base)\r\n    } : function(value) {\r\n        return value\r\n    };\r\n    var array = [];\r\n    var br;\r\n    var transformFrom;\r\n    var transformTo;\r\n    var i;\r\n    var length = breaks.length;\r\n    var sum = 0;\r\n    for (i = 0; i < length; i++) {\r\n        br = breaks[i];\r\n        transformFrom = transform(br.from);\r\n        transformTo = transform(br.to);\r\n        sum += transformTo - transformFrom;\r\n        array.push({\r\n            trFrom: transformFrom,\r\n            trTo: transformTo,\r\n            from: br.from,\r\n            to: br.to,\r\n            length: sum,\r\n            cumulativeWidth: br.cumulativeWidth\r\n        })\r\n    }\r\n    return array\r\n}\r\n\r\nfunction getCanvasBounds(range) {\r\n    var min = range.min;\r\n    var max = range.max;\r\n    var minVisible = range.minVisible;\r\n    var maxVisible = range.maxVisible;\r\n    var isLogarithmic = \"logarithmic\" === range.axisType;\r\n    if (isLogarithmic) {\r\n        maxVisible = getLog(maxVisible, range.base, range.allowNegatives, range.linearThreshold);\r\n        minVisible = getLog(minVisible, range.base, range.allowNegatives, range.linearThreshold);\r\n        min = getLog(min, range.base, range.allowNegatives, range.linearThreshold);\r\n        max = getLog(max, range.base, range.allowNegatives, range.linearThreshold)\r\n    }\r\n    return {\r\n        base: range.base,\r\n        rangeMin: min,\r\n        rangeMax: max,\r\n        rangeMinVisible: minVisible,\r\n        rangeMaxVisible: maxVisible\r\n    }\r\n}\r\n\r\nfunction getCheckingMethodsAboutBreaks(inverted) {\r\n    return {\r\n        isStartSide: !inverted ? function(pos, breaks, start, end) {\r\n            return pos < breaks[0][start]\r\n        } : function(pos, breaks, start, end) {\r\n            return pos <= breaks[breaks.length - 1][end]\r\n        },\r\n        isEndSide: !inverted ? function(pos, breaks, start, end) {\r\n            return pos >= breaks[breaks.length - 1][end]\r\n        } : function(pos, breaks, start, end) {\r\n            return pos > breaks[0][start]\r\n        },\r\n        isInBreak: !inverted ? function(pos, br, start, end) {\r\n            return pos >= br[start] && pos < br[end]\r\n        } : function(pos, br, start, end) {\r\n            return pos > br[end] && pos <= br[start]\r\n        },\r\n        isBetweenBreaks: !inverted ? function(pos, br, prevBreak, start, end) {\r\n            return pos < br[start] && pos >= prevBreak[end]\r\n        } : function(pos, br, prevBreak, start, end) {\r\n            return pos >= br[end] && pos < prevBreak[start]\r\n        },\r\n        getLength: !inverted ? function(br) {\r\n            return br.length\r\n        } : function(br, lastBreak) {\r\n            return lastBreak.length - br.length\r\n        },\r\n        getBreaksSize: !inverted ? function(br) {\r\n            return br.cumulativeWidth\r\n        } : function(br, lastBreak) {\r\n            return lastBreak.cumulativeWidth - br.cumulativeWidth\r\n        }\r\n    }\r\n}\r\nvar _Translator2d = function(businessRange, canvas, options) {\r\n    this.update(businessRange, canvas, options)\r\n};\r\n_Translator2d.prototype = {\r\n    constructor: _Translator2d,\r\n    reinit: function() {\r\n        var that = this;\r\n        var options = that._options;\r\n        var range = that._businessRange;\r\n        var categories = range.categories || [];\r\n        var script = {};\r\n        var canvasOptions = that._prepareCanvasOptions();\r\n        var visibleCategories = getCategoriesInfo(categories, range.minVisible, range.maxVisible).categories;\r\n        var categoriesLength = visibleCategories.length;\r\n        if (range.isEmpty()) {\r\n            script = dummyTranslator\r\n        } else {\r\n            switch (range.axisType) {\r\n                case \"logarithmic\":\r\n                    script = logarithmicTranslator;\r\n                    break;\r\n                case \"semidiscrete\":\r\n                    script = intervalTranslator;\r\n                    canvasOptions.ratioOfCanvasRange = canvasOptions.canvasLength / (dateUtils.addInterval(canvasOptions.rangeMaxVisible, options.interval) - canvasOptions.rangeMinVisible);\r\n                    break;\r\n                case \"discrete\":\r\n                    script = categoryTranslator;\r\n                    that._categories = categories;\r\n                    canvasOptions.interval = that._getDiscreteInterval(options.addSpiderCategory ? categoriesLength + 1 : categoriesLength, canvasOptions);\r\n                    that._categoriesToPoints = makeCategoriesToPoints(categories);\r\n                    if (categoriesLength) {\r\n                        canvasOptions.startPointIndex = that._categoriesToPoints[visibleCategories[0].valueOf()];\r\n                        that.visibleCategories = visibleCategories\r\n                    }\r\n                    break;\r\n                default:\r\n                    if (\"datetime\" === range.dataType) {\r\n                        script = datetimeTranslator\r\n                    }\r\n            }\r\n        }(that._oldMethods || []).forEach((function(methodName) {\r\n            delete that[methodName]\r\n        }));\r\n        that._oldMethods = Object.keys(script);\r\n        extend(that, script);\r\n        that._conversionValue = options.conversionValue ? function(value) {\r\n            return value\r\n        } : function(value) {\r\n            return Math.round(value)\r\n        };\r\n        that.sc = {};\r\n        that._checkingMethodsAboutBreaks = [getCheckingMethodsAboutBreaks(false), getCheckingMethodsAboutBreaks(that.isInverted())];\r\n        that._translateBreaks();\r\n        that._calculateSpecialValues()\r\n    },\r\n    _translateBreaks: function() {\r\n        var breaks = this._breaks;\r\n        var size = this._options.breaksSize;\r\n        var i;\r\n        var b;\r\n        var end;\r\n        var length;\r\n        if (void 0 === breaks) {\r\n            return\r\n        }\r\n        for (i = 0, length = breaks.length; i < length; i++) {\r\n            b = breaks[i];\r\n            end = this.translate(b.to);\r\n            b.end = end;\r\n            b.start = !b.gapSize ? !this.isInverted() ? end - size : end + size : end\r\n        }\r\n    },\r\n    _checkValueAboutBreaks: function(breaks, pos, start, end, methods) {\r\n        var i;\r\n        var length;\r\n        var prop = {\r\n            length: 0,\r\n            breaksSize: void 0,\r\n            inBreak: false\r\n        };\r\n        var br;\r\n        var prevBreak;\r\n        var lastBreak = breaks[breaks.length - 1];\r\n        if (methods.isStartSide(pos, breaks, start, end)) {\r\n            return prop\r\n        } else if (methods.isEndSide(pos, breaks, start, end)) {\r\n            return {\r\n                length: lastBreak.length,\r\n                breaksSize: lastBreak.cumulativeWidth,\r\n                inBreak: false\r\n            }\r\n        }\r\n        for (i = 0, length = breaks.length; i < length; i++) {\r\n            br = breaks[i];\r\n            prevBreak = breaks[i - 1];\r\n            if (methods.isInBreak(pos, br, start, end)) {\r\n                prop.inBreak = true;\r\n                prop.break = br;\r\n                break\r\n            }\r\n            if (prevBreak && methods.isBetweenBreaks(pos, br, prevBreak, start, end)) {\r\n                prop = {\r\n                    length: methods.getLength(prevBreak, lastBreak),\r\n                    breaksSize: methods.getBreaksSize(prevBreak, lastBreak),\r\n                    inBreak: false\r\n                };\r\n                break\r\n            }\r\n        }\r\n        return prop\r\n    },\r\n    isInverted: function() {\r\n        return !(this._options.isHorizontal ^ this._businessRange.invert)\r\n    },\r\n    _getDiscreteInterval: function(categoriesLength, canvasOptions) {\r\n        var correctedCategoriesCount = categoriesLength - (this._options.stick ? 1 : 0);\r\n        return correctedCategoriesCount > 0 ? canvasOptions.canvasLength / correctedCategoriesCount : canvasOptions.canvasLength\r\n    },\r\n    _prepareCanvasOptions() {\r\n        var businessRange = this._businessRange;\r\n        var canvasOptions = this._canvasOptions = getCanvasBounds(businessRange);\r\n        var canvas = this._canvas;\r\n        var breaks = this._breaks;\r\n        var length;\r\n        canvasOptions.startPadding = canvas.startPadding || 0;\r\n        canvasOptions.endPadding = canvas.endPadding || 0;\r\n        if (this._options.isHorizontal) {\r\n            canvasOptions.startPoint = canvas.left + canvasOptions.startPadding;\r\n            length = canvas.width;\r\n            canvasOptions.endPoint = canvas.width - canvas.right - canvasOptions.endPadding;\r\n            canvasOptions.invert = businessRange.invert\r\n        } else {\r\n            canvasOptions.startPoint = canvas.top + canvasOptions.startPadding;\r\n            length = canvas.height;\r\n            canvasOptions.endPoint = canvas.height - canvas.bottom - canvasOptions.endPadding;\r\n            canvasOptions.invert = !businessRange.invert\r\n        }\r\n        this.canvasLength = canvasOptions.canvasLength = canvasOptions.endPoint - canvasOptions.startPoint;\r\n        canvasOptions.rangeDoubleError = Math.pow(10, getPower(canvasOptions.rangeMax - canvasOptions.rangeMin) - getPower(length) - 2);\r\n        canvasOptions.ratioOfCanvasRange = canvasOptions.canvasLength / (canvasOptions.rangeMaxVisible - canvasOptions.rangeMinVisible);\r\n        if (void 0 !== breaks) {\r\n            canvasOptions.ratioOfCanvasRange = (canvasOptions.canvasLength - breaks[breaks.length - 1].cumulativeWidth) / (canvasOptions.rangeMaxVisible - canvasOptions.rangeMinVisible - breaks[breaks.length - 1].length)\r\n        }\r\n        return canvasOptions\r\n    },\r\n    updateCanvas: function(canvas) {\r\n        this._canvas = validateCanvas(canvas);\r\n        this.reinit()\r\n    },\r\n    updateBusinessRange: function(businessRange) {\r\n        var breaks = businessRange.breaks || [];\r\n        this._userBreaks = businessRange.userBreaks || [];\r\n        this._businessRange = validateBusinessRange(businessRange);\r\n        this._breaks = breaks.length ? prepareBreaks(breaks, this._businessRange) : void 0;\r\n        this.reinit()\r\n    },\r\n    update: function(businessRange, canvas, options) {\r\n        this._options = extend(this._options || {}, options);\r\n        this._canvas = validateCanvas(canvas);\r\n        this.updateBusinessRange(businessRange)\r\n    },\r\n    getBusinessRange: function() {\r\n        return this._businessRange\r\n    },\r\n    getEventScale: function(zoomEvent) {\r\n        return zoomEvent.deltaScale || 1\r\n    },\r\n    getCanvasVisibleArea: function() {\r\n        return {\r\n            min: this._canvasOptions.startPoint,\r\n            max: this._canvasOptions.endPoint\r\n        }\r\n    },\r\n    _calculateSpecialValues: function() {\r\n        var canvasOptions = this._canvasOptions;\r\n        var startPoint = canvasOptions.startPoint - canvasOptions.startPadding;\r\n        var endPoint = canvasOptions.endPoint + canvasOptions.endPadding;\r\n        var range = this._businessRange;\r\n        var minVisible = range.minVisible;\r\n        var maxVisible = range.maxVisible;\r\n        var canvas_position_center_middle = startPoint + canvasOptions.canvasLength / 2;\r\n        var canvas_position_default;\r\n        if (minVisible < 0 && maxVisible > 0 && minVisible !== maxVisible) {\r\n            canvas_position_default = this.translate(0, 1)\r\n        }\r\n        if (!isDefined(canvas_position_default)) {\r\n            var invert = range.invert ^ (minVisible < 0 && maxVisible <= 0);\r\n            if (this._options.isHorizontal) {\r\n                canvas_position_default = invert ? endPoint : startPoint\r\n            } else {\r\n                canvas_position_default = invert ? startPoint : endPoint\r\n            }\r\n        }\r\n        this.sc = {\r\n            canvas_position_default: canvas_position_default,\r\n            canvas_position_left: startPoint,\r\n            canvas_position_top: startPoint,\r\n            canvas_position_center: canvas_position_center_middle,\r\n            canvas_position_middle: canvas_position_center_middle,\r\n            canvas_position_right: endPoint,\r\n            canvas_position_bottom: endPoint,\r\n            canvas_position_start: canvasOptions.invert ? endPoint : startPoint,\r\n            canvas_position_end: canvasOptions.invert ? startPoint : endPoint\r\n        }\r\n    },\r\n    translateSpecialCase(value) {\r\n        return this.sc[value]\r\n    },\r\n    _calculateProjection: function(distance) {\r\n        var canvasOptions = this._canvasOptions;\r\n        return canvasOptions.invert ? canvasOptions.endPoint - distance : canvasOptions.startPoint + distance\r\n    },\r\n    _calculateUnProjection: function(distance) {\r\n        var canvasOptions = this._canvasOptions;\r\n        \"datetime\" === this._businessRange.dataType && (distance = Math.round(distance));\r\n        return canvasOptions.invert ? canvasOptions.rangeMaxVisible.valueOf() - distance : canvasOptions.rangeMinVisible.valueOf() + distance\r\n    },\r\n    getMinBarSize: function(minBarSize) {\r\n        var visibleArea = this.getCanvasVisibleArea();\r\n        var minValue = this.from(visibleArea.min + minBarSize);\r\n        return _abs(this.from(visibleArea.min) - (!isDefined(minValue) ? this.from(visibleArea.max) : minValue))\r\n    },\r\n    checkMinBarSize: function(value, minShownValue, stackValue) {\r\n        return _abs(value) < minShownValue ? value >= 0 ? minShownValue : -minShownValue : value\r\n    },\r\n    translate(bp, direction) {\r\n        var specialValue = this.translateSpecialCase(bp);\r\n        if (isDefined(specialValue)) {\r\n            return Math.round(specialValue)\r\n        }\r\n        if (isNaN(bp)) {\r\n            return null\r\n        }\r\n        return this.to(bp, direction)\r\n    },\r\n    getInterval: function(interval) {\r\n        var _interval;\r\n        var canvasOptions = this._canvasOptions;\r\n        interval = null !== (_interval = interval) && void 0 !== _interval ? _interval : this._businessRange.interval;\r\n        if (interval) {\r\n            return Math.round(canvasOptions.ratioOfCanvasRange * interval)\r\n        }\r\n        return Math.round(canvasOptions.endPoint - canvasOptions.startPoint)\r\n    },\r\n    zoom(translate, scale, wholeRange) {\r\n        var canvasOptions = this._canvasOptions;\r\n        if (canvasOptions.rangeMinVisible.valueOf() === canvasOptions.rangeMaxVisible.valueOf() && 0 !== translate) {\r\n            return this.zoomZeroLengthRange(translate, scale)\r\n        }\r\n        var startPoint = canvasOptions.startPoint;\r\n        var endPoint = canvasOptions.endPoint;\r\n        var isInverted = this.isInverted();\r\n        var newStart = (startPoint + translate) / scale;\r\n        var newEnd = (endPoint + translate) / scale;\r\n        wholeRange = wholeRange || {};\r\n        var minPoint = this.to(isInverted ? wholeRange.endValue : wholeRange.startValue);\r\n        var maxPoint = this.to(isInverted ? wholeRange.startValue : wholeRange.endValue);\r\n        var min;\r\n        var max;\r\n        if (minPoint > newStart) {\r\n            newEnd -= newStart - minPoint;\r\n            newStart = minPoint;\r\n            min = isInverted ? wholeRange.endValue : wholeRange.startValue\r\n        }\r\n        if (maxPoint < newEnd) {\r\n            newStart -= newEnd - maxPoint;\r\n            newEnd = maxPoint;\r\n            max = isInverted ? wholeRange.startValue : wholeRange.endValue\r\n        }\r\n        if (maxPoint - minPoint < newEnd - newStart) {\r\n            newStart = minPoint;\r\n            newEnd = maxPoint\r\n        }\r\n        translate = (endPoint - startPoint) * newStart / (newEnd - newStart) - startPoint;\r\n        scale = (startPoint + translate) / newStart || 1;\r\n        min = isDefined(min) ? min : adjust(this.from(newStart, 1));\r\n        max = isDefined(max) ? max : adjust(this.from(newEnd, -1));\r\n        if (scale <= 1) {\r\n            min = this._correctValueAboutBreaks(min, 1 === scale ? translate : -1);\r\n            max = this._correctValueAboutBreaks(max, 1 === scale ? translate : 1)\r\n        }\r\n        if (min > max) {\r\n            min = min > wholeRange.endValue ? wholeRange.endValue : min;\r\n            max = max < wholeRange.startValue ? wholeRange.startValue : max\r\n        } else {\r\n            min = min < wholeRange.startValue ? wholeRange.startValue : min;\r\n            max = max > wholeRange.endValue ? wholeRange.endValue : max\r\n        }\r\n        return {\r\n            min: min,\r\n            max: max,\r\n            translate: adjust(translate),\r\n            scale: adjust(scale)\r\n        }\r\n    },\r\n    _correctValueAboutBreaks(value, direction) {\r\n        var br = this._userBreaks.filter(br => value >= br.from && value <= br.to);\r\n        if (br.length) {\r\n            return direction > 0 ? br[0].to : br[0].from\r\n        } else {\r\n            return value\r\n        }\r\n    },\r\n    zoomZeroLengthRange(translate, scale) {\r\n        var canvasOptions = this._canvasOptions;\r\n        var min = canvasOptions.rangeMin;\r\n        var max = canvasOptions.rangeMax;\r\n        var correction = (max.valueOf() !== min.valueOf() ? max.valueOf() - min.valueOf() : _abs(canvasOptions.rangeMinVisible.valueOf() - min.valueOf())) / canvasOptions.canvasLength;\r\n        var isDateTime = isDate(max) || isDate(min);\r\n        var isLogarithmic = \"logarithmic\" === this._businessRange.axisType;\r\n        var newMin = canvasOptions.rangeMinVisible.valueOf() - correction;\r\n        var newMax = canvasOptions.rangeMaxVisible.valueOf() + correction;\r\n        newMin = isLogarithmic ? adjust(raiseToExt(newMin, canvasOptions.base)) : isDateTime ? new Date(newMin) : newMin;\r\n        newMax = isLogarithmic ? adjust(raiseToExt(newMax, canvasOptions.base)) : isDateTime ? new Date(newMax) : newMax;\r\n        return {\r\n            min: newMin,\r\n            max: newMax,\r\n            translate: translate,\r\n            scale: scale\r\n        }\r\n    },\r\n    getMinScale: function(zoom) {\r\n        var {\r\n            dataType: dataType,\r\n            interval: interval\r\n        } = this._businessRange;\r\n        if (\"datetime\" === dataType && 1 === interval) {\r\n            return this.getDateTimeMinScale(zoom)\r\n        }\r\n        return zoom ? 1.1 : .9\r\n    },\r\n    getDateTimeMinScale(zoom) {\r\n        var canvasOptions = this._canvasOptions;\r\n        var length = canvasOptions.canvasLength / canvasOptions.ratioOfCanvasRange;\r\n        length += (parseInt(.1 * length) || 1) * (zoom ? -2 : 2);\r\n        return canvasOptions.canvasLength / (Math.max(length, 1) * canvasOptions.ratioOfCanvasRange)\r\n    },\r\n    getScale: function(val1, val2) {\r\n        var canvasOptions = this._canvasOptions;\r\n        if (canvasOptions.rangeMax === canvasOptions.rangeMin) {\r\n            return 1\r\n        }\r\n        val1 = isDefined(val1) ? this.fromValue(val1) : canvasOptions.rangeMin;\r\n        val2 = isDefined(val2) ? this.fromValue(val2) : canvasOptions.rangeMax;\r\n        return (canvasOptions.rangeMax - canvasOptions.rangeMin) / Math.abs(val1 - val2)\r\n    },\r\n    isValid: function(value) {\r\n        var co = this._canvasOptions;\r\n        value = this.fromValue(value);\r\n        return null !== value && !isNaN(value) && value.valueOf() + co.rangeDoubleError >= co.rangeMin && value.valueOf() - co.rangeDoubleError <= co.rangeMax\r\n    },\r\n    getCorrectValue: function(value, direction) {\r\n        var breaks = this._breaks;\r\n        var prop;\r\n        value = this.fromValue(value);\r\n        if (this._breaks) {\r\n            prop = this._checkValueAboutBreaks(breaks, value, \"trFrom\", \"trTo\", this._checkingMethodsAboutBreaks[0]);\r\n            if (true === prop.inBreak) {\r\n                return this.toValue(direction > 0 ? prop.break.trTo : prop.break.trFrom)\r\n            }\r\n        }\r\n        return this.toValue(value)\r\n    },\r\n    to: function(bp, direction) {\r\n        var range = this.getBusinessRange();\r\n        if (isDefined(range.maxVisible) && isDefined(range.minVisible) && range.maxVisible.valueOf() === range.minVisible.valueOf()) {\r\n            if (!isDefined(bp) || range.maxVisible.valueOf() !== bp.valueOf()) {\r\n                return null\r\n            }\r\n            return this.translateSpecialCase(0 === bp && this._options.shiftZeroValue ? \"canvas_position_default\" : \"canvas_position_middle\")\r\n        }\r\n        bp = this.fromValue(bp);\r\n        var canvasOptions = this._canvasOptions;\r\n        var breaks = this._breaks;\r\n        var prop = {\r\n            length: 0\r\n        };\r\n        var commonBreakSize = 0;\r\n        if (void 0 !== breaks) {\r\n            prop = this._checkValueAboutBreaks(breaks, bp, \"trFrom\", \"trTo\", this._checkingMethodsAboutBreaks[0]);\r\n            commonBreakSize = isDefined(prop.breaksSize) ? prop.breaksSize : 0\r\n        }\r\n        if (true === prop.inBreak) {\r\n            if (direction > 0) {\r\n                return prop.break.start\r\n            } else if (direction < 0) {\r\n                return prop.break.end\r\n            } else {\r\n                return null\r\n            }\r\n        }\r\n        return this._conversionValue(this._calculateProjection((bp - canvasOptions.rangeMinVisible - prop.length) * canvasOptions.ratioOfCanvasRange + commonBreakSize))\r\n    },\r\n    from: function(pos, direction) {\r\n        var breaks = this._breaks;\r\n        var prop = {\r\n            length: 0\r\n        };\r\n        var canvasOptions = this._canvasOptions;\r\n        var startPoint = canvasOptions.startPoint;\r\n        var commonBreakSize = 0;\r\n        if (void 0 !== breaks) {\r\n            prop = this._checkValueAboutBreaks(breaks, pos, \"start\", \"end\", this._checkingMethodsAboutBreaks[1]);\r\n            commonBreakSize = isDefined(prop.breaksSize) ? prop.breaksSize : 0\r\n        }\r\n        if (true === prop.inBreak) {\r\n            if (direction > 0) {\r\n                return this.toValue(prop.break.trTo)\r\n            } else if (direction < 0) {\r\n                return this.toValue(prop.break.trFrom)\r\n            } else {\r\n                return null\r\n            }\r\n        }\r\n        return this.toValue(this._calculateUnProjection((pos - startPoint - commonBreakSize) / canvasOptions.ratioOfCanvasRange + prop.length))\r\n    },\r\n    isValueProlonged: false,\r\n    getRange: function() {\r\n        return [this.toValue(this._canvasOptions.rangeMin), this.toValue(this._canvasOptions.rangeMax)]\r\n    },\r\n    getScreenRange: function() {\r\n        return [this._canvasOptions.startPoint, this._canvasOptions.endPoint]\r\n    },\r\n    add: function(value, diff, dir) {\r\n        return this._add(value, diff, (this._businessRange.invert ? -1 : 1) * dir)\r\n    },\r\n    _add: function(value, diff, coeff) {\r\n        return this.toValue(this.fromValue(value) + diff * coeff)\r\n    },\r\n    fromValue: function(value) {\r\n        return null !== value ? Number(value) : null\r\n    },\r\n    toValue: function(value) {\r\n        return null !== value ? Number(value) : null\r\n    },\r\n    ratioOfCanvasRange() {\r\n        return this._canvasOptions.ratioOfCanvasRange\r\n    },\r\n    convert: value => value,\r\n    getRangeByMinZoomValue(minZoom, visualRange) {\r\n        if (visualRange.minVisible + minZoom <= this._businessRange.max) {\r\n            return [visualRange.minVisible, visualRange.minVisible + minZoom]\r\n        } else {\r\n            return [visualRange.maxVisible - minZoom, visualRange.maxVisible]\r\n        }\r\n    }\r\n};\r\nexport {\r\n    _Translator2d as Translator2D\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}