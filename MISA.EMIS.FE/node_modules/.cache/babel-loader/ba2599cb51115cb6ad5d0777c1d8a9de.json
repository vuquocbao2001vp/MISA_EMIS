{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/collection/ui.collection_widget.live_update.js)\r\n * Version: 22.1.4\r\n * Build date: Fri Jul 22 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport $ from \"../../core/renderer\";\nimport CollectionWidget from \"./ui.collection_widget.edit\";\nimport { extend } from \"../../core/utils/extend\";\nimport { each } from \"../../core/utils/iterator\";\nimport { update, insert, indexByKey } from \"../../data/array_utils\";\nimport { keysEqual } from \"../../data/utils\";\nimport { when } from \"../../core/utils/deferred\";\nimport { findChanges } from \"../../core/utils/array_compare\";\nimport domAdapter from \"../../core/dom_adapter\";\nimport { noop } from \"../../core/utils/common\";\nvar PRIVATE_KEY_FIELD = \"__dx_key__\";\nexport default CollectionWidget.inherit({\n  _getDefaultOptions: function () {\n    return extend(this.callBase(), {\n      repaintChangesOnly: false\n    });\n  },\n  ctor: function () {\n    this.callBase.apply(this, arguments);\n    this._customizeStoreLoadOptions = e => {\n      var dataSource = this._dataSource;\n\n      if (dataSource && !dataSource.isLoaded()) {\n        this._correctionIndex = 0;\n      }\n\n      if (this._correctionIndex && e.storeLoadOptions) {\n        e.storeLoadOptions.skip += this._correctionIndex;\n      }\n    }, this._dataSource && this._dataSource.on(\"customizeStoreLoadOptions\", this._customizeStoreLoadOptions);\n  },\n  reload: function () {\n    this._correctionIndex = 0;\n  },\n  _init: function () {\n    this.callBase();\n\n    this._refreshItemsCache();\n\n    this._correctionIndex = 0;\n  },\n  _findItemElementByKey: function (key) {\n    var result = $();\n    var keyExpr = this.key();\n    this.itemElements().each((_, item) => {\n      var $item = $(item);\n\n      var itemData = this._getItemData($item);\n\n      if (keyExpr ? keysEqual(keyExpr, this.keyOf(itemData), key) : this._isItemEquals(itemData, key)) {\n        result = $item;\n        return false;\n      }\n    });\n    return result;\n  },\n  _dataSourceChangedHandler: function (newItems, e) {\n    if (null !== e && void 0 !== e && e.changes) {\n      this._modifyByChanges(e.changes);\n    } else {\n      this.callBase(newItems, e);\n\n      this._refreshItemsCache();\n    }\n  },\n  _isItemEquals: function (item1, item2) {\n    if (item1 && item1[PRIVATE_KEY_FIELD]) {\n      item1 = item1.data;\n    }\n\n    try {\n      return JSON.stringify(item1) === JSON.stringify(item2);\n    } catch (e) {\n      return item1 === item2;\n    }\n  },\n  _isItemStrictEquals: function (item1, item2) {\n    return this._isItemEquals(item1, item2);\n  },\n  _shouldAddNewGroup: function (changes, items) {\n    var result = false;\n\n    if (this.option(\"grouped\")) {\n      if (!changes.length) {\n        result = true;\n      }\n\n      each(changes, (i, change) => {\n        if (\"insert\" === change.type) {\n          result = true;\n          each(items, (_, item) => {\n            if (void 0 !== change.data.key && change.data.key === item.key) {\n              result = false;\n              return false;\n            }\n          });\n        }\n      });\n    }\n\n    return result;\n  },\n  _partialRefresh: function () {\n    if (this.option(\"repaintChangesOnly\")) {\n      var result = findChanges(this._itemsCache, this._editStrategy.itemsGetter(), data => {\n        if (data && void 0 !== data[PRIVATE_KEY_FIELD]) {\n          return data[PRIVATE_KEY_FIELD];\n        }\n\n        return this.keyOf(data);\n      }, this._isItemStrictEquals.bind(this));\n\n      if (result && this._itemsCache.length && !this._shouldAddNewGroup(result, this._itemsCache)) {\n        this._modifyByChanges(result, true);\n\n        this._renderEmptyMessage();\n\n        return true;\n      } else {\n        this._refreshItemsCache();\n      }\n    }\n\n    return false;\n  },\n  _refreshItemsCache: function () {\n    if (this.option(\"repaintChangesOnly\")) {\n      var items = this._editStrategy.itemsGetter();\n\n      try {\n        this._itemsCache = extend(true, [], items);\n\n        if (!this.key()) {\n          this._itemsCache = this._itemsCache.map((itemCache, index) => ({\n            [PRIVATE_KEY_FIELD]: items[index],\n            data: itemCache\n          }));\n        }\n      } catch (e) {\n        this._itemsCache = extend([], items);\n      }\n    }\n  },\n  _dispose: function () {\n    this._dataSource && this._dataSource.off(\"customizeStoreLoadOptions\", this._customizeStoreLoadOptions);\n    this.callBase();\n  },\n  _updateByChange: function (keyInfo, items, change, isPartialRefresh) {\n    if (isPartialRefresh) {\n      this._renderItem(change.index, change.data, null, this._findItemElementByKey(change.key));\n    } else {\n      var changedItem = items[indexByKey(keyInfo, items, change.key)];\n\n      if (changedItem) {\n        update(keyInfo, items, change.key, change.data).done(() => {\n          this._renderItem(items.indexOf(changedItem), changedItem, null, this._findItemElementByKey(change.key));\n        });\n      }\n    }\n  },\n  _insertByChange: function (keyInfo, items, change, isPartialRefresh) {\n    when(isPartialRefresh || insert(keyInfo, items, change.data, change.index)).done(() => {\n      var _change$index;\n\n      this._beforeItemElementInserted(change);\n\n      var $itemContainer = this._getItemContainer(change.data);\n\n      this._renderItem(null !== (_change$index = change.index) && void 0 !== _change$index ? _change$index : items.length, change.data, $itemContainer);\n\n      this._afterItemElementInserted();\n\n      this._correctionIndex++;\n    });\n  },\n  _getItemContainer: function (changeData) {\n    return this._itemContainer();\n  },\n  _updateSelectionAfterRemoveByChange: function (removeIndex) {\n    var selectedIndex = this.option(\"selectedIndex\");\n\n    if (selectedIndex > removeIndex) {\n      this.option(\"selectedIndex\", selectedIndex - 1);\n    } else if (selectedIndex === removeIndex && 1 === this.option(\"selectedItems\").length) {\n      this.option(\"selectedItems\", []);\n    } else {\n      this._normalizeSelectedItems();\n    }\n  },\n  _beforeItemElementInserted: function (change) {\n    var selectedIndex = this.option(\"selectedIndex\");\n\n    if (change.index <= selectedIndex) {\n      this.option(\"selectedIndex\", selectedIndex + 1);\n    }\n  },\n  _afterItemElementInserted: noop,\n  _removeByChange: function (keyInfo, items, change, isPartialRefresh) {\n    var index = isPartialRefresh ? change.index : indexByKey(keyInfo, items, change.key);\n    var removedItem = isPartialRefresh ? change.oldItem : items[index];\n\n    if (removedItem) {\n      var $removedItemElement = this._findItemElementByKey(change.key);\n\n      var deletedActionArgs = this._extendActionArgs($removedItemElement);\n\n      this._waitDeletingPrepare($removedItemElement).done(() => {\n        if (isPartialRefresh) {\n          this._updateIndicesAfterIndex(index - 1);\n\n          this._afterItemElementDeleted($removedItemElement, deletedActionArgs);\n\n          this._updateSelectionAfterRemoveByChange(index);\n        } else {\n          this._deleteItemElementByIndex(index);\n\n          this._afterItemElementDeleted($removedItemElement, deletedActionArgs);\n        }\n      });\n\n      this._correctionIndex--;\n    }\n  },\n  _modifyByChanges: function (changes, isPartialRefresh) {\n    var items = this._editStrategy.itemsGetter();\n\n    var keyInfo = {\n      key: this.key.bind(this),\n      keyOf: this.keyOf.bind(this)\n    };\n    var dataSource = this._dataSource;\n    var paginate = dataSource && dataSource.paginate();\n    var group = dataSource && dataSource.group();\n\n    if (paginate || group) {\n      changes = changes.filter(item => \"insert\" !== item.type || void 0 !== item.index);\n    }\n\n    changes.forEach(change => this[\"_\".concat(change.type, \"ByChange\")](keyInfo, items, change, isPartialRefresh));\n    this._renderedItemsCount = items.length;\n\n    this._refreshItemsCache();\n\n    this._fireContentReadyAction();\n  },\n  _appendItemToContainer: function ($container, $itemFrame, index) {\n    var nextSiblingElement = $container.children(this._itemSelector()).get(index);\n    domAdapter.insertElement($container.get(0), $itemFrame.get(0), nextSiblingElement);\n  },\n  _optionChanged: function (args) {\n    switch (args.name) {\n      case \"items\":\n        var isItemsUpdated = this._partialRefresh(args.value);\n\n        if (!isItemsUpdated) {\n          this.callBase(args);\n        }\n\n        break;\n\n      case \"dataSource\":\n        if (!this.option(\"repaintChangesOnly\") || !args.value) {\n          this.option(\"items\", []);\n        }\n\n        this.callBase(args);\n        break;\n\n      case \"repaintChangesOnly\":\n        break;\n\n      default:\n        this.callBase(args);\n    }\n  }\n});","map":{"version":3,"names":["$","CollectionWidget","extend","each","update","insert","indexByKey","keysEqual","when","findChanges","domAdapter","noop","PRIVATE_KEY_FIELD","inherit","_getDefaultOptions","callBase","repaintChangesOnly","ctor","apply","arguments","_customizeStoreLoadOptions","e","dataSource","_dataSource","isLoaded","_correctionIndex","storeLoadOptions","skip","on","reload","_init","_refreshItemsCache","_findItemElementByKey","key","result","keyExpr","itemElements","_","item","$item","itemData","_getItemData","keyOf","_isItemEquals","_dataSourceChangedHandler","newItems","changes","_modifyByChanges","item1","item2","data","JSON","stringify","_isItemStrictEquals","_shouldAddNewGroup","items","option","length","i","change","type","_partialRefresh","_itemsCache","_editStrategy","itemsGetter","bind","_renderEmptyMessage","map","itemCache","index","_dispose","off","_updateByChange","keyInfo","isPartialRefresh","_renderItem","changedItem","done","indexOf","_insertByChange","_change$index","_beforeItemElementInserted","$itemContainer","_getItemContainer","_afterItemElementInserted","changeData","_itemContainer","_updateSelectionAfterRemoveByChange","removeIndex","selectedIndex","_normalizeSelectedItems","_removeByChange","removedItem","oldItem","$removedItemElement","deletedActionArgs","_extendActionArgs","_waitDeletingPrepare","_updateIndicesAfterIndex","_afterItemElementDeleted","_deleteItemElementByIndex","paginate","group","filter","forEach","concat","_renderedItemsCount","_fireContentReadyAction","_appendItemToContainer","$container","$itemFrame","nextSiblingElement","children","_itemSelector","get","insertElement","_optionChanged","args","name","isItemsUpdated","value"],"sources":["E:/MisaProject/W2022_06/misa_emis/node_modules/devextreme/esm/ui/collection/ui.collection_widget.live_update.js"],"sourcesContent":["/**\r\n * DevExtreme (esm/ui/collection/ui.collection_widget.live_update.js)\r\n * Version: 22.1.4\r\n * Build date: Fri Jul 22 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport $ from \"../../core/renderer\";\r\nimport CollectionWidget from \"./ui.collection_widget.edit\";\r\nimport {\r\n    extend\r\n} from \"../../core/utils/extend\";\r\nimport {\r\n    each\r\n} from \"../../core/utils/iterator\";\r\nimport {\r\n    update,\r\n    insert,\r\n    indexByKey\r\n} from \"../../data/array_utils\";\r\nimport {\r\n    keysEqual\r\n} from \"../../data/utils\";\r\nimport {\r\n    when\r\n} from \"../../core/utils/deferred\";\r\nimport {\r\n    findChanges\r\n} from \"../../core/utils/array_compare\";\r\nimport domAdapter from \"../../core/dom_adapter\";\r\nimport {\r\n    noop\r\n} from \"../../core/utils/common\";\r\nvar PRIVATE_KEY_FIELD = \"__dx_key__\";\r\nexport default CollectionWidget.inherit({\r\n    _getDefaultOptions: function() {\r\n        return extend(this.callBase(), {\r\n            repaintChangesOnly: false\r\n        })\r\n    },\r\n    ctor: function() {\r\n        this.callBase.apply(this, arguments);\r\n        this._customizeStoreLoadOptions = e => {\r\n            var dataSource = this._dataSource;\r\n            if (dataSource && !dataSource.isLoaded()) {\r\n                this._correctionIndex = 0\r\n            }\r\n            if (this._correctionIndex && e.storeLoadOptions) {\r\n                e.storeLoadOptions.skip += this._correctionIndex\r\n            }\r\n        }, this._dataSource && this._dataSource.on(\"customizeStoreLoadOptions\", this._customizeStoreLoadOptions)\r\n    },\r\n    reload: function() {\r\n        this._correctionIndex = 0\r\n    },\r\n    _init: function() {\r\n        this.callBase();\r\n        this._refreshItemsCache();\r\n        this._correctionIndex = 0\r\n    },\r\n    _findItemElementByKey: function(key) {\r\n        var result = $();\r\n        var keyExpr = this.key();\r\n        this.itemElements().each((_, item) => {\r\n            var $item = $(item);\r\n            var itemData = this._getItemData($item);\r\n            if (keyExpr ? keysEqual(keyExpr, this.keyOf(itemData), key) : this._isItemEquals(itemData, key)) {\r\n                result = $item;\r\n                return false\r\n            }\r\n        });\r\n        return result\r\n    },\r\n    _dataSourceChangedHandler: function(newItems, e) {\r\n        if (null !== e && void 0 !== e && e.changes) {\r\n            this._modifyByChanges(e.changes)\r\n        } else {\r\n            this.callBase(newItems, e);\r\n            this._refreshItemsCache()\r\n        }\r\n    },\r\n    _isItemEquals: function(item1, item2) {\r\n        if (item1 && item1[PRIVATE_KEY_FIELD]) {\r\n            item1 = item1.data\r\n        }\r\n        try {\r\n            return JSON.stringify(item1) === JSON.stringify(item2)\r\n        } catch (e) {\r\n            return item1 === item2\r\n        }\r\n    },\r\n    _isItemStrictEquals: function(item1, item2) {\r\n        return this._isItemEquals(item1, item2)\r\n    },\r\n    _shouldAddNewGroup: function(changes, items) {\r\n        var result = false;\r\n        if (this.option(\"grouped\")) {\r\n            if (!changes.length) {\r\n                result = true\r\n            }\r\n            each(changes, (i, change) => {\r\n                if (\"insert\" === change.type) {\r\n                    result = true;\r\n                    each(items, (_, item) => {\r\n                        if (void 0 !== change.data.key && change.data.key === item.key) {\r\n                            result = false;\r\n                            return false\r\n                        }\r\n                    })\r\n                }\r\n            })\r\n        }\r\n        return result\r\n    },\r\n    _partialRefresh: function() {\r\n        if (this.option(\"repaintChangesOnly\")) {\r\n            var result = findChanges(this._itemsCache, this._editStrategy.itemsGetter(), data => {\r\n                if (data && void 0 !== data[PRIVATE_KEY_FIELD]) {\r\n                    return data[PRIVATE_KEY_FIELD]\r\n                }\r\n                return this.keyOf(data)\r\n            }, this._isItemStrictEquals.bind(this));\r\n            if (result && this._itemsCache.length && !this._shouldAddNewGroup(result, this._itemsCache)) {\r\n                this._modifyByChanges(result, true);\r\n                this._renderEmptyMessage();\r\n                return true\r\n            } else {\r\n                this._refreshItemsCache()\r\n            }\r\n        }\r\n        return false\r\n    },\r\n    _refreshItemsCache: function() {\r\n        if (this.option(\"repaintChangesOnly\")) {\r\n            var items = this._editStrategy.itemsGetter();\r\n            try {\r\n                this._itemsCache = extend(true, [], items);\r\n                if (!this.key()) {\r\n                    this._itemsCache = this._itemsCache.map((itemCache, index) => ({\r\n                        [PRIVATE_KEY_FIELD]: items[index],\r\n                        data: itemCache\r\n                    }))\r\n                }\r\n            } catch (e) {\r\n                this._itemsCache = extend([], items)\r\n            }\r\n        }\r\n    },\r\n    _dispose: function() {\r\n        this._dataSource && this._dataSource.off(\"customizeStoreLoadOptions\", this._customizeStoreLoadOptions);\r\n        this.callBase()\r\n    },\r\n    _updateByChange: function(keyInfo, items, change, isPartialRefresh) {\r\n        if (isPartialRefresh) {\r\n            this._renderItem(change.index, change.data, null, this._findItemElementByKey(change.key))\r\n        } else {\r\n            var changedItem = items[indexByKey(keyInfo, items, change.key)];\r\n            if (changedItem) {\r\n                update(keyInfo, items, change.key, change.data).done(() => {\r\n                    this._renderItem(items.indexOf(changedItem), changedItem, null, this._findItemElementByKey(change.key))\r\n                })\r\n            }\r\n        }\r\n    },\r\n    _insertByChange: function(keyInfo, items, change, isPartialRefresh) {\r\n        when(isPartialRefresh || insert(keyInfo, items, change.data, change.index)).done(() => {\r\n            var _change$index;\r\n            this._beforeItemElementInserted(change);\r\n            var $itemContainer = this._getItemContainer(change.data);\r\n            this._renderItem(null !== (_change$index = change.index) && void 0 !== _change$index ? _change$index : items.length, change.data, $itemContainer);\r\n            this._afterItemElementInserted();\r\n            this._correctionIndex++\r\n        })\r\n    },\r\n    _getItemContainer: function(changeData) {\r\n        return this._itemContainer()\r\n    },\r\n    _updateSelectionAfterRemoveByChange: function(removeIndex) {\r\n        var selectedIndex = this.option(\"selectedIndex\");\r\n        if (selectedIndex > removeIndex) {\r\n            this.option(\"selectedIndex\", selectedIndex - 1)\r\n        } else if (selectedIndex === removeIndex && 1 === this.option(\"selectedItems\").length) {\r\n            this.option(\"selectedItems\", [])\r\n        } else {\r\n            this._normalizeSelectedItems()\r\n        }\r\n    },\r\n    _beforeItemElementInserted: function(change) {\r\n        var selectedIndex = this.option(\"selectedIndex\");\r\n        if (change.index <= selectedIndex) {\r\n            this.option(\"selectedIndex\", selectedIndex + 1)\r\n        }\r\n    },\r\n    _afterItemElementInserted: noop,\r\n    _removeByChange: function(keyInfo, items, change, isPartialRefresh) {\r\n        var index = isPartialRefresh ? change.index : indexByKey(keyInfo, items, change.key);\r\n        var removedItem = isPartialRefresh ? change.oldItem : items[index];\r\n        if (removedItem) {\r\n            var $removedItemElement = this._findItemElementByKey(change.key);\r\n            var deletedActionArgs = this._extendActionArgs($removedItemElement);\r\n            this._waitDeletingPrepare($removedItemElement).done(() => {\r\n                if (isPartialRefresh) {\r\n                    this._updateIndicesAfterIndex(index - 1);\r\n                    this._afterItemElementDeleted($removedItemElement, deletedActionArgs);\r\n                    this._updateSelectionAfterRemoveByChange(index)\r\n                } else {\r\n                    this._deleteItemElementByIndex(index);\r\n                    this._afterItemElementDeleted($removedItemElement, deletedActionArgs)\r\n                }\r\n            });\r\n            this._correctionIndex--\r\n        }\r\n    },\r\n    _modifyByChanges: function(changes, isPartialRefresh) {\r\n        var items = this._editStrategy.itemsGetter();\r\n        var keyInfo = {\r\n            key: this.key.bind(this),\r\n            keyOf: this.keyOf.bind(this)\r\n        };\r\n        var dataSource = this._dataSource;\r\n        var paginate = dataSource && dataSource.paginate();\r\n        var group = dataSource && dataSource.group();\r\n        if (paginate || group) {\r\n            changes = changes.filter(item => \"insert\" !== item.type || void 0 !== item.index)\r\n        }\r\n        changes.forEach(change => this[\"_\".concat(change.type, \"ByChange\")](keyInfo, items, change, isPartialRefresh));\r\n        this._renderedItemsCount = items.length;\r\n        this._refreshItemsCache();\r\n        this._fireContentReadyAction()\r\n    },\r\n    _appendItemToContainer: function($container, $itemFrame, index) {\r\n        var nextSiblingElement = $container.children(this._itemSelector()).get(index);\r\n        domAdapter.insertElement($container.get(0), $itemFrame.get(0), nextSiblingElement)\r\n    },\r\n    _optionChanged: function(args) {\r\n        switch (args.name) {\r\n            case \"items\":\r\n                var isItemsUpdated = this._partialRefresh(args.value);\r\n                if (!isItemsUpdated) {\r\n                    this.callBase(args)\r\n                }\r\n                break;\r\n            case \"dataSource\":\r\n                if (!this.option(\"repaintChangesOnly\") || !args.value) {\r\n                    this.option(\"items\", [])\r\n                }\r\n                this.callBase(args);\r\n                break;\r\n            case \"repaintChangesOnly\":\r\n                break;\r\n            default:\r\n                this.callBase(args)\r\n        }\r\n    }\r\n});\r\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAOA,CAAP,MAAc,qBAAd;AACA,OAAOC,gBAAP,MAA6B,6BAA7B;AACA,SACIC,MADJ,QAEO,yBAFP;AAGA,SACIC,IADJ,QAEO,2BAFP;AAGA,SACIC,MADJ,EAEIC,MAFJ,EAGIC,UAHJ,QAIO,wBAJP;AAKA,SACIC,SADJ,QAEO,kBAFP;AAGA,SACIC,IADJ,QAEO,2BAFP;AAGA,SACIC,WADJ,QAEO,gCAFP;AAGA,OAAOC,UAAP,MAAuB,wBAAvB;AACA,SACIC,IADJ,QAEO,yBAFP;AAGA,IAAIC,iBAAiB,GAAG,YAAxB;AACA,eAAeX,gBAAgB,CAACY,OAAjB,CAAyB;EACpCC,kBAAkB,EAAE,YAAW;IAC3B,OAAOZ,MAAM,CAAC,KAAKa,QAAL,EAAD,EAAkB;MAC3BC,kBAAkB,EAAE;IADO,CAAlB,CAAb;EAGH,CALmC;EAMpCC,IAAI,EAAE,YAAW;IACb,KAAKF,QAAL,CAAcG,KAAd,CAAoB,IAApB,EAA0BC,SAA1B;IACA,KAAKC,0BAAL,GAAkCC,CAAC,IAAI;MACnC,IAAIC,UAAU,GAAG,KAAKC,WAAtB;;MACA,IAAID,UAAU,IAAI,CAACA,UAAU,CAACE,QAAX,EAAnB,EAA0C;QACtC,KAAKC,gBAAL,GAAwB,CAAxB;MACH;;MACD,IAAI,KAAKA,gBAAL,IAAyBJ,CAAC,CAACK,gBAA/B,EAAiD;QAC7CL,CAAC,CAACK,gBAAF,CAAmBC,IAAnB,IAA2B,KAAKF,gBAAhC;MACH;IACJ,CARD,EAQG,KAAKF,WAAL,IAAoB,KAAKA,WAAL,CAAiBK,EAAjB,CAAoB,2BAApB,EAAiD,KAAKR,0BAAtD,CARvB;EASH,CAjBmC;EAkBpCS,MAAM,EAAE,YAAW;IACf,KAAKJ,gBAAL,GAAwB,CAAxB;EACH,CApBmC;EAqBpCK,KAAK,EAAE,YAAW;IACd,KAAKf,QAAL;;IACA,KAAKgB,kBAAL;;IACA,KAAKN,gBAAL,GAAwB,CAAxB;EACH,CAzBmC;EA0BpCO,qBAAqB,EAAE,UAASC,GAAT,EAAc;IACjC,IAAIC,MAAM,GAAGlC,CAAC,EAAd;IACA,IAAImC,OAAO,GAAG,KAAKF,GAAL,EAAd;IACA,KAAKG,YAAL,GAAoBjC,IAApB,CAAyB,CAACkC,CAAD,EAAIC,IAAJ,KAAa;MAClC,IAAIC,KAAK,GAAGvC,CAAC,CAACsC,IAAD,CAAb;;MACA,IAAIE,QAAQ,GAAG,KAAKC,YAAL,CAAkBF,KAAlB,CAAf;;MACA,IAAIJ,OAAO,GAAG5B,SAAS,CAAC4B,OAAD,EAAU,KAAKO,KAAL,CAAWF,QAAX,CAAV,EAAgCP,GAAhC,CAAZ,GAAmD,KAAKU,aAAL,CAAmBH,QAAnB,EAA6BP,GAA7B,CAA9D,EAAiG;QAC7FC,MAAM,GAAGK,KAAT;QACA,OAAO,KAAP;MACH;IACJ,CAPD;IAQA,OAAOL,MAAP;EACH,CAtCmC;EAuCpCU,yBAAyB,EAAE,UAASC,QAAT,EAAmBxB,CAAnB,EAAsB;IAC7C,IAAI,SAASA,CAAT,IAAc,KAAK,CAAL,KAAWA,CAAzB,IAA8BA,CAAC,CAACyB,OAApC,EAA6C;MACzC,KAAKC,gBAAL,CAAsB1B,CAAC,CAACyB,OAAxB;IACH,CAFD,MAEO;MACH,KAAK/B,QAAL,CAAc8B,QAAd,EAAwBxB,CAAxB;;MACA,KAAKU,kBAAL;IACH;EACJ,CA9CmC;EA+CpCY,aAAa,EAAE,UAASK,KAAT,EAAgBC,KAAhB,EAAuB;IAClC,IAAID,KAAK,IAAIA,KAAK,CAACpC,iBAAD,CAAlB,EAAuC;MACnCoC,KAAK,GAAGA,KAAK,CAACE,IAAd;IACH;;IACD,IAAI;MACA,OAAOC,IAAI,CAACC,SAAL,CAAeJ,KAAf,MAA0BG,IAAI,CAACC,SAAL,CAAeH,KAAf,CAAjC;IACH,CAFD,CAEE,OAAO5B,CAAP,EAAU;MACR,OAAO2B,KAAK,KAAKC,KAAjB;IACH;EACJ,CAxDmC;EAyDpCI,mBAAmB,EAAE,UAASL,KAAT,EAAgBC,KAAhB,EAAuB;IACxC,OAAO,KAAKN,aAAL,CAAmBK,KAAnB,EAA0BC,KAA1B,CAAP;EACH,CA3DmC;EA4DpCK,kBAAkB,EAAE,UAASR,OAAT,EAAkBS,KAAlB,EAAyB;IACzC,IAAIrB,MAAM,GAAG,KAAb;;IACA,IAAI,KAAKsB,MAAL,CAAY,SAAZ,CAAJ,EAA4B;MACxB,IAAI,CAACV,OAAO,CAACW,MAAb,EAAqB;QACjBvB,MAAM,GAAG,IAAT;MACH;;MACD/B,IAAI,CAAC2C,OAAD,EAAU,CAACY,CAAD,EAAIC,MAAJ,KAAe;QACzB,IAAI,aAAaA,MAAM,CAACC,IAAxB,EAA8B;UAC1B1B,MAAM,GAAG,IAAT;UACA/B,IAAI,CAACoD,KAAD,EAAQ,CAAClB,CAAD,EAAIC,IAAJ,KAAa;YACrB,IAAI,KAAK,CAAL,KAAWqB,MAAM,CAACT,IAAP,CAAYjB,GAAvB,IAA8B0B,MAAM,CAACT,IAAP,CAAYjB,GAAZ,KAAoBK,IAAI,CAACL,GAA3D,EAAgE;cAC5DC,MAAM,GAAG,KAAT;cACA,OAAO,KAAP;YACH;UACJ,CALG,CAAJ;QAMH;MACJ,CAVG,CAAJ;IAWH;;IACD,OAAOA,MAAP;EACH,CA/EmC;EAgFpC2B,eAAe,EAAE,YAAW;IACxB,IAAI,KAAKL,MAAL,CAAY,oBAAZ,CAAJ,EAAuC;MACnC,IAAItB,MAAM,GAAGzB,WAAW,CAAC,KAAKqD,WAAN,EAAmB,KAAKC,aAAL,CAAmBC,WAAnB,EAAnB,EAAqDd,IAAI,IAAI;QACjF,IAAIA,IAAI,IAAI,KAAK,CAAL,KAAWA,IAAI,CAACtC,iBAAD,CAA3B,EAAgD;UAC5C,OAAOsC,IAAI,CAACtC,iBAAD,CAAX;QACH;;QACD,OAAO,KAAK8B,KAAL,CAAWQ,IAAX,CAAP;MACH,CALuB,EAKrB,KAAKG,mBAAL,CAAyBY,IAAzB,CAA8B,IAA9B,CALqB,CAAxB;;MAMA,IAAI/B,MAAM,IAAI,KAAK4B,WAAL,CAAiBL,MAA3B,IAAqC,CAAC,KAAKH,kBAAL,CAAwBpB,MAAxB,EAAgC,KAAK4B,WAArC,CAA1C,EAA6F;QACzF,KAAKf,gBAAL,CAAsBb,MAAtB,EAA8B,IAA9B;;QACA,KAAKgC,mBAAL;;QACA,OAAO,IAAP;MACH,CAJD,MAIO;QACH,KAAKnC,kBAAL;MACH;IACJ;;IACD,OAAO,KAAP;EACH,CAjGmC;EAkGpCA,kBAAkB,EAAE,YAAW;IAC3B,IAAI,KAAKyB,MAAL,CAAY,oBAAZ,CAAJ,EAAuC;MACnC,IAAID,KAAK,GAAG,KAAKQ,aAAL,CAAmBC,WAAnB,EAAZ;;MACA,IAAI;QACA,KAAKF,WAAL,GAAmB5D,MAAM,CAAC,IAAD,EAAO,EAAP,EAAWqD,KAAX,CAAzB;;QACA,IAAI,CAAC,KAAKtB,GAAL,EAAL,EAAiB;UACb,KAAK6B,WAAL,GAAmB,KAAKA,WAAL,CAAiBK,GAAjB,CAAqB,CAACC,SAAD,EAAYC,KAAZ,MAAuB;YAC3D,CAACzD,iBAAD,GAAqB2C,KAAK,CAACc,KAAD,CADiC;YAE3DnB,IAAI,EAAEkB;UAFqD,CAAvB,CAArB,CAAnB;QAIH;MACJ,CARD,CAQE,OAAO/C,CAAP,EAAU;QACR,KAAKyC,WAAL,GAAmB5D,MAAM,CAAC,EAAD,EAAKqD,KAAL,CAAzB;MACH;IACJ;EACJ,CAjHmC;EAkHpCe,QAAQ,EAAE,YAAW;IACjB,KAAK/C,WAAL,IAAoB,KAAKA,WAAL,CAAiBgD,GAAjB,CAAqB,2BAArB,EAAkD,KAAKnD,0BAAvD,CAApB;IACA,KAAKL,QAAL;EACH,CArHmC;EAsHpCyD,eAAe,EAAE,UAASC,OAAT,EAAkBlB,KAAlB,EAAyBI,MAAzB,EAAiCe,gBAAjC,EAAmD;IAChE,IAAIA,gBAAJ,EAAsB;MAClB,KAAKC,WAAL,CAAiBhB,MAAM,CAACU,KAAxB,EAA+BV,MAAM,CAACT,IAAtC,EAA4C,IAA5C,EAAkD,KAAKlB,qBAAL,CAA2B2B,MAAM,CAAC1B,GAAlC,CAAlD;IACH,CAFD,MAEO;MACH,IAAI2C,WAAW,GAAGrB,KAAK,CAACjD,UAAU,CAACmE,OAAD,EAAUlB,KAAV,EAAiBI,MAAM,CAAC1B,GAAxB,CAAX,CAAvB;;MACA,IAAI2C,WAAJ,EAAiB;QACbxE,MAAM,CAACqE,OAAD,EAAUlB,KAAV,EAAiBI,MAAM,CAAC1B,GAAxB,EAA6B0B,MAAM,CAACT,IAApC,CAAN,CAAgD2B,IAAhD,CAAqD,MAAM;UACvD,KAAKF,WAAL,CAAiBpB,KAAK,CAACuB,OAAN,CAAcF,WAAd,CAAjB,EAA6CA,WAA7C,EAA0D,IAA1D,EAAgE,KAAK5C,qBAAL,CAA2B2B,MAAM,CAAC1B,GAAlC,CAAhE;QACH,CAFD;MAGH;IACJ;EACJ,CAjImC;EAkIpC8C,eAAe,EAAE,UAASN,OAAT,EAAkBlB,KAAlB,EAAyBI,MAAzB,EAAiCe,gBAAjC,EAAmD;IAChElE,IAAI,CAACkE,gBAAgB,IAAIrE,MAAM,CAACoE,OAAD,EAAUlB,KAAV,EAAiBI,MAAM,CAACT,IAAxB,EAA8BS,MAAM,CAACU,KAArC,CAA3B,CAAJ,CAA4EQ,IAA5E,CAAiF,MAAM;MACnF,IAAIG,aAAJ;;MACA,KAAKC,0BAAL,CAAgCtB,MAAhC;;MACA,IAAIuB,cAAc,GAAG,KAAKC,iBAAL,CAAuBxB,MAAM,CAACT,IAA9B,CAArB;;MACA,KAAKyB,WAAL,CAAiB,UAAUK,aAAa,GAAGrB,MAAM,CAACU,KAAjC,KAA2C,KAAK,CAAL,KAAWW,aAAtD,GAAsEA,aAAtE,GAAsFzB,KAAK,CAACE,MAA7G,EAAqHE,MAAM,CAACT,IAA5H,EAAkIgC,cAAlI;;MACA,KAAKE,yBAAL;;MACA,KAAK3D,gBAAL;IACH,CAPD;EAQH,CA3ImC;EA4IpC0D,iBAAiB,EAAE,UAASE,UAAT,EAAqB;IACpC,OAAO,KAAKC,cAAL,EAAP;EACH,CA9ImC;EA+IpCC,mCAAmC,EAAE,UAASC,WAAT,EAAsB;IACvD,IAAIC,aAAa,GAAG,KAAKjC,MAAL,CAAY,eAAZ,CAApB;;IACA,IAAIiC,aAAa,GAAGD,WAApB,EAAiC;MAC7B,KAAKhC,MAAL,CAAY,eAAZ,EAA6BiC,aAAa,GAAG,CAA7C;IACH,CAFD,MAEO,IAAIA,aAAa,KAAKD,WAAlB,IAAiC,MAAM,KAAKhC,MAAL,CAAY,eAAZ,EAA6BC,MAAxE,EAAgF;MACnF,KAAKD,MAAL,CAAY,eAAZ,EAA6B,EAA7B;IACH,CAFM,MAEA;MACH,KAAKkC,uBAAL;IACH;EACJ,CAxJmC;EAyJpCT,0BAA0B,EAAE,UAAStB,MAAT,EAAiB;IACzC,IAAI8B,aAAa,GAAG,KAAKjC,MAAL,CAAY,eAAZ,CAApB;;IACA,IAAIG,MAAM,CAACU,KAAP,IAAgBoB,aAApB,EAAmC;MAC/B,KAAKjC,MAAL,CAAY,eAAZ,EAA6BiC,aAAa,GAAG,CAA7C;IACH;EACJ,CA9JmC;EA+JpCL,yBAAyB,EAAEzE,IA/JS;EAgKpCgF,eAAe,EAAE,UAASlB,OAAT,EAAkBlB,KAAlB,EAAyBI,MAAzB,EAAiCe,gBAAjC,EAAmD;IAChE,IAAIL,KAAK,GAAGK,gBAAgB,GAAGf,MAAM,CAACU,KAAV,GAAkB/D,UAAU,CAACmE,OAAD,EAAUlB,KAAV,EAAiBI,MAAM,CAAC1B,GAAxB,CAAxD;IACA,IAAI2D,WAAW,GAAGlB,gBAAgB,GAAGf,MAAM,CAACkC,OAAV,GAAoBtC,KAAK,CAACc,KAAD,CAA3D;;IACA,IAAIuB,WAAJ,EAAiB;MACb,IAAIE,mBAAmB,GAAG,KAAK9D,qBAAL,CAA2B2B,MAAM,CAAC1B,GAAlC,CAA1B;;MACA,IAAI8D,iBAAiB,GAAG,KAAKC,iBAAL,CAAuBF,mBAAvB,CAAxB;;MACA,KAAKG,oBAAL,CAA0BH,mBAA1B,EAA+CjB,IAA/C,CAAoD,MAAM;QACtD,IAAIH,gBAAJ,EAAsB;UAClB,KAAKwB,wBAAL,CAA8B7B,KAAK,GAAG,CAAtC;;UACA,KAAK8B,wBAAL,CAA8BL,mBAA9B,EAAmDC,iBAAnD;;UACA,KAAKR,mCAAL,CAAyClB,KAAzC;QACH,CAJD,MAIO;UACH,KAAK+B,yBAAL,CAA+B/B,KAA/B;;UACA,KAAK8B,wBAAL,CAA8BL,mBAA9B,EAAmDC,iBAAnD;QACH;MACJ,CATD;;MAUA,KAAKtE,gBAAL;IACH;EACJ,CAlLmC;EAmLpCsB,gBAAgB,EAAE,UAASD,OAAT,EAAkB4B,gBAAlB,EAAoC;IAClD,IAAInB,KAAK,GAAG,KAAKQ,aAAL,CAAmBC,WAAnB,EAAZ;;IACA,IAAIS,OAAO,GAAG;MACVxC,GAAG,EAAE,KAAKA,GAAL,CAASgC,IAAT,CAAc,IAAd,CADK;MAEVvB,KAAK,EAAE,KAAKA,KAAL,CAAWuB,IAAX,CAAgB,IAAhB;IAFG,CAAd;IAIA,IAAI3C,UAAU,GAAG,KAAKC,WAAtB;IACA,IAAI8E,QAAQ,GAAG/E,UAAU,IAAIA,UAAU,CAAC+E,QAAX,EAA7B;IACA,IAAIC,KAAK,GAAGhF,UAAU,IAAIA,UAAU,CAACgF,KAAX,EAA1B;;IACA,IAAID,QAAQ,IAAIC,KAAhB,EAAuB;MACnBxD,OAAO,GAAGA,OAAO,CAACyD,MAAR,CAAejE,IAAI,IAAI,aAAaA,IAAI,CAACsB,IAAlB,IAA0B,KAAK,CAAL,KAAWtB,IAAI,CAAC+B,KAAjE,CAAV;IACH;;IACDvB,OAAO,CAAC0D,OAAR,CAAgB7C,MAAM,IAAI,KAAK,IAAI8C,MAAJ,CAAW9C,MAAM,CAACC,IAAlB,EAAwB,UAAxB,CAAL,EAA0Ca,OAA1C,EAAmDlB,KAAnD,EAA0DI,MAA1D,EAAkEe,gBAAlE,CAA1B;IACA,KAAKgC,mBAAL,GAA2BnD,KAAK,CAACE,MAAjC;;IACA,KAAK1B,kBAAL;;IACA,KAAK4E,uBAAL;EACH,CAnMmC;EAoMpCC,sBAAsB,EAAE,UAASC,UAAT,EAAqBC,UAArB,EAAiCzC,KAAjC,EAAwC;IAC5D,IAAI0C,kBAAkB,GAAGF,UAAU,CAACG,QAAX,CAAoB,KAAKC,aAAL,EAApB,EAA0CC,GAA1C,CAA8C7C,KAA9C,CAAzB;IACA3D,UAAU,CAACyG,aAAX,CAAyBN,UAAU,CAACK,GAAX,CAAe,CAAf,CAAzB,EAA4CJ,UAAU,CAACI,GAAX,CAAe,CAAf,CAA5C,EAA+DH,kBAA/D;EACH,CAvMmC;EAwMpCK,cAAc,EAAE,UAASC,IAAT,EAAe;IAC3B,QAAQA,IAAI,CAACC,IAAb;MACI,KAAK,OAAL;QACI,IAAIC,cAAc,GAAG,KAAK1D,eAAL,CAAqBwD,IAAI,CAACG,KAA1B,CAArB;;QACA,IAAI,CAACD,cAAL,EAAqB;UACjB,KAAKxG,QAAL,CAAcsG,IAAd;QACH;;QACD;;MACJ,KAAK,YAAL;QACI,IAAI,CAAC,KAAK7D,MAAL,CAAY,oBAAZ,CAAD,IAAsC,CAAC6D,IAAI,CAACG,KAAhD,EAAuD;UACnD,KAAKhE,MAAL,CAAY,OAAZ,EAAqB,EAArB;QACH;;QACD,KAAKzC,QAAL,CAAcsG,IAAd;QACA;;MACJ,KAAK,oBAAL;QACI;;MACJ;QACI,KAAKtG,QAAL,CAAcsG,IAAd;IAhBR;EAkBH;AA3NmC,CAAzB,CAAf"},"metadata":{},"sourceType":"module"}