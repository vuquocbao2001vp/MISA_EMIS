{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/lookup.js)\r\n * Version: 22.1.4\r\n * Build date: Fri Jul 22 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport { getWidth, getHeight, getOuterHeight, getOuterWidth } from \"../core/utils/size\";\nimport $ from \"../core/renderer\";\nimport eventsEngine from \"../events/core/events_engine\";\nimport { getWindow } from \"../core/utils/window\";\nvar window = getWindow();\nimport { nativeScrolling } from \"../core/utils/support\";\nimport { noop } from \"../core/utils/common\";\nimport { getPublicElement } from \"../core/element\";\nimport { each } from \"../core/utils/iterator\";\nimport { extend } from \"../core/utils/extend\";\nimport { getFieldName } from \"../core/options/utils\";\nimport messageLocalization from \"../localization/message\";\nimport devices from \"../core/devices\";\nimport registerComponent from \"../core/component_registrator\";\nimport { addNamespace } from \"../events/utils/index\";\nimport DropDownList from \"./drop_down_editor/ui.drop_down_list\";\nimport { current, isMaterial } from \"./themes\";\nimport { name as clickEventName } from \"../events/click\";\nimport Popover from \"./popover\";\nimport TextBox from \"./text_box\";\nimport { ChildDefaultTemplate } from \"../core/templates/child_default_template\";\nimport { locate, move, resetPosition } from \"../animation/translator\";\nimport { isDefined } from \"../core/utils/type\";\nimport { getElementWidth } from \"./drop_down_editor/utils\";\nvar LOOKUP_CLASS = \"dx-lookup\";\nvar LOOKUP_SEARCH_CLASS = \"dx-lookup-search\";\nvar LOOKUP_SEARCH_WRAPPER_CLASS = \"dx-lookup-search-wrapper\";\nvar LOOKUP_FIELD_CLASS = \"dx-lookup-field\";\nvar LOOKUP_ARROW_CLASS = \"dx-lookup-arrow\";\nvar LOOKUP_FIELD_WRAPPER_CLASS = \"dx-lookup-field-wrapper\";\nvar LOOKUP_POPUP_CLASS = \"dx-lookup-popup\";\nvar LOOKUP_POPUP_WRAPPER_CLASS = \"dx-lookup-popup-wrapper\";\nvar LOOKUP_POPUP_SEARCH_CLASS = \"dx-lookup-popup-search\";\nvar LOOKUP_POPOVER_MODE = \"dx-lookup-popover-mode\";\nvar LOOKUP_EMPTY_CLASS = \"dx-lookup-empty\";\nvar LOOKUP_POPOVER_FLIP_VERTICAL_CLASS = \"dx-popover-flipped-vertical\";\nvar TEXTEDITOR_INPUT_CLASS = \"dx-texteditor-input\";\nvar LIST_ITEM_CLASS = \"dx-list-item\";\nvar LIST_ITEM_SELECTED_CLASS = \"dx-list-item-selected\";\nvar GROUP_LIST_HEADER_CLASS = \"dx-list-group-header\";\nvar MATERIAL_LOOKUP_LIST_ITEMS_COUNT = 5;\nvar MATERIAL_LOOKUP_LIST_PADDING = 8;\nvar Lookup = DropDownList.inherit({\n  _supportedKeys: function () {\n    return extend(this.callBase(), {\n      space: function (e) {\n        e.preventDefault();\n\n        this._validatedOpening();\n      },\n      enter: function () {\n        this._validatedOpening();\n      }\n    });\n  },\n  _getDefaultOptions: function () {\n    return extend(this.callBase(), {\n      placeholder: messageLocalization.format(\"Select\"),\n      searchPlaceholder: messageLocalization.format(\"Search\"),\n      searchEnabled: true,\n      searchStartEvent: \"input change keyup\",\n      cleanSearchOnOpening: true,\n      showCancelButton: true,\n      showClearButton: false,\n      clearButtonText: messageLocalization.format(\"Clear\"),\n      applyButtonText: messageLocalization.format(\"OK\"),\n      pullRefreshEnabled: false,\n      useNativeScrolling: true,\n      pullingDownText: messageLocalization.format(\"dxList-pullingDownText\"),\n      pulledDownText: messageLocalization.format(\"dxList-pulledDownText\"),\n      refreshingText: messageLocalization.format(\"dxList-refreshingText\"),\n      pageLoadingText: messageLocalization.format(\"dxList-pageLoadingText\"),\n      onScroll: null,\n      onPullRefresh: null,\n      onPageLoading: null,\n      pageLoadMode: \"scrollBottom\",\n      nextButtonText: messageLocalization.format(\"dxList-nextButtonText\"),\n      grouped: false,\n      groupTemplate: \"group\",\n      usePopover: false,\n      showDropDownButton: false,\n      focusStateEnabled: false,\n      dropDownOptions: {\n        showTitle: true,\n        width: function () {\n          return .8 * getWidth(window);\n        },\n        height: function () {\n          return .8 * getHeight(window);\n        },\n        shading: true,\n        hideOnOutsideClick: false,\n        position: void 0,\n        visualContainer: void 0,\n        animation: {},\n        title: \"\",\n        titleTemplate: \"title\",\n        onTitleRendered: null,\n        fullScreen: false\n      },\n      dropDownCentered: false,\n      _scrollToSelectedItemEnabled: false,\n      useHiddenSubmitElement: true\n    });\n  },\n\n  _setDeprecatedOptions() {\n    this.callBase();\n    extend(this._deprecatedOptions, {\n      valueChangeEvent: {\n        since: \"22.1\",\n        alias: \"searchStartEvent\"\n      }\n    });\n  },\n\n  _defaultOptionsRules: function () {\n    var themeName = current();\n    return this.callBase().concat([{\n      device: function () {\n        return !nativeScrolling;\n      },\n      options: {\n        useNativeScrolling: false\n      }\n    }, {\n      device: function (_device) {\n        return !devices.isSimulator() && \"desktop\" === devices.real().deviceType && \"generic\" === _device.platform;\n      },\n      options: {\n        usePopover: true,\n        dropDownOptions: {\n          height: \"auto\"\n        }\n      }\n    }, {\n      device: {\n        platform: \"ios\",\n        phone: true\n      },\n      options: {\n        dropDownOptions: {\n          fullScreen: true\n        }\n      }\n    }, {\n      device: {\n        platform: \"ios\",\n        tablet: true\n      },\n      options: {\n        dropDownOptions: {\n          width: function () {\n            return .4 * Math.min(getWidth(window), getHeight(window));\n          },\n          height: \"auto\"\n        },\n        usePopover: true\n      }\n    }, {\n      device: function () {\n        return \"desktop\" === devices.real().deviceType && !devices.isSimulator();\n      },\n      options: {\n        focusStateEnabled: true\n      }\n    }, {\n      device: function () {\n        return isMaterial(themeName);\n      },\n      options: {\n        usePopover: false,\n        searchEnabled: false,\n        showCancelButton: false,\n        dropDownCentered: true,\n        _scrollToSelectedItemEnabled: true,\n        dropDownOptions: {\n          hideOnOutsideClick: true,\n          _ignoreFunctionValueDeprecation: true,\n          width: () => getElementWidth(this.$element()),\n          height: function () {\n            return this._getPopupHeight();\n          }.bind(this),\n          showTitle: false,\n          shading: false\n        }\n      }\n    }]);\n  },\n  _init: function () {\n    this.callBase();\n\n    this._initActions();\n  },\n\n  _initActions() {\n    this.callBase();\n\n    this._initScrollAction();\n\n    this._initPageLoadingAction();\n\n    this._initPullRefreshAction();\n  },\n\n  _initPageLoadingAction: function () {\n    this._pageLoadingAction = this._createActionByOption(\"onPageLoading\");\n  },\n  _initPullRefreshAction: function () {\n    this._pullRefreshAction = this._createActionByOption(\"onPullRefresh\");\n  },\n  _initScrollAction: function () {\n    this._scrollAction = this._createActionByOption(\"onScroll\");\n  },\n  _scrollHandler: function (e) {\n    this._scrollAction(e);\n  },\n  _pullRefreshHandler: function (e) {\n    this._pullRefreshAction(e);\n  },\n  _pageLoadingHandler: function (e) {\n    this._pageLoadingAction(e);\n  },\n  _initTemplates: function () {\n    this.callBase();\n\n    this._templateManager.addDefaultTemplates({\n      group: new ChildDefaultTemplate(\"group\"),\n      title: new ChildDefaultTemplate(\"title\")\n    });\n  },\n  _initMarkup: function () {\n    this.$element().addClass(LOOKUP_CLASS).toggleClass(LOOKUP_POPOVER_MODE, this.option(\"usePopover\"));\n    this.callBase();\n  },\n  _inputWrapper: function () {\n    return this.$element().find(\".\" + LOOKUP_FIELD_WRAPPER_CLASS);\n  },\n  _dataSourceOptions: function () {\n    return extend(this.callBase(), {\n      paginate: true\n    });\n  },\n  _fireContentReadyAction: noop,\n  _popupWrapperClass: function () {\n    return \"\";\n  },\n  _renderInput: function () {\n    var fieldClickAction = this._createAction(() => {\n      this._toggleOpenState();\n    });\n\n    this._$field = $(\"<div>\").addClass(LOOKUP_FIELD_CLASS);\n    eventsEngine.on(this._$field, addNamespace(clickEventName, this.NAME), e => {\n      fieldClickAction({\n        event: e\n      });\n    });\n    var $arrow = $(\"<div>\").addClass(LOOKUP_ARROW_CLASS);\n    this._$fieldWrapper = $(\"<div>\").addClass(LOOKUP_FIELD_WRAPPER_CLASS).append(this._$field).append($arrow).appendTo(this.$element());\n  },\n\n  _getInputContainer() {\n    return this._$fieldWrapper;\n  },\n\n  _renderField: function () {\n    var fieldTemplate = this._getTemplateByOption(\"fieldTemplate\");\n\n    if (fieldTemplate && this.option(\"fieldTemplate\")) {\n      this._renderFieldTemplate(fieldTemplate);\n\n      return;\n    }\n\n    var displayValue = this.option(\"displayValue\");\n\n    this._updateField(displayValue);\n\n    this.$element().toggleClass(LOOKUP_EMPTY_CLASS, !this.option(\"selectedItem\"));\n  },\n  _getLabelContainer: function () {\n    return this._$field;\n  },\n  _renderDisplayText: function (text) {\n    if (this._input().length) {\n      this.callBase(text);\n    } else {\n      this._updateField(text);\n    }\n  },\n  _updateField: function (text) {\n    text = isDefined(text) && String(text) || this.option(\"placeholder\");\n\n    this._$field.text(text);\n  },\n  _renderFieldTemplate: function (template) {\n    this._$field.empty();\n\n    var data = this._fieldRenderData();\n\n    template.render({\n      model: data,\n      container: getPublicElement(this._$field)\n    });\n  },\n  _fieldRenderData: function () {\n    return this.option(\"selectedItem\");\n  },\n  _popupShowingHandler: function () {\n    this.callBase.apply(this, arguments);\n\n    if (this.option(\"cleanSearchOnOpening\")) {\n      if (this.option(\"searchEnabled\") && this._searchBox.option(\"value\")) {\n        this._searchBox.option(\"value\", \"\");\n\n        this._searchCanceled();\n      }\n\n      this._list && this._list.option(\"focusedElement\", null);\n    }\n\n    if (this.option(\"dropDownOptions.fullScreen\") && this.option(\"_scrollToSelectedItemEnabled\")) {\n      this._popup.option(\"position\").of = $(window);\n    }\n  },\n  _popupShownHandler: function () {\n    var scrollToSelectedItemEnabled = this.option(\"_scrollToSelectedItemEnabled\");\n    var fullScreen = this.option(\"dropDownOptions.fullScreen\");\n\n    if (!fullScreen && scrollToSelectedItemEnabled) {\n      this._setPopupPosition();\n    }\n\n    this.callBase();\n  },\n  _scrollToSelectedItem: function () {\n    var selectedIndex = this._list.option(\"selectedIndex\");\n\n    var listItems = this._list.option(\"items\");\n\n    var itemsCount = listItems.length;\n\n    if (0 !== itemsCount) {\n      if (this._list.option(\"grouped\")) {\n        this._list.scrollToItem({\n          group: itemsCount - 1,\n          item: listItems[itemsCount - 1].items.length - 1\n        });\n      } else {\n        this._list.scrollToItem(itemsCount - 1);\n      }\n\n      this._list.scrollToItem(selectedIndex);\n    }\n  },\n  _getDifferenceOffsets: function (selectedListItem) {\n    return selectedListItem.offset().top - $(this.element()).offset().top;\n  },\n  _isCenteringEnabled: (index, count) => 1 < index && index < count - 2,\n  _getPopupOffset: function () {\n    var listItemsCount = this._listItemElements().length;\n\n    if (0 === listItemsCount) {\n      return;\n    }\n\n    var selectedListItem = $(this._list.element()).find(\".\" + LIST_ITEM_SELECTED_CLASS);\n\n    var selectedIndex = this._listItemElements().index(selectedListItem);\n\n    var differenceOfHeights = (getHeight(selectedListItem) - getHeight(this.element())) / 2;\n    var lookupOffset = $(this._list.element()).offset().top;\n    var dropDownHeightOption = this.option(\"dropDownOptions.height\");\n    var popupHeight = \"function\" === typeof dropDownHeightOption ? dropDownHeightOption() : dropDownHeightOption;\n    var windowHeight = getHeight(window);\n    var offsetTop = 0;\n\n    if (-1 !== selectedIndex) {\n      if (this._isCenteringEnabled(selectedIndex, listItemsCount)) {\n        this._scrollToSelectedItem();\n\n        var scrollOffsetTop = (popupHeight - getHeight(selectedListItem)) / 2 - this._getDifferenceOffsets(selectedListItem);\n\n        this._list.scrollTo(this._list.scrollTop() + MATERIAL_LOOKUP_LIST_PADDING / 2 - scrollOffsetTop);\n\n        offsetTop = differenceOfHeights + this._getDifferenceOffsets(selectedListItem);\n\n        if (lookupOffset < offsetTop && selectedIndex !== listItemsCount - 3) {\n          this._list.scrollTo(this._list.scrollTop() + this._getDifferenceOffsets(selectedListItem) / 2);\n\n          offsetTop = differenceOfHeights + this._getDifferenceOffsets(selectedListItem);\n        }\n      } else if (selectedIndex <= 1) {\n        this._list.scrollTo(0);\n\n        offsetTop = differenceOfHeights + this._getDifferenceOffsets(selectedListItem);\n      } else if (selectedIndex >= listItemsCount - 2) {\n        this._scrollToSelectedItem();\n\n        offsetTop = differenceOfHeights + this._getDifferenceOffsets(selectedListItem);\n      }\n\n      if (lookupOffset < offsetTop) {\n        this._scrollToSelectedItem();\n\n        offsetTop = differenceOfHeights + MATERIAL_LOOKUP_LIST_PADDING;\n      }\n    }\n\n    var offsetBottom = popupHeight - offsetTop - getHeight(this.element());\n\n    if (windowHeight - lookupOffset < offsetBottom) {\n      this._list.scrollTo(this._list.scrollTop() + differenceOfHeights - offsetBottom);\n\n      offsetTop = popupHeight - getHeight(this.element()) - MATERIAL_LOOKUP_LIST_PADDING;\n    }\n\n    return offsetTop;\n  },\n  _setPopupPosition: function () {\n    if (!this.option(\"dropDownCentered\")) {\n      return;\n    }\n\n    var flipped = this._popup.$wrapper().hasClass(LOOKUP_POPOVER_FLIP_VERTICAL_CLASS);\n\n    if (flipped) {\n      return;\n    }\n\n    var popupContentParent = $(this._popup.$content()).parent();\n\n    var popupOffset = this._getPopupOffset();\n\n    var position = locate(popupContentParent);\n    move(popupContentParent, {\n      top: position.top - popupOffset\n    });\n  },\n  _listItemGroupedElements: function () {\n    var groups = this._list._itemContainer().children();\n\n    var items = [];\n    groups.each((_, group) => {\n      items.push($(group).find(\".\" + GROUP_LIST_HEADER_CLASS)[0]);\n      var groupedItems = $(group).find(\".\" + LIST_ITEM_CLASS);\n      groupedItems.each((_, item) => {\n        items.push(item);\n      });\n    });\n    return $(items);\n  },\n  _calculateListHeight: function (grouped) {\n    var listItems = grouped ? this._listItemGroupedElements() : this._listItemElements();\n    var selectedListItem = $(\".\" + LIST_ITEM_SELECTED_CLASS);\n    var selectedIndex = listItems.index(selectedListItem);\n    var listHeight = 0;\n    var requireListItems = [];\n\n    if (0 === listItems.length) {\n      listHeight += MATERIAL_LOOKUP_LIST_PADDING;\n    } else if (listItems.length < MATERIAL_LOOKUP_LIST_ITEMS_COUNT) {\n      listItems.each((_, item) => {\n        listHeight += getOuterHeight(item);\n      });\n    } else {\n      if (selectedIndex <= 1) {\n        requireListItems = listItems.slice(0, MATERIAL_LOOKUP_LIST_ITEMS_COUNT);\n      } else if (this._isCenteringEnabled(selectedIndex, listItems.length)) {\n        requireListItems = listItems.slice(selectedIndex - 2, selectedIndex + 3);\n      } else {\n        requireListItems = listItems.slice(listItems.length - MATERIAL_LOOKUP_LIST_ITEMS_COUNT, listItems.length);\n      }\n\n      requireListItems.each((_, item) => {\n        listHeight += getOuterHeight(item);\n      });\n    }\n\n    return listHeight + (grouped ? MATERIAL_LOOKUP_LIST_PADDING : 2 * MATERIAL_LOOKUP_LIST_PADDING);\n  },\n  _getPopupHeight: function () {\n    var _this$_list;\n\n    if (null !== (_this$_list = this._list) && void 0 !== _this$_list && _this$_list.itemElements().length) {\n      return this._calculateListHeight(this.option(\"grouped\")) + (this._$searchWrapper ? getOuterHeight(this._$searchWrapper) : 0) + (this._popup._$bottom ? getOuterHeight(this._popup._$bottom) : 0) + (this._popup._$title ? getOuterHeight(this._popup._$title) : 0);\n    } else {\n      return \"auto\";\n    }\n  },\n  _renderPopup: function () {\n    if (this.option(\"usePopover\") && !this.option(\"dropDownOptions.fullScreen\")) {\n      if (this.option(\"_scrollToSelectedItemEnabled\")) {\n        this.callBase();\n      } else {\n        this._renderPopover();\n      }\n    } else {\n      this.callBase();\n    }\n\n    this._$popup.addClass(LOOKUP_POPUP_CLASS);\n\n    this._popup.$wrapper().addClass(LOOKUP_POPUP_WRAPPER_CLASS);\n  },\n  _renderPopover: function () {\n    this._popup = this._createComponent(this._$popup, Popover, extend(this._popupConfig(), this._options.cache(\"dropDownOptions\"), {\n      showEvent: null,\n      hideEvent: null,\n      target: this.$element(),\n      visualContainer: this.$element(),\n      fullScreen: false,\n      shading: false,\n      hideOnParentScroll: true,\n      _fixWrapperPosition: false,\n      width: this._isInitialOptionValue(\"dropDownOptions.width\") ? function () {\n        return getOuterWidth(this.$element());\n      }.bind(this) : this._popupConfig().width\n    }));\n\n    this._popup.on({\n      showing: this._popupShowingHandler.bind(this),\n      shown: this._popupShownHandler.bind(this),\n      hiding: this._popupHidingHandler.bind(this),\n      hidden: this._popupHiddenHandler.bind(this),\n      contentReady: this._contentReadyHandler.bind(this)\n    });\n\n    if (this.option(\"_scrollToSelectedItemEnabled\")) {\n      this._popup._$arrow.remove();\n    }\n\n    this._setPopupContentId(this._popup.$content());\n\n    this._contentReadyHandler();\n  },\n  _popupHidingHandler: function () {\n    this.callBase();\n    this.option(\"focusStateEnabled\") && this.focus();\n  },\n  _popupHiddenHandler: function () {\n    this.callBase();\n\n    if (this.option(\"_scrollToSelectedItemEnabled\")) {\n      resetPosition($(this._popup.content()).parent());\n    }\n  },\n  _preventFocusOnPopup: noop,\n  _popupConfig: function () {\n    var result = extend(this.callBase(), {\n      toolbarItems: this._getPopupToolbarItems(),\n      hideOnParentScroll: false,\n      onPositioned: null,\n      maxHeight: \"100vh\",\n      showTitle: this.option(\"dropDownOptions.showTitle\"),\n      title: this.option(\"dropDownOptions.title\"),\n      titleTemplate: this._getTemplateByOption(\"dropDownOptions.titleTemplate\"),\n      onTitleRendered: this.option(\"dropDownOptions.onTitleRendered\"),\n      fullScreen: this.option(\"dropDownOptions.fullScreen\"),\n      shading: this.option(\"dropDownOptions.shading\"),\n      hideOnOutsideClick: this.option(\"dropDownOptions.hideOnOutsideClick\") || this.option(\"dropDownOptions.closeOnOutsideClick\")\n    });\n    delete result.animation;\n    delete result.position;\n    delete result.visualContainer;\n\n    if (this.option(\"_scrollToSelectedItemEnabled\")) {\n      result.position = this.option(\"dropDownCentered\") ? {\n        my: \"left top\",\n        at: \"left top\",\n        of: this.element()\n      } : {\n        my: \"left top\",\n        at: \"left bottom\",\n        of: this.element()\n      };\n      result.visualContainer = this.$element();\n      result.hideOnParentScroll = true;\n    }\n\n    each([\"position\", \"animation\", \"width\", \"height\", \"visualContainer\"], (_, optionName) => {\n      var popupOptionValue = this.option(\"dropDownOptions.\".concat(optionName));\n\n      if (void 0 !== popupOptionValue) {\n        result[optionName] = popupOptionValue;\n      }\n    });\n    return result;\n  },\n  _getPopupToolbarItems: function () {\n    var buttonsConfig = \"useButtons\" === this.option(\"applyValueMode\") ? this._popupToolbarItemsConfig() : [];\n\n    var cancelButton = this._getCancelButtonConfig();\n\n    if (cancelButton) {\n      buttonsConfig.push(cancelButton);\n    }\n\n    var clearButton = this._getClearButtonConfig();\n\n    if (clearButton) {\n      buttonsConfig.push(clearButton);\n    }\n\n    return this._applyButtonsLocation(buttonsConfig);\n  },\n  _popupToolbarItemsConfig: function () {\n    return [{\n      shortcut: \"done\",\n      options: {\n        onClick: this._applyButtonHandler.bind(this),\n        text: this.option(\"applyButtonText\")\n      }\n    }];\n  },\n  _getCancelButtonConfig: function () {\n    return this.option(\"showCancelButton\") ? {\n      shortcut: \"cancel\",\n      onClick: this._cancelButtonHandler.bind(this),\n      options: {\n        onInitialized: e => {\n          e.component.registerKeyHandler(\"escape\", this.close.bind(this));\n        },\n        text: this.option(\"cancelButtonText\")\n      }\n    } : null;\n  },\n  _getClearButtonConfig: function () {\n    return this.option(\"showClearButton\") ? {\n      shortcut: \"clear\",\n      onClick: this._resetValue.bind(this),\n      options: {\n        text: this.option(\"clearButtonText\")\n      }\n    } : null;\n  },\n  _applyButtonHandler: function (args) {\n    if (args) {\n      this._saveValueChangeEvent(args.event);\n    }\n\n    this.option(\"value\", this._valueGetter(this._currentSelectedItem()));\n    this.callBase();\n  },\n  _cancelButtonHandler: function () {\n    this._refreshSelected();\n\n    this.callBase();\n  },\n  _refreshPopupVisibility: function () {\n    if (this.option(\"opened\")) {\n      this._updatePopupDimensions();\n    }\n  },\n  _dimensionChanged: function () {\n    if (this.option(\"usePopover\") && !this.option(\"dropDownOptions.width\")) {\n      this.option(\"dropDownOptions.width\", getWidth(this.$element()));\n    }\n\n    this._popup && this._updatePopupDimensions();\n  },\n  _input: function () {\n    return this._$searchBox || this.callBase();\n  },\n  _renderPopupContent: function () {\n    this.callBase();\n\n    this._renderSearch();\n  },\n  _renderValueChangeEvent: noop,\n  _renderSearch: function () {\n    var isSearchEnabled = this.option(\"searchEnabled\");\n\n    this._toggleSearchClass(isSearchEnabled);\n\n    if (isSearchEnabled) {\n      var $searchWrapper = this._$searchWrapper = $(\"<div>\").addClass(LOOKUP_SEARCH_WRAPPER_CLASS);\n      var $searchBox = this._$searchBox = $(\"<div>\").addClass(LOOKUP_SEARCH_CLASS).appendTo($searchWrapper);\n      var currentDevice = devices.current();\n      var searchMode = currentDevice.android ? \"text\" : \"search\";\n      var isKeyboardListeningEnabled = false;\n      this._searchBox = this._createComponent($searchBox, TextBox, {\n        onDisposing: () => isKeyboardListeningEnabled = false,\n        onFocusIn: () => isKeyboardListeningEnabled = true,\n        onFocusOut: () => isKeyboardListeningEnabled = false,\n        onKeyboardHandled: opts => isKeyboardListeningEnabled && this._list._keyboardHandler(opts),\n        mode: searchMode,\n        showClearButton: true,\n        valueChangeEvent: this.option(\"searchStartEvent\"),\n        onValueChanged: e => {\n          this._searchHandler(e);\n        }\n      });\n\n      this._registerSearchKeyHandlers();\n\n      $searchWrapper.insertBefore(this._$list);\n\n      this._setSearchPlaceholder();\n    }\n  },\n  _removeSearch: function () {\n    this._$searchWrapper && this._$searchWrapper.remove();\n    delete this._$searchWrapper;\n    this._$searchBox && this._$searchBox.remove();\n    delete this._$searchBox;\n    delete this._searchBox;\n  },\n  _selectListItemHandler: function (e) {\n    var $itemElement = $(this._list.option(\"focusedElement\"));\n\n    if (!$itemElement.length) {\n      return;\n    }\n\n    e.preventDefault();\n    e.target = $itemElement.get(0);\n\n    this._saveValueChangeEvent(e);\n\n    this._selectListItem(e.itemData, $itemElement);\n  },\n  _registerSearchKeyHandlers: function () {\n    this._searchBox.registerKeyHandler(\"escape\", this.close.bind(this));\n\n    this._searchBox.registerKeyHandler(\"enter\", this._selectListItemHandler.bind(this));\n\n    this._searchBox.registerKeyHandler(\"space\", this._selectListItemHandler.bind(this));\n\n    this._searchBox.registerKeyHandler(\"end\", noop);\n\n    this._searchBox.registerKeyHandler(\"home\", noop);\n  },\n  _toggleSearchClass: function (isSearchEnabled) {\n    if (this._popup) {\n      this._popup.$wrapper().toggleClass(LOOKUP_POPUP_SEARCH_CLASS, isSearchEnabled);\n    }\n  },\n  _setSearchPlaceholder: function () {\n    if (!this._$searchBox) {\n      return;\n    }\n\n    var minSearchLength = this.option(\"minSearchLength\");\n    var placeholder = this.option(\"searchPlaceholder\");\n\n    if (minSearchLength && placeholder === messageLocalization.format(\"Search\")) {\n      placeholder = messageLocalization.getFormatter(\"dxLookup-searchPlaceholder\")(minSearchLength);\n    }\n\n    this._searchBox.option(\"placeholder\", placeholder);\n  },\n  _setAriaTargetForList: noop,\n  _renderList: function () {\n    this.callBase();\n\n    this._list.registerKeyHandler(\"escape\", () => {\n      this.close();\n    });\n  },\n  _listConfig: function () {\n    return extend(this.callBase(), {\n      tabIndex: 0,\n      grouped: this.option(\"grouped\"),\n      groupTemplate: this._getTemplateByOption(\"groupTemplate\"),\n      pullRefreshEnabled: this.option(\"pullRefreshEnabled\"),\n      useNativeScrolling: this.option(\"useNativeScrolling\"),\n      pullingDownText: this.option(\"pullingDownText\"),\n      pulledDownText: this.option(\"pulledDownText\"),\n      refreshingText: this.option(\"refreshingText\"),\n      pageLoadingText: this.option(\"pageLoadingText\"),\n      onScroll: this._scrollHandler.bind(this),\n      onPullRefresh: this._pullRefreshHandler.bind(this),\n      onPageLoading: this._pageLoadingHandler.bind(this),\n      pageLoadMode: this.option(\"pageLoadMode\"),\n      nextButtonText: this.option(\"nextButtonText\"),\n      indicateLoading: this.option(\"searchEnabled\"),\n      onSelectionChanged: this._getSelectionChangedHandler()\n    });\n  },\n  _getSelectionChangedHandler: function () {\n    return this.option(\"showSelectionControls\") ? this._selectionChangeHandler.bind(this) : noop;\n  },\n  _listContentReadyHandler: function () {\n    this.callBase(...arguments);\n\n    this._refreshSelected();\n  },\n  _runWithoutCloseOnScroll: function (callback) {\n    var {\n      _scrollToSelectedItemEnabled: _scrollToSelectedItemEnabled\n    } = this.option();\n\n    var hideOnParentScroll = this._popup.option(\"hideOnParentScroll\");\n\n    if (!_scrollToSelectedItemEnabled) {\n      callback();\n    } else {\n      this._popup.option(\"hideOnParentScroll\", false);\n\n      callback();\n      this._hideOnParentScrollTimer = setTimeout(() => {\n        this._popup.option(\"hideOnParentScroll\", hideOnParentScroll);\n      });\n    }\n  },\n  _setFocusPolicy: function () {\n    if (!this.option(\"focusStateEnabled\")) {\n      return;\n    }\n\n    this._runWithoutCloseOnScroll(() => {\n      if (this.option(\"searchEnabled\")) {\n        this._searchBox.focus();\n      } else {\n        eventsEngine.trigger(this._$list, \"focus\");\n      }\n    });\n  },\n  _focusTarget: function () {\n    return this._$field;\n  },\n  _keyboardEventBindingTarget: function () {\n    return this._$field;\n  },\n  _listItemClickHandler: function (e) {\n    this._saveValueChangeEvent(e.event);\n\n    this._selectListItem(e.itemData, e.event.currentTarget);\n  },\n  _selectListItem: function (itemData, target) {\n    this._list.selectItem(target);\n\n    if (\"instantly\" === this.option(\"applyValueMode\")) {\n      this._applyButtonHandler();\n    }\n  },\n  _currentSelectedItem: function () {\n    return this.option(\"grouped\") ? this._list.option(\"selectedItems[0]\").items[0] : this._list.option(\"selectedItems[0]\");\n  },\n  _resetValue: function (e) {\n    this._saveValueChangeEvent(e.event);\n\n    this.option(\"value\", null);\n    this.option(\"opened\", false);\n  },\n  _searchValue: function () {\n    return this.option(\"searchEnabled\") && this._searchBox ? this._searchBox.option(\"value\") : \"\";\n  },\n  _renderInputValue: function () {\n    return this.callBase().always(() => {\n      this._refreshSelected();\n    });\n  },\n  _renderPlaceholder: function () {\n    if (0 === this.$element().find(\".\" + TEXTEDITOR_INPUT_CLASS).length) {\n      return;\n    }\n\n    this.callBase();\n  },\n  _clean: function () {\n    this._$fieldWrapper.remove();\n\n    clearTimeout(this._hideOnParentScrollTimer);\n    this._hideOnParentScrollTimer = null;\n    this._$searchBox = null;\n    this.callBase();\n  },\n  _optionChanged: function (args) {\n    var _this$_searchBox;\n\n    var {\n      name: name,\n      fullName: fullName,\n      value: value\n    } = args;\n\n    switch (name) {\n      case \"dataSource\":\n        this.callBase(...arguments);\n\n        this._renderField();\n\n        break;\n\n      case \"searchEnabled\":\n        if (this._popup) {\n          this._removeSearch();\n\n          this._renderSearch();\n        }\n\n        break;\n\n      case \"searchPlaceholder\":\n        this._setSearchPlaceholder();\n\n        break;\n\n      case \"minSearchLength\":\n        this._setSearchPlaceholder();\n\n        this.callBase(...arguments);\n        break;\n\n      case \"usePopover\":\n      case \"placeholder\":\n        this._invalidate();\n\n        break;\n\n      case \"clearButtonText\":\n      case \"showClearButton\":\n      case \"showCancelButton\":\n        this._setPopupOption(\"toolbarItems\", this._getPopupToolbarItems());\n\n        break;\n\n      case \"applyValueMode\":\n        this.callBase(...arguments);\n        break;\n\n      case \"onPageLoading\":\n        this._initPageLoadingAction();\n\n        break;\n\n      case \"onPullRefresh\":\n        this._initPullRefreshAction();\n\n        break;\n\n      case \"pullRefreshEnabled\":\n      case \"useNativeScrolling\":\n      case \"pullingDownText\":\n      case \"pulledDownText\":\n      case \"refreshingText\":\n      case \"pageLoadingText\":\n      case \"nextButtonText\":\n      case \"grouped\":\n      case \"groupTemplate\":\n        this._setListOption(name);\n\n        break;\n\n      case \"searchStartEvent\":\n        null === (_this$_searchBox = this._searchBox) || void 0 === _this$_searchBox ? void 0 : _this$_searchBox.option(\"valueChangeEvent\", value);\n        break;\n\n      case \"onScroll\":\n        this._initScrollAction();\n\n        break;\n\n      case \"pageLoadMode\":\n        this._setListOption(\"pageLoadMode\", this.option(\"pageLoadMode\"));\n\n        break;\n\n      case \"cleanSearchOnOpening\":\n      case \"_scrollToSelectedItemEnabled\":\n        break;\n\n      case \"dropDownOptions\":\n        switch (fullName) {\n          case \"dropDownOptions.width\":\n          case \"dropDownOptions.height\":\n            this._popupOptionChanged({\n              name: name,\n              fullName: fullName,\n              value: \"auto\" === value ? this.initialOption(\"dropDownOptions\")[getFieldName(fullName)] : value\n            });\n\n            this._options.cache(\"dropDownOptions\", this.option(\"dropDownOptions\"));\n\n            break;\n\n          default:\n            this.callBase(...arguments);\n        }\n\n        break;\n\n      case \"dropDownCentered\":\n        if (this.option(\"_scrollToSelectedItemEnabled\")) {\n          this.option(\"dropDownOptions.position\", void 0);\n\n          this._renderPopup();\n        }\n\n        break;\n\n      default:\n        this.callBase(...arguments);\n    }\n  },\n  focus: function () {\n    this.option(\"opened\") ? this._setFocusPolicy() : eventsEngine.trigger(this._focusTarget(), \"focus\");\n  },\n  field: function () {\n    return this._$field;\n  }\n});\nregisterComponent(\"dxLookup\", Lookup);\nexport default Lookup;","map":{"version":3,"names":["getWidth","getHeight","getOuterHeight","getOuterWidth","$","eventsEngine","getWindow","window","nativeScrolling","noop","getPublicElement","each","extend","getFieldName","messageLocalization","devices","registerComponent","addNamespace","DropDownList","current","isMaterial","name","clickEventName","Popover","TextBox","ChildDefaultTemplate","locate","move","resetPosition","isDefined","getElementWidth","LOOKUP_CLASS","LOOKUP_SEARCH_CLASS","LOOKUP_SEARCH_WRAPPER_CLASS","LOOKUP_FIELD_CLASS","LOOKUP_ARROW_CLASS","LOOKUP_FIELD_WRAPPER_CLASS","LOOKUP_POPUP_CLASS","LOOKUP_POPUP_WRAPPER_CLASS","LOOKUP_POPUP_SEARCH_CLASS","LOOKUP_POPOVER_MODE","LOOKUP_EMPTY_CLASS","LOOKUP_POPOVER_FLIP_VERTICAL_CLASS","TEXTEDITOR_INPUT_CLASS","LIST_ITEM_CLASS","LIST_ITEM_SELECTED_CLASS","GROUP_LIST_HEADER_CLASS","MATERIAL_LOOKUP_LIST_ITEMS_COUNT","MATERIAL_LOOKUP_LIST_PADDING","Lookup","inherit","_supportedKeys","callBase","space","e","preventDefault","_validatedOpening","enter","_getDefaultOptions","placeholder","format","searchPlaceholder","searchEnabled","searchStartEvent","cleanSearchOnOpening","showCancelButton","showClearButton","clearButtonText","applyButtonText","pullRefreshEnabled","useNativeScrolling","pullingDownText","pulledDownText","refreshingText","pageLoadingText","onScroll","onPullRefresh","onPageLoading","pageLoadMode","nextButtonText","grouped","groupTemplate","usePopover","showDropDownButton","focusStateEnabled","dropDownOptions","showTitle","width","height","shading","hideOnOutsideClick","position","visualContainer","animation","title","titleTemplate","onTitleRendered","fullScreen","dropDownCentered","_scrollToSelectedItemEnabled","useHiddenSubmitElement","_setDeprecatedOptions","_deprecatedOptions","valueChangeEvent","since","alias","_defaultOptionsRules","themeName","concat","device","options","_device","isSimulator","real","deviceType","platform","phone","tablet","Math","min","_ignoreFunctionValueDeprecation","$element","_getPopupHeight","bind","_init","_initActions","_initScrollAction","_initPageLoadingAction","_initPullRefreshAction","_pageLoadingAction","_createActionByOption","_pullRefreshAction","_scrollAction","_scrollHandler","_pullRefreshHandler","_pageLoadingHandler","_initTemplates","_templateManager","addDefaultTemplates","group","_initMarkup","addClass","toggleClass","option","_inputWrapper","find","_dataSourceOptions","paginate","_fireContentReadyAction","_popupWrapperClass","_renderInput","fieldClickAction","_createAction","_toggleOpenState","_$field","on","NAME","event","$arrow","_$fieldWrapper","append","appendTo","_getInputContainer","_renderField","fieldTemplate","_getTemplateByOption","_renderFieldTemplate","displayValue","_updateField","_getLabelContainer","_renderDisplayText","text","_input","length","String","template","empty","data","_fieldRenderData","render","model","container","_popupShowingHandler","apply","arguments","_searchBox","_searchCanceled","_list","_popup","of","_popupShownHandler","scrollToSelectedItemEnabled","_setPopupPosition","_scrollToSelectedItem","selectedIndex","listItems","itemsCount","scrollToItem","item","items","_getDifferenceOffsets","selectedListItem","offset","top","element","_isCenteringEnabled","index","count","_getPopupOffset","listItemsCount","_listItemElements","differenceOfHeights","lookupOffset","dropDownHeightOption","popupHeight","windowHeight","offsetTop","scrollOffsetTop","scrollTo","scrollTop","offsetBottom","flipped","$wrapper","hasClass","popupContentParent","$content","parent","popupOffset","_listItemGroupedElements","groups","_itemContainer","children","_","push","groupedItems","_calculateListHeight","listHeight","requireListItems","slice","_this$_list","itemElements","_$searchWrapper","_$bottom","_$title","_renderPopup","_renderPopover","_$popup","_createComponent","_popupConfig","_options","cache","showEvent","hideEvent","target","hideOnParentScroll","_fixWrapperPosition","_isInitialOptionValue","showing","shown","hiding","_popupHidingHandler","hidden","_popupHiddenHandler","contentReady","_contentReadyHandler","_$arrow","remove","_setPopupContentId","focus","content","_preventFocusOnPopup","result","toolbarItems","_getPopupToolbarItems","onPositioned","maxHeight","my","at","optionName","popupOptionValue","buttonsConfig","_popupToolbarItemsConfig","cancelButton","_getCancelButtonConfig","clearButton","_getClearButtonConfig","_applyButtonsLocation","shortcut","onClick","_applyButtonHandler","_cancelButtonHandler","onInitialized","component","registerKeyHandler","close","_resetValue","args","_saveValueChangeEvent","_valueGetter","_currentSelectedItem","_refreshSelected","_refreshPopupVisibility","_updatePopupDimensions","_dimensionChanged","_$searchBox","_renderPopupContent","_renderSearch","_renderValueChangeEvent","isSearchEnabled","_toggleSearchClass","$searchWrapper","$searchBox","currentDevice","searchMode","android","isKeyboardListeningEnabled","onDisposing","onFocusIn","onFocusOut","onKeyboardHandled","opts","_keyboardHandler","mode","onValueChanged","_searchHandler","_registerSearchKeyHandlers","insertBefore","_$list","_setSearchPlaceholder","_removeSearch","_selectListItemHandler","$itemElement","get","_selectListItem","itemData","minSearchLength","getFormatter","_setAriaTargetForList","_renderList","_listConfig","tabIndex","indicateLoading","onSelectionChanged","_getSelectionChangedHandler","_selectionChangeHandler","_listContentReadyHandler","_runWithoutCloseOnScroll","callback","_hideOnParentScrollTimer","setTimeout","_setFocusPolicy","trigger","_focusTarget","_keyboardEventBindingTarget","_listItemClickHandler","currentTarget","selectItem","_searchValue","_renderInputValue","always","_renderPlaceholder","_clean","clearTimeout","_optionChanged","_this$_searchBox","fullName","value","_invalidate","_setPopupOption","_setListOption","_popupOptionChanged","initialOption","field"],"sources":["E:/MisaProject/W2022_06/misa_emis/node_modules/devextreme/esm/ui/lookup.js"],"sourcesContent":["/**\r\n * DevExtreme (esm/ui/lookup.js)\r\n * Version: 22.1.4\r\n * Build date: Fri Jul 22 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport {\r\n    getWidth,\r\n    getHeight,\r\n    getOuterHeight,\r\n    getOuterWidth\r\n} from \"../core/utils/size\";\r\nimport $ from \"../core/renderer\";\r\nimport eventsEngine from \"../events/core/events_engine\";\r\nimport {\r\n    getWindow\r\n} from \"../core/utils/window\";\r\nvar window = getWindow();\r\nimport {\r\n    nativeScrolling\r\n} from \"../core/utils/support\";\r\nimport {\r\n    noop\r\n} from \"../core/utils/common\";\r\nimport {\r\n    getPublicElement\r\n} from \"../core/element\";\r\nimport {\r\n    each\r\n} from \"../core/utils/iterator\";\r\nimport {\r\n    extend\r\n} from \"../core/utils/extend\";\r\nimport {\r\n    getFieldName\r\n} from \"../core/options/utils\";\r\nimport messageLocalization from \"../localization/message\";\r\nimport devices from \"../core/devices\";\r\nimport registerComponent from \"../core/component_registrator\";\r\nimport {\r\n    addNamespace\r\n} from \"../events/utils/index\";\r\nimport DropDownList from \"./drop_down_editor/ui.drop_down_list\";\r\nimport {\r\n    current,\r\n    isMaterial\r\n} from \"./themes\";\r\nimport {\r\n    name as clickEventName\r\n} from \"../events/click\";\r\nimport Popover from \"./popover\";\r\nimport TextBox from \"./text_box\";\r\nimport {\r\n    ChildDefaultTemplate\r\n} from \"../core/templates/child_default_template\";\r\nimport {\r\n    locate,\r\n    move,\r\n    resetPosition\r\n} from \"../animation/translator\";\r\nimport {\r\n    isDefined\r\n} from \"../core/utils/type\";\r\nimport {\r\n    getElementWidth\r\n} from \"./drop_down_editor/utils\";\r\nvar LOOKUP_CLASS = \"dx-lookup\";\r\nvar LOOKUP_SEARCH_CLASS = \"dx-lookup-search\";\r\nvar LOOKUP_SEARCH_WRAPPER_CLASS = \"dx-lookup-search-wrapper\";\r\nvar LOOKUP_FIELD_CLASS = \"dx-lookup-field\";\r\nvar LOOKUP_ARROW_CLASS = \"dx-lookup-arrow\";\r\nvar LOOKUP_FIELD_WRAPPER_CLASS = \"dx-lookup-field-wrapper\";\r\nvar LOOKUP_POPUP_CLASS = \"dx-lookup-popup\";\r\nvar LOOKUP_POPUP_WRAPPER_CLASS = \"dx-lookup-popup-wrapper\";\r\nvar LOOKUP_POPUP_SEARCH_CLASS = \"dx-lookup-popup-search\";\r\nvar LOOKUP_POPOVER_MODE = \"dx-lookup-popover-mode\";\r\nvar LOOKUP_EMPTY_CLASS = \"dx-lookup-empty\";\r\nvar LOOKUP_POPOVER_FLIP_VERTICAL_CLASS = \"dx-popover-flipped-vertical\";\r\nvar TEXTEDITOR_INPUT_CLASS = \"dx-texteditor-input\";\r\nvar LIST_ITEM_CLASS = \"dx-list-item\";\r\nvar LIST_ITEM_SELECTED_CLASS = \"dx-list-item-selected\";\r\nvar GROUP_LIST_HEADER_CLASS = \"dx-list-group-header\";\r\nvar MATERIAL_LOOKUP_LIST_ITEMS_COUNT = 5;\r\nvar MATERIAL_LOOKUP_LIST_PADDING = 8;\r\nvar Lookup = DropDownList.inherit({\r\n    _supportedKeys: function() {\r\n        return extend(this.callBase(), {\r\n            space: function(e) {\r\n                e.preventDefault();\r\n                this._validatedOpening()\r\n            },\r\n            enter: function() {\r\n                this._validatedOpening()\r\n            }\r\n        })\r\n    },\r\n    _getDefaultOptions: function() {\r\n        return extend(this.callBase(), {\r\n            placeholder: messageLocalization.format(\"Select\"),\r\n            searchPlaceholder: messageLocalization.format(\"Search\"),\r\n            searchEnabled: true,\r\n            searchStartEvent: \"input change keyup\",\r\n            cleanSearchOnOpening: true,\r\n            showCancelButton: true,\r\n            showClearButton: false,\r\n            clearButtonText: messageLocalization.format(\"Clear\"),\r\n            applyButtonText: messageLocalization.format(\"OK\"),\r\n            pullRefreshEnabled: false,\r\n            useNativeScrolling: true,\r\n            pullingDownText: messageLocalization.format(\"dxList-pullingDownText\"),\r\n            pulledDownText: messageLocalization.format(\"dxList-pulledDownText\"),\r\n            refreshingText: messageLocalization.format(\"dxList-refreshingText\"),\r\n            pageLoadingText: messageLocalization.format(\"dxList-pageLoadingText\"),\r\n            onScroll: null,\r\n            onPullRefresh: null,\r\n            onPageLoading: null,\r\n            pageLoadMode: \"scrollBottom\",\r\n            nextButtonText: messageLocalization.format(\"dxList-nextButtonText\"),\r\n            grouped: false,\r\n            groupTemplate: \"group\",\r\n            usePopover: false,\r\n            showDropDownButton: false,\r\n            focusStateEnabled: false,\r\n            dropDownOptions: {\r\n                showTitle: true,\r\n                width: function() {\r\n                    return .8 * getWidth(window)\r\n                },\r\n                height: function() {\r\n                    return .8 * getHeight(window)\r\n                },\r\n                shading: true,\r\n                hideOnOutsideClick: false,\r\n                position: void 0,\r\n                visualContainer: void 0,\r\n                animation: {},\r\n                title: \"\",\r\n                titleTemplate: \"title\",\r\n                onTitleRendered: null,\r\n                fullScreen: false\r\n            },\r\n            dropDownCentered: false,\r\n            _scrollToSelectedItemEnabled: false,\r\n            useHiddenSubmitElement: true\r\n        })\r\n    },\r\n    _setDeprecatedOptions() {\r\n        this.callBase();\r\n        extend(this._deprecatedOptions, {\r\n            valueChangeEvent: {\r\n                since: \"22.1\",\r\n                alias: \"searchStartEvent\"\r\n            }\r\n        })\r\n    },\r\n    _defaultOptionsRules: function() {\r\n        var themeName = current();\r\n        return this.callBase().concat([{\r\n            device: function() {\r\n                return !nativeScrolling\r\n            },\r\n            options: {\r\n                useNativeScrolling: false\r\n            }\r\n        }, {\r\n            device: function(_device) {\r\n                return !devices.isSimulator() && \"desktop\" === devices.real().deviceType && \"generic\" === _device.platform\r\n            },\r\n            options: {\r\n                usePopover: true,\r\n                dropDownOptions: {\r\n                    height: \"auto\"\r\n                }\r\n            }\r\n        }, {\r\n            device: {\r\n                platform: \"ios\",\r\n                phone: true\r\n            },\r\n            options: {\r\n                dropDownOptions: {\r\n                    fullScreen: true\r\n                }\r\n            }\r\n        }, {\r\n            device: {\r\n                platform: \"ios\",\r\n                tablet: true\r\n            },\r\n            options: {\r\n                dropDownOptions: {\r\n                    width: function() {\r\n                        return .4 * Math.min(getWidth(window), getHeight(window))\r\n                    },\r\n                    height: \"auto\"\r\n                },\r\n                usePopover: true\r\n            }\r\n        }, {\r\n            device: function() {\r\n                return \"desktop\" === devices.real().deviceType && !devices.isSimulator()\r\n            },\r\n            options: {\r\n                focusStateEnabled: true\r\n            }\r\n        }, {\r\n            device: function() {\r\n                return isMaterial(themeName)\r\n            },\r\n            options: {\r\n                usePopover: false,\r\n                searchEnabled: false,\r\n                showCancelButton: false,\r\n                dropDownCentered: true,\r\n                _scrollToSelectedItemEnabled: true,\r\n                dropDownOptions: {\r\n                    hideOnOutsideClick: true,\r\n                    _ignoreFunctionValueDeprecation: true,\r\n                    width: () => getElementWidth(this.$element()),\r\n                    height: function() {\r\n                        return this._getPopupHeight()\r\n                    }.bind(this),\r\n                    showTitle: false,\r\n                    shading: false\r\n                }\r\n            }\r\n        }])\r\n    },\r\n    _init: function() {\r\n        this.callBase();\r\n        this._initActions()\r\n    },\r\n    _initActions() {\r\n        this.callBase();\r\n        this._initScrollAction();\r\n        this._initPageLoadingAction();\r\n        this._initPullRefreshAction()\r\n    },\r\n    _initPageLoadingAction: function() {\r\n        this._pageLoadingAction = this._createActionByOption(\"onPageLoading\")\r\n    },\r\n    _initPullRefreshAction: function() {\r\n        this._pullRefreshAction = this._createActionByOption(\"onPullRefresh\")\r\n    },\r\n    _initScrollAction: function() {\r\n        this._scrollAction = this._createActionByOption(\"onScroll\")\r\n    },\r\n    _scrollHandler: function(e) {\r\n        this._scrollAction(e)\r\n    },\r\n    _pullRefreshHandler: function(e) {\r\n        this._pullRefreshAction(e)\r\n    },\r\n    _pageLoadingHandler: function(e) {\r\n        this._pageLoadingAction(e)\r\n    },\r\n    _initTemplates: function() {\r\n        this.callBase();\r\n        this._templateManager.addDefaultTemplates({\r\n            group: new ChildDefaultTemplate(\"group\"),\r\n            title: new ChildDefaultTemplate(\"title\")\r\n        })\r\n    },\r\n    _initMarkup: function() {\r\n        this.$element().addClass(LOOKUP_CLASS).toggleClass(LOOKUP_POPOVER_MODE, this.option(\"usePopover\"));\r\n        this.callBase()\r\n    },\r\n    _inputWrapper: function() {\r\n        return this.$element().find(\".\" + LOOKUP_FIELD_WRAPPER_CLASS)\r\n    },\r\n    _dataSourceOptions: function() {\r\n        return extend(this.callBase(), {\r\n            paginate: true\r\n        })\r\n    },\r\n    _fireContentReadyAction: noop,\r\n    _popupWrapperClass: function() {\r\n        return \"\"\r\n    },\r\n    _renderInput: function() {\r\n        var fieldClickAction = this._createAction(() => {\r\n            this._toggleOpenState()\r\n        });\r\n        this._$field = $(\"<div>\").addClass(LOOKUP_FIELD_CLASS);\r\n        eventsEngine.on(this._$field, addNamespace(clickEventName, this.NAME), e => {\r\n            fieldClickAction({\r\n                event: e\r\n            })\r\n        });\r\n        var $arrow = $(\"<div>\").addClass(LOOKUP_ARROW_CLASS);\r\n        this._$fieldWrapper = $(\"<div>\").addClass(LOOKUP_FIELD_WRAPPER_CLASS).append(this._$field).append($arrow).appendTo(this.$element())\r\n    },\r\n    _getInputContainer() {\r\n        return this._$fieldWrapper\r\n    },\r\n    _renderField: function() {\r\n        var fieldTemplate = this._getTemplateByOption(\"fieldTemplate\");\r\n        if (fieldTemplate && this.option(\"fieldTemplate\")) {\r\n            this._renderFieldTemplate(fieldTemplate);\r\n            return\r\n        }\r\n        var displayValue = this.option(\"displayValue\");\r\n        this._updateField(displayValue);\r\n        this.$element().toggleClass(LOOKUP_EMPTY_CLASS, !this.option(\"selectedItem\"))\r\n    },\r\n    _getLabelContainer: function() {\r\n        return this._$field\r\n    },\r\n    _renderDisplayText: function(text) {\r\n        if (this._input().length) {\r\n            this.callBase(text)\r\n        } else {\r\n            this._updateField(text)\r\n        }\r\n    },\r\n    _updateField: function(text) {\r\n        text = isDefined(text) && String(text) || this.option(\"placeholder\");\r\n        this._$field.text(text)\r\n    },\r\n    _renderFieldTemplate: function(template) {\r\n        this._$field.empty();\r\n        var data = this._fieldRenderData();\r\n        template.render({\r\n            model: data,\r\n            container: getPublicElement(this._$field)\r\n        })\r\n    },\r\n    _fieldRenderData: function() {\r\n        return this.option(\"selectedItem\")\r\n    },\r\n    _popupShowingHandler: function() {\r\n        this.callBase.apply(this, arguments);\r\n        if (this.option(\"cleanSearchOnOpening\")) {\r\n            if (this.option(\"searchEnabled\") && this._searchBox.option(\"value\")) {\r\n                this._searchBox.option(\"value\", \"\");\r\n                this._searchCanceled()\r\n            }\r\n            this._list && this._list.option(\"focusedElement\", null)\r\n        }\r\n        if (this.option(\"dropDownOptions.fullScreen\") && this.option(\"_scrollToSelectedItemEnabled\")) {\r\n            this._popup.option(\"position\").of = $(window)\r\n        }\r\n    },\r\n    _popupShownHandler: function() {\r\n        var scrollToSelectedItemEnabled = this.option(\"_scrollToSelectedItemEnabled\");\r\n        var fullScreen = this.option(\"dropDownOptions.fullScreen\");\r\n        if (!fullScreen && scrollToSelectedItemEnabled) {\r\n            this._setPopupPosition()\r\n        }\r\n        this.callBase()\r\n    },\r\n    _scrollToSelectedItem: function() {\r\n        var selectedIndex = this._list.option(\"selectedIndex\");\r\n        var listItems = this._list.option(\"items\");\r\n        var itemsCount = listItems.length;\r\n        if (0 !== itemsCount) {\r\n            if (this._list.option(\"grouped\")) {\r\n                this._list.scrollToItem({\r\n                    group: itemsCount - 1,\r\n                    item: listItems[itemsCount - 1].items.length - 1\r\n                })\r\n            } else {\r\n                this._list.scrollToItem(itemsCount - 1)\r\n            }\r\n            this._list.scrollToItem(selectedIndex)\r\n        }\r\n    },\r\n    _getDifferenceOffsets: function(selectedListItem) {\r\n        return selectedListItem.offset().top - $(this.element()).offset().top\r\n    },\r\n    _isCenteringEnabled: (index, count) => 1 < index && index < count - 2,\r\n    _getPopupOffset: function() {\r\n        var listItemsCount = this._listItemElements().length;\r\n        if (0 === listItemsCount) {\r\n            return\r\n        }\r\n        var selectedListItem = $(this._list.element()).find(\".\" + LIST_ITEM_SELECTED_CLASS);\r\n        var selectedIndex = this._listItemElements().index(selectedListItem);\r\n        var differenceOfHeights = (getHeight(selectedListItem) - getHeight(this.element())) / 2;\r\n        var lookupOffset = $(this._list.element()).offset().top;\r\n        var dropDownHeightOption = this.option(\"dropDownOptions.height\");\r\n        var popupHeight = \"function\" === typeof dropDownHeightOption ? dropDownHeightOption() : dropDownHeightOption;\r\n        var windowHeight = getHeight(window);\r\n        var offsetTop = 0;\r\n        if (-1 !== selectedIndex) {\r\n            if (this._isCenteringEnabled(selectedIndex, listItemsCount)) {\r\n                this._scrollToSelectedItem();\r\n                var scrollOffsetTop = (popupHeight - getHeight(selectedListItem)) / 2 - this._getDifferenceOffsets(selectedListItem);\r\n                this._list.scrollTo(this._list.scrollTop() + MATERIAL_LOOKUP_LIST_PADDING / 2 - scrollOffsetTop);\r\n                offsetTop = differenceOfHeights + this._getDifferenceOffsets(selectedListItem);\r\n                if (lookupOffset < offsetTop && selectedIndex !== listItemsCount - 3) {\r\n                    this._list.scrollTo(this._list.scrollTop() + this._getDifferenceOffsets(selectedListItem) / 2);\r\n                    offsetTop = differenceOfHeights + this._getDifferenceOffsets(selectedListItem)\r\n                }\r\n            } else if (selectedIndex <= 1) {\r\n                this._list.scrollTo(0);\r\n                offsetTop = differenceOfHeights + this._getDifferenceOffsets(selectedListItem)\r\n            } else if (selectedIndex >= listItemsCount - 2) {\r\n                this._scrollToSelectedItem();\r\n                offsetTop = differenceOfHeights + this._getDifferenceOffsets(selectedListItem)\r\n            }\r\n            if (lookupOffset < offsetTop) {\r\n                this._scrollToSelectedItem();\r\n                offsetTop = differenceOfHeights + MATERIAL_LOOKUP_LIST_PADDING\r\n            }\r\n        }\r\n        var offsetBottom = popupHeight - offsetTop - getHeight(this.element());\r\n        if (windowHeight - lookupOffset < offsetBottom) {\r\n            this._list.scrollTo(this._list.scrollTop() + differenceOfHeights - offsetBottom);\r\n            offsetTop = popupHeight - getHeight(this.element()) - MATERIAL_LOOKUP_LIST_PADDING\r\n        }\r\n        return offsetTop\r\n    },\r\n    _setPopupPosition: function() {\r\n        if (!this.option(\"dropDownCentered\")) {\r\n            return\r\n        }\r\n        var flipped = this._popup.$wrapper().hasClass(LOOKUP_POPOVER_FLIP_VERTICAL_CLASS);\r\n        if (flipped) {\r\n            return\r\n        }\r\n        var popupContentParent = $(this._popup.$content()).parent();\r\n        var popupOffset = this._getPopupOffset();\r\n        var position = locate(popupContentParent);\r\n        move(popupContentParent, {\r\n            top: position.top - popupOffset\r\n        })\r\n    },\r\n    _listItemGroupedElements: function() {\r\n        var groups = this._list._itemContainer().children();\r\n        var items = [];\r\n        groups.each((_, group) => {\r\n            items.push($(group).find(\".\" + GROUP_LIST_HEADER_CLASS)[0]);\r\n            var groupedItems = $(group).find(\".\" + LIST_ITEM_CLASS);\r\n            groupedItems.each((_, item) => {\r\n                items.push(item)\r\n            })\r\n        });\r\n        return $(items)\r\n    },\r\n    _calculateListHeight: function(grouped) {\r\n        var listItems = grouped ? this._listItemGroupedElements() : this._listItemElements();\r\n        var selectedListItem = $(\".\" + LIST_ITEM_SELECTED_CLASS);\r\n        var selectedIndex = listItems.index(selectedListItem);\r\n        var listHeight = 0;\r\n        var requireListItems = [];\r\n        if (0 === listItems.length) {\r\n            listHeight += MATERIAL_LOOKUP_LIST_PADDING\r\n        } else if (listItems.length < MATERIAL_LOOKUP_LIST_ITEMS_COUNT) {\r\n            listItems.each((_, item) => {\r\n                listHeight += getOuterHeight(item)\r\n            })\r\n        } else {\r\n            if (selectedIndex <= 1) {\r\n                requireListItems = listItems.slice(0, MATERIAL_LOOKUP_LIST_ITEMS_COUNT)\r\n            } else if (this._isCenteringEnabled(selectedIndex, listItems.length)) {\r\n                requireListItems = listItems.slice(selectedIndex - 2, selectedIndex + 3)\r\n            } else {\r\n                requireListItems = listItems.slice(listItems.length - MATERIAL_LOOKUP_LIST_ITEMS_COUNT, listItems.length)\r\n            }\r\n            requireListItems.each((_, item) => {\r\n                listHeight += getOuterHeight(item)\r\n            })\r\n        }\r\n        return listHeight + (grouped ? MATERIAL_LOOKUP_LIST_PADDING : 2 * MATERIAL_LOOKUP_LIST_PADDING)\r\n    },\r\n    _getPopupHeight: function() {\r\n        var _this$_list;\r\n        if (null !== (_this$_list = this._list) && void 0 !== _this$_list && _this$_list.itemElements().length) {\r\n            return this._calculateListHeight(this.option(\"grouped\")) + (this._$searchWrapper ? getOuterHeight(this._$searchWrapper) : 0) + (this._popup._$bottom ? getOuterHeight(this._popup._$bottom) : 0) + (this._popup._$title ? getOuterHeight(this._popup._$title) : 0)\r\n        } else {\r\n            return \"auto\"\r\n        }\r\n    },\r\n    _renderPopup: function() {\r\n        if (this.option(\"usePopover\") && !this.option(\"dropDownOptions.fullScreen\")) {\r\n            if (this.option(\"_scrollToSelectedItemEnabled\")) {\r\n                this.callBase()\r\n            } else {\r\n                this._renderPopover()\r\n            }\r\n        } else {\r\n            this.callBase()\r\n        }\r\n        this._$popup.addClass(LOOKUP_POPUP_CLASS);\r\n        this._popup.$wrapper().addClass(LOOKUP_POPUP_WRAPPER_CLASS)\r\n    },\r\n    _renderPopover: function() {\r\n        this._popup = this._createComponent(this._$popup, Popover, extend(this._popupConfig(), this._options.cache(\"dropDownOptions\"), {\r\n            showEvent: null,\r\n            hideEvent: null,\r\n            target: this.$element(),\r\n            visualContainer: this.$element(),\r\n            fullScreen: false,\r\n            shading: false,\r\n            hideOnParentScroll: true,\r\n            _fixWrapperPosition: false,\r\n            width: this._isInitialOptionValue(\"dropDownOptions.width\") ? function() {\r\n                return getOuterWidth(this.$element())\r\n            }.bind(this) : this._popupConfig().width\r\n        }));\r\n        this._popup.on({\r\n            showing: this._popupShowingHandler.bind(this),\r\n            shown: this._popupShownHandler.bind(this),\r\n            hiding: this._popupHidingHandler.bind(this),\r\n            hidden: this._popupHiddenHandler.bind(this),\r\n            contentReady: this._contentReadyHandler.bind(this)\r\n        });\r\n        if (this.option(\"_scrollToSelectedItemEnabled\")) {\r\n            this._popup._$arrow.remove()\r\n        }\r\n        this._setPopupContentId(this._popup.$content());\r\n        this._contentReadyHandler()\r\n    },\r\n    _popupHidingHandler: function() {\r\n        this.callBase();\r\n        this.option(\"focusStateEnabled\") && this.focus()\r\n    },\r\n    _popupHiddenHandler: function() {\r\n        this.callBase();\r\n        if (this.option(\"_scrollToSelectedItemEnabled\")) {\r\n            resetPosition($(this._popup.content()).parent())\r\n        }\r\n    },\r\n    _preventFocusOnPopup: noop,\r\n    _popupConfig: function() {\r\n        var result = extend(this.callBase(), {\r\n            toolbarItems: this._getPopupToolbarItems(),\r\n            hideOnParentScroll: false,\r\n            onPositioned: null,\r\n            maxHeight: \"100vh\",\r\n            showTitle: this.option(\"dropDownOptions.showTitle\"),\r\n            title: this.option(\"dropDownOptions.title\"),\r\n            titleTemplate: this._getTemplateByOption(\"dropDownOptions.titleTemplate\"),\r\n            onTitleRendered: this.option(\"dropDownOptions.onTitleRendered\"),\r\n            fullScreen: this.option(\"dropDownOptions.fullScreen\"),\r\n            shading: this.option(\"dropDownOptions.shading\"),\r\n            hideOnOutsideClick: this.option(\"dropDownOptions.hideOnOutsideClick\") || this.option(\"dropDownOptions.closeOnOutsideClick\")\r\n        });\r\n        delete result.animation;\r\n        delete result.position;\r\n        delete result.visualContainer;\r\n        if (this.option(\"_scrollToSelectedItemEnabled\")) {\r\n            result.position = this.option(\"dropDownCentered\") ? {\r\n                my: \"left top\",\r\n                at: \"left top\",\r\n                of: this.element()\r\n            } : {\r\n                my: \"left top\",\r\n                at: \"left bottom\",\r\n                of: this.element()\r\n            };\r\n            result.visualContainer = this.$element();\r\n            result.hideOnParentScroll = true\r\n        }\r\n        each([\"position\", \"animation\", \"width\", \"height\", \"visualContainer\"], (_, optionName) => {\r\n            var popupOptionValue = this.option(\"dropDownOptions.\".concat(optionName));\r\n            if (void 0 !== popupOptionValue) {\r\n                result[optionName] = popupOptionValue\r\n            }\r\n        });\r\n        return result\r\n    },\r\n    _getPopupToolbarItems: function() {\r\n        var buttonsConfig = \"useButtons\" === this.option(\"applyValueMode\") ? this._popupToolbarItemsConfig() : [];\r\n        var cancelButton = this._getCancelButtonConfig();\r\n        if (cancelButton) {\r\n            buttonsConfig.push(cancelButton)\r\n        }\r\n        var clearButton = this._getClearButtonConfig();\r\n        if (clearButton) {\r\n            buttonsConfig.push(clearButton)\r\n        }\r\n        return this._applyButtonsLocation(buttonsConfig)\r\n    },\r\n    _popupToolbarItemsConfig: function() {\r\n        return [{\r\n            shortcut: \"done\",\r\n            options: {\r\n                onClick: this._applyButtonHandler.bind(this),\r\n                text: this.option(\"applyButtonText\")\r\n            }\r\n        }]\r\n    },\r\n    _getCancelButtonConfig: function() {\r\n        return this.option(\"showCancelButton\") ? {\r\n            shortcut: \"cancel\",\r\n            onClick: this._cancelButtonHandler.bind(this),\r\n            options: {\r\n                onInitialized: e => {\r\n                    e.component.registerKeyHandler(\"escape\", this.close.bind(this))\r\n                },\r\n                text: this.option(\"cancelButtonText\")\r\n            }\r\n        } : null\r\n    },\r\n    _getClearButtonConfig: function() {\r\n        return this.option(\"showClearButton\") ? {\r\n            shortcut: \"clear\",\r\n            onClick: this._resetValue.bind(this),\r\n            options: {\r\n                text: this.option(\"clearButtonText\")\r\n            }\r\n        } : null\r\n    },\r\n    _applyButtonHandler: function(args) {\r\n        if (args) {\r\n            this._saveValueChangeEvent(args.event)\r\n        }\r\n        this.option(\"value\", this._valueGetter(this._currentSelectedItem()));\r\n        this.callBase()\r\n    },\r\n    _cancelButtonHandler: function() {\r\n        this._refreshSelected();\r\n        this.callBase()\r\n    },\r\n    _refreshPopupVisibility: function() {\r\n        if (this.option(\"opened\")) {\r\n            this._updatePopupDimensions()\r\n        }\r\n    },\r\n    _dimensionChanged: function() {\r\n        if (this.option(\"usePopover\") && !this.option(\"dropDownOptions.width\")) {\r\n            this.option(\"dropDownOptions.width\", getWidth(this.$element()))\r\n        }\r\n        this._popup && this._updatePopupDimensions()\r\n    },\r\n    _input: function() {\r\n        return this._$searchBox || this.callBase()\r\n    },\r\n    _renderPopupContent: function() {\r\n        this.callBase();\r\n        this._renderSearch()\r\n    },\r\n    _renderValueChangeEvent: noop,\r\n    _renderSearch: function() {\r\n        var isSearchEnabled = this.option(\"searchEnabled\");\r\n        this._toggleSearchClass(isSearchEnabled);\r\n        if (isSearchEnabled) {\r\n            var $searchWrapper = this._$searchWrapper = $(\"<div>\").addClass(LOOKUP_SEARCH_WRAPPER_CLASS);\r\n            var $searchBox = this._$searchBox = $(\"<div>\").addClass(LOOKUP_SEARCH_CLASS).appendTo($searchWrapper);\r\n            var currentDevice = devices.current();\r\n            var searchMode = currentDevice.android ? \"text\" : \"search\";\r\n            var isKeyboardListeningEnabled = false;\r\n            this._searchBox = this._createComponent($searchBox, TextBox, {\r\n                onDisposing: () => isKeyboardListeningEnabled = false,\r\n                onFocusIn: () => isKeyboardListeningEnabled = true,\r\n                onFocusOut: () => isKeyboardListeningEnabled = false,\r\n                onKeyboardHandled: opts => isKeyboardListeningEnabled && this._list._keyboardHandler(opts),\r\n                mode: searchMode,\r\n                showClearButton: true,\r\n                valueChangeEvent: this.option(\"searchStartEvent\"),\r\n                onValueChanged: e => {\r\n                    this._searchHandler(e)\r\n                }\r\n            });\r\n            this._registerSearchKeyHandlers();\r\n            $searchWrapper.insertBefore(this._$list);\r\n            this._setSearchPlaceholder()\r\n        }\r\n    },\r\n    _removeSearch: function() {\r\n        this._$searchWrapper && this._$searchWrapper.remove();\r\n        delete this._$searchWrapper;\r\n        this._$searchBox && this._$searchBox.remove();\r\n        delete this._$searchBox;\r\n        delete this._searchBox\r\n    },\r\n    _selectListItemHandler: function(e) {\r\n        var $itemElement = $(this._list.option(\"focusedElement\"));\r\n        if (!$itemElement.length) {\r\n            return\r\n        }\r\n        e.preventDefault();\r\n        e.target = $itemElement.get(0);\r\n        this._saveValueChangeEvent(e);\r\n        this._selectListItem(e.itemData, $itemElement)\r\n    },\r\n    _registerSearchKeyHandlers: function() {\r\n        this._searchBox.registerKeyHandler(\"escape\", this.close.bind(this));\r\n        this._searchBox.registerKeyHandler(\"enter\", this._selectListItemHandler.bind(this));\r\n        this._searchBox.registerKeyHandler(\"space\", this._selectListItemHandler.bind(this));\r\n        this._searchBox.registerKeyHandler(\"end\", noop);\r\n        this._searchBox.registerKeyHandler(\"home\", noop)\r\n    },\r\n    _toggleSearchClass: function(isSearchEnabled) {\r\n        if (this._popup) {\r\n            this._popup.$wrapper().toggleClass(LOOKUP_POPUP_SEARCH_CLASS, isSearchEnabled)\r\n        }\r\n    },\r\n    _setSearchPlaceholder: function() {\r\n        if (!this._$searchBox) {\r\n            return\r\n        }\r\n        var minSearchLength = this.option(\"minSearchLength\");\r\n        var placeholder = this.option(\"searchPlaceholder\");\r\n        if (minSearchLength && placeholder === messageLocalization.format(\"Search\")) {\r\n            placeholder = messageLocalization.getFormatter(\"dxLookup-searchPlaceholder\")(minSearchLength)\r\n        }\r\n        this._searchBox.option(\"placeholder\", placeholder)\r\n    },\r\n    _setAriaTargetForList: noop,\r\n    _renderList: function() {\r\n        this.callBase();\r\n        this._list.registerKeyHandler(\"escape\", () => {\r\n            this.close()\r\n        })\r\n    },\r\n    _listConfig: function() {\r\n        return extend(this.callBase(), {\r\n            tabIndex: 0,\r\n            grouped: this.option(\"grouped\"),\r\n            groupTemplate: this._getTemplateByOption(\"groupTemplate\"),\r\n            pullRefreshEnabled: this.option(\"pullRefreshEnabled\"),\r\n            useNativeScrolling: this.option(\"useNativeScrolling\"),\r\n            pullingDownText: this.option(\"pullingDownText\"),\r\n            pulledDownText: this.option(\"pulledDownText\"),\r\n            refreshingText: this.option(\"refreshingText\"),\r\n            pageLoadingText: this.option(\"pageLoadingText\"),\r\n            onScroll: this._scrollHandler.bind(this),\r\n            onPullRefresh: this._pullRefreshHandler.bind(this),\r\n            onPageLoading: this._pageLoadingHandler.bind(this),\r\n            pageLoadMode: this.option(\"pageLoadMode\"),\r\n            nextButtonText: this.option(\"nextButtonText\"),\r\n            indicateLoading: this.option(\"searchEnabled\"),\r\n            onSelectionChanged: this._getSelectionChangedHandler()\r\n        })\r\n    },\r\n    _getSelectionChangedHandler: function() {\r\n        return this.option(\"showSelectionControls\") ? this._selectionChangeHandler.bind(this) : noop\r\n    },\r\n    _listContentReadyHandler: function() {\r\n        this.callBase(...arguments);\r\n        this._refreshSelected()\r\n    },\r\n    _runWithoutCloseOnScroll: function(callback) {\r\n        var {\r\n            _scrollToSelectedItemEnabled: _scrollToSelectedItemEnabled\r\n        } = this.option();\r\n        var hideOnParentScroll = this._popup.option(\"hideOnParentScroll\");\r\n        if (!_scrollToSelectedItemEnabled) {\r\n            callback()\r\n        } else {\r\n            this._popup.option(\"hideOnParentScroll\", false);\r\n            callback();\r\n            this._hideOnParentScrollTimer = setTimeout(() => {\r\n                this._popup.option(\"hideOnParentScroll\", hideOnParentScroll)\r\n            })\r\n        }\r\n    },\r\n    _setFocusPolicy: function() {\r\n        if (!this.option(\"focusStateEnabled\")) {\r\n            return\r\n        }\r\n        this._runWithoutCloseOnScroll(() => {\r\n            if (this.option(\"searchEnabled\")) {\r\n                this._searchBox.focus()\r\n            } else {\r\n                eventsEngine.trigger(this._$list, \"focus\")\r\n            }\r\n        })\r\n    },\r\n    _focusTarget: function() {\r\n        return this._$field\r\n    },\r\n    _keyboardEventBindingTarget: function() {\r\n        return this._$field\r\n    },\r\n    _listItemClickHandler: function(e) {\r\n        this._saveValueChangeEvent(e.event);\r\n        this._selectListItem(e.itemData, e.event.currentTarget)\r\n    },\r\n    _selectListItem: function(itemData, target) {\r\n        this._list.selectItem(target);\r\n        if (\"instantly\" === this.option(\"applyValueMode\")) {\r\n            this._applyButtonHandler()\r\n        }\r\n    },\r\n    _currentSelectedItem: function() {\r\n        return this.option(\"grouped\") ? this._list.option(\"selectedItems[0]\").items[0] : this._list.option(\"selectedItems[0]\")\r\n    },\r\n    _resetValue: function(e) {\r\n        this._saveValueChangeEvent(e.event);\r\n        this.option(\"value\", null);\r\n        this.option(\"opened\", false)\r\n    },\r\n    _searchValue: function() {\r\n        return this.option(\"searchEnabled\") && this._searchBox ? this._searchBox.option(\"value\") : \"\"\r\n    },\r\n    _renderInputValue: function() {\r\n        return this.callBase().always(() => {\r\n            this._refreshSelected()\r\n        })\r\n    },\r\n    _renderPlaceholder: function() {\r\n        if (0 === this.$element().find(\".\" + TEXTEDITOR_INPUT_CLASS).length) {\r\n            return\r\n        }\r\n        this.callBase()\r\n    },\r\n    _clean: function() {\r\n        this._$fieldWrapper.remove();\r\n        clearTimeout(this._hideOnParentScrollTimer);\r\n        this._hideOnParentScrollTimer = null;\r\n        this._$searchBox = null;\r\n        this.callBase()\r\n    },\r\n    _optionChanged: function(args) {\r\n        var _this$_searchBox;\r\n        var {\r\n            name: name,\r\n            fullName: fullName,\r\n            value: value\r\n        } = args;\r\n        switch (name) {\r\n            case \"dataSource\":\r\n                this.callBase(...arguments);\r\n                this._renderField();\r\n                break;\r\n            case \"searchEnabled\":\r\n                if (this._popup) {\r\n                    this._removeSearch();\r\n                    this._renderSearch()\r\n                }\r\n                break;\r\n            case \"searchPlaceholder\":\r\n                this._setSearchPlaceholder();\r\n                break;\r\n            case \"minSearchLength\":\r\n                this._setSearchPlaceholder();\r\n                this.callBase(...arguments);\r\n                break;\r\n            case \"usePopover\":\r\n            case \"placeholder\":\r\n                this._invalidate();\r\n                break;\r\n            case \"clearButtonText\":\r\n            case \"showClearButton\":\r\n            case \"showCancelButton\":\r\n                this._setPopupOption(\"toolbarItems\", this._getPopupToolbarItems());\r\n                break;\r\n            case \"applyValueMode\":\r\n                this.callBase(...arguments);\r\n                break;\r\n            case \"onPageLoading\":\r\n                this._initPageLoadingAction();\r\n                break;\r\n            case \"onPullRefresh\":\r\n                this._initPullRefreshAction();\r\n                break;\r\n            case \"pullRefreshEnabled\":\r\n            case \"useNativeScrolling\":\r\n            case \"pullingDownText\":\r\n            case \"pulledDownText\":\r\n            case \"refreshingText\":\r\n            case \"pageLoadingText\":\r\n            case \"nextButtonText\":\r\n            case \"grouped\":\r\n            case \"groupTemplate\":\r\n                this._setListOption(name);\r\n                break;\r\n            case \"searchStartEvent\":\r\n                null === (_this$_searchBox = this._searchBox) || void 0 === _this$_searchBox ? void 0 : _this$_searchBox.option(\"valueChangeEvent\", value);\r\n                break;\r\n            case \"onScroll\":\r\n                this._initScrollAction();\r\n                break;\r\n            case \"pageLoadMode\":\r\n                this._setListOption(\"pageLoadMode\", this.option(\"pageLoadMode\"));\r\n                break;\r\n            case \"cleanSearchOnOpening\":\r\n            case \"_scrollToSelectedItemEnabled\":\r\n                break;\r\n            case \"dropDownOptions\":\r\n                switch (fullName) {\r\n                    case \"dropDownOptions.width\":\r\n                    case \"dropDownOptions.height\":\r\n                        this._popupOptionChanged({\r\n                            name: name,\r\n                            fullName: fullName,\r\n                            value: \"auto\" === value ? this.initialOption(\"dropDownOptions\")[getFieldName(fullName)] : value\r\n                        });\r\n                        this._options.cache(\"dropDownOptions\", this.option(\"dropDownOptions\"));\r\n                        break;\r\n                    default:\r\n                        this.callBase(...arguments)\r\n                }\r\n                break;\r\n            case \"dropDownCentered\":\r\n                if (this.option(\"_scrollToSelectedItemEnabled\")) {\r\n                    this.option(\"dropDownOptions.position\", void 0);\r\n                    this._renderPopup()\r\n                }\r\n                break;\r\n            default:\r\n                this.callBase(...arguments)\r\n        }\r\n    },\r\n    focus: function() {\r\n        this.option(\"opened\") ? this._setFocusPolicy() : eventsEngine.trigger(this._focusTarget(), \"focus\")\r\n    },\r\n    field: function() {\r\n        return this._$field\r\n    }\r\n});\r\nregisterComponent(\"dxLookup\", Lookup);\r\nexport default Lookup;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}