{"ast":null,"code":"/**\r\n * DevExtreme (esm/renovation/component_wrapper/editors/editor.js)\r\n * Version: 22.1.4\r\n * Build date: Fri Jul 22 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport { isDefined } from \"../../../core/utils/type\";\nimport Component from \"../common/component\";\nimport ValidationEngine from \"../../../ui/validation_engine\";\nimport { extend } from \"../../../core/utils/extend\";\nimport $ from \"../../../core/renderer\";\nimport { data } from \"../../../core/element_data\";\nimport Callbacks from \"../../../core/utils/callbacks\";\nimport OldEditor from \"../../../ui/editor/editor\";\nvar INVALID_MESSAGE_AUTO = \"dx-invalid-message-auto\";\nvar VALIDATION_TARGET = \"dx-validation-target\";\nexport default class Editor extends Component {\n  getProps() {\n    var props = super.getProps();\n\n    props.onFocusIn = () => {\n      var isValidationMessageShownOnFocus = \"auto\" === this.option(\"validationMessageMode\");\n\n      if (isValidationMessageShownOnFocus) {\n        var $validationMessageWrapper = $(\".dx-invalid-message.dx-overlay-wrapper\");\n        null === $validationMessageWrapper || void 0 === $validationMessageWrapper ? void 0 : $validationMessageWrapper.removeClass(INVALID_MESSAGE_AUTO);\n\n        if (this.showValidationMessageTimeout) {\n          clearTimeout(this.showValidationMessageTimeout);\n        }\n\n        this.showValidationMessageTimeout = setTimeout(() => {\n          null === $validationMessageWrapper || void 0 === $validationMessageWrapper ? void 0 : $validationMessageWrapper.addClass(INVALID_MESSAGE_AUTO);\n        }, 150);\n      }\n    };\n\n    props.saveValueChangeEvent = e => {\n      this._valueChangeEventInstance = e;\n    };\n\n    return props;\n  }\n\n  _createElement(element) {\n    super._createElement(element);\n\n    this.showValidationMessageTimeout = void 0;\n    this.validationRequest = Callbacks();\n    data(this.$element()[0], VALIDATION_TARGET, this);\n  }\n\n  _render() {\n    var _this$option;\n\n    null === (_this$option = this.option(\"_onMarkupRendered\")) || void 0 === _this$option ? void 0 : _this$option();\n  }\n\n  _initializeComponent() {\n    super._initializeComponent();\n\n    this._valueChangeAction = this._createActionByOption(\"onValueChanged\", {\n      excludeValidators: [\"disabled\", \"readOnly\"]\n    });\n  }\n\n  _initOptions(options) {\n    super._initOptions(options);\n\n    this.option(ValidationEngine.initValidationOptions(options));\n  }\n\n  _getDefaultOptions() {\n    return extend(super._getDefaultOptions(), {\n      validationMessageOffset: {\n        h: 0,\n        v: 0\n      },\n      validationTooltipOptions: {}\n    });\n  }\n\n  _bindInnerWidgetOptions(innerWidget, optionsContainer) {\n    var innerWidgetOptions = extend({}, innerWidget.option());\n\n    var syncOptions = () => this._silent(optionsContainer, innerWidgetOptions);\n\n    syncOptions();\n    innerWidget.on(\"optionChanged\", syncOptions);\n  }\n\n  _raiseValidation(value, previousValue) {\n    var areValuesEmpty = !isDefined(value) && !isDefined(previousValue);\n\n    if (value !== previousValue && !areValuesEmpty) {\n      this.validationRequest.fire({\n        value: value,\n        editor: this\n      });\n    }\n  }\n\n  _raiseValueChangeAction(value, previousValue) {\n    var _this$_valueChangeAct;\n\n    null === (_this$_valueChangeAct = this._valueChangeAction) || void 0 === _this$_valueChangeAct ? void 0 : _this$_valueChangeAct.call(this, {\n      element: this.$element(),\n      previousValue: previousValue,\n      value: value,\n      event: this._valueChangeEventInstance\n    });\n    this._valueChangeEventInstance = void 0;\n  }\n\n  _optionChanged(option) {\n    var {\n      name: name,\n      previousValue: previousValue,\n      value: value\n    } = option;\n\n    if (name && void 0 !== this._getActionConfigs()[name]) {\n      this._addAction(name);\n    }\n\n    switch (name) {\n      case \"value\":\n        this._raiseValidation(value, previousValue);\n\n        this._raiseValueChangeAction(value, previousValue);\n\n        break;\n\n      case \"onValueChanged\":\n        this._valueChangeAction = this._createActionByOption(\"onValueChanged\", {\n          excludeValidators: [\"disabled\", \"readOnly\"]\n        });\n        break;\n\n      case \"isValid\":\n      case \"validationError\":\n      case \"validationErrors\":\n      case \"validationStatus\":\n        this.option(ValidationEngine.synchronizeValidationOptions(option, this.option()));\n    }\n\n    super._optionChanged(option);\n  }\n\n  reset() {\n    var {\n      value: value\n    } = this._getDefaultOptions();\n\n    this.option({\n      value: value\n    });\n  }\n\n  _dispose() {\n    super._dispose();\n\n    data(this.element(), VALIDATION_TARGET, null);\n\n    if (this.showValidationMessageTimeout) {\n      clearTimeout(this.showValidationMessageTimeout);\n    }\n  }\n\n}\nvar prevIsEditor = OldEditor.isEditor;\n\nvar newIsEditor = instance => prevIsEditor(instance) || instance instanceof Editor;\n\nEditor.isEditor = newIsEditor;\nOldEditor.isEditor = newIsEditor;","map":{"version":3,"names":["isDefined","Component","ValidationEngine","extend","$","data","Callbacks","OldEditor","INVALID_MESSAGE_AUTO","VALIDATION_TARGET","Editor","getProps","props","onFocusIn","isValidationMessageShownOnFocus","option","$validationMessageWrapper","removeClass","showValidationMessageTimeout","clearTimeout","setTimeout","addClass","saveValueChangeEvent","e","_valueChangeEventInstance","_createElement","element","validationRequest","$element","_render","_this$option","_initializeComponent","_valueChangeAction","_createActionByOption","excludeValidators","_initOptions","options","initValidationOptions","_getDefaultOptions","validationMessageOffset","h","v","validationTooltipOptions","_bindInnerWidgetOptions","innerWidget","optionsContainer","innerWidgetOptions","syncOptions","_silent","on","_raiseValidation","value","previousValue","areValuesEmpty","fire","editor","_raiseValueChangeAction","_this$_valueChangeAct","call","event","_optionChanged","name","_getActionConfigs","_addAction","synchronizeValidationOptions","reset","_dispose","prevIsEditor","isEditor","newIsEditor","instance"],"sources":["E:/MisaProject/W2022_06/MISA.EMIS.FE/node_modules/devextreme/esm/renovation/component_wrapper/editors/editor.js"],"sourcesContent":["/**\r\n * DevExtreme (esm/renovation/component_wrapper/editors/editor.js)\r\n * Version: 22.1.4\r\n * Build date: Fri Jul 22 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport {\r\n    isDefined\r\n} from \"../../../core/utils/type\";\r\nimport Component from \"../common/component\";\r\nimport ValidationEngine from \"../../../ui/validation_engine\";\r\nimport {\r\n    extend\r\n} from \"../../../core/utils/extend\";\r\nimport $ from \"../../../core/renderer\";\r\nimport {\r\n    data\r\n} from \"../../../core/element_data\";\r\nimport Callbacks from \"../../../core/utils/callbacks\";\r\nimport OldEditor from \"../../../ui/editor/editor\";\r\nvar INVALID_MESSAGE_AUTO = \"dx-invalid-message-auto\";\r\nvar VALIDATION_TARGET = \"dx-validation-target\";\r\nexport default class Editor extends Component {\r\n    getProps() {\r\n        var props = super.getProps();\r\n        props.onFocusIn = () => {\r\n            var isValidationMessageShownOnFocus = \"auto\" === this.option(\"validationMessageMode\");\r\n            if (isValidationMessageShownOnFocus) {\r\n                var $validationMessageWrapper = $(\".dx-invalid-message.dx-overlay-wrapper\");\r\n                null === $validationMessageWrapper || void 0 === $validationMessageWrapper ? void 0 : $validationMessageWrapper.removeClass(INVALID_MESSAGE_AUTO);\r\n                if (this.showValidationMessageTimeout) {\r\n                    clearTimeout(this.showValidationMessageTimeout)\r\n                }\r\n                this.showValidationMessageTimeout = setTimeout(() => {\r\n                    null === $validationMessageWrapper || void 0 === $validationMessageWrapper ? void 0 : $validationMessageWrapper.addClass(INVALID_MESSAGE_AUTO)\r\n                }, 150)\r\n            }\r\n        };\r\n        props.saveValueChangeEvent = e => {\r\n            this._valueChangeEventInstance = e\r\n        };\r\n        return props\r\n    }\r\n    _createElement(element) {\r\n        super._createElement(element);\r\n        this.showValidationMessageTimeout = void 0;\r\n        this.validationRequest = Callbacks();\r\n        data(this.$element()[0], VALIDATION_TARGET, this)\r\n    }\r\n    _render() {\r\n        var _this$option;\r\n        null === (_this$option = this.option(\"_onMarkupRendered\")) || void 0 === _this$option ? void 0 : _this$option()\r\n    }\r\n    _initializeComponent() {\r\n        super._initializeComponent();\r\n        this._valueChangeAction = this._createActionByOption(\"onValueChanged\", {\r\n            excludeValidators: [\"disabled\", \"readOnly\"]\r\n        })\r\n    }\r\n    _initOptions(options) {\r\n        super._initOptions(options);\r\n        this.option(ValidationEngine.initValidationOptions(options))\r\n    }\r\n    _getDefaultOptions() {\r\n        return extend(super._getDefaultOptions(), {\r\n            validationMessageOffset: {\r\n                h: 0,\r\n                v: 0\r\n            },\r\n            validationTooltipOptions: {}\r\n        })\r\n    }\r\n    _bindInnerWidgetOptions(innerWidget, optionsContainer) {\r\n        var innerWidgetOptions = extend({}, innerWidget.option());\r\n        var syncOptions = () => this._silent(optionsContainer, innerWidgetOptions);\r\n        syncOptions();\r\n        innerWidget.on(\"optionChanged\", syncOptions)\r\n    }\r\n    _raiseValidation(value, previousValue) {\r\n        var areValuesEmpty = !isDefined(value) && !isDefined(previousValue);\r\n        if (value !== previousValue && !areValuesEmpty) {\r\n            this.validationRequest.fire({\r\n                value: value,\r\n                editor: this\r\n            })\r\n        }\r\n    }\r\n    _raiseValueChangeAction(value, previousValue) {\r\n        var _this$_valueChangeAct;\r\n        null === (_this$_valueChangeAct = this._valueChangeAction) || void 0 === _this$_valueChangeAct ? void 0 : _this$_valueChangeAct.call(this, {\r\n            element: this.$element(),\r\n            previousValue: previousValue,\r\n            value: value,\r\n            event: this._valueChangeEventInstance\r\n        });\r\n        this._valueChangeEventInstance = void 0\r\n    }\r\n    _optionChanged(option) {\r\n        var {\r\n            name: name,\r\n            previousValue: previousValue,\r\n            value: value\r\n        } = option;\r\n        if (name && void 0 !== this._getActionConfigs()[name]) {\r\n            this._addAction(name)\r\n        }\r\n        switch (name) {\r\n            case \"value\":\r\n                this._raiseValidation(value, previousValue);\r\n                this._raiseValueChangeAction(value, previousValue);\r\n                break;\r\n            case \"onValueChanged\":\r\n                this._valueChangeAction = this._createActionByOption(\"onValueChanged\", {\r\n                    excludeValidators: [\"disabled\", \"readOnly\"]\r\n                });\r\n                break;\r\n            case \"isValid\":\r\n            case \"validationError\":\r\n            case \"validationErrors\":\r\n            case \"validationStatus\":\r\n                this.option(ValidationEngine.synchronizeValidationOptions(option, this.option()))\r\n        }\r\n        super._optionChanged(option)\r\n    }\r\n    reset() {\r\n        var {\r\n            value: value\r\n        } = this._getDefaultOptions();\r\n        this.option({\r\n            value: value\r\n        })\r\n    }\r\n    _dispose() {\r\n        super._dispose();\r\n        data(this.element(), VALIDATION_TARGET, null);\r\n        if (this.showValidationMessageTimeout) {\r\n            clearTimeout(this.showValidationMessageTimeout)\r\n        }\r\n    }\r\n}\r\nvar prevIsEditor = OldEditor.isEditor;\r\nvar newIsEditor = instance => prevIsEditor(instance) || instance instanceof Editor;\r\nEditor.isEditor = newIsEditor;\r\nOldEditor.isEditor = newIsEditor;\r\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SACIA,SADJ,QAEO,0BAFP;AAGA,OAAOC,SAAP,MAAsB,qBAAtB;AACA,OAAOC,gBAAP,MAA6B,+BAA7B;AACA,SACIC,MADJ,QAEO,4BAFP;AAGA,OAAOC,CAAP,MAAc,wBAAd;AACA,SACIC,IADJ,QAEO,4BAFP;AAGA,OAAOC,SAAP,MAAsB,+BAAtB;AACA,OAAOC,SAAP,MAAsB,2BAAtB;AACA,IAAIC,oBAAoB,GAAG,yBAA3B;AACA,IAAIC,iBAAiB,GAAG,sBAAxB;AACA,eAAe,MAAMC,MAAN,SAAqBT,SAArB,CAA+B;EAC1CU,QAAQ,GAAG;IACP,IAAIC,KAAK,GAAG,MAAMD,QAAN,EAAZ;;IACAC,KAAK,CAACC,SAAN,GAAkB,MAAM;MACpB,IAAIC,+BAA+B,GAAG,WAAW,KAAKC,MAAL,CAAY,uBAAZ,CAAjD;;MACA,IAAID,+BAAJ,EAAqC;QACjC,IAAIE,yBAAyB,GAAGZ,CAAC,CAAC,wCAAD,CAAjC;QACA,SAASY,yBAAT,IAAsC,KAAK,CAAL,KAAWA,yBAAjD,GAA6E,KAAK,CAAlF,GAAsFA,yBAAyB,CAACC,WAA1B,CAAsCT,oBAAtC,CAAtF;;QACA,IAAI,KAAKU,4BAAT,EAAuC;UACnCC,YAAY,CAAC,KAAKD,4BAAN,CAAZ;QACH;;QACD,KAAKA,4BAAL,GAAoCE,UAAU,CAAC,MAAM;UACjD,SAASJ,yBAAT,IAAsC,KAAK,CAAL,KAAWA,yBAAjD,GAA6E,KAAK,CAAlF,GAAsFA,yBAAyB,CAACK,QAA1B,CAAmCb,oBAAnC,CAAtF;QACH,CAF6C,EAE3C,GAF2C,CAA9C;MAGH;IACJ,CAZD;;IAaAI,KAAK,CAACU,oBAAN,GAA6BC,CAAC,IAAI;MAC9B,KAAKC,yBAAL,GAAiCD,CAAjC;IACH,CAFD;;IAGA,OAAOX,KAAP;EACH;;EACDa,cAAc,CAACC,OAAD,EAAU;IACpB,MAAMD,cAAN,CAAqBC,OAArB;;IACA,KAAKR,4BAAL,GAAoC,KAAK,CAAzC;IACA,KAAKS,iBAAL,GAAyBrB,SAAS,EAAlC;IACAD,IAAI,CAAC,KAAKuB,QAAL,GAAgB,CAAhB,CAAD,EAAqBnB,iBAArB,EAAwC,IAAxC,CAAJ;EACH;;EACDoB,OAAO,GAAG;IACN,IAAIC,YAAJ;;IACA,UAAUA,YAAY,GAAG,KAAKf,MAAL,CAAY,mBAAZ,CAAzB,KAA8D,KAAK,CAAL,KAAWe,YAAzE,GAAwF,KAAK,CAA7F,GAAiGA,YAAY,EAA7G;EACH;;EACDC,oBAAoB,GAAG;IACnB,MAAMA,oBAAN;;IACA,KAAKC,kBAAL,GAA0B,KAAKC,qBAAL,CAA2B,gBAA3B,EAA6C;MACnEC,iBAAiB,EAAE,CAAC,UAAD,EAAa,UAAb;IADgD,CAA7C,CAA1B;EAGH;;EACDC,YAAY,CAACC,OAAD,EAAU;IAClB,MAAMD,YAAN,CAAmBC,OAAnB;;IACA,KAAKrB,MAAL,CAAYb,gBAAgB,CAACmC,qBAAjB,CAAuCD,OAAvC,CAAZ;EACH;;EACDE,kBAAkB,GAAG;IACjB,OAAOnC,MAAM,CAAC,MAAMmC,kBAAN,EAAD,EAA6B;MACtCC,uBAAuB,EAAE;QACrBC,CAAC,EAAE,CADkB;QAErBC,CAAC,EAAE;MAFkB,CADa;MAKtCC,wBAAwB,EAAE;IALY,CAA7B,CAAb;EAOH;;EACDC,uBAAuB,CAACC,WAAD,EAAcC,gBAAd,EAAgC;IACnD,IAAIC,kBAAkB,GAAG3C,MAAM,CAAC,EAAD,EAAKyC,WAAW,CAAC7B,MAAZ,EAAL,CAA/B;;IACA,IAAIgC,WAAW,GAAG,MAAM,KAAKC,OAAL,CAAaH,gBAAb,EAA+BC,kBAA/B,CAAxB;;IACAC,WAAW;IACXH,WAAW,CAACK,EAAZ,CAAe,eAAf,EAAgCF,WAAhC;EACH;;EACDG,gBAAgB,CAACC,KAAD,EAAQC,aAAR,EAAuB;IACnC,IAAIC,cAAc,GAAG,CAACrD,SAAS,CAACmD,KAAD,CAAV,IAAqB,CAACnD,SAAS,CAACoD,aAAD,CAApD;;IACA,IAAID,KAAK,KAAKC,aAAV,IAA2B,CAACC,cAAhC,EAAgD;MAC5C,KAAK1B,iBAAL,CAAuB2B,IAAvB,CAA4B;QACxBH,KAAK,EAAEA,KADiB;QAExBI,MAAM,EAAE;MAFgB,CAA5B;IAIH;EACJ;;EACDC,uBAAuB,CAACL,KAAD,EAAQC,aAAR,EAAuB;IAC1C,IAAIK,qBAAJ;;IACA,UAAUA,qBAAqB,GAAG,KAAKzB,kBAAvC,KAA8D,KAAK,CAAL,KAAWyB,qBAAzE,GAAiG,KAAK,CAAtG,GAA0GA,qBAAqB,CAACC,IAAtB,CAA2B,IAA3B,EAAiC;MACvIhC,OAAO,EAAE,KAAKE,QAAL,EAD8H;MAEvIwB,aAAa,EAAEA,aAFwH;MAGvID,KAAK,EAAEA,KAHgI;MAIvIQ,KAAK,EAAE,KAAKnC;IAJ2H,CAAjC,CAA1G;IAMA,KAAKA,yBAAL,GAAiC,KAAK,CAAtC;EACH;;EACDoC,cAAc,CAAC7C,MAAD,EAAS;IACnB,IAAI;MACA8C,IAAI,EAAEA,IADN;MAEAT,aAAa,EAAEA,aAFf;MAGAD,KAAK,EAAEA;IAHP,IAIApC,MAJJ;;IAKA,IAAI8C,IAAI,IAAI,KAAK,CAAL,KAAW,KAAKC,iBAAL,GAAyBD,IAAzB,CAAvB,EAAuD;MACnD,KAAKE,UAAL,CAAgBF,IAAhB;IACH;;IACD,QAAQA,IAAR;MACI,KAAK,OAAL;QACI,KAAKX,gBAAL,CAAsBC,KAAtB,EAA6BC,aAA7B;;QACA,KAAKI,uBAAL,CAA6BL,KAA7B,EAAoCC,aAApC;;QACA;;MACJ,KAAK,gBAAL;QACI,KAAKpB,kBAAL,GAA0B,KAAKC,qBAAL,CAA2B,gBAA3B,EAA6C;UACnEC,iBAAiB,EAAE,CAAC,UAAD,EAAa,UAAb;QADgD,CAA7C,CAA1B;QAGA;;MACJ,KAAK,SAAL;MACA,KAAK,iBAAL;MACA,KAAK,kBAAL;MACA,KAAK,kBAAL;QACI,KAAKnB,MAAL,CAAYb,gBAAgB,CAAC8D,4BAAjB,CAA8CjD,MAA9C,EAAsD,KAAKA,MAAL,EAAtD,CAAZ;IAdR;;IAgBA,MAAM6C,cAAN,CAAqB7C,MAArB;EACH;;EACDkD,KAAK,GAAG;IACJ,IAAI;MACAd,KAAK,EAAEA;IADP,IAEA,KAAKb,kBAAL,EAFJ;;IAGA,KAAKvB,MAAL,CAAY;MACRoC,KAAK,EAAEA;IADC,CAAZ;EAGH;;EACDe,QAAQ,GAAG;IACP,MAAMA,QAAN;;IACA7D,IAAI,CAAC,KAAKqB,OAAL,EAAD,EAAiBjB,iBAAjB,EAAoC,IAApC,CAAJ;;IACA,IAAI,KAAKS,4BAAT,EAAuC;MACnCC,YAAY,CAAC,KAAKD,4BAAN,CAAZ;IACH;EACJ;;AApHyC;AAsH9C,IAAIiD,YAAY,GAAG5D,SAAS,CAAC6D,QAA7B;;AACA,IAAIC,WAAW,GAAGC,QAAQ,IAAIH,YAAY,CAACG,QAAD,CAAZ,IAA0BA,QAAQ,YAAY5D,MAA5E;;AACAA,MAAM,CAAC0D,QAAP,GAAkBC,WAAlB;AACA9D,SAAS,CAAC6D,QAAV,GAAqBC,WAArB"},"metadata":{},"sourceType":"module"}