{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/html_editor/ui/formDialog.js)\r\n * Version: 22.1.4\r\n * Build date: Fri Jul 22 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport $ from \"../../../core/renderer\";\nimport { extend } from \"../../../core/utils/extend\";\nimport Popup from \"../../popup\";\nimport Form from \"../../form\";\nimport { Deferred } from \"../../../core/utils/deferred\";\nimport localizationMessage from \"../../../localization/message\";\nimport { getCurrentScreenFactor, hasWindow } from \"../../../core/utils/window\";\nimport devices from \"../../../core/devices\";\nimport { isMaterial } from \"../../themes\";\nvar DIALOG_CLASS = \"dx-formdialog\";\nvar FORM_CLASS = \"dx-formdialog-form\";\n\nclass FormDialog {\n  constructor(editorInstance, popupConfig) {\n    this._editorInstance = editorInstance;\n    this._popupUserConfig = popupConfig;\n\n    this._renderPopup();\n\n    this._attachOptionChangedHandler();\n  }\n\n  _renderPopup() {\n    var editorInstance = this._editorInstance;\n    var $container = $(\"<div>\").addClass(DIALOG_CLASS).appendTo(editorInstance.$element());\n\n    var popupConfig = this._getPopupConfig();\n\n    return editorInstance._createComponent($container, Popup, popupConfig);\n  }\n\n  _attachOptionChangedHandler() {\n    var _this$_popup;\n\n    null === (_this$_popup = this._popup) || void 0 === _this$_popup ? void 0 : _this$_popup.on(\"optionChanged\", _ref => {\n      var {\n        name: name,\n        value: value\n      } = _ref;\n\n      if (\"title\" === name) {\n        this._updateFormLabel(value);\n      }\n    });\n  }\n\n  _escKeyHandler() {\n    this._popup.hide();\n  }\n\n  _addEscapeHandler(e) {\n    e.component.registerKeyHandler(\"escape\", this._escKeyHandler.bind(this));\n  }\n\n  _isSmallScreen() {\n    var screenFactor = hasWindow() ? getCurrentScreenFactor() : null;\n    return \"phone\" === devices.real().deviceType || \"xs\" === screenFactor;\n  }\n\n  _getPopupConfig() {\n    return extend({\n      onInitialized: e => {\n        this._popup = e.component;\n\n        this._popup.on(\"hiding\", () => {\n          this.deferred.reject();\n        });\n\n        this._popup.on(\"shown\", () => {\n          this._form.focus();\n        });\n      },\n      deferRendering: false,\n      focusStateEnabled: false,\n      showCloseButton: false,\n      wrapperAttr: {\n        class: \"dx-formdialog\"\n      },\n      fullScreen: this._isSmallScreen(),\n      contentTemplate: contentElem => {\n        var $formContainer = $(\"<div>\").appendTo(contentElem);\n\n        this._renderForm($formContainer, {\n          onEditorEnterKey: _ref2 => {\n            var {\n              component: component,\n              dataField: dataField,\n              event: event\n            } = _ref2;\n            this.hide(component.option(\"formData\"), event);\n          },\n          customizeItem: item => {\n            if (\"simple\" === item.itemType) {\n              item.editorOptions = extend(true, {}, item.editorOptions, {\n                onInitialized: this._addEscapeHandler.bind(this)\n              });\n            }\n          }\n        });\n      },\n      toolbarItems: [{\n        toolbar: \"bottom\",\n        location: \"after\",\n        widget: \"dxButton\",\n        options: {\n          onInitialized: this._addEscapeHandler.bind(this),\n          text: localizationMessage.format(\"OK\"),\n          onClick: _ref3 => {\n            var {\n              event: event\n            } = _ref3;\n            this.hide(this._form.option(\"formData\"), event);\n          }\n        }\n      }, {\n        toolbar: \"bottom\",\n        location: \"after\",\n        widget: \"dxButton\",\n        options: {\n          onInitialized: this._addEscapeHandler.bind(this),\n          text: localizationMessage.format(\"Cancel\"),\n          onClick: () => {\n            this._popup.hide();\n          }\n        }\n      }]\n    }, this._popupUserConfig);\n  }\n\n  _renderForm($container, options) {\n    $container.addClass(FORM_CLASS);\n    this._form = this._editorInstance._createComponent($container, Form, options);\n\n    this._updateFormLabel();\n  }\n\n  _updateFormLabel(text) {\n    var _this$_form;\n\n    var label = null !== text && void 0 !== text ? text : this.popupOption(\"title\");\n    null === (_this$_form = this._form) || void 0 === _this$_form ? void 0 : _this$_form.$element().attr(\"aria-label\", label);\n  }\n\n  _getDefaultFormOptions() {\n    return {\n      colCount: 1,\n      width: \"auto\",\n      labelLocation: isMaterial() ? \"top\" : \"left\"\n    };\n  }\n\n  formOption(optionName, optionValue) {\n    return this._form.option.apply(this._form, arguments);\n  }\n\n  show(formUserConfig) {\n    if (this._popup.option(\"visible\")) {\n      return;\n    }\n\n    this.deferred = new Deferred();\n    var formConfig = extend(this._getDefaultFormOptions(), formUserConfig);\n\n    this._form.option(formConfig);\n\n    this._popup.show();\n\n    return this.deferred.promise();\n  }\n\n  hide(formData, event) {\n    this.deferred.resolve(formData, event);\n\n    this._popup.hide();\n  }\n\n  popupOption(optionName, optionValue) {\n    return this._popup.option.apply(this._popup, arguments);\n  }\n\n}\n\nexport default FormDialog;","map":{"version":3,"names":["$","extend","Popup","Form","Deferred","localizationMessage","getCurrentScreenFactor","hasWindow","devices","isMaterial","DIALOG_CLASS","FORM_CLASS","FormDialog","constructor","editorInstance","popupConfig","_editorInstance","_popupUserConfig","_renderPopup","_attachOptionChangedHandler","$container","addClass","appendTo","$element","_getPopupConfig","_createComponent","_this$_popup","_popup","on","_ref","name","value","_updateFormLabel","_escKeyHandler","hide","_addEscapeHandler","e","component","registerKeyHandler","bind","_isSmallScreen","screenFactor","real","deviceType","onInitialized","deferred","reject","_form","focus","deferRendering","focusStateEnabled","showCloseButton","wrapperAttr","class","fullScreen","contentTemplate","contentElem","$formContainer","_renderForm","onEditorEnterKey","_ref2","dataField","event","option","customizeItem","item","itemType","editorOptions","toolbarItems","toolbar","location","widget","options","text","format","onClick","_ref3","_this$_form","label","popupOption","attr","_getDefaultFormOptions","colCount","width","labelLocation","formOption","optionName","optionValue","apply","arguments","show","formUserConfig","formConfig","promise","formData","resolve"],"sources":["E:/MisaProject/W2022_06/misa_emis/node_modules/devextreme/esm/ui/html_editor/ui/formDialog.js"],"sourcesContent":["/**\r\n * DevExtreme (esm/ui/html_editor/ui/formDialog.js)\r\n * Version: 22.1.4\r\n * Build date: Fri Jul 22 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport $ from \"../../../core/renderer\";\r\nimport {\r\n    extend\r\n} from \"../../../core/utils/extend\";\r\nimport Popup from \"../../popup\";\r\nimport Form from \"../../form\";\r\nimport {\r\n    Deferred\r\n} from \"../../../core/utils/deferred\";\r\nimport localizationMessage from \"../../../localization/message\";\r\nimport {\r\n    getCurrentScreenFactor,\r\n    hasWindow\r\n} from \"../../../core/utils/window\";\r\nimport devices from \"../../../core/devices\";\r\nimport {\r\n    isMaterial\r\n} from \"../../themes\";\r\nvar DIALOG_CLASS = \"dx-formdialog\";\r\nvar FORM_CLASS = \"dx-formdialog-form\";\r\nclass FormDialog {\r\n    constructor(editorInstance, popupConfig) {\r\n        this._editorInstance = editorInstance;\r\n        this._popupUserConfig = popupConfig;\r\n        this._renderPopup();\r\n        this._attachOptionChangedHandler()\r\n    }\r\n    _renderPopup() {\r\n        var editorInstance = this._editorInstance;\r\n        var $container = $(\"<div>\").addClass(DIALOG_CLASS).appendTo(editorInstance.$element());\r\n        var popupConfig = this._getPopupConfig();\r\n        return editorInstance._createComponent($container, Popup, popupConfig)\r\n    }\r\n    _attachOptionChangedHandler() {\r\n        var _this$_popup;\r\n        null === (_this$_popup = this._popup) || void 0 === _this$_popup ? void 0 : _this$_popup.on(\"optionChanged\", _ref => {\r\n            var {\r\n                name: name,\r\n                value: value\r\n            } = _ref;\r\n            if (\"title\" === name) {\r\n                this._updateFormLabel(value)\r\n            }\r\n        })\r\n    }\r\n    _escKeyHandler() {\r\n        this._popup.hide()\r\n    }\r\n    _addEscapeHandler(e) {\r\n        e.component.registerKeyHandler(\"escape\", this._escKeyHandler.bind(this))\r\n    }\r\n    _isSmallScreen() {\r\n        var screenFactor = hasWindow() ? getCurrentScreenFactor() : null;\r\n        return \"phone\" === devices.real().deviceType || \"xs\" === screenFactor\r\n    }\r\n    _getPopupConfig() {\r\n        return extend({\r\n            onInitialized: e => {\r\n                this._popup = e.component;\r\n                this._popup.on(\"hiding\", () => {\r\n                    this.deferred.reject()\r\n                });\r\n                this._popup.on(\"shown\", () => {\r\n                    this._form.focus()\r\n                })\r\n            },\r\n            deferRendering: false,\r\n            focusStateEnabled: false,\r\n            showCloseButton: false,\r\n            wrapperAttr: {\r\n                class: \"dx-formdialog\"\r\n            },\r\n            fullScreen: this._isSmallScreen(),\r\n            contentTemplate: contentElem => {\r\n                var $formContainer = $(\"<div>\").appendTo(contentElem);\r\n                this._renderForm($formContainer, {\r\n                    onEditorEnterKey: _ref2 => {\r\n                        var {\r\n                            component: component,\r\n                            dataField: dataField,\r\n                            event: event\r\n                        } = _ref2;\r\n                        this.hide(component.option(\"formData\"), event)\r\n                    },\r\n                    customizeItem: item => {\r\n                        if (\"simple\" === item.itemType) {\r\n                            item.editorOptions = extend(true, {}, item.editorOptions, {\r\n                                onInitialized: this._addEscapeHandler.bind(this)\r\n                            })\r\n                        }\r\n                    }\r\n                })\r\n            },\r\n            toolbarItems: [{\r\n                toolbar: \"bottom\",\r\n                location: \"after\",\r\n                widget: \"dxButton\",\r\n                options: {\r\n                    onInitialized: this._addEscapeHandler.bind(this),\r\n                    text: localizationMessage.format(\"OK\"),\r\n                    onClick: _ref3 => {\r\n                        var {\r\n                            event: event\r\n                        } = _ref3;\r\n                        this.hide(this._form.option(\"formData\"), event)\r\n                    }\r\n                }\r\n            }, {\r\n                toolbar: \"bottom\",\r\n                location: \"after\",\r\n                widget: \"dxButton\",\r\n                options: {\r\n                    onInitialized: this._addEscapeHandler.bind(this),\r\n                    text: localizationMessage.format(\"Cancel\"),\r\n                    onClick: () => {\r\n                        this._popup.hide()\r\n                    }\r\n                }\r\n            }]\r\n        }, this._popupUserConfig)\r\n    }\r\n    _renderForm($container, options) {\r\n        $container.addClass(FORM_CLASS);\r\n        this._form = this._editorInstance._createComponent($container, Form, options);\r\n        this._updateFormLabel()\r\n    }\r\n    _updateFormLabel(text) {\r\n        var _this$_form;\r\n        var label = null !== text && void 0 !== text ? text : this.popupOption(\"title\");\r\n        null === (_this$_form = this._form) || void 0 === _this$_form ? void 0 : _this$_form.$element().attr(\"aria-label\", label)\r\n    }\r\n    _getDefaultFormOptions() {\r\n        return {\r\n            colCount: 1,\r\n            width: \"auto\",\r\n            labelLocation: isMaterial() ? \"top\" : \"left\"\r\n        }\r\n    }\r\n    formOption(optionName, optionValue) {\r\n        return this._form.option.apply(this._form, arguments)\r\n    }\r\n    show(formUserConfig) {\r\n        if (this._popup.option(\"visible\")) {\r\n            return\r\n        }\r\n        this.deferred = new Deferred;\r\n        var formConfig = extend(this._getDefaultFormOptions(), formUserConfig);\r\n        this._form.option(formConfig);\r\n        this._popup.show();\r\n        return this.deferred.promise()\r\n    }\r\n    hide(formData, event) {\r\n        this.deferred.resolve(formData, event);\r\n        this._popup.hide()\r\n    }\r\n    popupOption(optionName, optionValue) {\r\n        return this._popup.option.apply(this._popup, arguments)\r\n    }\r\n}\r\nexport default FormDialog;\r\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAOA,CAAP,MAAc,wBAAd;AACA,SACIC,MADJ,QAEO,4BAFP;AAGA,OAAOC,KAAP,MAAkB,aAAlB;AACA,OAAOC,IAAP,MAAiB,YAAjB;AACA,SACIC,QADJ,QAEO,8BAFP;AAGA,OAAOC,mBAAP,MAAgC,+BAAhC;AACA,SACIC,sBADJ,EAEIC,SAFJ,QAGO,4BAHP;AAIA,OAAOC,OAAP,MAAoB,uBAApB;AACA,SACIC,UADJ,QAEO,cAFP;AAGA,IAAIC,YAAY,GAAG,eAAnB;AACA,IAAIC,UAAU,GAAG,oBAAjB;;AACA,MAAMC,UAAN,CAAiB;EACbC,WAAW,CAACC,cAAD,EAAiBC,WAAjB,EAA8B;IACrC,KAAKC,eAAL,GAAuBF,cAAvB;IACA,KAAKG,gBAAL,GAAwBF,WAAxB;;IACA,KAAKG,YAAL;;IACA,KAAKC,2BAAL;EACH;;EACDD,YAAY,GAAG;IACX,IAAIJ,cAAc,GAAG,KAAKE,eAA1B;IACA,IAAII,UAAU,GAAGpB,CAAC,CAAC,OAAD,CAAD,CAAWqB,QAAX,CAAoBX,YAApB,EAAkCY,QAAlC,CAA2CR,cAAc,CAACS,QAAf,EAA3C,CAAjB;;IACA,IAAIR,WAAW,GAAG,KAAKS,eAAL,EAAlB;;IACA,OAAOV,cAAc,CAACW,gBAAf,CAAgCL,UAAhC,EAA4ClB,KAA5C,EAAmDa,WAAnD,CAAP;EACH;;EACDI,2BAA2B,GAAG;IAC1B,IAAIO,YAAJ;;IACA,UAAUA,YAAY,GAAG,KAAKC,MAA9B,KAAyC,KAAK,CAAL,KAAWD,YAApD,GAAmE,KAAK,CAAxE,GAA4EA,YAAY,CAACE,EAAb,CAAgB,eAAhB,EAAiCC,IAAI,IAAI;MACjH,IAAI;QACAC,IAAI,EAAEA,IADN;QAEAC,KAAK,EAAEA;MAFP,IAGAF,IAHJ;;MAIA,IAAI,YAAYC,IAAhB,EAAsB;QAClB,KAAKE,gBAAL,CAAsBD,KAAtB;MACH;IACJ,CAR2E,CAA5E;EASH;;EACDE,cAAc,GAAG;IACb,KAAKN,MAAL,CAAYO,IAAZ;EACH;;EACDC,iBAAiB,CAACC,CAAD,EAAI;IACjBA,CAAC,CAACC,SAAF,CAAYC,kBAAZ,CAA+B,QAA/B,EAAyC,KAAKL,cAAL,CAAoBM,IAApB,CAAyB,IAAzB,CAAzC;EACH;;EACDC,cAAc,GAAG;IACb,IAAIC,YAAY,GAAGlC,SAAS,KAAKD,sBAAsB,EAA3B,GAAgC,IAA5D;IACA,OAAO,YAAYE,OAAO,CAACkC,IAAR,GAAeC,UAA3B,IAAyC,SAASF,YAAzD;EACH;;EACDjB,eAAe,GAAG;IACd,OAAOvB,MAAM,CAAC;MACV2C,aAAa,EAAER,CAAC,IAAI;QAChB,KAAKT,MAAL,GAAcS,CAAC,CAACC,SAAhB;;QACA,KAAKV,MAAL,CAAYC,EAAZ,CAAe,QAAf,EAAyB,MAAM;UAC3B,KAAKiB,QAAL,CAAcC,MAAd;QACH,CAFD;;QAGA,KAAKnB,MAAL,CAAYC,EAAZ,CAAe,OAAf,EAAwB,MAAM;UAC1B,KAAKmB,KAAL,CAAWC,KAAX;QACH,CAFD;MAGH,CATS;MAUVC,cAAc,EAAE,KAVN;MAWVC,iBAAiB,EAAE,KAXT;MAYVC,eAAe,EAAE,KAZP;MAaVC,WAAW,EAAE;QACTC,KAAK,EAAE;MADE,CAbH;MAgBVC,UAAU,EAAE,KAAKd,cAAL,EAhBF;MAiBVe,eAAe,EAAEC,WAAW,IAAI;QAC5B,IAAIC,cAAc,GAAGzD,CAAC,CAAC,OAAD,CAAD,CAAWsB,QAAX,CAAoBkC,WAApB,CAArB;;QACA,KAAKE,WAAL,CAAiBD,cAAjB,EAAiC;UAC7BE,gBAAgB,EAAEC,KAAK,IAAI;YACvB,IAAI;cACAvB,SAAS,EAAEA,SADX;cAEAwB,SAAS,EAAEA,SAFX;cAGAC,KAAK,EAAEA;YAHP,IAIAF,KAJJ;YAKA,KAAK1B,IAAL,CAAUG,SAAS,CAAC0B,MAAV,CAAiB,UAAjB,CAAV,EAAwCD,KAAxC;UACH,CAR4B;UAS7BE,aAAa,EAAEC,IAAI,IAAI;YACnB,IAAI,aAAaA,IAAI,CAACC,QAAtB,EAAgC;cAC5BD,IAAI,CAACE,aAAL,GAAqBlE,MAAM,CAAC,IAAD,EAAO,EAAP,EAAWgE,IAAI,CAACE,aAAhB,EAA+B;gBACtDvB,aAAa,EAAE,KAAKT,iBAAL,CAAuBI,IAAvB,CAA4B,IAA5B;cADuC,CAA/B,CAA3B;YAGH;UACJ;QAf4B,CAAjC;MAiBH,CApCS;MAqCV6B,YAAY,EAAE,CAAC;QACXC,OAAO,EAAE,QADE;QAEXC,QAAQ,EAAE,OAFC;QAGXC,MAAM,EAAE,UAHG;QAIXC,OAAO,EAAE;UACL5B,aAAa,EAAE,KAAKT,iBAAL,CAAuBI,IAAvB,CAA4B,IAA5B,CADV;UAELkC,IAAI,EAAEpE,mBAAmB,CAACqE,MAApB,CAA2B,IAA3B,CAFD;UAGLC,OAAO,EAAEC,KAAK,IAAI;YACd,IAAI;cACAd,KAAK,EAAEA;YADP,IAEAc,KAFJ;YAGA,KAAK1C,IAAL,CAAU,KAAKa,KAAL,CAAWgB,MAAX,CAAkB,UAAlB,CAAV,EAAyCD,KAAzC;UACH;QARI;MAJE,CAAD,EAcX;QACCO,OAAO,EAAE,QADV;QAECC,QAAQ,EAAE,OAFX;QAGCC,MAAM,EAAE,UAHT;QAICC,OAAO,EAAE;UACL5B,aAAa,EAAE,KAAKT,iBAAL,CAAuBI,IAAvB,CAA4B,IAA5B,CADV;UAELkC,IAAI,EAAEpE,mBAAmB,CAACqE,MAApB,CAA2B,QAA3B,CAFD;UAGLC,OAAO,EAAE,MAAM;YACX,KAAKhD,MAAL,CAAYO,IAAZ;UACH;QALI;MAJV,CAdW;IArCJ,CAAD,EA+DV,KAAKjB,gBA/DK,CAAb;EAgEH;;EACDyC,WAAW,CAACtC,UAAD,EAAaoD,OAAb,EAAsB;IAC7BpD,UAAU,CAACC,QAAX,CAAoBV,UAApB;IACA,KAAKoC,KAAL,GAAa,KAAK/B,eAAL,CAAqBS,gBAArB,CAAsCL,UAAtC,EAAkDjB,IAAlD,EAAwDqE,OAAxD,CAAb;;IACA,KAAKxC,gBAAL;EACH;;EACDA,gBAAgB,CAACyC,IAAD,EAAO;IACnB,IAAII,WAAJ;;IACA,IAAIC,KAAK,GAAG,SAASL,IAAT,IAAiB,KAAK,CAAL,KAAWA,IAA5B,GAAmCA,IAAnC,GAA0C,KAAKM,WAAL,CAAiB,OAAjB,CAAtD;IACA,UAAUF,WAAW,GAAG,KAAK9B,KAA7B,KAAuC,KAAK,CAAL,KAAW8B,WAAlD,GAAgE,KAAK,CAArE,GAAyEA,WAAW,CAACtD,QAAZ,GAAuByD,IAAvB,CAA4B,YAA5B,EAA0CF,KAA1C,CAAzE;EACH;;EACDG,sBAAsB,GAAG;IACrB,OAAO;MACHC,QAAQ,EAAE,CADP;MAEHC,KAAK,EAAE,MAFJ;MAGHC,aAAa,EAAE3E,UAAU,KAAK,KAAL,GAAa;IAHnC,CAAP;EAKH;;EACD4E,UAAU,CAACC,UAAD,EAAaC,WAAb,EAA0B;IAChC,OAAO,KAAKxC,KAAL,CAAWgB,MAAX,CAAkByB,KAAlB,CAAwB,KAAKzC,KAA7B,EAAoC0C,SAApC,CAAP;EACH;;EACDC,IAAI,CAACC,cAAD,EAAiB;IACjB,IAAI,KAAKhE,MAAL,CAAYoC,MAAZ,CAAmB,SAAnB,CAAJ,EAAmC;MAC/B;IACH;;IACD,KAAKlB,QAAL,GAAgB,IAAIzC,QAAJ,EAAhB;IACA,IAAIwF,UAAU,GAAG3F,MAAM,CAAC,KAAKgF,sBAAL,EAAD,EAAgCU,cAAhC,CAAvB;;IACA,KAAK5C,KAAL,CAAWgB,MAAX,CAAkB6B,UAAlB;;IACA,KAAKjE,MAAL,CAAY+D,IAAZ;;IACA,OAAO,KAAK7C,QAAL,CAAcgD,OAAd,EAAP;EACH;;EACD3D,IAAI,CAAC4D,QAAD,EAAWhC,KAAX,EAAkB;IAClB,KAAKjB,QAAL,CAAckD,OAAd,CAAsBD,QAAtB,EAAgChC,KAAhC;;IACA,KAAKnC,MAAL,CAAYO,IAAZ;EACH;;EACD6C,WAAW,CAACO,UAAD,EAAaC,WAAb,EAA0B;IACjC,OAAO,KAAK5D,MAAL,CAAYoC,MAAZ,CAAmByB,KAAnB,CAAyB,KAAK7D,MAA9B,EAAsC8D,SAAtC,CAAP;EACH;;AAzIY;;AA2IjB,eAAe7E,UAAf"},"metadata":{},"sourceType":"module"}