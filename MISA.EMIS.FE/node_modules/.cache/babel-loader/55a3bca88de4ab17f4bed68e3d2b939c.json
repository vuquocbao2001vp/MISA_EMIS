{"ast":null,"code":"/**\r\n * DevExtreme (esm/viz/sankey/sankey.js)\r\n * Version: 22.1.4\r\n * Build date: Fri Jul 22 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport { COLOR_MODE_GRADIENT, COLOR_MODE_SOURCE, COLOR_MODE_TARGET } from \"./constants\";\nimport { noop } from \"../../core/utils/common\";\nimport Node from \"./node_item\";\nimport Link from \"./link_item\";\nimport { layout as defaultLayoutBuilder } from \"./layout\";\nimport { isString as _isString, isNumeric as _isNumber } from \"../../core/utils/type\";\nimport baseWidget from \"../core/base_widget\";\nimport componentRegistrator from \"../../core/component_registrator\";\n\nfunction moveLabel(node, labelOptions, availableLabelWidth, rect) {\n  if (node._label.getBBox().width > availableLabelWidth) {\n    node.labelText.applyEllipsis(availableLabelWidth);\n  }\n\n  var bBox = node._label.getBBox();\n\n  var verticalOffset = labelOptions.verticalOffset;\n  var horizontalOffset = labelOptions.horizontalOffset;\n  var labelOffsetY = Math.round(node.rect.y + node.rect.height / 2 - bBox.y - bBox.height / 2) + verticalOffset;\n  var labelOffsetX = node.rect.x + horizontalOffset + node.rect.width - bBox.x;\n\n  if (labelOffsetX + bBox.width >= rect[2] - rect[0]) {\n    labelOffsetX = node.rect.x - horizontalOffset - bBox.x - bBox.width;\n  }\n\n  if (labelOffsetY >= rect[3]) {\n    labelOffsetY = rect[3];\n  }\n\n  if (labelOffsetY - bBox.height < rect[1]) {\n    labelOffsetY = node.rect.y - bBox.y + verticalOffset;\n  }\n\n  node.labelText.attr({\n    translateX: labelOffsetX,\n    translateY: labelOffsetY\n  });\n}\n\nfunction getConnectedLinks(layout, nodeName, linkType) {\n  var result = [];\n  var attrName = \"in\" === linkType ? \"_to\" : \"_from\";\n  var invertedAttrName = \"in\" === linkType ? \"_from\" : \"_to\";\n  layout.links.map(link => link[attrName]._name === nodeName).forEach((connected, idx) => {\n    connected && result.push({\n      index: idx,\n      weight: layout.links[idx]._weight,\n      node: layout.links[idx][invertedAttrName]._name\n    });\n  });\n  return result;\n}\n\nvar dxSankey = baseWidget.inherit({\n  _rootClass: \"dxs-sankey\",\n  _rootClassPrefix: \"dxs\",\n  _proxyData: [],\n  _optionChangesMap: {\n    dataSource: \"DATA_SOURCE\",\n    sortData: \"DATA_SOURCE\",\n    alignment: \"DATA_SOURCE\",\n    node: \"BUILD_LAYOUT\",\n    link: \"BUILD_LAYOUT\",\n    palette: \"BUILD_LAYOUT\",\n    paletteExtensionMode: \"BUILD_LAYOUT\"\n  },\n  _themeDependentChanges: [\"BUILD_LAYOUT\"],\n  _getDefaultSize: function () {\n    return {\n      width: 400,\n      height: 400\n    };\n  },\n  _themeSection: \"sankey\",\n  _fontFields: [\"label.font\"],\n  _optionChangesOrder: [\"DATA_SOURCE\"],\n  _initialChanges: [\"DATA_SOURCE\"],\n  _initCore: function () {\n    this._groupLinks = this._renderer.g().append(this._renderer.root);\n    this._groupNodes = this._renderer.g().append(this._renderer.root);\n    this._groupLabels = this._renderer.g().attr({\n      class: this._rootClassPrefix + \"-labels\"\n    }).append(this._renderer.root);\n    this._drawLabels = true;\n    this._nodes = [];\n    this._links = [];\n    this._gradients = [];\n  },\n  _disposeCore: noop,\n  _applySize: function (rect) {\n    this._rect = rect.slice();\n\n    var adaptiveLayout = this._getOption(\"adaptiveLayout\");\n\n    if (adaptiveLayout.keepLabels || this._rect[2] - this._rect[0] > adaptiveLayout.width) {\n      this._drawLabels = true;\n    } else {\n      this._drawLabels = false;\n    }\n\n    this._change([\"BUILD_LAYOUT\"]);\n\n    return this._rect;\n  },\n  _eventsMap: {\n    onNodeHoverChanged: {\n      name: \"nodeHoverChanged\"\n    },\n    onLinkHoverChanged: {\n      name: \"linkHoverChanged\"\n    }\n  },\n  _customChangesOrder: [\"BUILD_LAYOUT\", \"NODES_DRAW\", \"LINKS_DRAW\", \"LABELS\", \"DRAWN\"],\n  _dataSourceChangedHandler: function () {\n    this._requestChange([\"BUILD_LAYOUT\"]);\n  },\n  _change_DRAWN: function () {\n    this._drawn();\n  },\n  _change_DATA_SOURCE: function () {\n    this._change([\"DRAWN\"]);\n\n    this._updateDataSource();\n  },\n  _change_LABELS: function () {\n    this._applyLabelsAppearance();\n  },\n  _change_BUILD_LAYOUT: function () {\n    this._groupNodes.clear();\n\n    this._groupLinks.clear();\n\n    this._groupLabels.clear();\n\n    this._buildLayout();\n  },\n  _change_NODES_DRAW: function () {\n    var that = this;\n    var nodes = that._nodes;\n    nodes.forEach(function (node, index) {\n      var element = that._renderer.rect().attr(node.rect).append(that._groupNodes);\n\n      node.element = element;\n    });\n\n    this._applyNodesAppearance();\n  },\n  _change_LINKS_DRAW: function () {\n    var that = this;\n    var links = that._links;\n    links.forEach(function (link, index) {\n      var group = that._renderer.g().attr({\n        class: \"link\",\n        \"data-link-idx\": index\n      }).append(that._groupLinks);\n\n      link.overlayElement = that._renderer.path([], \"area\").attr({\n        d: link.d\n      }).append(group);\n      link.element = that._renderer.path([], \"area\").attr({\n        d: link.d\n      }).append(group);\n    });\n\n    this._applyLinksAppearance();\n  },\n  _suspend: function () {\n    if (!this._applyingChanges) {\n      this._suspendChanges();\n    }\n  },\n  _resume: function () {\n    if (!this._applyingChanges) {\n      this._resumeChanges();\n    }\n  },\n  _showTooltip: noop,\n  hideTooltip: noop,\n  clearHover: function () {\n    this._suspend();\n\n    this._nodes.forEach(function (node) {\n      node.isHovered() && node.hover(false);\n    });\n\n    this._links.forEach(function (link) {\n      link.isHovered() && link.hover(false);\n      link.isAdjacentNodeHovered() && link.adjacentNodeHover(false);\n    });\n\n    this._resume();\n  },\n  _applyNodesAppearance: function () {\n    this._nodes.forEach(function (node) {\n      var state = node.getState();\n      node.element.smartAttr(node.states[state]);\n    });\n  },\n  _applyLinksAppearance: function () {\n    this._links.forEach(function (link) {\n      var state = link.getState();\n      link.element.smartAttr(link.states[state]);\n      link.overlayElement.smartAttr(link.overlayStates[state]);\n    });\n  },\n  _hitTestTargets: function (x, y) {\n    var that = this;\n    var data;\n\n    this._proxyData.some(function (callback) {\n      data = callback.call(that, x, y);\n\n      if (data) {\n        return true;\n      }\n    });\n\n    return data;\n  },\n  _getData: function () {\n    var that = this;\n    var data = that._dataSourceItems() || [];\n\n    var sourceField = that._getOption(\"sourceField\", true);\n\n    var targetField = that._getOption(\"targetField\", true);\n\n    var weightField = that._getOption(\"weightField\", true);\n\n    var processedData = [];\n    data.forEach(function (item) {\n      var hasItemOwnProperty = Object.prototype.hasOwnProperty.bind(item);\n\n      if (!hasItemOwnProperty(sourceField)) {\n        that._incidentOccurred(\"E2007\", sourceField);\n      } else if (!hasItemOwnProperty(targetField)) {\n        that._incidentOccurred(\"E2007\", targetField);\n      } else if (!hasItemOwnProperty(weightField)) {\n        that._incidentOccurred(\"E2007\", weightField);\n      } else if (!_isString(item[sourceField])) {\n        that._incidentOccurred(\"E2008\", sourceField);\n      } else if (!_isString(item[targetField])) {\n        that._incidentOccurred(\"E2008\", targetField);\n      } else if (!_isNumber(item[weightField]) || item[weightField] <= 0) {\n        that._incidentOccurred(\"E2009\", weightField);\n      } else {\n        processedData.push([item[sourceField], item[targetField], item[weightField]]);\n      }\n    });\n    return processedData;\n  },\n  _buildLayout: function () {\n    var that = this;\n\n    var data = that._getData();\n\n    var availableRect = this._rect;\n\n    var nodeOptions = that._getOption(\"node\");\n\n    var sortData = that._getOption(\"sortData\");\n\n    var layoutBuilder = that._getOption(\"layoutBuilder\", true) || defaultLayoutBuilder;\n    var rect = {\n      x: availableRect[0],\n      y: availableRect[1],\n      width: availableRect[2] - availableRect[0],\n      height: availableRect[3] - availableRect[1]\n    };\n    var layout = layoutBuilder.computeLayout(data, sortData, {\n      availableRect: rect,\n      nodePadding: nodeOptions.padding,\n      nodeWidth: nodeOptions.width,\n      nodeAlign: that._getOption(\"alignment\", true)\n    }, that._incidentOccurred);\n    that._layoutMap = layout;\n\n    if (!Object.prototype.hasOwnProperty.call(layout, \"error\")) {\n      var nodeColors = {};\n      var nodeIdx = 0;\n\n      var linkOptions = that._getOption(\"link\");\n\n      var totalNodesNum = layout.nodes.map(item => item.length).reduce((previousValue, currentValue) => previousValue + currentValue, 0);\n\n      var palette = that._themeManager.createPalette(that._getOption(\"palette\", true), {\n        useHighlight: true,\n        extensionMode: that._getOption(\"paletteExtensionMode\", true),\n        count: totalNodesNum\n      });\n\n      that._nodes = [];\n      that._links = [];\n\n      that._gradients.forEach(gradient => {\n        gradient.dispose();\n      });\n\n      that._gradients = [];\n      that._shadowFilter && that._shadowFilter.dispose();\n      layout.nodes.forEach(cascadeNodes => {\n        cascadeNodes.forEach(node => {\n          var color = nodeOptions.color || palette.getNextColor();\n          var nodeItem = new Node(that, {\n            id: nodeIdx,\n            color: color,\n            rect: node,\n            options: nodeOptions,\n            linksIn: getConnectedLinks(layout, node._name, \"in\"),\n            linksOut: getConnectedLinks(layout, node._name, \"out\")\n          });\n\n          that._nodes.push(nodeItem);\n\n          nodeIdx++;\n          nodeColors[node._name] = color;\n        });\n      });\n      layout.links.forEach(link => {\n        var gradient = null;\n\n        if (linkOptions.colorMode === COLOR_MODE_GRADIENT) {\n          gradient = that._renderer.linearGradient([{\n            offset: \"0%\",\n            \"stop-color\": nodeColors[link._from._name]\n          }, {\n            offset: \"100%\",\n            \"stop-color\": nodeColors[link._to._name]\n          }]);\n\n          this._gradients.push(gradient);\n        }\n\n        var color = linkOptions.color;\n\n        if (linkOptions.colorMode === COLOR_MODE_SOURCE) {\n          color = nodeColors[link._from._name];\n        } else if (linkOptions.colorMode === COLOR_MODE_TARGET) {\n          color = nodeColors[link._to._name];\n        }\n\n        var linkItem = new Link(that, {\n          d: link.d,\n          boundingRect: link._boundingRect,\n          color: color,\n          options: linkOptions,\n          connection: {\n            source: link._from._name,\n            target: link._to._name,\n            weight: link._weight\n          },\n          gradient: gradient\n        });\n\n        that._links.push(linkItem);\n      });\n\n      that._renderer.initHatching();\n\n      that._change([\"NODES_DRAW\", \"LINKS_DRAW\", \"LABELS\"]);\n    }\n\n    that._change([\"DRAWN\"]);\n  },\n  _applyLabelsAppearance: function () {\n    var that = this;\n\n    var labelOptions = that._getOption(\"label\");\n\n    var availableWidth = that._rect[2] - that._rect[0];\n\n    var nodeOptions = that._getOption(\"node\");\n\n    that._shadowFilter = that._renderer.shadowFilter(\"-50%\", \"-50%\", \"200%\", \"200%\").attr(labelOptions.shadow);\n\n    that._groupLabels.clear();\n\n    if (that._drawLabels && labelOptions.visible) {\n      var availableLabelWidth = (availableWidth - (nodeOptions.width + labelOptions.horizontalOffset) - that._layoutMap.cascades.length * nodeOptions.width) / (that._layoutMap.cascades.length - 1) - labelOptions.horizontalOffset;\n\n      that._nodes.forEach(function (node) {\n        that._createLabel(node, labelOptions, that._shadowFilter.id);\n\n        moveLabel(node, labelOptions, availableLabelWidth, that._rect);\n      });\n\n      if (\"none\" !== labelOptions.overlappingBehavior) {\n        that._nodes.forEach(function (thisNode) {\n          var thisBox = thisNode._label.getBBox();\n\n          that._nodes.forEach(function (otherNode) {\n            var otherBox = otherNode._label.getBBox();\n\n            if (thisNode.id !== otherNode.id && defaultLayoutBuilder.overlap(thisBox, otherBox)) {\n              if (\"ellipsis\" === labelOptions.overlappingBehavior) {\n                thisNode.labelText.applyEllipsis(otherBox.x - thisBox.x);\n              } else if (\"hide\" === labelOptions.overlappingBehavior) {\n                thisNode.labelText.remove();\n              }\n            }\n          });\n        });\n      }\n    }\n  },\n  _createLabel: function (node, labelOptions, filter) {\n    var textData = labelOptions.customizeText(node);\n    var settings = node.getLabelAttributes(labelOptions, filter);\n\n    if (textData) {\n      node._label = this._renderer.g().append(this._groupLabels);\n      node.labelText = this._renderer.text(textData).attr(settings.attr).css(settings.css);\n      node.labelText.append(node._label);\n    }\n  },\n  _getMinSize: function () {\n    var adaptiveLayout = this._getOption(\"adaptiveLayout\");\n\n    return [adaptiveLayout.width, adaptiveLayout.height];\n  },\n  getAllNodes: function () {\n    return this._nodes.slice();\n  },\n  getAllLinks: function () {\n    return this._links.slice();\n  }\n});\ncomponentRegistrator(\"dxSankey\", dxSankey);\nexport default dxSankey;\nimport { plugin as pluginDataSource } from \"../core/data_source\";\ndxSankey.addPlugin(pluginDataSource);","map":{"version":3,"names":["COLOR_MODE_GRADIENT","COLOR_MODE_SOURCE","COLOR_MODE_TARGET","noop","Node","Link","layout","defaultLayoutBuilder","isString","_isString","isNumeric","_isNumber","baseWidget","componentRegistrator","moveLabel","node","labelOptions","availableLabelWidth","rect","_label","getBBox","width","labelText","applyEllipsis","bBox","verticalOffset","horizontalOffset","labelOffsetY","Math","round","y","height","labelOffsetX","x","attr","translateX","translateY","getConnectedLinks","nodeName","linkType","result","attrName","invertedAttrName","links","map","link","_name","forEach","connected","idx","push","index","weight","_weight","dxSankey","inherit","_rootClass","_rootClassPrefix","_proxyData","_optionChangesMap","dataSource","sortData","alignment","palette","paletteExtensionMode","_themeDependentChanges","_getDefaultSize","_themeSection","_fontFields","_optionChangesOrder","_initialChanges","_initCore","_groupLinks","_renderer","g","append","root","_groupNodes","_groupLabels","class","_drawLabels","_nodes","_links","_gradients","_disposeCore","_applySize","_rect","slice","adaptiveLayout","_getOption","keepLabels","_change","_eventsMap","onNodeHoverChanged","name","onLinkHoverChanged","_customChangesOrder","_dataSourceChangedHandler","_requestChange","_change_DRAWN","_drawn","_change_DATA_SOURCE","_updateDataSource","_change_LABELS","_applyLabelsAppearance","_change_BUILD_LAYOUT","clear","_buildLayout","_change_NODES_DRAW","that","nodes","element","_applyNodesAppearance","_change_LINKS_DRAW","group","overlayElement","path","d","_applyLinksAppearance","_suspend","_applyingChanges","_suspendChanges","_resume","_resumeChanges","_showTooltip","hideTooltip","clearHover","isHovered","hover","isAdjacentNodeHovered","adjacentNodeHover","state","getState","smartAttr","states","overlayStates","_hitTestTargets","data","some","callback","call","_getData","_dataSourceItems","sourceField","targetField","weightField","processedData","item","hasItemOwnProperty","Object","prototype","hasOwnProperty","bind","_incidentOccurred","availableRect","nodeOptions","layoutBuilder","computeLayout","nodePadding","padding","nodeWidth","nodeAlign","_layoutMap","nodeColors","nodeIdx","linkOptions","totalNodesNum","length","reduce","previousValue","currentValue","_themeManager","createPalette","useHighlight","extensionMode","count","gradient","dispose","_shadowFilter","cascadeNodes","color","getNextColor","nodeItem","id","options","linksIn","linksOut","colorMode","linearGradient","offset","_from","_to","linkItem","boundingRect","_boundingRect","connection","source","target","initHatching","availableWidth","shadowFilter","shadow","visible","cascades","_createLabel","overlappingBehavior","thisNode","thisBox","otherNode","otherBox","overlap","remove","filter","textData","customizeText","settings","getLabelAttributes","text","css","_getMinSize","getAllNodes","getAllLinks","plugin","pluginDataSource","addPlugin"],"sources":["E:/MisaProject/W2022_06/misa_emis/node_modules/devextreme/esm/viz/sankey/sankey.js"],"sourcesContent":["/**\r\n * DevExtreme (esm/viz/sankey/sankey.js)\r\n * Version: 22.1.4\r\n * Build date: Fri Jul 22 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport {\r\n    COLOR_MODE_GRADIENT,\r\n    COLOR_MODE_SOURCE,\r\n    COLOR_MODE_TARGET\r\n} from \"./constants\";\r\nimport {\r\n    noop\r\n} from \"../../core/utils/common\";\r\nimport Node from \"./node_item\";\r\nimport Link from \"./link_item\";\r\nimport {\r\n    layout as defaultLayoutBuilder\r\n} from \"./layout\";\r\nimport {\r\n    isString as _isString,\r\n    isNumeric as _isNumber\r\n} from \"../../core/utils/type\";\r\nimport baseWidget from \"../core/base_widget\";\r\nimport componentRegistrator from \"../../core/component_registrator\";\r\n\r\nfunction moveLabel(node, labelOptions, availableLabelWidth, rect) {\r\n    if (node._label.getBBox().width > availableLabelWidth) {\r\n        node.labelText.applyEllipsis(availableLabelWidth)\r\n    }\r\n    var bBox = node._label.getBBox();\r\n    var verticalOffset = labelOptions.verticalOffset;\r\n    var horizontalOffset = labelOptions.horizontalOffset;\r\n    var labelOffsetY = Math.round(node.rect.y + node.rect.height / 2 - bBox.y - bBox.height / 2) + verticalOffset;\r\n    var labelOffsetX = node.rect.x + horizontalOffset + node.rect.width - bBox.x;\r\n    if (labelOffsetX + bBox.width >= rect[2] - rect[0]) {\r\n        labelOffsetX = node.rect.x - horizontalOffset - bBox.x - bBox.width\r\n    }\r\n    if (labelOffsetY >= rect[3]) {\r\n        labelOffsetY = rect[3]\r\n    }\r\n    if (labelOffsetY - bBox.height < rect[1]) {\r\n        labelOffsetY = node.rect.y - bBox.y + verticalOffset\r\n    }\r\n    node.labelText.attr({\r\n        translateX: labelOffsetX,\r\n        translateY: labelOffsetY\r\n    })\r\n}\r\n\r\nfunction getConnectedLinks(layout, nodeName, linkType) {\r\n    var result = [];\r\n    var attrName = \"in\" === linkType ? \"_to\" : \"_from\";\r\n    var invertedAttrName = \"in\" === linkType ? \"_from\" : \"_to\";\r\n    layout.links.map(link => link[attrName]._name === nodeName).forEach((connected, idx) => {\r\n        connected && result.push({\r\n            index: idx,\r\n            weight: layout.links[idx]._weight,\r\n            node: layout.links[idx][invertedAttrName]._name\r\n        })\r\n    });\r\n    return result\r\n}\r\nvar dxSankey = baseWidget.inherit({\r\n    _rootClass: \"dxs-sankey\",\r\n    _rootClassPrefix: \"dxs\",\r\n    _proxyData: [],\r\n    _optionChangesMap: {\r\n        dataSource: \"DATA_SOURCE\",\r\n        sortData: \"DATA_SOURCE\",\r\n        alignment: \"DATA_SOURCE\",\r\n        node: \"BUILD_LAYOUT\",\r\n        link: \"BUILD_LAYOUT\",\r\n        palette: \"BUILD_LAYOUT\",\r\n        paletteExtensionMode: \"BUILD_LAYOUT\"\r\n    },\r\n    _themeDependentChanges: [\"BUILD_LAYOUT\"],\r\n    _getDefaultSize: function() {\r\n        return {\r\n            width: 400,\r\n            height: 400\r\n        }\r\n    },\r\n    _themeSection: \"sankey\",\r\n    _fontFields: [\"label.font\"],\r\n    _optionChangesOrder: [\"DATA_SOURCE\"],\r\n    _initialChanges: [\"DATA_SOURCE\"],\r\n    _initCore: function() {\r\n        this._groupLinks = this._renderer.g().append(this._renderer.root);\r\n        this._groupNodes = this._renderer.g().append(this._renderer.root);\r\n        this._groupLabels = this._renderer.g().attr({\r\n            class: this._rootClassPrefix + \"-labels\"\r\n        }).append(this._renderer.root);\r\n        this._drawLabels = true;\r\n        this._nodes = [];\r\n        this._links = [];\r\n        this._gradients = []\r\n    },\r\n    _disposeCore: noop,\r\n    _applySize: function(rect) {\r\n        this._rect = rect.slice();\r\n        var adaptiveLayout = this._getOption(\"adaptiveLayout\");\r\n        if (adaptiveLayout.keepLabels || this._rect[2] - this._rect[0] > adaptiveLayout.width) {\r\n            this._drawLabels = true\r\n        } else {\r\n            this._drawLabels = false\r\n        }\r\n        this._change([\"BUILD_LAYOUT\"]);\r\n        return this._rect\r\n    },\r\n    _eventsMap: {\r\n        onNodeHoverChanged: {\r\n            name: \"nodeHoverChanged\"\r\n        },\r\n        onLinkHoverChanged: {\r\n            name: \"linkHoverChanged\"\r\n        }\r\n    },\r\n    _customChangesOrder: [\"BUILD_LAYOUT\", \"NODES_DRAW\", \"LINKS_DRAW\", \"LABELS\", \"DRAWN\"],\r\n    _dataSourceChangedHandler: function() {\r\n        this._requestChange([\"BUILD_LAYOUT\"])\r\n    },\r\n    _change_DRAWN: function() {\r\n        this._drawn()\r\n    },\r\n    _change_DATA_SOURCE: function() {\r\n        this._change([\"DRAWN\"]);\r\n        this._updateDataSource()\r\n    },\r\n    _change_LABELS: function() {\r\n        this._applyLabelsAppearance()\r\n    },\r\n    _change_BUILD_LAYOUT: function() {\r\n        this._groupNodes.clear();\r\n        this._groupLinks.clear();\r\n        this._groupLabels.clear();\r\n        this._buildLayout()\r\n    },\r\n    _change_NODES_DRAW: function() {\r\n        var that = this;\r\n        var nodes = that._nodes;\r\n        nodes.forEach((function(node, index) {\r\n            var element = that._renderer.rect().attr(node.rect).append(that._groupNodes);\r\n            node.element = element\r\n        }));\r\n        this._applyNodesAppearance()\r\n    },\r\n    _change_LINKS_DRAW: function() {\r\n        var that = this;\r\n        var links = that._links;\r\n        links.forEach((function(link, index) {\r\n            var group = that._renderer.g().attr({\r\n                class: \"link\",\r\n                \"data-link-idx\": index\r\n            }).append(that._groupLinks);\r\n            link.overlayElement = that._renderer.path([], \"area\").attr({\r\n                d: link.d\r\n            }).append(group);\r\n            link.element = that._renderer.path([], \"area\").attr({\r\n                d: link.d\r\n            }).append(group)\r\n        }));\r\n        this._applyLinksAppearance()\r\n    },\r\n    _suspend: function() {\r\n        if (!this._applyingChanges) {\r\n            this._suspendChanges()\r\n        }\r\n    },\r\n    _resume: function() {\r\n        if (!this._applyingChanges) {\r\n            this._resumeChanges()\r\n        }\r\n    },\r\n    _showTooltip: noop,\r\n    hideTooltip: noop,\r\n    clearHover: function() {\r\n        this._suspend();\r\n        this._nodes.forEach((function(node) {\r\n            node.isHovered() && node.hover(false)\r\n        }));\r\n        this._links.forEach((function(link) {\r\n            link.isHovered() && link.hover(false);\r\n            link.isAdjacentNodeHovered() && link.adjacentNodeHover(false)\r\n        }));\r\n        this._resume()\r\n    },\r\n    _applyNodesAppearance: function() {\r\n        this._nodes.forEach((function(node) {\r\n            var state = node.getState();\r\n            node.element.smartAttr(node.states[state])\r\n        }))\r\n    },\r\n    _applyLinksAppearance: function() {\r\n        this._links.forEach((function(link) {\r\n            var state = link.getState();\r\n            link.element.smartAttr(link.states[state]);\r\n            link.overlayElement.smartAttr(link.overlayStates[state])\r\n        }))\r\n    },\r\n    _hitTestTargets: function(x, y) {\r\n        var that = this;\r\n        var data;\r\n        this._proxyData.some((function(callback) {\r\n            data = callback.call(that, x, y);\r\n            if (data) {\r\n                return true\r\n            }\r\n        }));\r\n        return data\r\n    },\r\n    _getData: function() {\r\n        var that = this;\r\n        var data = that._dataSourceItems() || [];\r\n        var sourceField = that._getOption(\"sourceField\", true);\r\n        var targetField = that._getOption(\"targetField\", true);\r\n        var weightField = that._getOption(\"weightField\", true);\r\n        var processedData = [];\r\n        data.forEach((function(item) {\r\n            var hasItemOwnProperty = Object.prototype.hasOwnProperty.bind(item);\r\n            if (!hasItemOwnProperty(sourceField)) {\r\n                that._incidentOccurred(\"E2007\", sourceField)\r\n            } else if (!hasItemOwnProperty(targetField)) {\r\n                that._incidentOccurred(\"E2007\", targetField)\r\n            } else if (!hasItemOwnProperty(weightField)) {\r\n                that._incidentOccurred(\"E2007\", weightField)\r\n            } else if (!_isString(item[sourceField])) {\r\n                that._incidentOccurred(\"E2008\", sourceField)\r\n            } else if (!_isString(item[targetField])) {\r\n                that._incidentOccurred(\"E2008\", targetField)\r\n            } else if (!_isNumber(item[weightField]) || item[weightField] <= 0) {\r\n                that._incidentOccurred(\"E2009\", weightField)\r\n            } else {\r\n                processedData.push([item[sourceField], item[targetField], item[weightField]])\r\n            }\r\n        }));\r\n        return processedData\r\n    },\r\n    _buildLayout: function() {\r\n        var that = this;\r\n        var data = that._getData();\r\n        var availableRect = this._rect;\r\n        var nodeOptions = that._getOption(\"node\");\r\n        var sortData = that._getOption(\"sortData\");\r\n        var layoutBuilder = that._getOption(\"layoutBuilder\", true) || defaultLayoutBuilder;\r\n        var rect = {\r\n            x: availableRect[0],\r\n            y: availableRect[1],\r\n            width: availableRect[2] - availableRect[0],\r\n            height: availableRect[3] - availableRect[1]\r\n        };\r\n        var layout = layoutBuilder.computeLayout(data, sortData, {\r\n            availableRect: rect,\r\n            nodePadding: nodeOptions.padding,\r\n            nodeWidth: nodeOptions.width,\r\n            nodeAlign: that._getOption(\"alignment\", true)\r\n        }, that._incidentOccurred);\r\n        that._layoutMap = layout;\r\n        if (!Object.prototype.hasOwnProperty.call(layout, \"error\")) {\r\n            var nodeColors = {};\r\n            var nodeIdx = 0;\r\n            var linkOptions = that._getOption(\"link\");\r\n            var totalNodesNum = layout.nodes.map(item => item.length).reduce((previousValue, currentValue) => previousValue + currentValue, 0);\r\n            var palette = that._themeManager.createPalette(that._getOption(\"palette\", true), {\r\n                useHighlight: true,\r\n                extensionMode: that._getOption(\"paletteExtensionMode\", true),\r\n                count: totalNodesNum\r\n            });\r\n            that._nodes = [];\r\n            that._links = [];\r\n            that._gradients.forEach(gradient => {\r\n                gradient.dispose()\r\n            });\r\n            that._gradients = [];\r\n            that._shadowFilter && that._shadowFilter.dispose();\r\n            layout.nodes.forEach(cascadeNodes => {\r\n                cascadeNodes.forEach(node => {\r\n                    var color = nodeOptions.color || palette.getNextColor();\r\n                    var nodeItem = new Node(that, {\r\n                        id: nodeIdx,\r\n                        color: color,\r\n                        rect: node,\r\n                        options: nodeOptions,\r\n                        linksIn: getConnectedLinks(layout, node._name, \"in\"),\r\n                        linksOut: getConnectedLinks(layout, node._name, \"out\")\r\n                    });\r\n                    that._nodes.push(nodeItem);\r\n                    nodeIdx++;\r\n                    nodeColors[node._name] = color\r\n                })\r\n            });\r\n            layout.links.forEach(link => {\r\n                var gradient = null;\r\n                if (linkOptions.colorMode === COLOR_MODE_GRADIENT) {\r\n                    gradient = that._renderer.linearGradient([{\r\n                        offset: \"0%\",\r\n                        \"stop-color\": nodeColors[link._from._name]\r\n                    }, {\r\n                        offset: \"100%\",\r\n                        \"stop-color\": nodeColors[link._to._name]\r\n                    }]);\r\n                    this._gradients.push(gradient)\r\n                }\r\n                var color = linkOptions.color;\r\n                if (linkOptions.colorMode === COLOR_MODE_SOURCE) {\r\n                    color = nodeColors[link._from._name]\r\n                } else if (linkOptions.colorMode === COLOR_MODE_TARGET) {\r\n                    color = nodeColors[link._to._name]\r\n                }\r\n                var linkItem = new Link(that, {\r\n                    d: link.d,\r\n                    boundingRect: link._boundingRect,\r\n                    color: color,\r\n                    options: linkOptions,\r\n                    connection: {\r\n                        source: link._from._name,\r\n                        target: link._to._name,\r\n                        weight: link._weight\r\n                    },\r\n                    gradient: gradient\r\n                });\r\n                that._links.push(linkItem)\r\n            });\r\n            that._renderer.initHatching();\r\n            that._change([\"NODES_DRAW\", \"LINKS_DRAW\", \"LABELS\"])\r\n        }\r\n        that._change([\"DRAWN\"])\r\n    },\r\n    _applyLabelsAppearance: function() {\r\n        var that = this;\r\n        var labelOptions = that._getOption(\"label\");\r\n        var availableWidth = that._rect[2] - that._rect[0];\r\n        var nodeOptions = that._getOption(\"node\");\r\n        that._shadowFilter = that._renderer.shadowFilter(\"-50%\", \"-50%\", \"200%\", \"200%\").attr(labelOptions.shadow);\r\n        that._groupLabels.clear();\r\n        if (that._drawLabels && labelOptions.visible) {\r\n            var availableLabelWidth = (availableWidth - (nodeOptions.width + labelOptions.horizontalOffset) - that._layoutMap.cascades.length * nodeOptions.width) / (that._layoutMap.cascades.length - 1) - labelOptions.horizontalOffset;\r\n            that._nodes.forEach((function(node) {\r\n                that._createLabel(node, labelOptions, that._shadowFilter.id);\r\n                moveLabel(node, labelOptions, availableLabelWidth, that._rect)\r\n            }));\r\n            if (\"none\" !== labelOptions.overlappingBehavior) {\r\n                that._nodes.forEach((function(thisNode) {\r\n                    var thisBox = thisNode._label.getBBox();\r\n                    that._nodes.forEach((function(otherNode) {\r\n                        var otherBox = otherNode._label.getBBox();\r\n                        if (thisNode.id !== otherNode.id && defaultLayoutBuilder.overlap(thisBox, otherBox)) {\r\n                            if (\"ellipsis\" === labelOptions.overlappingBehavior) {\r\n                                thisNode.labelText.applyEllipsis(otherBox.x - thisBox.x)\r\n                            } else if (\"hide\" === labelOptions.overlappingBehavior) {\r\n                                thisNode.labelText.remove()\r\n                            }\r\n                        }\r\n                    }))\r\n                }))\r\n            }\r\n        }\r\n    },\r\n    _createLabel: function(node, labelOptions, filter) {\r\n        var textData = labelOptions.customizeText(node);\r\n        var settings = node.getLabelAttributes(labelOptions, filter);\r\n        if (textData) {\r\n            node._label = this._renderer.g().append(this._groupLabels);\r\n            node.labelText = this._renderer.text(textData).attr(settings.attr).css(settings.css);\r\n            node.labelText.append(node._label)\r\n        }\r\n    },\r\n    _getMinSize: function() {\r\n        var adaptiveLayout = this._getOption(\"adaptiveLayout\");\r\n        return [adaptiveLayout.width, adaptiveLayout.height]\r\n    },\r\n    getAllNodes: function() {\r\n        return this._nodes.slice()\r\n    },\r\n    getAllLinks: function() {\r\n        return this._links.slice()\r\n    }\r\n});\r\ncomponentRegistrator(\"dxSankey\", dxSankey);\r\nexport default dxSankey;\r\nimport {\r\n    plugin as pluginDataSource\r\n} from \"../core/data_source\";\r\ndxSankey.addPlugin(pluginDataSource);\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}