{"ast":null,"code":"/**\r\n * DevExtreme (esm/viz/chart_components/shutter_zoom.js)\r\n * Version: 22.1.4\r\n * Build date: Fri Jul 22 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport { start as dragEventStart, move as dragEventMove, end as dragEventEnd } from \"../../events/drag\";\nvar SHUTTER_EVENTS_NS = \".shutter-zoom\";\nvar DRAG_START_EVENT_NAME = dragEventStart + SHUTTER_EVENTS_NS;\nvar DRAG_UPDATE_EVENT_NAME = dragEventMove + SHUTTER_EVENTS_NS;\nvar DRAG_END_EVENT_NAME = dragEventEnd + SHUTTER_EVENTS_NS;\n\nfunction getPointerCoord(rootOffset, canvas, rotated, e) {\n  var coord = Math.floor(rotated ? e.pageY - rootOffset.top : e.pageX - rootOffset.left);\n  var min = rotated ? canvas.y1 : canvas.x1;\n  var max = rotated ? canvas.y2 : canvas.x2;\n\n  if (coord < min) {\n    coord = min;\n  } else if (coord > max) {\n    coord = max;\n  }\n\n  return coord;\n}\n\nfunction checkCoords(rootOffset, canvas, e) {\n  var x = e.pageX - rootOffset.left;\n  var y = e.pageY - rootOffset.top;\n  return x >= canvas.x1 && x <= canvas.x2 && y >= canvas.y1 && y <= canvas.y2;\n}\n\nfunction dragStartHandler(ctx) {\n  return function (e) {\n    var offset = ctx.getRootOffset();\n    var canvas = ctx.getCanvas();\n\n    if (!checkCoords(offset, canvas, e)) {\n      e.cancel = true;\n      return;\n    }\n\n    ctx.rootOffset = offset;\n    ctx.canvas = canvas;\n    ctx.startCoord = getPointerCoord(offset, canvas, ctx.rotated, e);\n    ctx.triggerStart();\n    ctx.rect.attr({\n      x: canvas.x1,\n      y: canvas.y1,\n      width: canvas.width,\n      height: canvas.height\n    }).append(ctx.root);\n  };\n}\n\nfunction dragHandler(ctx) {\n  return function (e) {\n    var curCoord = getPointerCoord(ctx.rootOffset, ctx.canvas, ctx.rotated, e);\n    var attr = {};\n    ctx.curCoord = curCoord;\n    attr[ctx.rotated ? \"y\" : \"x\"] = Math.min(ctx.startCoord, curCoord);\n    attr[ctx.rotated ? \"height\" : \"width\"] = Math.abs(ctx.startCoord - curCoord);\n    ctx.rect.attr(attr);\n  };\n}\n\nfunction dragEndHandler(ctx) {\n  return function (e) {\n    ctx.triggerEnd();\n    ctx.rect.remove();\n  };\n}\n\nfunction shutterZoom(options) {\n  var chart = options.chart;\n  var renderer = options.renderer;\n  var rotated = options.rotated;\n  var rect = renderer.rect(0, 0, 0, 0).attr(options.shutterOptions);\n  var shutter = {\n    rect: rect,\n    root: renderer.root,\n    rotated: rotated,\n    triggerStart: function () {\n      chart._eventTrigger(\"zoomStart\");\n    },\n    triggerEnd: function () {\n      var tr = chart._argumentAxes[0].getTranslator();\n\n      var rangeStart = Math.min(this.startCoord, this.curCoord);\n      var rangeEnd = Math.max(this.startCoord, this.curCoord);\n\n      chart._eventTrigger(\"zoomEnd\", {\n        rangeStart: tr.from(rangeStart),\n        rangeEnd: tr.from(rangeEnd)\n      });\n    },\n    dispose: function () {\n      renderer.root.off(SHUTTER_EVENTS_NS);\n      rect.dispose();\n    },\n    getRootOffset: function () {\n      return renderer.getRootOffset();\n    },\n    getCanvas: function () {\n      var canvas = chart._canvas;\n      var panes = chart.panes;\n      var firstPane = panes[0].canvas;\n      var lastPane = panes[panes.length - 1].canvas;\n      return {\n        x1: firstPane.left,\n        y1: firstPane.top,\n        x2: canvas.width - lastPane.right,\n        y2: canvas.height - lastPane.bottom,\n        width: canvas.width - firstPane.left - lastPane.right,\n        height: canvas.height - firstPane.top - lastPane.bottom\n      };\n    }\n  };\n  renderer.root.off(SHUTTER_EVENTS_NS).on(DRAG_START_EVENT_NAME, {\n    direction: rotated ? \"vertical\" : \"horizontal\",\n    immediate: true\n  }, dragStartHandler(shutter)).on(DRAG_UPDATE_EVENT_NAME, dragHandler(shutter)).on(DRAG_END_EVENT_NAME, dragEndHandler(shutter));\n  return shutter;\n}\n\nexport default {\n  name: \"shutter_zoom\",\n  init: function () {\n    var options = this.option(\"shutterZoom\") || {};\n\n    if (!options.enabled) {\n      return;\n    }\n\n    this._shutterZoom = shutterZoom({\n      chart: this,\n      renderer: this._renderer,\n      rotated: this.option(\"rotated\"),\n      shutterOptions: options\n    });\n  },\n  dispose: function () {\n    this._shutterZoom && this._shutterZoom.dispose();\n  }\n};","map":{"version":3,"names":["start","dragEventStart","move","dragEventMove","end","dragEventEnd","SHUTTER_EVENTS_NS","DRAG_START_EVENT_NAME","DRAG_UPDATE_EVENT_NAME","DRAG_END_EVENT_NAME","getPointerCoord","rootOffset","canvas","rotated","e","coord","Math","floor","pageY","top","pageX","left","min","y1","x1","max","y2","x2","checkCoords","x","y","dragStartHandler","ctx","offset","getRootOffset","getCanvas","cancel","startCoord","triggerStart","rect","attr","width","height","append","root","dragHandler","curCoord","abs","dragEndHandler","triggerEnd","remove","shutterZoom","options","chart","renderer","shutterOptions","shutter","_eventTrigger","tr","_argumentAxes","getTranslator","rangeStart","rangeEnd","from","dispose","off","_canvas","panes","firstPane","lastPane","length","right","bottom","on","direction","immediate","name","init","option","enabled","_shutterZoom","_renderer"],"sources":["E:/MisaProject/W2022_06/misa_emis/node_modules/devextreme/esm/viz/chart_components/shutter_zoom.js"],"sourcesContent":["/**\r\n * DevExtreme (esm/viz/chart_components/shutter_zoom.js)\r\n * Version: 22.1.4\r\n * Build date: Fri Jul 22 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport {\r\n    start as dragEventStart,\r\n    move as dragEventMove,\r\n    end as dragEventEnd\r\n} from \"../../events/drag\";\r\nvar SHUTTER_EVENTS_NS = \".shutter-zoom\";\r\nvar DRAG_START_EVENT_NAME = dragEventStart + SHUTTER_EVENTS_NS;\r\nvar DRAG_UPDATE_EVENT_NAME = dragEventMove + SHUTTER_EVENTS_NS;\r\nvar DRAG_END_EVENT_NAME = dragEventEnd + SHUTTER_EVENTS_NS;\r\n\r\nfunction getPointerCoord(rootOffset, canvas, rotated, e) {\r\n    var coord = Math.floor(rotated ? e.pageY - rootOffset.top : e.pageX - rootOffset.left);\r\n    var min = rotated ? canvas.y1 : canvas.x1;\r\n    var max = rotated ? canvas.y2 : canvas.x2;\r\n    if (coord < min) {\r\n        coord = min\r\n    } else if (coord > max) {\r\n        coord = max\r\n    }\r\n    return coord\r\n}\r\n\r\nfunction checkCoords(rootOffset, canvas, e) {\r\n    var x = e.pageX - rootOffset.left;\r\n    var y = e.pageY - rootOffset.top;\r\n    return x >= canvas.x1 && x <= canvas.x2 && y >= canvas.y1 && y <= canvas.y2\r\n}\r\n\r\nfunction dragStartHandler(ctx) {\r\n    return function(e) {\r\n        var offset = ctx.getRootOffset();\r\n        var canvas = ctx.getCanvas();\r\n        if (!checkCoords(offset, canvas, e)) {\r\n            e.cancel = true;\r\n            return\r\n        }\r\n        ctx.rootOffset = offset;\r\n        ctx.canvas = canvas;\r\n        ctx.startCoord = getPointerCoord(offset, canvas, ctx.rotated, e);\r\n        ctx.triggerStart();\r\n        ctx.rect.attr({\r\n            x: canvas.x1,\r\n            y: canvas.y1,\r\n            width: canvas.width,\r\n            height: canvas.height\r\n        }).append(ctx.root)\r\n    }\r\n}\r\n\r\nfunction dragHandler(ctx) {\r\n    return function(e) {\r\n        var curCoord = getPointerCoord(ctx.rootOffset, ctx.canvas, ctx.rotated, e);\r\n        var attr = {};\r\n        ctx.curCoord = curCoord;\r\n        attr[ctx.rotated ? \"y\" : \"x\"] = Math.min(ctx.startCoord, curCoord);\r\n        attr[ctx.rotated ? \"height\" : \"width\"] = Math.abs(ctx.startCoord - curCoord);\r\n        ctx.rect.attr(attr)\r\n    }\r\n}\r\n\r\nfunction dragEndHandler(ctx) {\r\n    return function(e) {\r\n        ctx.triggerEnd();\r\n        ctx.rect.remove()\r\n    }\r\n}\r\n\r\nfunction shutterZoom(options) {\r\n    var chart = options.chart;\r\n    var renderer = options.renderer;\r\n    var rotated = options.rotated;\r\n    var rect = renderer.rect(0, 0, 0, 0).attr(options.shutterOptions);\r\n    var shutter = {\r\n        rect: rect,\r\n        root: renderer.root,\r\n        rotated: rotated,\r\n        triggerStart: function() {\r\n            chart._eventTrigger(\"zoomStart\")\r\n        },\r\n        triggerEnd: function() {\r\n            var tr = chart._argumentAxes[0].getTranslator();\r\n            var rangeStart = Math.min(this.startCoord, this.curCoord);\r\n            var rangeEnd = Math.max(this.startCoord, this.curCoord);\r\n            chart._eventTrigger(\"zoomEnd\", {\r\n                rangeStart: tr.from(rangeStart),\r\n                rangeEnd: tr.from(rangeEnd)\r\n            })\r\n        },\r\n        dispose: function() {\r\n            renderer.root.off(SHUTTER_EVENTS_NS);\r\n            rect.dispose()\r\n        },\r\n        getRootOffset: function() {\r\n            return renderer.getRootOffset()\r\n        },\r\n        getCanvas: function() {\r\n            var canvas = chart._canvas;\r\n            var panes = chart.panes;\r\n            var firstPane = panes[0].canvas;\r\n            var lastPane = panes[panes.length - 1].canvas;\r\n            return {\r\n                x1: firstPane.left,\r\n                y1: firstPane.top,\r\n                x2: canvas.width - lastPane.right,\r\n                y2: canvas.height - lastPane.bottom,\r\n                width: canvas.width - firstPane.left - lastPane.right,\r\n                height: canvas.height - firstPane.top - lastPane.bottom\r\n            }\r\n        }\r\n    };\r\n    renderer.root.off(SHUTTER_EVENTS_NS).on(DRAG_START_EVENT_NAME, {\r\n        direction: rotated ? \"vertical\" : \"horizontal\",\r\n        immediate: true\r\n    }, dragStartHandler(shutter)).on(DRAG_UPDATE_EVENT_NAME, dragHandler(shutter)).on(DRAG_END_EVENT_NAME, dragEndHandler(shutter));\r\n    return shutter\r\n}\r\nexport default {\r\n    name: \"shutter_zoom\",\r\n    init: function() {\r\n        var options = this.option(\"shutterZoom\") || {};\r\n        if (!options.enabled) {\r\n            return\r\n        }\r\n        this._shutterZoom = shutterZoom({\r\n            chart: this,\r\n            renderer: this._renderer,\r\n            rotated: this.option(\"rotated\"),\r\n            shutterOptions: options\r\n        })\r\n    },\r\n    dispose: function() {\r\n        this._shutterZoom && this._shutterZoom.dispose()\r\n    }\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}