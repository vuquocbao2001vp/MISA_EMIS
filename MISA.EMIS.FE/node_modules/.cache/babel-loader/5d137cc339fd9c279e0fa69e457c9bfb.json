{"ast":null,"code":"import \"core-js/modules/es.array.at.js\";\nimport \"core-js/modules/es.string.at-alternative.js\";\n\n/**\r\n * DevExtreme (esm/ui/menu/ui.menu.js)\r\n * Version: 22.1.4\r\n * Build date: Fri Jul 22 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport { getOuterWidth } from \"../../core/utils/size\";\nimport $ from \"../../core/renderer\";\nimport eventsEngine from \"../../events/core/events_engine\";\nimport registerComponent from \"../../core/component_registrator\";\nimport { noop } from \"../../core/utils/common\";\nimport { getPublicElement } from \"../../core/element\";\nimport { each } from \"../../core/utils/iterator\";\nimport { isPlainObject, isObject, isDefined } from \"../../core/utils/type\";\nimport { extend } from \"../../core/utils/extend\";\nimport { getElementMaxHeightByWindow } from \"../overlay/utils\";\nimport { addNamespace } from \"../../events/utils/index\";\nimport pointerEvents from \"../../events/pointer\";\nimport { end as hoverEventEnd } from \"../../events/hover\";\nimport MenuBase from \"../context_menu/ui.menu_base\";\nimport Overlay from \"../overlay/ui.overlay\";\nimport Submenu from \"./ui.submenu\";\nimport Button from \"../button\";\nimport TreeView from \"../tree_view\";\nvar DX_MENU_CLASS = \"dx-menu\";\nvar DX_MENU_VERTICAL_CLASS = DX_MENU_CLASS + \"-vertical\";\nvar DX_MENU_HORIZONTAL_CLASS = DX_MENU_CLASS + \"-horizontal\";\nvar DX_MENU_ITEM_CLASS = DX_MENU_CLASS + \"-item\";\nvar DX_MENU_ITEMS_CONTAINER_CLASS = DX_MENU_CLASS + \"-items-container\";\nvar DX_MENU_ITEM_EXPANDED_CLASS = DX_MENU_ITEM_CLASS + \"-expanded\";\nvar DX_CONTEXT_MENU_CLASS = \"dx-context-menu\";\nvar DX_CONTEXT_MENU_CONTAINER_BORDER_CLASS = DX_CONTEXT_MENU_CLASS + \"-container-border\";\nvar DX_CONTEXT_MENU_CONTENT_DELIMITER_CLASS = \"dx-context-menu-content-delimiter\";\nvar DX_SUBMENU_CLASS = \"dx-submenu\";\nvar DX_STATE_DISABLED_CLASS = \"dx-state-disabled\";\nvar DX_STATE_HOVER_CLASS = \"dx-state-hover\";\nvar DX_STATE_ACTIVE_CLASS = \"dx-state-active\";\nvar DX_ADAPTIVE_MODE_CLASS = DX_MENU_CLASS + \"-adaptive-mode\";\nvar DX_ADAPTIVE_HAMBURGER_BUTTON_CLASS = DX_MENU_CLASS + \"-hamburger-button\";\nvar DX_ADAPTIVE_MODE_OVERLAY_WRAPPER_CLASS = DX_ADAPTIVE_MODE_CLASS + \"-overlay-wrapper\";\nvar FOCUS_UP = \"up\";\nvar FOCUS_DOWN = \"down\";\nvar FOCUS_LEFT = \"left\";\nvar FOCUS_RIGHT = \"right\";\nvar SHOW_SUBMENU_OPERATION = \"showSubmenu\";\nvar NEXTITEM_OPERATION = \"nextItem\";\nvar PREVITEM_OPERATION = \"prevItem\";\nvar DEFAULT_DELAY = {\n  show: 50,\n  hide: 300\n};\nvar ACTIONS = [\"onSubmenuShowing\", \"onSubmenuShown\", \"onSubmenuHiding\", \"onSubmenuHidden\", \"onItemContextMenu\", \"onItemClick\", \"onSelectionChanged\", \"onItemRendered\"];\n\nclass Menu extends MenuBase {\n  _getDefaultOptions() {\n    return extend(super._getDefaultOptions(), {\n      orientation: \"horizontal\",\n      submenuDirection: \"auto\",\n      showFirstSubmenuMode: {\n        name: \"onClick\",\n        delay: {\n          show: 50,\n          hide: 300\n        }\n      },\n      hideSubmenuOnMouseLeave: false,\n      onSubmenuShowing: null,\n      onSubmenuShown: null,\n      onSubmenuHiding: null,\n      onSubmenuHidden: null,\n      adaptivityEnabled: false\n    });\n  }\n\n  _setOptionsByReference() {\n    super._setOptionsByReference();\n\n    extend(this._optionsByReference, {\n      animation: true,\n      selectedItem: true\n    });\n  }\n\n  _itemElements() {\n    var rootMenuElements = super._itemElements();\n\n    var submenuElements = this._submenuItemElements();\n\n    return rootMenuElements.add(submenuElements);\n  }\n\n  _submenuItemElements() {\n    var elements = [];\n    var itemSelector = \".\".concat(DX_MENU_ITEM_CLASS);\n    var currentSubmenu = this._submenus.length && this._submenus[0];\n\n    if (currentSubmenu && currentSubmenu.itemsContainer()) {\n      elements = currentSubmenu.itemsContainer().find(itemSelector);\n    }\n\n    return elements;\n  }\n\n  _focusTarget() {\n    return this.$element();\n  }\n\n  _isMenuHorizontal() {\n    return \"horizontal\" === this.option(\"orientation\");\n  }\n\n  _moveFocus(location) {\n    var $items = this._getAvailableItems();\n\n    var isMenuHorizontal = this._isMenuHorizontal();\n\n    var $activeItem = this._getActiveItem(true);\n\n    var argument;\n    var operation;\n    var navigationAction;\n    var $newTarget;\n\n    switch (location) {\n      case FOCUS_UP:\n        operation = isMenuHorizontal ? SHOW_SUBMENU_OPERATION : this._getItemsNavigationOperation(PREVITEM_OPERATION);\n        argument = isMenuHorizontal ? $activeItem : $items;\n        navigationAction = this._getKeyboardNavigationAction(operation, argument);\n        $newTarget = navigationAction();\n        break;\n\n      case FOCUS_DOWN:\n        operation = isMenuHorizontal ? SHOW_SUBMENU_OPERATION : this._getItemsNavigationOperation(NEXTITEM_OPERATION);\n        argument = isMenuHorizontal ? $activeItem : $items;\n        navigationAction = this._getKeyboardNavigationAction(operation, argument);\n        $newTarget = navigationAction();\n        break;\n\n      case FOCUS_RIGHT:\n        operation = isMenuHorizontal ? this._getItemsNavigationOperation(NEXTITEM_OPERATION) : SHOW_SUBMENU_OPERATION;\n        argument = isMenuHorizontal ? $items : $activeItem;\n        navigationAction = this._getKeyboardNavigationAction(operation, argument);\n        $newTarget = navigationAction();\n        break;\n\n      case FOCUS_LEFT:\n        operation = isMenuHorizontal ? this._getItemsNavigationOperation(PREVITEM_OPERATION) : SHOW_SUBMENU_OPERATION;\n        argument = isMenuHorizontal ? $items : $activeItem;\n        navigationAction = this._getKeyboardNavigationAction(operation, argument);\n        $newTarget = navigationAction();\n        break;\n\n      default:\n        return super._moveFocus(location);\n    }\n\n    if ($newTarget && 0 !== $newTarget.length) {\n      this.option(\"focusedElement\", getPublicElement($newTarget));\n    }\n  }\n\n  _getItemsNavigationOperation(operation) {\n    var navOperation = operation;\n\n    if (this.option(\"rtlEnabled\")) {\n      navOperation = operation === PREVITEM_OPERATION ? NEXTITEM_OPERATION : PREVITEM_OPERATION;\n    }\n\n    return navOperation;\n  }\n\n  _getKeyboardNavigationAction(operation, argument) {\n    var action = noop;\n\n    switch (operation) {\n      case SHOW_SUBMENU_OPERATION:\n        if (!argument.hasClass(DX_STATE_DISABLED_CLASS)) {\n          action = this._showSubmenu.bind(this, argument);\n        }\n\n        break;\n\n      case NEXTITEM_OPERATION:\n        action = this._nextItem.bind(this, argument);\n        break;\n\n      case PREVITEM_OPERATION:\n        action = this._prevItem.bind(this, argument);\n    }\n\n    return action;\n  }\n\n  _clean() {\n    super._clean();\n\n    this.option(\"templatesRenderAsynchronously\") && clearTimeout(this._resizeEventTimer);\n  }\n\n  _visibilityChanged(visible) {\n    if (visible) {\n      if (!this._menuItemsWidth) {\n        this._updateItemsWidthCache();\n      }\n\n      this._dimensionChanged();\n    }\n  }\n\n  _isAdaptivityEnabled() {\n    return this.option(\"adaptivityEnabled\") && \"horizontal\" === this.option(\"orientation\");\n  }\n\n  _updateItemsWidthCache() {\n    var $menuItems = this.$element().find(\"ul\").first().children(\"li\").children(\".\".concat(DX_MENU_ITEM_CLASS));\n    this._menuItemsWidth = this._getSummaryItemsWidth($menuItems, true);\n  }\n\n  _dimensionChanged() {\n    if (!this._isAdaptivityEnabled()) {\n      return;\n    }\n\n    var containerWidth = getOuterWidth(this.$element());\n\n    this._toggleAdaptiveMode(this._menuItemsWidth > containerWidth);\n  }\n\n  _init() {\n    super._init();\n\n    this._submenus = [];\n  }\n\n  _initActions() {\n    this._actions = {};\n    each(ACTIONS, (index, action) => {\n      this._actions[action] = this._createActionByOption(action);\n    });\n  }\n\n  _initMarkup() {\n    this._visibleSubmenu = null;\n    this.$element().addClass(DX_MENU_CLASS);\n\n    super._initMarkup();\n\n    this._addCustomCssClass(this.$element());\n\n    this.setAria(\"role\", \"menubar\");\n  }\n\n  _render() {\n    super._render();\n\n    this._initAdaptivity();\n  }\n\n  _renderHamburgerButton() {\n    this._hamburger = new Button($(\"<div>\").addClass(DX_ADAPTIVE_HAMBURGER_BUTTON_CLASS), {\n      icon: \"menu\",\n      activeStateEnabled: false,\n      onClick: this._toggleTreeView.bind(this)\n    });\n    return this._hamburger.$element();\n  }\n\n  _toggleTreeView(state) {\n    if (isPlainObject(state)) {\n      state = !this._overlay.option(\"visible\");\n    }\n\n    this._overlay.option(\"visible\", state);\n\n    this._toggleHamburgerActiveState(state);\n  }\n\n  _toggleHamburgerActiveState(state) {\n    this._hamburger && this._hamburger.$element().toggleClass(DX_STATE_ACTIVE_CLASS, state);\n  }\n\n  _toggleAdaptiveMode(state) {\n    var $menuItemsContainer = this.$element().find(\".\".concat(DX_MENU_HORIZONTAL_CLASS));\n    var $adaptiveElements = this.$element().find(\".\".concat(DX_ADAPTIVE_MODE_CLASS));\n\n    if (state) {\n      this._hideVisibleSubmenu();\n    } else {\n      this._treeView && this._treeView.collapseAll();\n      this._overlay && this._toggleTreeView(state);\n    }\n\n    $menuItemsContainer.toggle(!state);\n    $adaptiveElements.toggle(state);\n  }\n\n  _removeAdaptivity() {\n    if (!this._$adaptiveContainer) {\n      return;\n    }\n\n    this._toggleAdaptiveMode(false);\n\n    this._$adaptiveContainer.remove();\n\n    this._$adaptiveContainer = null;\n    this._treeView = null;\n    this._hamburger = null;\n    this._overlay = null;\n  }\n\n  _treeviewItemClickHandler(e) {\n    this._actions.onItemClick(e);\n\n    if (!e.node.children.length) {\n      this._toggleTreeView(false);\n    }\n  }\n\n  _getAdaptiveOverlayOptions() {\n    var rtl = this.option(\"rtlEnabled\");\n    var position = rtl ? \"right\" : \"left\";\n    return {\n      _ignoreFunctionValueDeprecation: true,\n      maxHeight: () => getElementMaxHeightByWindow(this.$element()),\n      deferRendering: false,\n      shading: false,\n      animation: false,\n      hideOnParentScroll: true,\n      onHidden: () => {\n        this._toggleHamburgerActiveState(false);\n      },\n      height: \"auto\",\n      hideOnOutsideClick: e => !$(e.target).closest(\".\".concat(DX_ADAPTIVE_HAMBURGER_BUTTON_CLASS)).length,\n      position: {\n        collision: \"flipfit\",\n        at: \"bottom \" + position,\n        my: \"top \" + position,\n        of: this._hamburger.$element()\n      }\n    };\n  }\n\n  _getTreeViewOptions() {\n    var menuOptions = {};\n    each([\"rtlEnabled\", \"width\", \"accessKey\", \"activeStateEnabled\", \"animation\", \"dataSource\", \"disabled\", \"displayExpr\", \"displayExpr\", \"focusStateEnabled\", \"hint\", \"hoverStateEnabled\", \"itemsExpr\", \"items\", \"itemTemplate\", \"selectedExpr\", \"selectionMode\", \"tabIndex\", \"visible\"], (_, option) => {\n      menuOptions[option] = this.option(option);\n    });\n    each([\"onItemContextMenu\", \"onSelectionChanged\", \"onItemRendered\"], (_, actionName) => {\n      menuOptions[actionName] = e => {\n        this._actions[actionName](e);\n      };\n    });\n    return extend(menuOptions, {\n      dataSource: this.getDataSource(),\n      animationEnabled: !!this.option(\"animation\"),\n      onItemClick: this._treeviewItemClickHandler.bind(this),\n      onItemExpanded: e => {\n        this._overlay.repaint();\n\n        this._actions.onSubmenuShown(e);\n      },\n      onItemCollapsed: e => {\n        this._overlay.repaint();\n\n        this._actions.onSubmenuHidden(e);\n      },\n      selectNodesRecursive: false,\n      selectByClick: this.option(\"selectByClick\"),\n      expandEvent: \"click\"\n    });\n  }\n\n  _initAdaptivity() {\n    if (!this._isAdaptivityEnabled()) {\n      return;\n    }\n\n    this._$adaptiveContainer = $(\"<div>\").addClass(DX_ADAPTIVE_MODE_CLASS);\n\n    var $hamburger = this._renderHamburgerButton();\n\n    this._treeView = this._createComponent($(\"<div>\"), TreeView, this._getTreeViewOptions());\n    this._overlay = this._createComponent($(\"<div>\"), Overlay, this._getAdaptiveOverlayOptions());\n\n    this._overlay.$content().append(this._treeView.$element()).addClass(DX_ADAPTIVE_MODE_CLASS).addClass(this.option(\"cssClass\"));\n\n    this._overlay.$wrapper().addClass(DX_ADAPTIVE_MODE_OVERLAY_WRAPPER_CLASS);\n\n    this._$adaptiveContainer.append($hamburger);\n\n    this._$adaptiveContainer.append(this._overlay.$element());\n\n    this.$element().append(this._$adaptiveContainer);\n\n    this._updateItemsWidthCache();\n\n    this._dimensionChanged();\n  }\n\n  _getDelay(delayType) {\n    var delay = this.option(\"showFirstSubmenuMode\").delay;\n\n    if (!isDefined(delay)) {\n      return DEFAULT_DELAY[delayType];\n    } else {\n      return isObject(delay) ? delay[delayType] : delay;\n    }\n  }\n\n  _keyboardHandler(e) {\n    return super._keyboardHandler(e, !!this._visibleSubmenu);\n  }\n\n  _renderContainer() {\n    var $wrapper = $(\"<div>\");\n    $wrapper.appendTo(this.$element()).addClass(this._isMenuHorizontal() ? DX_MENU_HORIZONTAL_CLASS : DX_MENU_VERTICAL_CLASS);\n    return super._renderContainer($wrapper);\n  }\n\n  _renderSubmenuItems(node, $itemFrame) {\n    var submenu = this._createSubmenu(node, $itemFrame);\n\n    this._submenus.push(submenu);\n\n    this._renderBorderElement($itemFrame);\n\n    return submenu;\n  }\n\n  _getKeyboardListeners() {\n    return super._getKeyboardListeners().concat(this._visibleSubmenu);\n  }\n\n  _createSubmenu(node, $rootItem) {\n    var $submenuContainer = $(\"<div>\").addClass(DX_CONTEXT_MENU_CLASS).appendTo($rootItem);\n\n    var items = this._getChildNodes(node);\n\n    var subMenu = this._createComponent($submenuContainer, Submenu, extend(this._getSubmenuOptions(), {\n      _dataAdapter: this._dataAdapter,\n      _parentKey: node.internalFields.key,\n      items: items,\n      onHoverStart: this._clearTimeouts.bind(this),\n      position: this.getSubmenuPosition($rootItem)\n    }));\n\n    this._attachSubmenuHandlers($rootItem, subMenu);\n\n    return subMenu;\n  }\n\n  _getSubmenuOptions() {\n    var $submenuTarget = $(\"<div>\");\n\n    var isMenuHorizontal = this._isMenuHorizontal();\n\n    return {\n      itemTemplate: this.option(\"itemTemplate\"),\n      target: $submenuTarget,\n      orientation: this.option(\"orientation\"),\n      selectionMode: this.option(\"selectionMode\"),\n      cssClass: this.option(\"cssClass\"),\n      selectByClick: this.option(\"selectByClick\"),\n      hoverStateEnabled: this.option(\"hoverStateEnabled\"),\n      activeStateEnabled: this.option(\"activeStateEnabled\"),\n      focusStateEnabled: this.option(\"focusStateEnabled\"),\n      animation: this.option(\"animation\"),\n      showSubmenuMode: this.option(\"showSubmenuMode\"),\n      displayExpr: this.option(\"displayExpr\"),\n      disabledExpr: this.option(\"disabledExpr\"),\n      selectedExpr: this.option(\"selectedExpr\"),\n      itemsExpr: this.option(\"itemsExpr\"),\n      onFocusedItemChanged: e => {\n        if (!e.component.option(\"visible\")) {\n          return;\n        }\n\n        this.option(\"focusedElement\", e.component.option(\"focusedElement\"));\n      },\n      onSelectionChanged: this._nestedItemOnSelectionChangedHandler.bind(this),\n      onItemClick: this._nestedItemOnItemClickHandler.bind(this),\n      onItemRendered: this._nestedItemOnItemRenderedHandler.bind(this),\n      onLeftFirstItem: isMenuHorizontal ? null : this._moveMainMenuFocus.bind(this, PREVITEM_OPERATION),\n      onLeftLastItem: isMenuHorizontal ? null : this._moveMainMenuFocus.bind(this, NEXTITEM_OPERATION),\n      onCloseRootSubmenu: this._moveMainMenuFocus.bind(this, isMenuHorizontal ? PREVITEM_OPERATION : null),\n      onExpandLastSubmenu: isMenuHorizontal ? this._moveMainMenuFocus.bind(this, NEXTITEM_OPERATION) : null\n    };\n  }\n\n  _getShowFirstSubmenuMode() {\n    if (!this._isDesktopDevice()) {\n      return \"onClick\";\n    }\n\n    var optionValue = this.option(\"showFirstSubmenuMode\");\n    return isObject(optionValue) ? optionValue.name : optionValue;\n  }\n\n  _moveMainMenuFocus(direction) {\n    var $items = this._getAvailableItems();\n\n    var itemCount = $items.length;\n    var $currentItem = $items.filter(\".\".concat(DX_MENU_ITEM_EXPANDED_CLASS)).eq(0);\n    var itemIndex = $items.index($currentItem);\n\n    this._hideSubmenu(this._visibleSubmenu);\n\n    itemIndex += direction === PREVITEM_OPERATION ? -1 : 1;\n\n    if (itemIndex >= itemCount) {\n      itemIndex = 0;\n    } else if (itemIndex < 0) {\n      itemIndex = itemCount - 1;\n    }\n\n    var $newItem = $items.eq(itemIndex);\n    this.option(\"focusedElement\", getPublicElement($newItem));\n  }\n\n  _nestedItemOnSelectionChangedHandler(args) {\n    var selectedItem = args.addedItems.length && args.addedItems[0];\n    var submenu = Submenu.getInstance(args.element);\n    var onSelectionChanged = this._actions.onSelectionChanged;\n    onSelectionChanged(args);\n    selectedItem && this._clearSelectionInSubmenus(selectedItem[0], submenu);\n\n    this._clearRootSelection();\n\n    this._setOptionWithoutOptionChange(\"selectedItem\", selectedItem);\n  }\n\n  _clearSelectionInSubmenus(item, targetSubmenu) {\n    var cleanAllSubmenus = !arguments.length;\n    each(this._submenus, (index, submenu) => {\n      var $submenu = submenu._itemContainer();\n\n      var isOtherItem = !$submenu.is(targetSubmenu && targetSubmenu._itemContainer());\n      var $selectedItem = $submenu.find(\".\".concat(this._selectedItemClass()));\n\n      if (isOtherItem && $selectedItem.length || cleanAllSubmenus) {\n        $selectedItem.removeClass(this._selectedItemClass());\n\n        var selectedItemData = this._getItemData($selectedItem);\n\n        if (selectedItemData) {\n          selectedItemData.selected = false;\n        }\n\n        submenu._clearSelectedItems();\n      }\n    });\n  }\n\n  _clearRootSelection() {\n    var $prevSelectedItem = this.$element().find(\".\".concat(DX_MENU_ITEMS_CONTAINER_CLASS)).first().children().children().filter(\".\".concat(this._selectedItemClass()));\n\n    if ($prevSelectedItem.length) {\n      var prevSelectedItemData = this._getItemData($prevSelectedItem);\n\n      prevSelectedItemData.selected = false;\n      $prevSelectedItem.removeClass(this._selectedItemClass());\n    }\n  }\n\n  _nestedItemOnItemClickHandler(e) {\n    this._actions.onItemClick(e);\n  }\n\n  _nestedItemOnItemRenderedHandler(e) {\n    this._actions.onItemRendered(e);\n  }\n\n  _attachSubmenuHandlers($rootItem, submenu) {\n    var $submenuOverlayContent = submenu.getOverlayContent();\n    var submenus = $submenuOverlayContent.find(\".\".concat(DX_SUBMENU_CLASS));\n    var submenuMouseLeaveName = addNamespace(hoverEventEnd, this.NAME + \"_submenu\");\n    submenu.option({\n      onShowing: this._submenuOnShowingHandler.bind(this, $rootItem, submenu),\n      onShown: this._submenuOnShownHandler.bind(this, $rootItem, submenu),\n      onHiding: this._submenuOnHidingHandler.bind(this, $rootItem, submenu),\n      onHidden: this._submenuOnHiddenHandler.bind(this, $rootItem, submenu)\n    });\n    each(submenus, (index, submenu) => {\n      eventsEngine.off(submenu, submenuMouseLeaveName);\n      eventsEngine.on(submenu, submenuMouseLeaveName, null, this._submenuMouseLeaveHandler.bind(this, $rootItem));\n    });\n  }\n\n  _submenuOnShowingHandler($rootItem, submenu) {\n    var $border = $rootItem.children(\".\".concat(DX_CONTEXT_MENU_CONTAINER_BORDER_CLASS));\n\n    this._actions.onSubmenuShowing({\n      rootItem: getPublicElement($rootItem),\n      submenu: submenu\n    });\n\n    $border.show();\n    $rootItem.addClass(DX_MENU_ITEM_EXPANDED_CLASS);\n  }\n\n  _submenuOnShownHandler($rootItem, submenu) {\n    this._actions.onSubmenuShown({\n      rootItem: getPublicElement($rootItem),\n      submenu: submenu\n    });\n  }\n\n  _submenuOnHidingHandler($rootItem, submenu, eventArgs) {\n    var $border = $rootItem.children(\".\".concat(DX_CONTEXT_MENU_CONTAINER_BORDER_CLASS));\n    var args = eventArgs;\n    args.rootItem = getPublicElement($rootItem);\n    args.submenu = submenu;\n\n    this._actions.onSubmenuHiding(args);\n\n    eventArgs = args;\n\n    if (!eventArgs.cancel) {\n      if (this._visibleSubmenu === submenu) {\n        this._visibleSubmenu = null;\n      }\n\n      $border.hide();\n      $rootItem.removeClass(DX_MENU_ITEM_EXPANDED_CLASS);\n    }\n  }\n\n  _submenuOnHiddenHandler($rootItem, submenu) {\n    this._actions.onSubmenuHidden({\n      rootItem: getPublicElement($rootItem),\n      submenu: submenu\n    });\n  }\n\n  _submenuMouseLeaveHandler($rootItem, eventArgs) {\n    var target = $(eventArgs.relatedTarget).parents(\".\".concat(DX_CONTEXT_MENU_CLASS))[0];\n\n    var contextMenu = this._getSubmenuByRootElement($rootItem).getOverlayContent()[0];\n\n    if (this.option(\"hideSubmenuOnMouseLeave\") && target !== contextMenu) {\n      this._clearTimeouts();\n\n      setTimeout(this._hideSubmenuAfterTimeout.bind(this), this._getDelay(\"hide\"));\n    }\n  }\n\n  _hideSubmenuAfterTimeout() {\n    if (!this._visibleSubmenu) {\n      return;\n    }\n\n    var isRootItemHovered = $(this._visibleSubmenu.$element().context).hasClass(DX_STATE_HOVER_CLASS);\n\n    var isSubmenuItemHovered = this._visibleSubmenu.getOverlayContent().find(\".\".concat(DX_STATE_HOVER_CLASS)).length;\n\n    var hoveredElementFromSubMenu = this._visibleSubmenu.getOverlayContent().get(0).querySelector(\":hover\");\n\n    if (!hoveredElementFromSubMenu && !isSubmenuItemHovered && !isRootItemHovered) {\n      this._visibleSubmenu.hide();\n    }\n  }\n\n  _getSubmenuByRootElement($rootItem) {\n    if (!$rootItem) {\n      return false;\n    }\n\n    var $submenu = $rootItem.children(\".\".concat(DX_CONTEXT_MENU_CLASS));\n    return $submenu.length && Submenu.getInstance($submenu);\n  }\n\n  getSubmenuPosition($rootItem) {\n    var isHorizontalMenu = this._isMenuHorizontal();\n\n    var submenuDirection = this.option(\"submenuDirection\").toLowerCase();\n    var rtlEnabled = this.option(\"rtlEnabled\");\n    var submenuPosition = {\n      collision: \"flip\",\n      of: $rootItem\n    };\n\n    switch (submenuDirection) {\n      case \"leftortop\":\n        submenuPosition.at = \"left top\";\n        submenuPosition.my = isHorizontalMenu ? \"left bottom\" : \"right top\";\n        break;\n\n      case \"rightorbottom\":\n        submenuPosition.at = isHorizontalMenu ? \"left bottom\" : \"right top\";\n        submenuPosition.my = \"left top\";\n        break;\n\n      default:\n        if (isHorizontalMenu) {\n          submenuPosition.at = rtlEnabled ? \"right bottom\" : \"left bottom\";\n          submenuPosition.my = rtlEnabled ? \"right top\" : \"left top\";\n        } else {\n          submenuPosition.at = rtlEnabled ? \"left top\" : \"right top\";\n          submenuPosition.my = rtlEnabled ? \"right top\" : \"left top\";\n        }\n\n    }\n\n    return submenuPosition;\n  }\n\n  _renderBorderElement($item) {\n    $(\"<div>\").appendTo($item).addClass(DX_CONTEXT_MENU_CONTAINER_BORDER_CLASS).hide();\n  }\n\n  _itemPointerDownHandler(e) {\n    var $target = $(e.target);\n    var $closestItem = $target.closest(this._itemElements());\n\n    if ($closestItem.hasClass(\"dx-menu-item-has-submenu\")) {\n      this.option(\"focusedElement\", null);\n      return;\n    }\n\n    super._itemPointerDownHandler(e);\n  }\n\n  _hoverStartHandler(e) {\n    var mouseMoveEventName = addNamespace(pointerEvents.move, this.NAME);\n\n    var $item = this._getItemElementByEventArgs(e);\n\n    var node = this._dataAdapter.getNodeByItem(this._getItemData($item));\n\n    var isSelectionActive = isDefined(e.buttons) && 1 === e.buttons || !isDefined(e.buttons) && 1 === e.which;\n\n    if (this._isItemDisabled($item)) {\n      return;\n    }\n\n    eventsEngine.off($item, mouseMoveEventName);\n\n    if (!this._hasChildren(node)) {\n      this._showSubmenuTimer = setTimeout(this._hideSubmenuAfterTimeout.bind(this), this._getDelay(\"hide\"));\n      return;\n    }\n\n    if (\"onHover\" === this._getShowFirstSubmenuMode() && !isSelectionActive) {\n      var submenu = this._getSubmenuByElement($item);\n\n      this._clearTimeouts();\n\n      if (!submenu.isOverlayVisible()) {\n        eventsEngine.on($item, mouseMoveEventName, this._itemMouseMoveHandler.bind(this));\n        this._showSubmenuTimer = this._getDelay(\"hide\");\n      }\n    }\n  }\n\n  _hoverEndHandler(eventArg) {\n    var $item = this._getItemElementByEventArgs(eventArg);\n\n    var relatedTarget = $(eventArg.relatedTarget);\n\n    super._hoverEndHandler(eventArg);\n\n    this._clearTimeouts();\n\n    if (this._isItemDisabled($item)) {\n      return;\n    }\n\n    if (relatedTarget.hasClass(DX_CONTEXT_MENU_CONTENT_DELIMITER_CLASS)) {\n      return;\n    }\n\n    if (this.option(\"hideSubmenuOnMouseLeave\") && !relatedTarget.hasClass(DX_MENU_ITEMS_CONTAINER_CLASS)) {\n      this._hideSubmenuTimer = setTimeout(() => {\n        this._hideSubmenuAfterTimeout();\n      }, this._getDelay(\"hide\"));\n    }\n  }\n\n  _hideVisibleSubmenu() {\n    if (!this._visibleSubmenu) {\n      return false;\n    }\n\n    this._hideSubmenu(this._visibleSubmenu);\n\n    return true;\n  }\n\n  _showSubmenu($itemElement) {\n    var submenu = this._getSubmenuByElement($itemElement);\n\n    if (this._visibleSubmenu !== submenu) {\n      this._hideVisibleSubmenu();\n    }\n\n    if (submenu) {\n      this._clearTimeouts();\n\n      submenu.show();\n      this.option(\"focusedElement\", submenu.option(\"focusedElement\"));\n    }\n\n    this._visibleSubmenu = submenu;\n    this._hoveredRootItem = $itemElement;\n  }\n\n  _hideSubmenu(submenu) {\n    submenu && submenu.hide();\n\n    if (this._visibleSubmenu === submenu) {\n      this._visibleSubmenu = null;\n    }\n\n    this._hoveredRootItem = null;\n  }\n\n  _itemMouseMoveHandler(e) {\n    if (e.pointers && e.pointers.length) {\n      return;\n    }\n\n    var $item = $(e.currentTarget);\n\n    if (!isDefined(this._showSubmenuTimer)) {\n      return;\n    }\n\n    this._clearTimeouts();\n\n    this._showSubmenuTimer = setTimeout(() => {\n      var submenu = this._getSubmenuByElement($item);\n\n      if (submenu && !submenu.isOverlayVisible()) {\n        this._showSubmenu($item);\n      }\n    }, this._getDelay(\"show\"));\n  }\n\n  _clearTimeouts() {\n    clearTimeout(this._hideSubmenuTimer);\n    clearTimeout(this._showSubmenuTimer);\n  }\n\n  _getSubmenuByElement($itemElement, itemData) {\n    var submenu = this._getSubmenuByRootElement($itemElement);\n\n    if (submenu) {\n      return submenu;\n    } else {\n      itemData = itemData || this._getItemData($itemElement);\n\n      var node = this._dataAdapter.getNodeByItem(itemData);\n\n      return this._hasChildren(node) && this._renderSubmenuItems(node, $itemElement);\n    }\n  }\n\n  _updateSubmenuVisibilityOnClick(actionArgs) {\n    var args = actionArgs.args.length && actionArgs.args[0];\n\n    if (!args || this._disabledGetter(args.itemData)) {\n      return;\n    }\n\n    var $itemElement = $(args.itemElement);\n\n    var currentSubmenu = this._getSubmenuByElement($itemElement, args.itemData);\n\n    this._updateSelectedItemOnClick(actionArgs);\n\n    if (this._visibleSubmenu) {\n      if (this._visibleSubmenu === currentSubmenu) {\n        if (\"onClick\" === this.option(\"showFirstSubmenuMode\")) {\n          this._hideSubmenu(this._visibleSubmenu);\n        }\n\n        return;\n      } else {\n        this._hideSubmenu(this._visibleSubmenu);\n      }\n    }\n\n    if (!currentSubmenu) {\n      return;\n    }\n\n    if (!currentSubmenu.isOverlayVisible()) {\n      this._showSubmenu($itemElement);\n\n      return;\n    }\n  }\n\n  _optionChanged(args) {\n    if (ACTIONS.indexOf(args.name) >= 0) {\n      this._initActions();\n\n      return;\n    }\n\n    switch (args.name) {\n      case \"orientation\":\n      case \"submenuDirection\":\n        this._invalidate();\n\n        break;\n\n      case \"showFirstSubmenuMode\":\n      case \"hideSubmenuOnMouseLeave\":\n        break;\n\n      case \"showSubmenuMode\":\n        this._changeSubmenusOption(args.name, args.value);\n\n        break;\n\n      case \"adaptivityEnabled\":\n        args.value ? this._initAdaptivity() : this._removeAdaptivity();\n        break;\n\n      case \"width\":\n        if (this._isAdaptivityEnabled()) {\n          this._treeView.option(args.name, args.value);\n\n          this._overlay.option(args.name, args.value);\n        }\n\n        super._optionChanged(args);\n\n        this._dimensionChanged();\n\n        break;\n\n      case \"animation\":\n        if (this._isAdaptivityEnabled()) {\n          this._treeView.option(\"animationEnabled\", !!args.value);\n        }\n\n        super._optionChanged(args);\n\n        break;\n\n      default:\n        if (this._isAdaptivityEnabled() && (args.name === args.fullName || \"items\" === args.name)) {\n          this._treeView.option(args.fullName, args.value);\n        }\n\n        super._optionChanged(args);\n\n    }\n  }\n\n  _changeSubmenusOption(name, value) {\n    each(this._submenus, (index, submenu) => {\n      submenu.option(name, value);\n    });\n  }\n\n  selectItem(itemElement) {\n    this._hideSubmenu(this._visibleSubmenu);\n\n    super.selectItem(itemElement);\n  }\n\n  unselectItem(itemElement) {\n    this._hideSubmenu(this._visibleSubmenu);\n\n    super.selectItem(itemElement);\n  }\n\n}\n\nregisterComponent(\"dxMenu\", Menu);\nexport default Menu;","map":{"version":3,"names":["getOuterWidth","$","eventsEngine","registerComponent","noop","getPublicElement","each","isPlainObject","isObject","isDefined","extend","getElementMaxHeightByWindow","addNamespace","pointerEvents","end","hoverEventEnd","MenuBase","Overlay","Submenu","Button","TreeView","DX_MENU_CLASS","DX_MENU_VERTICAL_CLASS","DX_MENU_HORIZONTAL_CLASS","DX_MENU_ITEM_CLASS","DX_MENU_ITEMS_CONTAINER_CLASS","DX_MENU_ITEM_EXPANDED_CLASS","DX_CONTEXT_MENU_CLASS","DX_CONTEXT_MENU_CONTAINER_BORDER_CLASS","DX_CONTEXT_MENU_CONTENT_DELIMITER_CLASS","DX_SUBMENU_CLASS","DX_STATE_DISABLED_CLASS","DX_STATE_HOVER_CLASS","DX_STATE_ACTIVE_CLASS","DX_ADAPTIVE_MODE_CLASS","DX_ADAPTIVE_HAMBURGER_BUTTON_CLASS","DX_ADAPTIVE_MODE_OVERLAY_WRAPPER_CLASS","FOCUS_UP","FOCUS_DOWN","FOCUS_LEFT","FOCUS_RIGHT","SHOW_SUBMENU_OPERATION","NEXTITEM_OPERATION","PREVITEM_OPERATION","DEFAULT_DELAY","show","hide","ACTIONS","Menu","_getDefaultOptions","orientation","submenuDirection","showFirstSubmenuMode","name","delay","hideSubmenuOnMouseLeave","onSubmenuShowing","onSubmenuShown","onSubmenuHiding","onSubmenuHidden","adaptivityEnabled","_setOptionsByReference","_optionsByReference","animation","selectedItem","_itemElements","rootMenuElements","submenuElements","_submenuItemElements","add","elements","itemSelector","concat","currentSubmenu","_submenus","length","itemsContainer","find","_focusTarget","$element","_isMenuHorizontal","option","_moveFocus","location","$items","_getAvailableItems","isMenuHorizontal","$activeItem","_getActiveItem","argument","operation","navigationAction","$newTarget","_getItemsNavigationOperation","_getKeyboardNavigationAction","navOperation","action","hasClass","_showSubmenu","bind","_nextItem","_prevItem","_clean","clearTimeout","_resizeEventTimer","_visibilityChanged","visible","_menuItemsWidth","_updateItemsWidthCache","_dimensionChanged","_isAdaptivityEnabled","$menuItems","first","children","_getSummaryItemsWidth","containerWidth","_toggleAdaptiveMode","_init","_initActions","_actions","index","_createActionByOption","_initMarkup","_visibleSubmenu","addClass","_addCustomCssClass","setAria","_render","_initAdaptivity","_renderHamburgerButton","_hamburger","icon","activeStateEnabled","onClick","_toggleTreeView","state","_overlay","_toggleHamburgerActiveState","toggleClass","$menuItemsContainer","$adaptiveElements","_hideVisibleSubmenu","_treeView","collapseAll","toggle","_removeAdaptivity","_$adaptiveContainer","remove","_treeviewItemClickHandler","e","onItemClick","node","_getAdaptiveOverlayOptions","rtl","position","_ignoreFunctionValueDeprecation","maxHeight","deferRendering","shading","hideOnParentScroll","onHidden","height","hideOnOutsideClick","target","closest","collision","at","my","of","_getTreeViewOptions","menuOptions","_","actionName","dataSource","getDataSource","animationEnabled","onItemExpanded","repaint","onItemCollapsed","selectNodesRecursive","selectByClick","expandEvent","$hamburger","_createComponent","$content","append","$wrapper","_getDelay","delayType","_keyboardHandler","_renderContainer","appendTo","_renderSubmenuItems","$itemFrame","submenu","_createSubmenu","push","_renderBorderElement","_getKeyboardListeners","$rootItem","$submenuContainer","items","_getChildNodes","subMenu","_getSubmenuOptions","_dataAdapter","_parentKey","internalFields","key","onHoverStart","_clearTimeouts","getSubmenuPosition","_attachSubmenuHandlers","$submenuTarget","itemTemplate","selectionMode","cssClass","hoverStateEnabled","focusStateEnabled","showSubmenuMode","displayExpr","disabledExpr","selectedExpr","itemsExpr","onFocusedItemChanged","component","onSelectionChanged","_nestedItemOnSelectionChangedHandler","_nestedItemOnItemClickHandler","onItemRendered","_nestedItemOnItemRenderedHandler","onLeftFirstItem","_moveMainMenuFocus","onLeftLastItem","onCloseRootSubmenu","onExpandLastSubmenu","_getShowFirstSubmenuMode","_isDesktopDevice","optionValue","direction","itemCount","$currentItem","filter","eq","itemIndex","_hideSubmenu","$newItem","args","addedItems","getInstance","element","_clearSelectionInSubmenus","_clearRootSelection","_setOptionWithoutOptionChange","item","targetSubmenu","cleanAllSubmenus","arguments","$submenu","_itemContainer","isOtherItem","is","$selectedItem","_selectedItemClass","removeClass","selectedItemData","_getItemData","selected","_clearSelectedItems","$prevSelectedItem","prevSelectedItemData","$submenuOverlayContent","getOverlayContent","submenus","submenuMouseLeaveName","NAME","onShowing","_submenuOnShowingHandler","onShown","_submenuOnShownHandler","onHiding","_submenuOnHidingHandler","_submenuOnHiddenHandler","off","on","_submenuMouseLeaveHandler","$border","rootItem","eventArgs","cancel","relatedTarget","parents","contextMenu","_getSubmenuByRootElement","setTimeout","_hideSubmenuAfterTimeout","isRootItemHovered","context","isSubmenuItemHovered","hoveredElementFromSubMenu","get","querySelector","isHorizontalMenu","toLowerCase","rtlEnabled","submenuPosition","$item","_itemPointerDownHandler","$target","$closestItem","_hoverStartHandler","mouseMoveEventName","move","_getItemElementByEventArgs","getNodeByItem","isSelectionActive","buttons","which","_isItemDisabled","_hasChildren","_showSubmenuTimer","_getSubmenuByElement","isOverlayVisible","_itemMouseMoveHandler","_hoverEndHandler","eventArg","_hideSubmenuTimer","$itemElement","_hoveredRootItem","pointers","currentTarget","itemData","_updateSubmenuVisibilityOnClick","actionArgs","_disabledGetter","itemElement","_updateSelectedItemOnClick","_optionChanged","indexOf","_invalidate","_changeSubmenusOption","value","fullName","selectItem","unselectItem"],"sources":["E:/MisaProject/W2022_06/misa_emis/node_modules/devextreme/esm/ui/menu/ui.menu.js"],"sourcesContent":["/**\r\n * DevExtreme (esm/ui/menu/ui.menu.js)\r\n * Version: 22.1.4\r\n * Build date: Fri Jul 22 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport {\r\n    getOuterWidth\r\n} from \"../../core/utils/size\";\r\nimport $ from \"../../core/renderer\";\r\nimport eventsEngine from \"../../events/core/events_engine\";\r\nimport registerComponent from \"../../core/component_registrator\";\r\nimport {\r\n    noop\r\n} from \"../../core/utils/common\";\r\nimport {\r\n    getPublicElement\r\n} from \"../../core/element\";\r\nimport {\r\n    each\r\n} from \"../../core/utils/iterator\";\r\nimport {\r\n    isPlainObject,\r\n    isObject,\r\n    isDefined\r\n} from \"../../core/utils/type\";\r\nimport {\r\n    extend\r\n} from \"../../core/utils/extend\";\r\nimport {\r\n    getElementMaxHeightByWindow\r\n} from \"../overlay/utils\";\r\nimport {\r\n    addNamespace\r\n} from \"../../events/utils/index\";\r\nimport pointerEvents from \"../../events/pointer\";\r\nimport {\r\n    end as hoverEventEnd\r\n} from \"../../events/hover\";\r\nimport MenuBase from \"../context_menu/ui.menu_base\";\r\nimport Overlay from \"../overlay/ui.overlay\";\r\nimport Submenu from \"./ui.submenu\";\r\nimport Button from \"../button\";\r\nimport TreeView from \"../tree_view\";\r\nvar DX_MENU_CLASS = \"dx-menu\";\r\nvar DX_MENU_VERTICAL_CLASS = DX_MENU_CLASS + \"-vertical\";\r\nvar DX_MENU_HORIZONTAL_CLASS = DX_MENU_CLASS + \"-horizontal\";\r\nvar DX_MENU_ITEM_CLASS = DX_MENU_CLASS + \"-item\";\r\nvar DX_MENU_ITEMS_CONTAINER_CLASS = DX_MENU_CLASS + \"-items-container\";\r\nvar DX_MENU_ITEM_EXPANDED_CLASS = DX_MENU_ITEM_CLASS + \"-expanded\";\r\nvar DX_CONTEXT_MENU_CLASS = \"dx-context-menu\";\r\nvar DX_CONTEXT_MENU_CONTAINER_BORDER_CLASS = DX_CONTEXT_MENU_CLASS + \"-container-border\";\r\nvar DX_CONTEXT_MENU_CONTENT_DELIMITER_CLASS = \"dx-context-menu-content-delimiter\";\r\nvar DX_SUBMENU_CLASS = \"dx-submenu\";\r\nvar DX_STATE_DISABLED_CLASS = \"dx-state-disabled\";\r\nvar DX_STATE_HOVER_CLASS = \"dx-state-hover\";\r\nvar DX_STATE_ACTIVE_CLASS = \"dx-state-active\";\r\nvar DX_ADAPTIVE_MODE_CLASS = DX_MENU_CLASS + \"-adaptive-mode\";\r\nvar DX_ADAPTIVE_HAMBURGER_BUTTON_CLASS = DX_MENU_CLASS + \"-hamburger-button\";\r\nvar DX_ADAPTIVE_MODE_OVERLAY_WRAPPER_CLASS = DX_ADAPTIVE_MODE_CLASS + \"-overlay-wrapper\";\r\nvar FOCUS_UP = \"up\";\r\nvar FOCUS_DOWN = \"down\";\r\nvar FOCUS_LEFT = \"left\";\r\nvar FOCUS_RIGHT = \"right\";\r\nvar SHOW_SUBMENU_OPERATION = \"showSubmenu\";\r\nvar NEXTITEM_OPERATION = \"nextItem\";\r\nvar PREVITEM_OPERATION = \"prevItem\";\r\nvar DEFAULT_DELAY = {\r\n    show: 50,\r\n    hide: 300\r\n};\r\nvar ACTIONS = [\"onSubmenuShowing\", \"onSubmenuShown\", \"onSubmenuHiding\", \"onSubmenuHidden\", \"onItemContextMenu\", \"onItemClick\", \"onSelectionChanged\", \"onItemRendered\"];\r\nclass Menu extends MenuBase {\r\n    _getDefaultOptions() {\r\n        return extend(super._getDefaultOptions(), {\r\n            orientation: \"horizontal\",\r\n            submenuDirection: \"auto\",\r\n            showFirstSubmenuMode: {\r\n                name: \"onClick\",\r\n                delay: {\r\n                    show: 50,\r\n                    hide: 300\r\n                }\r\n            },\r\n            hideSubmenuOnMouseLeave: false,\r\n            onSubmenuShowing: null,\r\n            onSubmenuShown: null,\r\n            onSubmenuHiding: null,\r\n            onSubmenuHidden: null,\r\n            adaptivityEnabled: false\r\n        })\r\n    }\r\n    _setOptionsByReference() {\r\n        super._setOptionsByReference();\r\n        extend(this._optionsByReference, {\r\n            animation: true,\r\n            selectedItem: true\r\n        })\r\n    }\r\n    _itemElements() {\r\n        var rootMenuElements = super._itemElements();\r\n        var submenuElements = this._submenuItemElements();\r\n        return rootMenuElements.add(submenuElements)\r\n    }\r\n    _submenuItemElements() {\r\n        var elements = [];\r\n        var itemSelector = \".\".concat(DX_MENU_ITEM_CLASS);\r\n        var currentSubmenu = this._submenus.length && this._submenus[0];\r\n        if (currentSubmenu && currentSubmenu.itemsContainer()) {\r\n            elements = currentSubmenu.itemsContainer().find(itemSelector)\r\n        }\r\n        return elements\r\n    }\r\n    _focusTarget() {\r\n        return this.$element()\r\n    }\r\n    _isMenuHorizontal() {\r\n        return \"horizontal\" === this.option(\"orientation\")\r\n    }\r\n    _moveFocus(location) {\r\n        var $items = this._getAvailableItems();\r\n        var isMenuHorizontal = this._isMenuHorizontal();\r\n        var $activeItem = this._getActiveItem(true);\r\n        var argument;\r\n        var operation;\r\n        var navigationAction;\r\n        var $newTarget;\r\n        switch (location) {\r\n            case FOCUS_UP:\r\n                operation = isMenuHorizontal ? SHOW_SUBMENU_OPERATION : this._getItemsNavigationOperation(PREVITEM_OPERATION);\r\n                argument = isMenuHorizontal ? $activeItem : $items;\r\n                navigationAction = this._getKeyboardNavigationAction(operation, argument);\r\n                $newTarget = navigationAction();\r\n                break;\r\n            case FOCUS_DOWN:\r\n                operation = isMenuHorizontal ? SHOW_SUBMENU_OPERATION : this._getItemsNavigationOperation(NEXTITEM_OPERATION);\r\n                argument = isMenuHorizontal ? $activeItem : $items;\r\n                navigationAction = this._getKeyboardNavigationAction(operation, argument);\r\n                $newTarget = navigationAction();\r\n                break;\r\n            case FOCUS_RIGHT:\r\n                operation = isMenuHorizontal ? this._getItemsNavigationOperation(NEXTITEM_OPERATION) : SHOW_SUBMENU_OPERATION;\r\n                argument = isMenuHorizontal ? $items : $activeItem;\r\n                navigationAction = this._getKeyboardNavigationAction(operation, argument);\r\n                $newTarget = navigationAction();\r\n                break;\r\n            case FOCUS_LEFT:\r\n                operation = isMenuHorizontal ? this._getItemsNavigationOperation(PREVITEM_OPERATION) : SHOW_SUBMENU_OPERATION;\r\n                argument = isMenuHorizontal ? $items : $activeItem;\r\n                navigationAction = this._getKeyboardNavigationAction(operation, argument);\r\n                $newTarget = navigationAction();\r\n                break;\r\n            default:\r\n                return super._moveFocus(location)\r\n        }\r\n        if ($newTarget && 0 !== $newTarget.length) {\r\n            this.option(\"focusedElement\", getPublicElement($newTarget))\r\n        }\r\n    }\r\n    _getItemsNavigationOperation(operation) {\r\n        var navOperation = operation;\r\n        if (this.option(\"rtlEnabled\")) {\r\n            navOperation = operation === PREVITEM_OPERATION ? NEXTITEM_OPERATION : PREVITEM_OPERATION\r\n        }\r\n        return navOperation\r\n    }\r\n    _getKeyboardNavigationAction(operation, argument) {\r\n        var action = noop;\r\n        switch (operation) {\r\n            case SHOW_SUBMENU_OPERATION:\r\n                if (!argument.hasClass(DX_STATE_DISABLED_CLASS)) {\r\n                    action = this._showSubmenu.bind(this, argument)\r\n                }\r\n                break;\r\n            case NEXTITEM_OPERATION:\r\n                action = this._nextItem.bind(this, argument);\r\n                break;\r\n            case PREVITEM_OPERATION:\r\n                action = this._prevItem.bind(this, argument)\r\n        }\r\n        return action\r\n    }\r\n    _clean() {\r\n        super._clean();\r\n        this.option(\"templatesRenderAsynchronously\") && clearTimeout(this._resizeEventTimer)\r\n    }\r\n    _visibilityChanged(visible) {\r\n        if (visible) {\r\n            if (!this._menuItemsWidth) {\r\n                this._updateItemsWidthCache()\r\n            }\r\n            this._dimensionChanged()\r\n        }\r\n    }\r\n    _isAdaptivityEnabled() {\r\n        return this.option(\"adaptivityEnabled\") && \"horizontal\" === this.option(\"orientation\")\r\n    }\r\n    _updateItemsWidthCache() {\r\n        var $menuItems = this.$element().find(\"ul\").first().children(\"li\").children(\".\".concat(DX_MENU_ITEM_CLASS));\r\n        this._menuItemsWidth = this._getSummaryItemsWidth($menuItems, true)\r\n    }\r\n    _dimensionChanged() {\r\n        if (!this._isAdaptivityEnabled()) {\r\n            return\r\n        }\r\n        var containerWidth = getOuterWidth(this.$element());\r\n        this._toggleAdaptiveMode(this._menuItemsWidth > containerWidth)\r\n    }\r\n    _init() {\r\n        super._init();\r\n        this._submenus = []\r\n    }\r\n    _initActions() {\r\n        this._actions = {};\r\n        each(ACTIONS, (index, action) => {\r\n            this._actions[action] = this._createActionByOption(action)\r\n        })\r\n    }\r\n    _initMarkup() {\r\n        this._visibleSubmenu = null;\r\n        this.$element().addClass(DX_MENU_CLASS);\r\n        super._initMarkup();\r\n        this._addCustomCssClass(this.$element());\r\n        this.setAria(\"role\", \"menubar\")\r\n    }\r\n    _render() {\r\n        super._render();\r\n        this._initAdaptivity()\r\n    }\r\n    _renderHamburgerButton() {\r\n        this._hamburger = new Button($(\"<div>\").addClass(DX_ADAPTIVE_HAMBURGER_BUTTON_CLASS), {\r\n            icon: \"menu\",\r\n            activeStateEnabled: false,\r\n            onClick: this._toggleTreeView.bind(this)\r\n        });\r\n        return this._hamburger.$element()\r\n    }\r\n    _toggleTreeView(state) {\r\n        if (isPlainObject(state)) {\r\n            state = !this._overlay.option(\"visible\")\r\n        }\r\n        this._overlay.option(\"visible\", state);\r\n        this._toggleHamburgerActiveState(state)\r\n    }\r\n    _toggleHamburgerActiveState(state) {\r\n        this._hamburger && this._hamburger.$element().toggleClass(DX_STATE_ACTIVE_CLASS, state)\r\n    }\r\n    _toggleAdaptiveMode(state) {\r\n        var $menuItemsContainer = this.$element().find(\".\".concat(DX_MENU_HORIZONTAL_CLASS));\r\n        var $adaptiveElements = this.$element().find(\".\".concat(DX_ADAPTIVE_MODE_CLASS));\r\n        if (state) {\r\n            this._hideVisibleSubmenu()\r\n        } else {\r\n            this._treeView && this._treeView.collapseAll();\r\n            this._overlay && this._toggleTreeView(state)\r\n        }\r\n        $menuItemsContainer.toggle(!state);\r\n        $adaptiveElements.toggle(state)\r\n    }\r\n    _removeAdaptivity() {\r\n        if (!this._$adaptiveContainer) {\r\n            return\r\n        }\r\n        this._toggleAdaptiveMode(false);\r\n        this._$adaptiveContainer.remove();\r\n        this._$adaptiveContainer = null;\r\n        this._treeView = null;\r\n        this._hamburger = null;\r\n        this._overlay = null\r\n    }\r\n    _treeviewItemClickHandler(e) {\r\n        this._actions.onItemClick(e);\r\n        if (!e.node.children.length) {\r\n            this._toggleTreeView(false)\r\n        }\r\n    }\r\n    _getAdaptiveOverlayOptions() {\r\n        var rtl = this.option(\"rtlEnabled\");\r\n        var position = rtl ? \"right\" : \"left\";\r\n        return {\r\n            _ignoreFunctionValueDeprecation: true,\r\n            maxHeight: () => getElementMaxHeightByWindow(this.$element()),\r\n            deferRendering: false,\r\n            shading: false,\r\n            animation: false,\r\n            hideOnParentScroll: true,\r\n            onHidden: () => {\r\n                this._toggleHamburgerActiveState(false)\r\n            },\r\n            height: \"auto\",\r\n            hideOnOutsideClick: e => !$(e.target).closest(\".\".concat(DX_ADAPTIVE_HAMBURGER_BUTTON_CLASS)).length,\r\n            position: {\r\n                collision: \"flipfit\",\r\n                at: \"bottom \" + position,\r\n                my: \"top \" + position,\r\n                of: this._hamburger.$element()\r\n            }\r\n        }\r\n    }\r\n    _getTreeViewOptions() {\r\n        var menuOptions = {};\r\n        each([\"rtlEnabled\", \"width\", \"accessKey\", \"activeStateEnabled\", \"animation\", \"dataSource\", \"disabled\", \"displayExpr\", \"displayExpr\", \"focusStateEnabled\", \"hint\", \"hoverStateEnabled\", \"itemsExpr\", \"items\", \"itemTemplate\", \"selectedExpr\", \"selectionMode\", \"tabIndex\", \"visible\"], (_, option) => {\r\n            menuOptions[option] = this.option(option)\r\n        });\r\n        each([\"onItemContextMenu\", \"onSelectionChanged\", \"onItemRendered\"], (_, actionName) => {\r\n            menuOptions[actionName] = e => {\r\n                this._actions[actionName](e)\r\n            }\r\n        });\r\n        return extend(menuOptions, {\r\n            dataSource: this.getDataSource(),\r\n            animationEnabled: !!this.option(\"animation\"),\r\n            onItemClick: this._treeviewItemClickHandler.bind(this),\r\n            onItemExpanded: e => {\r\n                this._overlay.repaint();\r\n                this._actions.onSubmenuShown(e)\r\n            },\r\n            onItemCollapsed: e => {\r\n                this._overlay.repaint();\r\n                this._actions.onSubmenuHidden(e)\r\n            },\r\n            selectNodesRecursive: false,\r\n            selectByClick: this.option(\"selectByClick\"),\r\n            expandEvent: \"click\"\r\n        })\r\n    }\r\n    _initAdaptivity() {\r\n        if (!this._isAdaptivityEnabled()) {\r\n            return\r\n        }\r\n        this._$adaptiveContainer = $(\"<div>\").addClass(DX_ADAPTIVE_MODE_CLASS);\r\n        var $hamburger = this._renderHamburgerButton();\r\n        this._treeView = this._createComponent($(\"<div>\"), TreeView, this._getTreeViewOptions());\r\n        this._overlay = this._createComponent($(\"<div>\"), Overlay, this._getAdaptiveOverlayOptions());\r\n        this._overlay.$content().append(this._treeView.$element()).addClass(DX_ADAPTIVE_MODE_CLASS).addClass(this.option(\"cssClass\"));\r\n        this._overlay.$wrapper().addClass(DX_ADAPTIVE_MODE_OVERLAY_WRAPPER_CLASS);\r\n        this._$adaptiveContainer.append($hamburger);\r\n        this._$adaptiveContainer.append(this._overlay.$element());\r\n        this.$element().append(this._$adaptiveContainer);\r\n        this._updateItemsWidthCache();\r\n        this._dimensionChanged()\r\n    }\r\n    _getDelay(delayType) {\r\n        var delay = this.option(\"showFirstSubmenuMode\").delay;\r\n        if (!isDefined(delay)) {\r\n            return DEFAULT_DELAY[delayType]\r\n        } else {\r\n            return isObject(delay) ? delay[delayType] : delay\r\n        }\r\n    }\r\n    _keyboardHandler(e) {\r\n        return super._keyboardHandler(e, !!this._visibleSubmenu)\r\n    }\r\n    _renderContainer() {\r\n        var $wrapper = $(\"<div>\");\r\n        $wrapper.appendTo(this.$element()).addClass(this._isMenuHorizontal() ? DX_MENU_HORIZONTAL_CLASS : DX_MENU_VERTICAL_CLASS);\r\n        return super._renderContainer($wrapper)\r\n    }\r\n    _renderSubmenuItems(node, $itemFrame) {\r\n        var submenu = this._createSubmenu(node, $itemFrame);\r\n        this._submenus.push(submenu);\r\n        this._renderBorderElement($itemFrame);\r\n        return submenu\r\n    }\r\n    _getKeyboardListeners() {\r\n        return super._getKeyboardListeners().concat(this._visibleSubmenu)\r\n    }\r\n    _createSubmenu(node, $rootItem) {\r\n        var $submenuContainer = $(\"<div>\").addClass(DX_CONTEXT_MENU_CLASS).appendTo($rootItem);\r\n        var items = this._getChildNodes(node);\r\n        var subMenu = this._createComponent($submenuContainer, Submenu, extend(this._getSubmenuOptions(), {\r\n            _dataAdapter: this._dataAdapter,\r\n            _parentKey: node.internalFields.key,\r\n            items: items,\r\n            onHoverStart: this._clearTimeouts.bind(this),\r\n            position: this.getSubmenuPosition($rootItem)\r\n        }));\r\n        this._attachSubmenuHandlers($rootItem, subMenu);\r\n        return subMenu\r\n    }\r\n    _getSubmenuOptions() {\r\n        var $submenuTarget = $(\"<div>\");\r\n        var isMenuHorizontal = this._isMenuHorizontal();\r\n        return {\r\n            itemTemplate: this.option(\"itemTemplate\"),\r\n            target: $submenuTarget,\r\n            orientation: this.option(\"orientation\"),\r\n            selectionMode: this.option(\"selectionMode\"),\r\n            cssClass: this.option(\"cssClass\"),\r\n            selectByClick: this.option(\"selectByClick\"),\r\n            hoverStateEnabled: this.option(\"hoverStateEnabled\"),\r\n            activeStateEnabled: this.option(\"activeStateEnabled\"),\r\n            focusStateEnabled: this.option(\"focusStateEnabled\"),\r\n            animation: this.option(\"animation\"),\r\n            showSubmenuMode: this.option(\"showSubmenuMode\"),\r\n            displayExpr: this.option(\"displayExpr\"),\r\n            disabledExpr: this.option(\"disabledExpr\"),\r\n            selectedExpr: this.option(\"selectedExpr\"),\r\n            itemsExpr: this.option(\"itemsExpr\"),\r\n            onFocusedItemChanged: e => {\r\n                if (!e.component.option(\"visible\")) {\r\n                    return\r\n                }\r\n                this.option(\"focusedElement\", e.component.option(\"focusedElement\"))\r\n            },\r\n            onSelectionChanged: this._nestedItemOnSelectionChangedHandler.bind(this),\r\n            onItemClick: this._nestedItemOnItemClickHandler.bind(this),\r\n            onItemRendered: this._nestedItemOnItemRenderedHandler.bind(this),\r\n            onLeftFirstItem: isMenuHorizontal ? null : this._moveMainMenuFocus.bind(this, PREVITEM_OPERATION),\r\n            onLeftLastItem: isMenuHorizontal ? null : this._moveMainMenuFocus.bind(this, NEXTITEM_OPERATION),\r\n            onCloseRootSubmenu: this._moveMainMenuFocus.bind(this, isMenuHorizontal ? PREVITEM_OPERATION : null),\r\n            onExpandLastSubmenu: isMenuHorizontal ? this._moveMainMenuFocus.bind(this, NEXTITEM_OPERATION) : null\r\n        }\r\n    }\r\n    _getShowFirstSubmenuMode() {\r\n        if (!this._isDesktopDevice()) {\r\n            return \"onClick\"\r\n        }\r\n        var optionValue = this.option(\"showFirstSubmenuMode\");\r\n        return isObject(optionValue) ? optionValue.name : optionValue\r\n    }\r\n    _moveMainMenuFocus(direction) {\r\n        var $items = this._getAvailableItems();\r\n        var itemCount = $items.length;\r\n        var $currentItem = $items.filter(\".\".concat(DX_MENU_ITEM_EXPANDED_CLASS)).eq(0);\r\n        var itemIndex = $items.index($currentItem);\r\n        this._hideSubmenu(this._visibleSubmenu);\r\n        itemIndex += direction === PREVITEM_OPERATION ? -1 : 1;\r\n        if (itemIndex >= itemCount) {\r\n            itemIndex = 0\r\n        } else if (itemIndex < 0) {\r\n            itemIndex = itemCount - 1\r\n        }\r\n        var $newItem = $items.eq(itemIndex);\r\n        this.option(\"focusedElement\", getPublicElement($newItem))\r\n    }\r\n    _nestedItemOnSelectionChangedHandler(args) {\r\n        var selectedItem = args.addedItems.length && args.addedItems[0];\r\n        var submenu = Submenu.getInstance(args.element);\r\n        var onSelectionChanged = this._actions.onSelectionChanged;\r\n        onSelectionChanged(args);\r\n        selectedItem && this._clearSelectionInSubmenus(selectedItem[0], submenu);\r\n        this._clearRootSelection();\r\n        this._setOptionWithoutOptionChange(\"selectedItem\", selectedItem)\r\n    }\r\n    _clearSelectionInSubmenus(item, targetSubmenu) {\r\n        var cleanAllSubmenus = !arguments.length;\r\n        each(this._submenus, (index, submenu) => {\r\n            var $submenu = submenu._itemContainer();\r\n            var isOtherItem = !$submenu.is(targetSubmenu && targetSubmenu._itemContainer());\r\n            var $selectedItem = $submenu.find(\".\".concat(this._selectedItemClass()));\r\n            if (isOtherItem && $selectedItem.length || cleanAllSubmenus) {\r\n                $selectedItem.removeClass(this._selectedItemClass());\r\n                var selectedItemData = this._getItemData($selectedItem);\r\n                if (selectedItemData) {\r\n                    selectedItemData.selected = false\r\n                }\r\n                submenu._clearSelectedItems()\r\n            }\r\n        })\r\n    }\r\n    _clearRootSelection() {\r\n        var $prevSelectedItem = this.$element().find(\".\".concat(DX_MENU_ITEMS_CONTAINER_CLASS)).first().children().children().filter(\".\".concat(this._selectedItemClass()));\r\n        if ($prevSelectedItem.length) {\r\n            var prevSelectedItemData = this._getItemData($prevSelectedItem);\r\n            prevSelectedItemData.selected = false;\r\n            $prevSelectedItem.removeClass(this._selectedItemClass())\r\n        }\r\n    }\r\n    _nestedItemOnItemClickHandler(e) {\r\n        this._actions.onItemClick(e)\r\n    }\r\n    _nestedItemOnItemRenderedHandler(e) {\r\n        this._actions.onItemRendered(e)\r\n    }\r\n    _attachSubmenuHandlers($rootItem, submenu) {\r\n        var $submenuOverlayContent = submenu.getOverlayContent();\r\n        var submenus = $submenuOverlayContent.find(\".\".concat(DX_SUBMENU_CLASS));\r\n        var submenuMouseLeaveName = addNamespace(hoverEventEnd, this.NAME + \"_submenu\");\r\n        submenu.option({\r\n            onShowing: this._submenuOnShowingHandler.bind(this, $rootItem, submenu),\r\n            onShown: this._submenuOnShownHandler.bind(this, $rootItem, submenu),\r\n            onHiding: this._submenuOnHidingHandler.bind(this, $rootItem, submenu),\r\n            onHidden: this._submenuOnHiddenHandler.bind(this, $rootItem, submenu)\r\n        });\r\n        each(submenus, (index, submenu) => {\r\n            eventsEngine.off(submenu, submenuMouseLeaveName);\r\n            eventsEngine.on(submenu, submenuMouseLeaveName, null, this._submenuMouseLeaveHandler.bind(this, $rootItem))\r\n        })\r\n    }\r\n    _submenuOnShowingHandler($rootItem, submenu) {\r\n        var $border = $rootItem.children(\".\".concat(DX_CONTEXT_MENU_CONTAINER_BORDER_CLASS));\r\n        this._actions.onSubmenuShowing({\r\n            rootItem: getPublicElement($rootItem),\r\n            submenu: submenu\r\n        });\r\n        $border.show();\r\n        $rootItem.addClass(DX_MENU_ITEM_EXPANDED_CLASS)\r\n    }\r\n    _submenuOnShownHandler($rootItem, submenu) {\r\n        this._actions.onSubmenuShown({\r\n            rootItem: getPublicElement($rootItem),\r\n            submenu: submenu\r\n        })\r\n    }\r\n    _submenuOnHidingHandler($rootItem, submenu, eventArgs) {\r\n        var $border = $rootItem.children(\".\".concat(DX_CONTEXT_MENU_CONTAINER_BORDER_CLASS));\r\n        var args = eventArgs;\r\n        args.rootItem = getPublicElement($rootItem);\r\n        args.submenu = submenu;\r\n        this._actions.onSubmenuHiding(args);\r\n        eventArgs = args;\r\n        if (!eventArgs.cancel) {\r\n            if (this._visibleSubmenu === submenu) {\r\n                this._visibleSubmenu = null\r\n            }\r\n            $border.hide();\r\n            $rootItem.removeClass(DX_MENU_ITEM_EXPANDED_CLASS)\r\n        }\r\n    }\r\n    _submenuOnHiddenHandler($rootItem, submenu) {\r\n        this._actions.onSubmenuHidden({\r\n            rootItem: getPublicElement($rootItem),\r\n            submenu: submenu\r\n        })\r\n    }\r\n    _submenuMouseLeaveHandler($rootItem, eventArgs) {\r\n        var target = $(eventArgs.relatedTarget).parents(\".\".concat(DX_CONTEXT_MENU_CLASS))[0];\r\n        var contextMenu = this._getSubmenuByRootElement($rootItem).getOverlayContent()[0];\r\n        if (this.option(\"hideSubmenuOnMouseLeave\") && target !== contextMenu) {\r\n            this._clearTimeouts();\r\n            setTimeout(this._hideSubmenuAfterTimeout.bind(this), this._getDelay(\"hide\"))\r\n        }\r\n    }\r\n    _hideSubmenuAfterTimeout() {\r\n        if (!this._visibleSubmenu) {\r\n            return\r\n        }\r\n        var isRootItemHovered = $(this._visibleSubmenu.$element().context).hasClass(DX_STATE_HOVER_CLASS);\r\n        var isSubmenuItemHovered = this._visibleSubmenu.getOverlayContent().find(\".\".concat(DX_STATE_HOVER_CLASS)).length;\r\n        var hoveredElementFromSubMenu = this._visibleSubmenu.getOverlayContent().get(0).querySelector(\":hover\");\r\n        if (!hoveredElementFromSubMenu && !isSubmenuItemHovered && !isRootItemHovered) {\r\n            this._visibleSubmenu.hide()\r\n        }\r\n    }\r\n    _getSubmenuByRootElement($rootItem) {\r\n        if (!$rootItem) {\r\n            return false\r\n        }\r\n        var $submenu = $rootItem.children(\".\".concat(DX_CONTEXT_MENU_CLASS));\r\n        return $submenu.length && Submenu.getInstance($submenu)\r\n    }\r\n    getSubmenuPosition($rootItem) {\r\n        var isHorizontalMenu = this._isMenuHorizontal();\r\n        var submenuDirection = this.option(\"submenuDirection\").toLowerCase();\r\n        var rtlEnabled = this.option(\"rtlEnabled\");\r\n        var submenuPosition = {\r\n            collision: \"flip\",\r\n            of: $rootItem\r\n        };\r\n        switch (submenuDirection) {\r\n            case \"leftortop\":\r\n                submenuPosition.at = \"left top\";\r\n                submenuPosition.my = isHorizontalMenu ? \"left bottom\" : \"right top\";\r\n                break;\r\n            case \"rightorbottom\":\r\n                submenuPosition.at = isHorizontalMenu ? \"left bottom\" : \"right top\";\r\n                submenuPosition.my = \"left top\";\r\n                break;\r\n            default:\r\n                if (isHorizontalMenu) {\r\n                    submenuPosition.at = rtlEnabled ? \"right bottom\" : \"left bottom\";\r\n                    submenuPosition.my = rtlEnabled ? \"right top\" : \"left top\"\r\n                } else {\r\n                    submenuPosition.at = rtlEnabled ? \"left top\" : \"right top\";\r\n                    submenuPosition.my = rtlEnabled ? \"right top\" : \"left top\"\r\n                }\r\n        }\r\n        return submenuPosition\r\n    }\r\n    _renderBorderElement($item) {\r\n        $(\"<div>\").appendTo($item).addClass(DX_CONTEXT_MENU_CONTAINER_BORDER_CLASS).hide()\r\n    }\r\n    _itemPointerDownHandler(e) {\r\n        var $target = $(e.target);\r\n        var $closestItem = $target.closest(this._itemElements());\r\n        if ($closestItem.hasClass(\"dx-menu-item-has-submenu\")) {\r\n            this.option(\"focusedElement\", null);\r\n            return\r\n        }\r\n        super._itemPointerDownHandler(e)\r\n    }\r\n    _hoverStartHandler(e) {\r\n        var mouseMoveEventName = addNamespace(pointerEvents.move, this.NAME);\r\n        var $item = this._getItemElementByEventArgs(e);\r\n        var node = this._dataAdapter.getNodeByItem(this._getItemData($item));\r\n        var isSelectionActive = isDefined(e.buttons) && 1 === e.buttons || !isDefined(e.buttons) && 1 === e.which;\r\n        if (this._isItemDisabled($item)) {\r\n            return\r\n        }\r\n        eventsEngine.off($item, mouseMoveEventName);\r\n        if (!this._hasChildren(node)) {\r\n            this._showSubmenuTimer = setTimeout(this._hideSubmenuAfterTimeout.bind(this), this._getDelay(\"hide\"));\r\n            return\r\n        }\r\n        if (\"onHover\" === this._getShowFirstSubmenuMode() && !isSelectionActive) {\r\n            var submenu = this._getSubmenuByElement($item);\r\n            this._clearTimeouts();\r\n            if (!submenu.isOverlayVisible()) {\r\n                eventsEngine.on($item, mouseMoveEventName, this._itemMouseMoveHandler.bind(this));\r\n                this._showSubmenuTimer = this._getDelay(\"hide\")\r\n            }\r\n        }\r\n    }\r\n    _hoverEndHandler(eventArg) {\r\n        var $item = this._getItemElementByEventArgs(eventArg);\r\n        var relatedTarget = $(eventArg.relatedTarget);\r\n        super._hoverEndHandler(eventArg);\r\n        this._clearTimeouts();\r\n        if (this._isItemDisabled($item)) {\r\n            return\r\n        }\r\n        if (relatedTarget.hasClass(DX_CONTEXT_MENU_CONTENT_DELIMITER_CLASS)) {\r\n            return\r\n        }\r\n        if (this.option(\"hideSubmenuOnMouseLeave\") && !relatedTarget.hasClass(DX_MENU_ITEMS_CONTAINER_CLASS)) {\r\n            this._hideSubmenuTimer = setTimeout(() => {\r\n                this._hideSubmenuAfterTimeout()\r\n            }, this._getDelay(\"hide\"))\r\n        }\r\n    }\r\n    _hideVisibleSubmenu() {\r\n        if (!this._visibleSubmenu) {\r\n            return false\r\n        }\r\n        this._hideSubmenu(this._visibleSubmenu);\r\n        return true\r\n    }\r\n    _showSubmenu($itemElement) {\r\n        var submenu = this._getSubmenuByElement($itemElement);\r\n        if (this._visibleSubmenu !== submenu) {\r\n            this._hideVisibleSubmenu()\r\n        }\r\n        if (submenu) {\r\n            this._clearTimeouts();\r\n            submenu.show();\r\n            this.option(\"focusedElement\", submenu.option(\"focusedElement\"))\r\n        }\r\n        this._visibleSubmenu = submenu;\r\n        this._hoveredRootItem = $itemElement\r\n    }\r\n    _hideSubmenu(submenu) {\r\n        submenu && submenu.hide();\r\n        if (this._visibleSubmenu === submenu) {\r\n            this._visibleSubmenu = null\r\n        }\r\n        this._hoveredRootItem = null\r\n    }\r\n    _itemMouseMoveHandler(e) {\r\n        if (e.pointers && e.pointers.length) {\r\n            return\r\n        }\r\n        var $item = $(e.currentTarget);\r\n        if (!isDefined(this._showSubmenuTimer)) {\r\n            return\r\n        }\r\n        this._clearTimeouts();\r\n        this._showSubmenuTimer = setTimeout(() => {\r\n            var submenu = this._getSubmenuByElement($item);\r\n            if (submenu && !submenu.isOverlayVisible()) {\r\n                this._showSubmenu($item)\r\n            }\r\n        }, this._getDelay(\"show\"))\r\n    }\r\n    _clearTimeouts() {\r\n        clearTimeout(this._hideSubmenuTimer);\r\n        clearTimeout(this._showSubmenuTimer)\r\n    }\r\n    _getSubmenuByElement($itemElement, itemData) {\r\n        var submenu = this._getSubmenuByRootElement($itemElement);\r\n        if (submenu) {\r\n            return submenu\r\n        } else {\r\n            itemData = itemData || this._getItemData($itemElement);\r\n            var node = this._dataAdapter.getNodeByItem(itemData);\r\n            return this._hasChildren(node) && this._renderSubmenuItems(node, $itemElement)\r\n        }\r\n    }\r\n    _updateSubmenuVisibilityOnClick(actionArgs) {\r\n        var args = actionArgs.args.length && actionArgs.args[0];\r\n        if (!args || this._disabledGetter(args.itemData)) {\r\n            return\r\n        }\r\n        var $itemElement = $(args.itemElement);\r\n        var currentSubmenu = this._getSubmenuByElement($itemElement, args.itemData);\r\n        this._updateSelectedItemOnClick(actionArgs);\r\n        if (this._visibleSubmenu) {\r\n            if (this._visibleSubmenu === currentSubmenu) {\r\n                if (\"onClick\" === this.option(\"showFirstSubmenuMode\")) {\r\n                    this._hideSubmenu(this._visibleSubmenu)\r\n                }\r\n                return\r\n            } else {\r\n                this._hideSubmenu(this._visibleSubmenu)\r\n            }\r\n        }\r\n        if (!currentSubmenu) {\r\n            return\r\n        }\r\n        if (!currentSubmenu.isOverlayVisible()) {\r\n            this._showSubmenu($itemElement);\r\n            return\r\n        }\r\n    }\r\n    _optionChanged(args) {\r\n        if (ACTIONS.indexOf(args.name) >= 0) {\r\n            this._initActions();\r\n            return\r\n        }\r\n        switch (args.name) {\r\n            case \"orientation\":\r\n            case \"submenuDirection\":\r\n                this._invalidate();\r\n                break;\r\n            case \"showFirstSubmenuMode\":\r\n            case \"hideSubmenuOnMouseLeave\":\r\n                break;\r\n            case \"showSubmenuMode\":\r\n                this._changeSubmenusOption(args.name, args.value);\r\n                break;\r\n            case \"adaptivityEnabled\":\r\n                args.value ? this._initAdaptivity() : this._removeAdaptivity();\r\n                break;\r\n            case \"width\":\r\n                if (this._isAdaptivityEnabled()) {\r\n                    this._treeView.option(args.name, args.value);\r\n                    this._overlay.option(args.name, args.value)\r\n                }\r\n                super._optionChanged(args);\r\n                this._dimensionChanged();\r\n                break;\r\n            case \"animation\":\r\n                if (this._isAdaptivityEnabled()) {\r\n                    this._treeView.option(\"animationEnabled\", !!args.value)\r\n                }\r\n                super._optionChanged(args);\r\n                break;\r\n            default:\r\n                if (this._isAdaptivityEnabled() && (args.name === args.fullName || \"items\" === args.name)) {\r\n                    this._treeView.option(args.fullName, args.value)\r\n                }\r\n                super._optionChanged(args)\r\n        }\r\n    }\r\n    _changeSubmenusOption(name, value) {\r\n        each(this._submenus, (index, submenu) => {\r\n            submenu.option(name, value)\r\n        })\r\n    }\r\n    selectItem(itemElement) {\r\n        this._hideSubmenu(this._visibleSubmenu);\r\n        super.selectItem(itemElement)\r\n    }\r\n    unselectItem(itemElement) {\r\n        this._hideSubmenu(this._visibleSubmenu);\r\n        super.selectItem(itemElement)\r\n    }\r\n}\r\nregisterComponent(\"dxMenu\", Menu);\r\nexport default Menu;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}