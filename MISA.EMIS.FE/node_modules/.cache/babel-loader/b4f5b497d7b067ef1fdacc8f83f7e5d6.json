{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/file_manager/ui.file_manager.command_manager.js)\r\n * Version: 22.1.4\r\n * Build date: Fri Jul 22 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport { extend } from \"../../core/utils/extend\";\nimport { each } from \"../../core/utils/iterator\";\nimport { isString } from \"../../core/utils/type\";\nimport messageLocalization from \"../../localization/message\";\nexport var defaultPermissions = {\n  create: false,\n  copy: false,\n  move: false,\n  delete: false,\n  rename: false,\n  upload: false,\n  download: false\n};\nexport class FileManagerCommandManager {\n  constructor(permissions) {\n    this._actions = {};\n    this._permissions = permissions || {};\n\n    this._initCommands();\n  }\n\n  _initCommands() {\n    this._commands = [{\n      name: \"create\",\n      text: messageLocalization.format(\"dxFileManager-commandCreate\"),\n      icon: \"newfolder\",\n      enabled: this._permissions.create,\n      noFileItemRequired: true\n    }, {\n      name: \"rename\",\n      text: messageLocalization.format(\"dxFileManager-commandRename\"),\n      icon: \"rename\",\n      enabled: this._permissions.rename,\n      isSingleFileItemCommand: true\n    }, {\n      name: \"move\",\n      text: messageLocalization.format(\"dxFileManager-commandMove\"),\n      icon: \"movetofolder\",\n      enabled: this._permissions.move\n    }, {\n      name: \"copy\",\n      text: messageLocalization.format(\"dxFileManager-commandCopy\"),\n      icon: \"copy\",\n      enabled: this._permissions.copy\n    }, {\n      name: \"delete\",\n      text: messageLocalization.format(\"dxFileManager-commandDelete\"),\n      icon: \"trash\",\n      enabled: this._permissions.delete\n    }, {\n      name: \"download\",\n      text: messageLocalization.format(\"dxFileManager-commandDownload\"),\n      icon: \"download\",\n      enabled: this._permissions.download\n    }, {\n      name: \"upload\",\n      text: messageLocalization.format(\"dxFileManager-commandUpload\"),\n      icon: \"upload\",\n      enabled: this._permissions.upload,\n      noFileItemRequired: true\n    }, {\n      name: \"refresh\",\n      text: messageLocalization.format(\"dxFileManager-commandRefresh\"),\n      icon: \"dx-filemanager-i dx-filemanager-i-refresh\",\n      enabled: true,\n      noFileItemRequired: true\n    }, {\n      name: \"thumbnails\",\n      text: messageLocalization.format(\"dxFileManager-commandThumbnails\"),\n      icon: \"mediumiconslayout\",\n      enabled: true,\n      noFileItemRequired: true\n    }, {\n      name: \"details\",\n      text: messageLocalization.format(\"dxFileManager-commandDetails\"),\n      icon: \"detailslayout\",\n      enabled: true,\n      noFileItemRequired: true\n    }, {\n      name: \"clearSelection\",\n      text: messageLocalization.format(\"dxFileManager-commandClearSelection\"),\n      icon: \"remove\",\n      enabled: true\n    }, {\n      name: \"showNavPane\",\n      hint: messageLocalization.format(\"dxFileManager-commandShowNavPane\"),\n      icon: \"menu\",\n      enabled: false,\n      noFileItemRequired: true\n    }];\n    this._commandMap = {};\n\n    this._commands.forEach(command => {\n      this._commandMap[command.name] = command;\n    });\n  }\n\n  registerActions(actions) {\n    this._actions = extend(this._actions, actions);\n  }\n\n  executeCommand(command, arg) {\n    var commandName = isString(command) ? command : command.name;\n    var action = this._actions[commandName];\n\n    if (action) {\n      return action(arg);\n    }\n  }\n\n  updatePermissions(permissions) {\n    var resultPermissions = extend({}, defaultPermissions, permissions);\n    this._permissions = resultPermissions;\n    each(this._permissions, permission => {\n      this._commandMap[permission].enabled = this._permissions[permission];\n    });\n  }\n\n  setCommandEnabled(commandName, enabled) {\n    var command = this.getCommandByName(commandName);\n\n    if (command) {\n      command.enabled = enabled;\n    }\n  }\n\n  getCommandByName(name) {\n    return this._commandMap[name];\n  }\n\n  isCommandAvailable(commandName, itemInfos) {\n    var command = this.getCommandByName(commandName);\n\n    if (!command || !command.enabled) {\n      return false;\n    }\n\n    if (command.noFileItemRequired) {\n      return true;\n    }\n\n    var itemsLength = itemInfos && itemInfos.length || 0;\n\n    if (0 === itemsLength || itemInfos.some(item => item.fileItem.isRoot() || item.fileItem.isParentFolder)) {\n      return false;\n    }\n\n    if (\"download\" === commandName) {\n      return itemInfos.every(itemInfo => !itemInfo.fileItem.isDirectory);\n    }\n\n    return !command.isSingleFileItemCommand || 1 === itemsLength;\n  }\n\n}","map":{"version":3,"names":["extend","each","isString","messageLocalization","defaultPermissions","create","copy","move","delete","rename","upload","download","FileManagerCommandManager","constructor","permissions","_actions","_permissions","_initCommands","_commands","name","text","format","icon","enabled","noFileItemRequired","isSingleFileItemCommand","hint","_commandMap","forEach","command","registerActions","actions","executeCommand","arg","commandName","action","updatePermissions","resultPermissions","permission","setCommandEnabled","getCommandByName","isCommandAvailable","itemInfos","itemsLength","length","some","item","fileItem","isRoot","isParentFolder","every","itemInfo","isDirectory"],"sources":["E:/MisaProject/W2022_06/misa_emis/node_modules/devextreme/esm/ui/file_manager/ui.file_manager.command_manager.js"],"sourcesContent":["/**\r\n * DevExtreme (esm/ui/file_manager/ui.file_manager.command_manager.js)\r\n * Version: 22.1.4\r\n * Build date: Fri Jul 22 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport {\r\n    extend\r\n} from \"../../core/utils/extend\";\r\nimport {\r\n    each\r\n} from \"../../core/utils/iterator\";\r\nimport {\r\n    isString\r\n} from \"../../core/utils/type\";\r\nimport messageLocalization from \"../../localization/message\";\r\nexport var defaultPermissions = {\r\n    create: false,\r\n    copy: false,\r\n    move: false,\r\n    delete: false,\r\n    rename: false,\r\n    upload: false,\r\n    download: false\r\n};\r\nexport class FileManagerCommandManager {\r\n    constructor(permissions) {\r\n        this._actions = {};\r\n        this._permissions = permissions || {};\r\n        this._initCommands()\r\n    }\r\n    _initCommands() {\r\n        this._commands = [{\r\n            name: \"create\",\r\n            text: messageLocalization.format(\"dxFileManager-commandCreate\"),\r\n            icon: \"newfolder\",\r\n            enabled: this._permissions.create,\r\n            noFileItemRequired: true\r\n        }, {\r\n            name: \"rename\",\r\n            text: messageLocalization.format(\"dxFileManager-commandRename\"),\r\n            icon: \"rename\",\r\n            enabled: this._permissions.rename,\r\n            isSingleFileItemCommand: true\r\n        }, {\r\n            name: \"move\",\r\n            text: messageLocalization.format(\"dxFileManager-commandMove\"),\r\n            icon: \"movetofolder\",\r\n            enabled: this._permissions.move\r\n        }, {\r\n            name: \"copy\",\r\n            text: messageLocalization.format(\"dxFileManager-commandCopy\"),\r\n            icon: \"copy\",\r\n            enabled: this._permissions.copy\r\n        }, {\r\n            name: \"delete\",\r\n            text: messageLocalization.format(\"dxFileManager-commandDelete\"),\r\n            icon: \"trash\",\r\n            enabled: this._permissions.delete\r\n        }, {\r\n            name: \"download\",\r\n            text: messageLocalization.format(\"dxFileManager-commandDownload\"),\r\n            icon: \"download\",\r\n            enabled: this._permissions.download\r\n        }, {\r\n            name: \"upload\",\r\n            text: messageLocalization.format(\"dxFileManager-commandUpload\"),\r\n            icon: \"upload\",\r\n            enabled: this._permissions.upload,\r\n            noFileItemRequired: true\r\n        }, {\r\n            name: \"refresh\",\r\n            text: messageLocalization.format(\"dxFileManager-commandRefresh\"),\r\n            icon: \"dx-filemanager-i dx-filemanager-i-refresh\",\r\n            enabled: true,\r\n            noFileItemRequired: true\r\n        }, {\r\n            name: \"thumbnails\",\r\n            text: messageLocalization.format(\"dxFileManager-commandThumbnails\"),\r\n            icon: \"mediumiconslayout\",\r\n            enabled: true,\r\n            noFileItemRequired: true\r\n        }, {\r\n            name: \"details\",\r\n            text: messageLocalization.format(\"dxFileManager-commandDetails\"),\r\n            icon: \"detailslayout\",\r\n            enabled: true,\r\n            noFileItemRequired: true\r\n        }, {\r\n            name: \"clearSelection\",\r\n            text: messageLocalization.format(\"dxFileManager-commandClearSelection\"),\r\n            icon: \"remove\",\r\n            enabled: true\r\n        }, {\r\n            name: \"showNavPane\",\r\n            hint: messageLocalization.format(\"dxFileManager-commandShowNavPane\"),\r\n            icon: \"menu\",\r\n            enabled: false,\r\n            noFileItemRequired: true\r\n        }];\r\n        this._commandMap = {};\r\n        this._commands.forEach(command => {\r\n            this._commandMap[command.name] = command\r\n        })\r\n    }\r\n    registerActions(actions) {\r\n        this._actions = extend(this._actions, actions)\r\n    }\r\n    executeCommand(command, arg) {\r\n        var commandName = isString(command) ? command : command.name;\r\n        var action = this._actions[commandName];\r\n        if (action) {\r\n            return action(arg)\r\n        }\r\n    }\r\n    updatePermissions(permissions) {\r\n        var resultPermissions = extend({}, defaultPermissions, permissions);\r\n        this._permissions = resultPermissions;\r\n        each(this._permissions, permission => {\r\n            this._commandMap[permission].enabled = this._permissions[permission]\r\n        })\r\n    }\r\n    setCommandEnabled(commandName, enabled) {\r\n        var command = this.getCommandByName(commandName);\r\n        if (command) {\r\n            command.enabled = enabled\r\n        }\r\n    }\r\n    getCommandByName(name) {\r\n        return this._commandMap[name]\r\n    }\r\n    isCommandAvailable(commandName, itemInfos) {\r\n        var command = this.getCommandByName(commandName);\r\n        if (!command || !command.enabled) {\r\n            return false\r\n        }\r\n        if (command.noFileItemRequired) {\r\n            return true\r\n        }\r\n        var itemsLength = itemInfos && itemInfos.length || 0;\r\n        if (0 === itemsLength || itemInfos.some(item => item.fileItem.isRoot() || item.fileItem.isParentFolder)) {\r\n            return false\r\n        }\r\n        if (\"download\" === commandName) {\r\n            return itemInfos.every(itemInfo => !itemInfo.fileItem.isDirectory)\r\n        }\r\n        return !command.isSingleFileItemCommand || 1 === itemsLength\r\n    }\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}