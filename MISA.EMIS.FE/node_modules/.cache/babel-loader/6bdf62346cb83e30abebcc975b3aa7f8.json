{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/list/ui.list.edit.decorator.context.js)\r\n * Version: 22.1.4\r\n * Build date: Fri Jul 22 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport { getOuterHeight, getOuterWidth } from \"../../core/utils/size\";\nimport $ from \"../../core/renderer\";\nimport EditDecoratorMenuHelperMixin from \"./ui.list.edit.decorator_menu_helper\";\nimport messageLocalization from \"../../localization/message\";\nimport { register as registerDecorator } from \"./ui.list.edit.decorator_registry\";\nimport EditDecorator from \"./ui.list.edit.decorator\";\nimport Overlay from \"../overlay/ui.overlay\";\nimport { ListBase } from \"./ui.list.base\";\nvar CONTEXTMENU_CLASS = \"dx-list-context-menu\";\nvar CONTEXTMENU_MENUCONTENT_CLASS = \"dx-list-context-menucontent\";\nregisterDecorator(\"menu\", \"context\", EditDecorator.inherit({\n  _init: function () {\n    var $menu = $(\"<div>\").addClass(CONTEXTMENU_CLASS);\n\n    this._list.$element().append($menu);\n\n    this._menu = this._renderOverlay($menu);\n  },\n  _renderOverlay: function ($element) {\n    return this._list._createComponent($element, Overlay, {\n      shading: false,\n      deferRendering: true,\n      hideOnParentScroll: true,\n      hideOnOutsideClick: function (e) {\n        return !$(e.target).closest(\".\" + CONTEXTMENU_CLASS).length;\n      },\n      animation: {\n        show: {\n          type: \"slide\",\n          duration: 300,\n          from: {\n            height: 0,\n            opacity: 1\n          },\n          to: {\n            height: function () {\n              return getOuterHeight(this._$menuList);\n            }.bind(this),\n            opacity: 1\n          }\n        },\n        hide: {\n          type: \"slide\",\n          duration: 0,\n          from: {\n            opacity: 1\n          },\n          to: {\n            opacity: 0\n          }\n        }\n      },\n      _ignoreFunctionValueDeprecation: true,\n      height: function () {\n        return this._$menuList ? getOuterHeight(this._$menuList) : 0;\n      }.bind(this),\n      width: function () {\n        return getOuterWidth(this._list.$element());\n      }.bind(this),\n      onContentReady: this._renderMenuContent.bind(this)\n    });\n  },\n  _renderMenuContent: function (e) {\n    var $overlayContent = e.component.$content();\n\n    var items = this._menuItems().slice();\n\n    if (this._deleteEnabled()) {\n      items.push({\n        text: messageLocalization.format(\"dxListEditDecorator-delete\"),\n        action: this._deleteItem.bind(this)\n      });\n    }\n\n    this._$menuList = $(\"<div>\");\n\n    this._list._createComponent(this._$menuList, ListBase, {\n      items: items,\n      onItemClick: this._menuItemClickHandler.bind(this),\n      height: \"auto\",\n      integrationOptions: {}\n    });\n\n    $overlayContent.addClass(CONTEXTMENU_MENUCONTENT_CLASS);\n    $overlayContent.append(this._$menuList);\n  },\n  _menuItemClickHandler: function (args) {\n    this._menu.hide();\n\n    this._fireMenuAction(this._$itemWithMenu, args.itemData.action);\n  },\n  _deleteItem: function () {\n    this._list.deleteItem(this._$itemWithMenu);\n  },\n  handleContextMenu: function ($itemElement) {\n    this._$itemWithMenu = $itemElement;\n\n    this._menu.option({\n      position: {\n        my: \"top\",\n        at: \"bottom\",\n        of: $itemElement,\n        collision: \"flip\"\n      }\n    });\n\n    this._menu.show();\n\n    return true;\n  },\n  dispose: function () {\n    if (this._menu) {\n      this._menu.$element().remove();\n    }\n\n    this.callBase.apply(this, arguments);\n  }\n}).include(EditDecoratorMenuHelperMixin));","map":{"version":3,"names":["getOuterHeight","getOuterWidth","$","EditDecoratorMenuHelperMixin","messageLocalization","register","registerDecorator","EditDecorator","Overlay","ListBase","CONTEXTMENU_CLASS","CONTEXTMENU_MENUCONTENT_CLASS","inherit","_init","$menu","addClass","_list","$element","append","_menu","_renderOverlay","_createComponent","shading","deferRendering","hideOnParentScroll","hideOnOutsideClick","e","target","closest","length","animation","show","type","duration","from","height","opacity","to","_$menuList","bind","hide","_ignoreFunctionValueDeprecation","width","onContentReady","_renderMenuContent","$overlayContent","component","$content","items","_menuItems","slice","_deleteEnabled","push","text","format","action","_deleteItem","onItemClick","_menuItemClickHandler","integrationOptions","args","_fireMenuAction","_$itemWithMenu","itemData","deleteItem","handleContextMenu","$itemElement","option","position","my","at","of","collision","dispose","remove","callBase","apply","arguments","include"],"sources":["E:/MisaProject/W2022_06/misa_emis/node_modules/devextreme/esm/ui/list/ui.list.edit.decorator.context.js"],"sourcesContent":["/**\r\n * DevExtreme (esm/ui/list/ui.list.edit.decorator.context.js)\r\n * Version: 22.1.4\r\n * Build date: Fri Jul 22 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport {\r\n    getOuterHeight,\r\n    getOuterWidth\r\n} from \"../../core/utils/size\";\r\nimport $ from \"../../core/renderer\";\r\nimport EditDecoratorMenuHelperMixin from \"./ui.list.edit.decorator_menu_helper\";\r\nimport messageLocalization from \"../../localization/message\";\r\nimport {\r\n    register as registerDecorator\r\n} from \"./ui.list.edit.decorator_registry\";\r\nimport EditDecorator from \"./ui.list.edit.decorator\";\r\nimport Overlay from \"../overlay/ui.overlay\";\r\nimport {\r\n    ListBase\r\n} from \"./ui.list.base\";\r\nvar CONTEXTMENU_CLASS = \"dx-list-context-menu\";\r\nvar CONTEXTMENU_MENUCONTENT_CLASS = \"dx-list-context-menucontent\";\r\nregisterDecorator(\"menu\", \"context\", EditDecorator.inherit({\r\n    _init: function() {\r\n        var $menu = $(\"<div>\").addClass(CONTEXTMENU_CLASS);\r\n        this._list.$element().append($menu);\r\n        this._menu = this._renderOverlay($menu)\r\n    },\r\n    _renderOverlay: function($element) {\r\n        return this._list._createComponent($element, Overlay, {\r\n            shading: false,\r\n            deferRendering: true,\r\n            hideOnParentScroll: true,\r\n            hideOnOutsideClick: function(e) {\r\n                return !$(e.target).closest(\".\" + CONTEXTMENU_CLASS).length\r\n            },\r\n            animation: {\r\n                show: {\r\n                    type: \"slide\",\r\n                    duration: 300,\r\n                    from: {\r\n                        height: 0,\r\n                        opacity: 1\r\n                    },\r\n                    to: {\r\n                        height: function() {\r\n                            return getOuterHeight(this._$menuList)\r\n                        }.bind(this),\r\n                        opacity: 1\r\n                    }\r\n                },\r\n                hide: {\r\n                    type: \"slide\",\r\n                    duration: 0,\r\n                    from: {\r\n                        opacity: 1\r\n                    },\r\n                    to: {\r\n                        opacity: 0\r\n                    }\r\n                }\r\n            },\r\n            _ignoreFunctionValueDeprecation: true,\r\n            height: function() {\r\n                return this._$menuList ? getOuterHeight(this._$menuList) : 0\r\n            }.bind(this),\r\n            width: function() {\r\n                return getOuterWidth(this._list.$element())\r\n            }.bind(this),\r\n            onContentReady: this._renderMenuContent.bind(this)\r\n        })\r\n    },\r\n    _renderMenuContent: function(e) {\r\n        var $overlayContent = e.component.$content();\r\n        var items = this._menuItems().slice();\r\n        if (this._deleteEnabled()) {\r\n            items.push({\r\n                text: messageLocalization.format(\"dxListEditDecorator-delete\"),\r\n                action: this._deleteItem.bind(this)\r\n            })\r\n        }\r\n        this._$menuList = $(\"<div>\");\r\n        this._list._createComponent(this._$menuList, ListBase, {\r\n            items: items,\r\n            onItemClick: this._menuItemClickHandler.bind(this),\r\n            height: \"auto\",\r\n            integrationOptions: {}\r\n        });\r\n        $overlayContent.addClass(CONTEXTMENU_MENUCONTENT_CLASS);\r\n        $overlayContent.append(this._$menuList)\r\n    },\r\n    _menuItemClickHandler: function(args) {\r\n        this._menu.hide();\r\n        this._fireMenuAction(this._$itemWithMenu, args.itemData.action)\r\n    },\r\n    _deleteItem: function() {\r\n        this._list.deleteItem(this._$itemWithMenu)\r\n    },\r\n    handleContextMenu: function($itemElement) {\r\n        this._$itemWithMenu = $itemElement;\r\n        this._menu.option({\r\n            position: {\r\n                my: \"top\",\r\n                at: \"bottom\",\r\n                of: $itemElement,\r\n                collision: \"flip\"\r\n            }\r\n        });\r\n        this._menu.show();\r\n        return true\r\n    },\r\n    dispose: function() {\r\n        if (this._menu) {\r\n            this._menu.$element().remove()\r\n        }\r\n        this.callBase.apply(this, arguments)\r\n    }\r\n}).include(EditDecoratorMenuHelperMixin));\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}