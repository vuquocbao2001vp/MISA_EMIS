{"ast":null,"code":"/**\r\n * DevExtreme (esm/viz/sankey/tracker.js)\r\n * Version: 22.1.4\r\n * Build date: Fri Jul 22 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport Sankey from \"./sankey\";\nimport { Tracker } from \"../components/tracker\";\nvar proto = Sankey.prototype;\nvar DATA_KEY_BASE = \"__sankey_data_\";\nvar dataKeyModifier = 0;\nproto._eventsMap.onNodeClick = {\n  name: \"nodeClick\"\n};\nproto._eventsMap.onLinkClick = {\n  name: \"linkClick\"\n};\n\nvar getDataKey = function () {\n  return DATA_KEY_BASE + dataKeyModifier++;\n};\n\nexport var plugin = {\n  name: \"tracker\",\n  init: function () {\n    var that = this;\n    var dataKey = getDataKey();\n    that._tracker = new Tracker({\n      widget: that,\n      root: that._renderer.root,\n      getData: function (e) {\n        var target = e.target;\n        return target[dataKey];\n      },\n      getNode: function (index) {\n        if (index < that._nodes.length) {\n          return that._nodes[index];\n        } else {\n          return that._links[index - that._nodes.length];\n        }\n      },\n      click: function (e) {\n        var eventName = this.getData(e.event) < that._nodes.length ? \"nodeClick\" : \"linkClick\";\n\n        that._eventTrigger(eventName, {\n          target: e.node,\n          event: e.event\n        });\n      }\n    });\n    this._dataKey = dataKey;\n  },\n  dispose: function () {\n    this._tracker.dispose();\n  },\n  extenders: {\n    _change_LINKS_DRAW: function () {\n      var dataKey = this._dataKey;\n\n      this._nodes.concat(this._links).forEach(function (item, index) {\n        item.element.data(dataKey, index);\n      });\n    }\n  }\n};","map":{"version":3,"names":["Sankey","Tracker","proto","prototype","DATA_KEY_BASE","dataKeyModifier","_eventsMap","onNodeClick","name","onLinkClick","getDataKey","plugin","init","that","dataKey","_tracker","widget","root","_renderer","getData","e","target","getNode","index","_nodes","length","_links","click","eventName","event","_eventTrigger","node","_dataKey","dispose","extenders","_change_LINKS_DRAW","concat","forEach","item","element","data"],"sources":["E:/MisaProject/W2022_06/misa_emis/node_modules/devextreme/esm/viz/sankey/tracker.js"],"sourcesContent":["/**\r\n * DevExtreme (esm/viz/sankey/tracker.js)\r\n * Version: 22.1.4\r\n * Build date: Fri Jul 22 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport Sankey from \"./sankey\";\r\nimport {\r\n    Tracker\r\n} from \"../components/tracker\";\r\nvar proto = Sankey.prototype;\r\nvar DATA_KEY_BASE = \"__sankey_data_\";\r\nvar dataKeyModifier = 0;\r\nproto._eventsMap.onNodeClick = {\r\n    name: \"nodeClick\"\r\n};\r\nproto._eventsMap.onLinkClick = {\r\n    name: \"linkClick\"\r\n};\r\nvar getDataKey = function() {\r\n    return DATA_KEY_BASE + dataKeyModifier++\r\n};\r\nexport var plugin = {\r\n    name: \"tracker\",\r\n    init: function() {\r\n        var that = this;\r\n        var dataKey = getDataKey();\r\n        that._tracker = new Tracker({\r\n            widget: that,\r\n            root: that._renderer.root,\r\n            getData: function(e) {\r\n                var target = e.target;\r\n                return target[dataKey]\r\n            },\r\n            getNode: function(index) {\r\n                if (index < that._nodes.length) {\r\n                    return that._nodes[index]\r\n                } else {\r\n                    return that._links[index - that._nodes.length]\r\n                }\r\n            },\r\n            click: function(e) {\r\n                var eventName = this.getData(e.event) < that._nodes.length ? \"nodeClick\" : \"linkClick\";\r\n                that._eventTrigger(eventName, {\r\n                    target: e.node,\r\n                    event: e.event\r\n                })\r\n            }\r\n        });\r\n        this._dataKey = dataKey\r\n    },\r\n    dispose: function() {\r\n        this._tracker.dispose()\r\n    },\r\n    extenders: {\r\n        _change_LINKS_DRAW: function() {\r\n            var dataKey = this._dataKey;\r\n            this._nodes.concat(this._links).forEach((function(item, index) {\r\n                item.element.data(dataKey, index)\r\n            }))\r\n        }\r\n    }\r\n};\r\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAOA,MAAP,MAAmB,UAAnB;AACA,SACIC,OADJ,QAEO,uBAFP;AAGA,IAAIC,KAAK,GAAGF,MAAM,CAACG,SAAnB;AACA,IAAIC,aAAa,GAAG,gBAApB;AACA,IAAIC,eAAe,GAAG,CAAtB;AACAH,KAAK,CAACI,UAAN,CAAiBC,WAAjB,GAA+B;EAC3BC,IAAI,EAAE;AADqB,CAA/B;AAGAN,KAAK,CAACI,UAAN,CAAiBG,WAAjB,GAA+B;EAC3BD,IAAI,EAAE;AADqB,CAA/B;;AAGA,IAAIE,UAAU,GAAG,YAAW;EACxB,OAAON,aAAa,GAAGC,eAAe,EAAtC;AACH,CAFD;;AAGA,OAAO,IAAIM,MAAM,GAAG;EAChBH,IAAI,EAAE,SADU;EAEhBI,IAAI,EAAE,YAAW;IACb,IAAIC,IAAI,GAAG,IAAX;IACA,IAAIC,OAAO,GAAGJ,UAAU,EAAxB;IACAG,IAAI,CAACE,QAAL,GAAgB,IAAId,OAAJ,CAAY;MACxBe,MAAM,EAAEH,IADgB;MAExBI,IAAI,EAAEJ,IAAI,CAACK,SAAL,CAAeD,IAFG;MAGxBE,OAAO,EAAE,UAASC,CAAT,EAAY;QACjB,IAAIC,MAAM,GAAGD,CAAC,CAACC,MAAf;QACA,OAAOA,MAAM,CAACP,OAAD,CAAb;MACH,CANuB;MAOxBQ,OAAO,EAAE,UAASC,KAAT,EAAgB;QACrB,IAAIA,KAAK,GAAGV,IAAI,CAACW,MAAL,CAAYC,MAAxB,EAAgC;UAC5B,OAAOZ,IAAI,CAACW,MAAL,CAAYD,KAAZ,CAAP;QACH,CAFD,MAEO;UACH,OAAOV,IAAI,CAACa,MAAL,CAAYH,KAAK,GAAGV,IAAI,CAACW,MAAL,CAAYC,MAAhC,CAAP;QACH;MACJ,CAbuB;MAcxBE,KAAK,EAAE,UAASP,CAAT,EAAY;QACf,IAAIQ,SAAS,GAAG,KAAKT,OAAL,CAAaC,CAAC,CAACS,KAAf,IAAwBhB,IAAI,CAACW,MAAL,CAAYC,MAApC,GAA6C,WAA7C,GAA2D,WAA3E;;QACAZ,IAAI,CAACiB,aAAL,CAAmBF,SAAnB,EAA8B;UAC1BP,MAAM,EAAED,CAAC,CAACW,IADgB;UAE1BF,KAAK,EAAET,CAAC,CAACS;QAFiB,CAA9B;MAIH;IApBuB,CAAZ,CAAhB;IAsBA,KAAKG,QAAL,GAAgBlB,OAAhB;EACH,CA5Be;EA6BhBmB,OAAO,EAAE,YAAW;IAChB,KAAKlB,QAAL,CAAckB,OAAd;EACH,CA/Be;EAgChBC,SAAS,EAAE;IACPC,kBAAkB,EAAE,YAAW;MAC3B,IAAIrB,OAAO,GAAG,KAAKkB,QAAnB;;MACA,KAAKR,MAAL,CAAYY,MAAZ,CAAmB,KAAKV,MAAxB,EAAgCW,OAAhC,CAAyC,UAASC,IAAT,EAAef,KAAf,EAAsB;QAC3De,IAAI,CAACC,OAAL,CAAaC,IAAb,CAAkB1B,OAAlB,EAA2BS,KAA3B;MACH,CAFD;IAGH;EANM;AAhCK,CAAb"},"metadata":{},"sourceType":"module"}