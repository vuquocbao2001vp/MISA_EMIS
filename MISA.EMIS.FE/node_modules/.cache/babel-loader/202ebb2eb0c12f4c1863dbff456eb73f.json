{"ast":null,"code":"/**\r\n * DevExtreme (esm/viz/chart_components/layout_manager.js)\r\n * Version: 22.1.4\r\n * Build date: Fri Jul 22 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport { isNumeric as _isNumber } from \"../../core/utils/type\";\nimport consts from \"../components/consts\";\nimport { WrapperLayoutElement } from \"../core/layout_element\";\nvar {\n  floor: floor,\n  sqrt: sqrt\n} = Math;\nvar _min = Math.min;\nvar _max = Math.max;\nvar DEFAULT_INNER_RADIUS = .5;\nvar RADIAL_LABEL_INDENT = consts.radialLabelIndent;\n\nfunction getNearestCoord(firstCoord, secondCoord, pointCenterCoord) {\n  var nearestCoord;\n\n  if (pointCenterCoord < firstCoord) {\n    nearestCoord = firstCoord;\n  } else if (secondCoord < pointCenterCoord) {\n    nearestCoord = secondCoord;\n  } else {\n    nearestCoord = pointCenterCoord;\n  }\n\n  return nearestCoord;\n}\n\nfunction getLabelLayout(point) {\n  if (point._label.isVisible() && \"inside\" !== point._label.getLayoutOptions().position) {\n    return point._label.getBoundingRect();\n  }\n}\n\nfunction getPieRadius(series, paneCenterX, paneCenterY, accessibleRadius, minR) {\n  series.some(function (singleSeries) {\n    return singleSeries.getVisiblePoints().reduce(function (radiusIsFound, point) {\n      var labelBBox = getLabelLayout(point);\n\n      if (labelBBox) {\n        var xCoords = getNearestCoord(labelBBox.x, labelBBox.x + labelBBox.width, paneCenterX);\n        var yCoords = getNearestCoord(labelBBox.y, labelBBox.y + labelBBox.height, paneCenterY);\n        accessibleRadius = _min(_max(getLengthFromCenter(xCoords, yCoords, paneCenterX, paneCenterY) - RADIAL_LABEL_INDENT, minR), accessibleRadius);\n        radiusIsFound = true;\n      }\n\n      return radiusIsFound;\n    }, false);\n  });\n  return accessibleRadius;\n}\n\nfunction getSizeLabels(series) {\n  return series.reduce(function (res, singleSeries) {\n    var maxWidth = singleSeries.getVisiblePoints().reduce(function (width, point) {\n      var labelBBox = getLabelLayout(point);\n\n      if (labelBBox && labelBBox.width > width) {\n        width = labelBBox.width;\n      }\n\n      return width;\n    }, 0);\n    var rWidth = maxWidth;\n\n    if (maxWidth) {\n      res.outerLabelsCount++;\n\n      if (res.outerLabelsCount > 1) {\n        maxWidth += consts.pieLabelSpacing;\n      }\n\n      rWidth += consts.pieLabelSpacing;\n    }\n\n    res.sizes.push(maxWidth);\n    res.rSizes.push(rWidth);\n    res.common += maxWidth;\n    return res;\n  }, {\n    sizes: [],\n    rSizes: [],\n    common: 0,\n    outerLabelsCount: 0\n  });\n}\n\nfunction correctLabelRadius(labelSizes, radius, series, canvas, averageWidthLabels, centerX) {\n  var curRadius;\n  var i;\n  var runningWidth = 0;\n  var sizes = labelSizes.sizes;\n  var rSizes = labelSizes.rSizes;\n\n  for (i = 0; i < series.length; i++) {\n    if (0 === sizes[i]) {\n      curRadius && (curRadius += rSizes[i - 1]);\n      continue;\n    }\n\n    curRadius = floor(curRadius ? curRadius + rSizes[i - 1] : radius);\n    series[i].correctLabelRadius(curRadius);\n    runningWidth += averageWidthLabels || sizes[i];\n    rSizes[i] = averageWidthLabels || rSizes[i];\n    series[i].setVisibleArea({\n      left: floor(centerX - radius - runningWidth),\n      right: floor(canvas.width - (centerX + radius + runningWidth)),\n      top: canvas.top,\n      bottom: canvas.bottom,\n      width: canvas.width,\n      height: canvas.height\n    });\n  }\n}\n\nfunction getLengthFromCenter(x, y, paneCenterX, paneCenterY) {\n  return sqrt((x - paneCenterX) * (x - paneCenterX) + (y - paneCenterY) * (y - paneCenterY));\n}\n\nfunction getInnerRadius(_ref) {\n  var {\n    type: type,\n    innerRadius: innerRadius\n  } = _ref;\n  return \"pie\" === type ? 0 : _isNumber(innerRadius) ? Number(innerRadius) : DEFAULT_INNER_RADIUS;\n}\n\nfunction LayoutManager() {}\n\nfunction getAverageLabelWidth(centerX, radius, canvas, sizeLabels) {\n  return (centerX - radius - RADIAL_LABEL_INDENT - canvas.left) / sizeLabels.outerLabelsCount;\n}\n\nfunction getFullRadiusWithLabels(centerX, canvas, sizeLabels) {\n  return centerX - canvas.left - (sizeLabels.outerLabelsCount > 0 ? sizeLabels.common + RADIAL_LABEL_INDENT : 0);\n}\n\nfunction correctAvailableRadius(availableRadius, canvas, series, minR, paneCenterX, paneCenterY) {\n  var sizeLabels = getSizeLabels(series);\n  var averageWidthLabels;\n  var fullRadiusWithLabels = getFullRadiusWithLabels(paneCenterX, canvas, sizeLabels);\n\n  if (fullRadiusWithLabels < minR) {\n    availableRadius = minR;\n    averageWidthLabels = getAverageLabelWidth(paneCenterX, availableRadius, canvas, sizeLabels);\n  } else {\n    availableRadius = _min(getPieRadius(series, paneCenterX, paneCenterY, availableRadius, minR), fullRadiusWithLabels);\n  }\n\n  correctLabelRadius(sizeLabels, availableRadius + RADIAL_LABEL_INDENT, series, canvas, averageWidthLabels, paneCenterX);\n  return availableRadius;\n}\n\nfunction toLayoutElementCoords(canvas) {\n  return new WrapperLayoutElement(null, {\n    x: canvas.left,\n    y: canvas.top,\n    width: canvas.width - canvas.left - canvas.right,\n    height: canvas.height - canvas.top - canvas.bottom\n  });\n}\n\nLayoutManager.prototype = {\n  constructor: LayoutManager,\n  setOptions: function (options) {\n    this._options = options;\n  },\n  applyPieChartSeriesLayout: function (canvas, series, hideLayoutLabels) {\n    var paneSpaceHeight = canvas.height - canvas.top - canvas.bottom;\n    var paneSpaceWidth = canvas.width - canvas.left - canvas.right;\n    var paneCenterX = paneSpaceWidth / 2 + canvas.left;\n    var paneCenterY = paneSpaceHeight / 2 + canvas.top;\n    var piePercentage = this._options.piePercentage;\n    var availableRadius;\n    var minR;\n\n    if (_isNumber(piePercentage)) {\n      availableRadius = minR = piePercentage * _min(canvas.height, canvas.width) / 2;\n    } else {\n      availableRadius = _min(paneSpaceWidth, paneSpaceHeight) / 2;\n      minR = this._options.minPiePercentage * availableRadius;\n    }\n\n    if (!hideLayoutLabels) {\n      availableRadius = correctAvailableRadius(availableRadius, canvas, series, minR, paneCenterX, paneCenterY);\n    }\n\n    return {\n      centerX: floor(paneCenterX),\n      centerY: floor(paneCenterY),\n      radiusInner: floor(availableRadius * getInnerRadius(series[0])),\n      radiusOuter: floor(availableRadius)\n    };\n  },\n  applyEqualPieChartLayout: function (series, layout) {\n    var radius = layout.radius;\n    return {\n      centerX: floor(layout.x),\n      centerY: floor(layout.y),\n      radiusInner: floor(radius * getInnerRadius(series[0])),\n      radiusOuter: floor(radius)\n    };\n  },\n  correctPieLabelRadius: function (series, layout, canvas) {\n    var sizeLabels = getSizeLabels(series);\n    var averageWidthLabels;\n    var radius = layout.radiusOuter + RADIAL_LABEL_INDENT;\n    var availableLabelWidth = layout.centerX - canvas.left - radius;\n\n    if (sizeLabels.common + RADIAL_LABEL_INDENT > availableLabelWidth) {\n      averageWidthLabels = getAverageLabelWidth(layout.centerX, layout.radiusOuter, canvas, sizeLabels);\n    }\n\n    correctLabelRadius(sizeLabels, radius, series, canvas, averageWidthLabels, layout.centerX);\n  },\n\n  needMoreSpaceForPanesCanvas(panes, rotated, fixedSizeCallback) {\n    var options = this._options;\n    var width = options.width;\n    var height = options.height;\n    var piePercentage = options.piePercentage;\n\n    var percentageIsValid = _isNumber(piePercentage);\n\n    var needHorizontalSpace = 0;\n    var needVerticalSpace = 0;\n    panes.forEach(pane => {\n      var paneCanvas = pane.canvas;\n      var minSize = percentageIsValid ? _min(paneCanvas.width, paneCanvas.height) * piePercentage : void 0;\n      var paneSized = fixedSizeCallback ? fixedSizeCallback(pane) : {\n        width: false,\n        height: false\n      };\n      var needPaneHorizontalSpace = !paneSized.width ? (percentageIsValid ? minSize : width) - (paneCanvas.width - paneCanvas.left - paneCanvas.right) : 0;\n      var needPaneVerticalSpace = !paneSized.height ? (percentageIsValid ? minSize : height) - (paneCanvas.height - paneCanvas.top - paneCanvas.bottom) : 0;\n\n      if (rotated) {\n        needHorizontalSpace += needPaneHorizontalSpace > 0 ? needPaneHorizontalSpace : 0;\n        needVerticalSpace = _max(needPaneVerticalSpace > 0 ? needPaneVerticalSpace : 0, needVerticalSpace);\n      } else {\n        needHorizontalSpace = _max(needPaneHorizontalSpace > 0 ? needPaneHorizontalSpace : 0, needHorizontalSpace);\n        needVerticalSpace += needPaneVerticalSpace > 0 ? needPaneVerticalSpace : 0;\n      }\n    });\n    return needHorizontalSpace > 0 || needVerticalSpace > 0 ? {\n      width: needHorizontalSpace,\n      height: needVerticalSpace\n    } : false;\n  },\n\n  layoutInsideLegend: function (legend, canvas) {\n    var layoutOptions = legend.getLayoutOptions();\n\n    if (!layoutOptions) {\n      return;\n    }\n\n    var position = layoutOptions.position;\n    var cutSide = layoutOptions.cutSide;\n    var my = {\n      horizontal: position.horizontal,\n      vertical: position.vertical\n    };\n    canvas[layoutOptions.cutLayoutSide] += \"horizontal\" === layoutOptions.cutSide ? layoutOptions.width : layoutOptions.height;\n    my[cutSide] = {\n      left: \"right\",\n      right: \"left\",\n      top: \"bottom\",\n      bottom: \"top\",\n      center: \"center\"\n    }[my[cutSide]];\n    legend.position({\n      of: toLayoutElementCoords(canvas),\n      my: my,\n      at: position\n    });\n  }\n};\nexport { LayoutManager };","map":{"version":3,"names":["isNumeric","_isNumber","consts","WrapperLayoutElement","floor","sqrt","Math","_min","min","_max","max","DEFAULT_INNER_RADIUS","RADIAL_LABEL_INDENT","radialLabelIndent","getNearestCoord","firstCoord","secondCoord","pointCenterCoord","nearestCoord","getLabelLayout","point","_label","isVisible","getLayoutOptions","position","getBoundingRect","getPieRadius","series","paneCenterX","paneCenterY","accessibleRadius","minR","some","singleSeries","getVisiblePoints","reduce","radiusIsFound","labelBBox","xCoords","x","width","yCoords","y","height","getLengthFromCenter","getSizeLabels","res","maxWidth","rWidth","outerLabelsCount","pieLabelSpacing","sizes","push","rSizes","common","correctLabelRadius","labelSizes","radius","canvas","averageWidthLabels","centerX","curRadius","i","runningWidth","length","setVisibleArea","left","right","top","bottom","getInnerRadius","_ref","type","innerRadius","Number","LayoutManager","getAverageLabelWidth","sizeLabels","getFullRadiusWithLabels","correctAvailableRadius","availableRadius","fullRadiusWithLabels","toLayoutElementCoords","prototype","constructor","setOptions","options","_options","applyPieChartSeriesLayout","hideLayoutLabels","paneSpaceHeight","paneSpaceWidth","piePercentage","minPiePercentage","centerY","radiusInner","radiusOuter","applyEqualPieChartLayout","layout","correctPieLabelRadius","availableLabelWidth","needMoreSpaceForPanesCanvas","panes","rotated","fixedSizeCallback","percentageIsValid","needHorizontalSpace","needVerticalSpace","forEach","pane","paneCanvas","minSize","paneSized","needPaneHorizontalSpace","needPaneVerticalSpace","layoutInsideLegend","legend","layoutOptions","cutSide","my","horizontal","vertical","cutLayoutSide","center","of","at"],"sources":["E:/MisaProject/W2022_06/misa_emis/node_modules/devextreme/esm/viz/chart_components/layout_manager.js"],"sourcesContent":["/**\r\n * DevExtreme (esm/viz/chart_components/layout_manager.js)\r\n * Version: 22.1.4\r\n * Build date: Fri Jul 22 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport {\r\n    isNumeric as _isNumber\r\n} from \"../../core/utils/type\";\r\nimport consts from \"../components/consts\";\r\nimport {\r\n    WrapperLayoutElement\r\n} from \"../core/layout_element\";\r\nvar {\r\n    floor: floor,\r\n    sqrt: sqrt\r\n} = Math;\r\nvar _min = Math.min;\r\nvar _max = Math.max;\r\nvar DEFAULT_INNER_RADIUS = .5;\r\nvar RADIAL_LABEL_INDENT = consts.radialLabelIndent;\r\n\r\nfunction getNearestCoord(firstCoord, secondCoord, pointCenterCoord) {\r\n    var nearestCoord;\r\n    if (pointCenterCoord < firstCoord) {\r\n        nearestCoord = firstCoord\r\n    } else if (secondCoord < pointCenterCoord) {\r\n        nearestCoord = secondCoord\r\n    } else {\r\n        nearestCoord = pointCenterCoord\r\n    }\r\n    return nearestCoord\r\n}\r\n\r\nfunction getLabelLayout(point) {\r\n    if (point._label.isVisible() && \"inside\" !== point._label.getLayoutOptions().position) {\r\n        return point._label.getBoundingRect()\r\n    }\r\n}\r\n\r\nfunction getPieRadius(series, paneCenterX, paneCenterY, accessibleRadius, minR) {\r\n    series.some((function(singleSeries) {\r\n        return singleSeries.getVisiblePoints().reduce((function(radiusIsFound, point) {\r\n            var labelBBox = getLabelLayout(point);\r\n            if (labelBBox) {\r\n                var xCoords = getNearestCoord(labelBBox.x, labelBBox.x + labelBBox.width, paneCenterX);\r\n                var yCoords = getNearestCoord(labelBBox.y, labelBBox.y + labelBBox.height, paneCenterY);\r\n                accessibleRadius = _min(_max(getLengthFromCenter(xCoords, yCoords, paneCenterX, paneCenterY) - RADIAL_LABEL_INDENT, minR), accessibleRadius);\r\n                radiusIsFound = true\r\n            }\r\n            return radiusIsFound\r\n        }), false)\r\n    }));\r\n    return accessibleRadius\r\n}\r\n\r\nfunction getSizeLabels(series) {\r\n    return series.reduce((function(res, singleSeries) {\r\n        var maxWidth = singleSeries.getVisiblePoints().reduce((function(width, point) {\r\n            var labelBBox = getLabelLayout(point);\r\n            if (labelBBox && labelBBox.width > width) {\r\n                width = labelBBox.width\r\n            }\r\n            return width\r\n        }), 0);\r\n        var rWidth = maxWidth;\r\n        if (maxWidth) {\r\n            res.outerLabelsCount++;\r\n            if (res.outerLabelsCount > 1) {\r\n                maxWidth += consts.pieLabelSpacing\r\n            }\r\n            rWidth += consts.pieLabelSpacing\r\n        }\r\n        res.sizes.push(maxWidth);\r\n        res.rSizes.push(rWidth);\r\n        res.common += maxWidth;\r\n        return res\r\n    }), {\r\n        sizes: [],\r\n        rSizes: [],\r\n        common: 0,\r\n        outerLabelsCount: 0\r\n    })\r\n}\r\n\r\nfunction correctLabelRadius(labelSizes, radius, series, canvas, averageWidthLabels, centerX) {\r\n    var curRadius;\r\n    var i;\r\n    var runningWidth = 0;\r\n    var sizes = labelSizes.sizes;\r\n    var rSizes = labelSizes.rSizes;\r\n    for (i = 0; i < series.length; i++) {\r\n        if (0 === sizes[i]) {\r\n            curRadius && (curRadius += rSizes[i - 1]);\r\n            continue\r\n        }\r\n        curRadius = floor(curRadius ? curRadius + rSizes[i - 1] : radius);\r\n        series[i].correctLabelRadius(curRadius);\r\n        runningWidth += averageWidthLabels || sizes[i];\r\n        rSizes[i] = averageWidthLabels || rSizes[i];\r\n        series[i].setVisibleArea({\r\n            left: floor(centerX - radius - runningWidth),\r\n            right: floor(canvas.width - (centerX + radius + runningWidth)),\r\n            top: canvas.top,\r\n            bottom: canvas.bottom,\r\n            width: canvas.width,\r\n            height: canvas.height\r\n        })\r\n    }\r\n}\r\n\r\nfunction getLengthFromCenter(x, y, paneCenterX, paneCenterY) {\r\n    return sqrt((x - paneCenterX) * (x - paneCenterX) + (y - paneCenterY) * (y - paneCenterY))\r\n}\r\n\r\nfunction getInnerRadius(_ref) {\r\n    var {\r\n        type: type,\r\n        innerRadius: innerRadius\r\n    } = _ref;\r\n    return \"pie\" === type ? 0 : _isNumber(innerRadius) ? Number(innerRadius) : DEFAULT_INNER_RADIUS\r\n}\r\n\r\nfunction LayoutManager() {}\r\n\r\nfunction getAverageLabelWidth(centerX, radius, canvas, sizeLabels) {\r\n    return (centerX - radius - RADIAL_LABEL_INDENT - canvas.left) / sizeLabels.outerLabelsCount\r\n}\r\n\r\nfunction getFullRadiusWithLabels(centerX, canvas, sizeLabels) {\r\n    return centerX - canvas.left - (sizeLabels.outerLabelsCount > 0 ? sizeLabels.common + RADIAL_LABEL_INDENT : 0)\r\n}\r\n\r\nfunction correctAvailableRadius(availableRadius, canvas, series, minR, paneCenterX, paneCenterY) {\r\n    var sizeLabels = getSizeLabels(series);\r\n    var averageWidthLabels;\r\n    var fullRadiusWithLabels = getFullRadiusWithLabels(paneCenterX, canvas, sizeLabels);\r\n    if (fullRadiusWithLabels < minR) {\r\n        availableRadius = minR;\r\n        averageWidthLabels = getAverageLabelWidth(paneCenterX, availableRadius, canvas, sizeLabels)\r\n    } else {\r\n        availableRadius = _min(getPieRadius(series, paneCenterX, paneCenterY, availableRadius, minR), fullRadiusWithLabels)\r\n    }\r\n    correctLabelRadius(sizeLabels, availableRadius + RADIAL_LABEL_INDENT, series, canvas, averageWidthLabels, paneCenterX);\r\n    return availableRadius\r\n}\r\n\r\nfunction toLayoutElementCoords(canvas) {\r\n    return new WrapperLayoutElement(null, {\r\n        x: canvas.left,\r\n        y: canvas.top,\r\n        width: canvas.width - canvas.left - canvas.right,\r\n        height: canvas.height - canvas.top - canvas.bottom\r\n    })\r\n}\r\nLayoutManager.prototype = {\r\n    constructor: LayoutManager,\r\n    setOptions: function(options) {\r\n        this._options = options\r\n    },\r\n    applyPieChartSeriesLayout: function(canvas, series, hideLayoutLabels) {\r\n        var paneSpaceHeight = canvas.height - canvas.top - canvas.bottom;\r\n        var paneSpaceWidth = canvas.width - canvas.left - canvas.right;\r\n        var paneCenterX = paneSpaceWidth / 2 + canvas.left;\r\n        var paneCenterY = paneSpaceHeight / 2 + canvas.top;\r\n        var piePercentage = this._options.piePercentage;\r\n        var availableRadius;\r\n        var minR;\r\n        if (_isNumber(piePercentage)) {\r\n            availableRadius = minR = piePercentage * _min(canvas.height, canvas.width) / 2\r\n        } else {\r\n            availableRadius = _min(paneSpaceWidth, paneSpaceHeight) / 2;\r\n            minR = this._options.minPiePercentage * availableRadius\r\n        }\r\n        if (!hideLayoutLabels) {\r\n            availableRadius = correctAvailableRadius(availableRadius, canvas, series, minR, paneCenterX, paneCenterY)\r\n        }\r\n        return {\r\n            centerX: floor(paneCenterX),\r\n            centerY: floor(paneCenterY),\r\n            radiusInner: floor(availableRadius * getInnerRadius(series[0])),\r\n            radiusOuter: floor(availableRadius)\r\n        }\r\n    },\r\n    applyEqualPieChartLayout: function(series, layout) {\r\n        var radius = layout.radius;\r\n        return {\r\n            centerX: floor(layout.x),\r\n            centerY: floor(layout.y),\r\n            radiusInner: floor(radius * getInnerRadius(series[0])),\r\n            radiusOuter: floor(radius)\r\n        }\r\n    },\r\n    correctPieLabelRadius: function(series, layout, canvas) {\r\n        var sizeLabels = getSizeLabels(series);\r\n        var averageWidthLabels;\r\n        var radius = layout.radiusOuter + RADIAL_LABEL_INDENT;\r\n        var availableLabelWidth = layout.centerX - canvas.left - radius;\r\n        if (sizeLabels.common + RADIAL_LABEL_INDENT > availableLabelWidth) {\r\n            averageWidthLabels = getAverageLabelWidth(layout.centerX, layout.radiusOuter, canvas, sizeLabels)\r\n        }\r\n        correctLabelRadius(sizeLabels, radius, series, canvas, averageWidthLabels, layout.centerX)\r\n    },\r\n    needMoreSpaceForPanesCanvas(panes, rotated, fixedSizeCallback) {\r\n        var options = this._options;\r\n        var width = options.width;\r\n        var height = options.height;\r\n        var piePercentage = options.piePercentage;\r\n        var percentageIsValid = _isNumber(piePercentage);\r\n        var needHorizontalSpace = 0;\r\n        var needVerticalSpace = 0;\r\n        panes.forEach(pane => {\r\n            var paneCanvas = pane.canvas;\r\n            var minSize = percentageIsValid ? _min(paneCanvas.width, paneCanvas.height) * piePercentage : void 0;\r\n            var paneSized = fixedSizeCallback ? fixedSizeCallback(pane) : {\r\n                width: false,\r\n                height: false\r\n            };\r\n            var needPaneHorizontalSpace = !paneSized.width ? (percentageIsValid ? minSize : width) - (paneCanvas.width - paneCanvas.left - paneCanvas.right) : 0;\r\n            var needPaneVerticalSpace = !paneSized.height ? (percentageIsValid ? minSize : height) - (paneCanvas.height - paneCanvas.top - paneCanvas.bottom) : 0;\r\n            if (rotated) {\r\n                needHorizontalSpace += needPaneHorizontalSpace > 0 ? needPaneHorizontalSpace : 0;\r\n                needVerticalSpace = _max(needPaneVerticalSpace > 0 ? needPaneVerticalSpace : 0, needVerticalSpace)\r\n            } else {\r\n                needHorizontalSpace = _max(needPaneHorizontalSpace > 0 ? needPaneHorizontalSpace : 0, needHorizontalSpace);\r\n                needVerticalSpace += needPaneVerticalSpace > 0 ? needPaneVerticalSpace : 0\r\n            }\r\n        });\r\n        return needHorizontalSpace > 0 || needVerticalSpace > 0 ? {\r\n            width: needHorizontalSpace,\r\n            height: needVerticalSpace\r\n        } : false\r\n    },\r\n    layoutInsideLegend: function(legend, canvas) {\r\n        var layoutOptions = legend.getLayoutOptions();\r\n        if (!layoutOptions) {\r\n            return\r\n        }\r\n        var position = layoutOptions.position;\r\n        var cutSide = layoutOptions.cutSide;\r\n        var my = {\r\n            horizontal: position.horizontal,\r\n            vertical: position.vertical\r\n        };\r\n        canvas[layoutOptions.cutLayoutSide] += \"horizontal\" === layoutOptions.cutSide ? layoutOptions.width : layoutOptions.height;\r\n        my[cutSide] = {\r\n            left: \"right\",\r\n            right: \"left\",\r\n            top: \"bottom\",\r\n            bottom: \"top\",\r\n            center: \"center\"\r\n        } [my[cutSide]];\r\n        legend.position({\r\n            of: toLayoutElementCoords(canvas),\r\n            my: my,\r\n            at: position\r\n        })\r\n    }\r\n};\r\nexport {\r\n    LayoutManager\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}