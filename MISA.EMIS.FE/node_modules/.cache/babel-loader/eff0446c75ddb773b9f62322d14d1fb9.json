{"ast":null,"code":"import axios from \"axios\";\nimport MISAEnum from \"@/script/constants/MISAEnum.js\";\nimport MISAResource from \"../../script/constants/MISAResource.js\";\nimport DxSelectBox from \"devextreme-vue/select-box\";\nimport DxTagBox from \"devextreme-vue/tag-box\";\nimport DxDateBox from \"devextreme-vue/date-box\";\nexport default {\n  components: {\n    DxSelectBox,\n    DxTagBox,\n    DxDateBox\n  },\n  props: [\"isShow\", \"staffSelected\", \"staffSelectedId\", \"btnSaveMode\"],\n\n  data() {\n    return {\n      staff: {},\n      teacherCode: null,\n      fullName: null,\n      avatarCode: null,\n      avatarName: null,\n      isTrained: null,\n      isWorking: null,\n      quitWorkDate: null,\n      departments: {},\n      subjects: {},\n      subjectIdList: [],\n      teacherSubject: {},\n      rooms: {},\n      roomIdList: [],\n      teacherRoom: {}\n    };\n  },\n\n  created() {\n    this.teacherCode = this.this.Resource = MISAResource;\n    var me = this;\n    axios.get(\"https://localhost:7070/api/v1/Subjects\").then(function (response) {\n      me.subjects = response.data;\n    }).catch(function (err) {\n      console.log(err);\n    });\n    axios.get(\"https://localhost:7070/api/v1/Departments\").then(function (response) {\n      me.departments = response.data;\n    }).catch(function (err) {\n      console.log(err);\n    });\n    axios.get(\"https://localhost:7070/api/v1/Rooms\").then(function (response) {\n      me.rooms = response.data;\n    }).catch(function (err) {\n      console.log(err);\n    });\n  },\n\n  watch: {\n    teacherCode: function (value) {\n      if (value == \"\") {\n        this.avatarCode = \"Số hiệu cán bộ\";\n      } else {\n        this.avatarCode = value;\n      }\n    },\n    fullName: function (value) {\n      if (value == \"\") {\n        this.avatarName = MISAResource.STAFF_INFO.FullName;\n      } else {\n        this.avatarName = value;\n      }\n    },\n    isShow: function (value) {\n      // khi form thông tin chi tiết mở ra, focus vào ô input đầu tiên\n      if (value == true) {\n        this.$nextTick(() => {\n          this.$refs.staffCode.focus();\n        }); // khi mở form thêm mới, reset lại các trường thông tin\n\n        if (this.btnSaveMode == MISAEnum.EditMode.Add) {\n          this.isTrained = false;\n          this.isWorking = false;\n          this.quitWorkDate = null;\n          this.roomIdList = [];\n          this.subjectIdList = [];\n        }\n      }\n    },\n    staffSelected: function (value) {\n      this.staff = value;\n    },\n    staffSelectedId: function (value) {\n      var me = this; // biến danh sách các id của môn học, kho phòng\n\n      var subjectList = [];\n      var roomList = [];\n\n      if (value) {\n        /**\r\n         * gọi api lấy dữ liệu thông tin chi tiết 1 giáo viên\r\n         * Author: VQBao - 21/7/2022\r\n         */\n        axios.get(`https://localhost:7070/api/v1/Teachers/${me.staffSelectedId}`).then(function (response) {\n          switch (response.status) {\n            case 200:\n              console.log(response.data);\n              me.staff = response.data.teacher;\n              me.teacherCode = response.data.teacher.teacherCode;\n              me.fullName = response.data.teacher.fullName;\n              me.isTrained = response.data.teacher.isTrained;\n              me.isWorking = response.data.teacher.isWorking;\n              me.quitWorkDate = response.data.teacher.quitWorkDate;\n              me.teacherRoom = response.data.room;\n              me.teacherSubject = response.data.subject;\n\n              for (let i = 0; i < me.teacherSubject.length; i++) {\n                subjectList.push(me.teacherSubject[i].subjectId);\n              }\n\n              me.subjectIdList = subjectList;\n\n              for (let i = 0; i < me.teacherRoom.length; i++) {\n                roomList.push(me.teacherRoom[i].roomId);\n              }\n\n              me.roomIdList = roomList;\n              break;\n          }\n        }).catch(function (res) {\n          switch (res.status) {\n            case 404:\n              console.log(\"404 Not Found\");\n              break;\n          }\n        });\n      }\n    }\n  },\n  methods: {\n    /**\r\n     * khi click vào nút đóng thì đóng form giáo viên chi tiết\r\n     * Author: VQBao - 21/7/2022\r\n     */\n    btnCloseOnClick() {\n      this.$emit(\"isShowStaffDialog\", false);\n    },\n\n    /**\r\n     * Thực hiện cất dữ liệu\r\n     * Author: VQBao - 21/7/2022\r\n     */\n    saveStaffOnClick() {\n      var me = this;\n      me.staff.teacherCode = me.teacherCode;\n      me.staff.fullName = me.fullName;\n\n      if (me.isTrained) {\n        me.staff.isTrained = 1;\n      } else {\n        me.staff.isTrained = 0;\n      }\n\n      if (me.isWorking) {\n        me.staff.isWorking = 1;\n      } else {\n        me.staff.isWorking = 0;\n      }\n\n      me.staff.roomId = me.roomIdList;\n      me.staff.subjectId = me.subjectIdList;\n      me.staff.quitWorkDate = me.quitWorkDate; // 1. validate dữ liệu, nếu dữ liệu hợp lệ thì gọi api thêm mới giáo viên\n\n      var isValid = me.validateStaffData();\n\n      if (isValid) {\n        // 2. gọi api thực hiên thêm mới dữ liệu\n        // nếu saveMode là Add thì thực hiện thêm mới, không thì thực hiện sửa\n        if (this.btnSaveMode == MISAEnum.EditMode.Add) {\n          axios.post(\"https://localhost:7070/api/v1/Teachers\", me.staff).then(function () {\n            // tắt form sửa thông tin\n            me.$emit(\"isShowStaffDialog\", false); // hiển thị toast message thành công\n            // load lại dữ liệu của bảng\n\n            me.$emit(\"loadData\", 25, 1, '');\n          }).catch(function (err) {\n            console.log(err);\n          });\n        } else {\n          console.log(me.staff);\n          axios.put(`https://localhost:7070/api/v1/Teachers/${me.staffSelectedId}`, me.staff).then(function () {\n            // tắt form sửa thông tin\n            me.$emit(\"isShowStaffDialog\", false); // load lại dữ liệu của bảng\n\n            me.$emit(\"loadData\", 25, 1, '');\n          }).catch(function (err) {\n            console.log(err);\n          });\n        }\n      }\n    },\n\n    /**\r\n     * Khi blur, nếu mã giáo viên để trống thì hiện lỗi\r\n     * Author: VQBao - 27/7/2022\r\n     */\n    validateStaffCode() {\n      if (!this.staff.teacherCode) {\n        this.$refs.staffCode.classList.add(\"input-error\");\n        this.$refs.staffCode.setAttribute(\"title\", MISAResource.ERROR.EmptyStaffCode);\n      } else {\n        this.$refs.staffCode.classList.remove(\"input-error\");\n        this.$refs.staffCode.setAttribute(\"title\", \"\");\n        this.imageStaffCode = this.staff.teacherCode;\n      }\n    },\n\n    /**\r\n     * Khi blur khỏi input Họ tên, nếu họ tên trống thì báo lỗi\r\n     */\n    validateFullName() {\n      if (!this.staff.fullName) {\n        this.$refs.staffName.classList.add(\"input-error\");\n        this.$refs.staffName.setAttribute(\"title\", MISAResource.ERROR.EmptyFullName);\n      } else {\n        this.$refs.staffName.classList.remove(\"input-error\");\n        this.$refs.staffName.setAttribute(\"title\", \"\");\n        this.imageStaffName = this.staff.fullName;\n      }\n    },\n\n    /**\r\n     * Khi blur, nếu email không đúng định dạng thì báo lỗi\r\n     * Author: VQBao - 27/7/2022\r\n     */\n    validateEmail() {\n      var email = event.currentTarget.value;\n\n      if (email) {\n        var emailFormat = /^([a-zA-Z0-9_\\-.]+)@([a-zA-Z0-9_\\-.]+)\\.([a-zA-Z]{2,5})$/;\n\n        if (!emailFormat.test(email)) {\n          event.currentTarget.classList.add(\"input-error\");\n          event.currentTarget.setAttribute(\"title\", MISAResource.ERROR.InValidEmail);\n        } else {\n          event.currentTarget.classList.remove(\"input-error\");\n          event.currentTarget.setAttribute(\"title\", \"\");\n        }\n      } else {\n        event.currentTarget.classList.remove(\"input-error\");\n        event.currentTarget.setAttribute(\"title\", \"\");\n      }\n    },\n\n    /**\r\n     * Thực hiện validate dữ liệu\r\n     * Author: VQBao - 27/7/2022\r\n     */\n    validateStaffData() {\n      var isValid = true; // validate mã giáo viên\n\n      if (!this.staff.teacherCode) {\n        isValid = false;\n        this.$refs.staffCode.classList.add(\"input-error\");\n        this.$refs.staffCode.setAttribute(\"title\", MISAResource.ERROR.EmptyStaffCode);\n      } // validate họ và tên\n\n\n      if (!this.staff.fullName) {\n        isValid = false;\n        this.$refs.staffName.classList.add(\"input-error\");\n        this.$refs.staffName.setAttribute(\"title\", MISAResource.ERROR.EmptyFullName);\n      } // validate email\n\n\n      if (this.staff.email) {\n        var email = this.staff.email;\n\n        if (email) {\n          var emailFormat = /^([a-zA-Z0-9_\\-.]+)@([a-zA-Z0-9_\\-.]+)\\.([a-zA-Z]{2,5})$/;\n\n          if (!emailFormat.test(email)) {\n            isValid = false;\n            this.$refs.staffEmail.classList.add(\"input-error\");\n            this.$refs.staffEmail.setAttribute(\"title\", MISAResource.ERROR.InValidEmail);\n          }\n        }\n      }\n\n      return isValid;\n    },\n\n    /**\r\n     * Hàm check trình độ quản lý thiết bị\r\n     * Author: VQBao - 28/7/2022\r\n     */\n    checkIsTrained() {\n      this.isTrained = !this.isTrained;\n    },\n\n    /**\r\n     * Hàm check trạng thái làm việc\r\n     * Author: VQBao - 28/7/2022\r\n     */\n    checkIsWorking() {\n      this.isWorking = !this.isWorking;\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["axios","MISAEnum","MISAResource","DxSelectBox","DxTagBox","DxDateBox","components","props","data","staff","teacherCode","fullName","avatarCode","avatarName","isTrained","isWorking","quitWorkDate","departments","subjects","subjectIdList","teacherSubject","rooms","roomIdList","teacherRoom","created","this","Resource","me","get","then","response","catch","err","console","log","watch","value","STAFF_INFO","FullName","isShow","$nextTick","$refs","staffCode","focus","btnSaveMode","EditMode","Add","staffSelected","staffSelectedId","subjectList","roomList","status","teacher","room","subject","i","length","push","subjectId","roomId","res","methods","btnCloseOnClick","$emit","saveStaffOnClick","isValid","validateStaffData","post","put","validateStaffCode","classList","add","setAttribute","ERROR","EmptyStaffCode","remove","imageStaffCode","validateFullName","staffName","EmptyFullName","imageStaffName","validateEmail","email","event","currentTarget","emailFormat","test","InValidEmail","staffEmail","checkIsTrained","checkIsWorking"],"sourceRoot":"","sources":["E:\\MisaProject\\W2022_06\\MISA.EMIS.FE\\src\\components\\dialog\\DialogStaffDetail.vue"],"sourcesContent":["<template>\r\n  <div class=\"dialog\" v-if=\"isShow\" :class=\"{ isShowDialog: isShow }\">\r\n    <div class=\"dialog-avatar\">\r\n      <div class=\"avatar-image icon-center icon-avatar\"></div>\r\n      <BaseButton\r\n        class=\"avatar-button-picker\"\r\n        buttonName=\"Chọn ảnh\"\r\n        buttonType=\"button-green\"\r\n      />\r\n      <span class=\"avatar-name\">{{avatarName}}</span>\r\n      <span class=\"avatar-code\">{{avatarCode }}</span>\r\n    </div>\r\n    <div class=\"dialog-content\">\r\n      <div\r\n        @click=\"btnCloseOnClick\"\r\n        class=\"content-icon icon-center icon-X-2\"\r\n      ></div>\r\n      <div class=\"dialog-body\">\r\n        <div class=\"dialog-body-text\">{{ Resource.DIALOG.InsertNewStaff }}</div>\r\n        <div class=\"body-row\">\r\n          <div class=\"dialog-body-item body-col-left\">\r\n            <div class=\"body-item-text\">\r\n              {{ Resource.STAFF_INFO.StaffCode\r\n              }}<span class=\"requiredInput\">*</span>\r\n            </div>\r\n            <input\r\n              :tabindex=\"1\"\r\n              type=\"text\"\r\n              class=\"body-item-input\"\r\n              v-model=\"teacherCode\"\r\n              ref=\"staffCode\"\r\n              @blur=\"validateStaffCode\"\r\n            />\r\n            <!-- <div class=\"input-validate-error\">\r\n              <div class=\"validate-error-arrow\"></div>\r\n              <div class=\"validate-error-text\">\r\n                Số hiệu cán bộ không được bỏ trống\r\n              </div>\r\n            </div> -->\r\n          </div>\r\n          <div class=\"dialog-body-item body-col-right\">\r\n            <div class=\"body-item-text\">\r\n              {{ Resource.STAFF_INFO.FullName\r\n              }}<span class=\"requiredInput\">*</span>\r\n            </div>\r\n            <input\r\n              :tabindex=\"2\"\r\n              type=\"text\"\r\n              class=\"body-item-input\"\r\n              ref=\"staffName\"\r\n              v-model=\"fullName\"\r\n              @blur=\"validateFullName\"\r\n            />\r\n            <!-- <div class=\"input-validate-error\">\r\n              <div class=\"validate-error-text\">Họ tên không được bỏ trống</div>\r\n              <div class=\"validate-error-arrow\"></div>\r\n            </div> -->\r\n          </div>\r\n        </div>\r\n        <div class=\"body-row\">\r\n          <div class=\"dialog-body-item body-col-left\">\r\n            <div class=\"body-item-text\">\r\n              {{ Resource.STAFF_INFO.PhoneNumber }}\r\n            </div>\r\n            <input\r\n              :tabindex=\"3\"\r\n              type=\"text\"\r\n              class=\"body-item-input\"\r\n              ref=\"staffPhone\"\r\n              v-model=\"staff.phoneNumber\"\r\n            />\r\n            <!-- <div class=\"input-validate-error\">\r\n              <div class=\"validate-error-arrow\"></div>\r\n              <div class=\"validate-error-text\">\r\n                Số điện thoại không đủ độ dài\r\n              </div>\r\n            </div> -->\r\n          </div>\r\n          <div class=\"dialog-body-item body-col-right\">\r\n            <div class=\"body-item-text\">{{ Resource.STAFF_INFO.Email }}</div>\r\n            <input\r\n              :tabindex=\"4\"\r\n              type=\"text\"\r\n              class=\"body-item-input\"\r\n              ref=\"staffEmail\"\r\n              v-model=\"staff.email\"\r\n              @blur=\"validateEmail\"\r\n            />\r\n            <!-- <div class=\"input-validate-error\">\r\n              <div class=\"validate-error-text\">Email không đúng định dạng</div>\r\n              <div class=\"validate-error-arrow\"></div>\r\n            </div> -->\r\n          </div>\r\n        </div>\r\n        <div class=\"body-row\">\r\n          <div class=\"dialog-body-item body-col-left\">\r\n            <div class=\"body-item-text\">\r\n              {{ Resource.STAFF_INFO.Department }}\r\n            </div>\r\n            <div class=\"select-box\">\r\n              <DxSelectBox\r\n                :search-enable=\"true\"\r\n                :items=\"departments\"\r\n                display-expr=\"departmentName\"\r\n                value-expr=\"departmentId\"\r\n                placeholder=\"\"\r\n                v-model:value=\"staff.departmentId\"\r\n                :tabindex=\"5\"\r\n                noDataText=\"Không có dữ liệu\"\r\n              />\r\n            </div>\r\n          </div>\r\n          <div class=\"dialog-body-item body-col-right\">\r\n            <div class=\"body-item-text\" title=\"Quản lý theo môn\">{{ Resource.STAFF_INFO.Subject }}</div>\r\n            <div class=\"tag-box\">\r\n              <DxTagBox\r\n                :search-enable=\"true\"\r\n                :show-selection-controls=\"true\"\r\n                :max-display-tag=\"3\"\r\n                :multiline=\"false\"\r\n                :showDropDownButton=\"true\"\r\n                :items=\"subjects\"\r\n                display-expr=\"subjectName\"\r\n                value-expr=\"subjectId\"\r\n                placeholder=\"\"\r\n                :tabindex=\"6\"\r\n                selectAllText=\"Tất cả\"\r\n                noDataText=\"Không có dữ liệu\"\r\n                v-model:value=\"subjectIdList\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"body-row\">\r\n          <div class=\"dialog-body-item body-col-left\">\r\n            <div class=\"body-item-text\" title=\"Quản lý kho, phòng\">{{ Resource.STAFF_INFO.Room }}</div>\r\n            <div class=\"tag-box tag-box-room\">\r\n              <DxTagBox\r\n                :search-enable=\"true\"\r\n                :show-selection-controls=\"true\"\r\n                :max-display-tag=\"3\"\r\n                :multiline=\"false\"\r\n                :showDropDownButton=\"true\"\r\n                :items=\"rooms\"\r\n                display-expr=\"roomName\"\r\n                value-expr=\"roomId\"\r\n                placeholder=\"\"\r\n                :tabindex=\"7\"\r\n                selectAllText=\"Tất cả\"\r\n                noDataText=\"Không có dữ liệu\"\r\n                v-model:value=\"roomIdList\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"body-row\">\r\n          <div class=\"dialog-body-item\">\r\n            <BaseCheckbox\r\n              :tabindex=\"8\"\r\n              :class=\"isTrained ? 'checkbox-active' : 'checkbox-inactive'\"\r\n              @click=\"checkIsTrained\"\r\n              @keyup.space=\"checkIsTrained\"\r\n              @keyup.enter=\"checkIsTrained\"\r\n            />\r\n            <div class=\"body-item-text row-item-checkbox\">\r\n              {{ Resource.STAFF_INFO.TrainingQualification }}\r\n            </div>\r\n          </div>\r\n          <div class=\"dialog-body-item\">\r\n            <BaseCheckbox\r\n              :tabindex=\"9\"\r\n              :class=\"isWorking ? 'checkbox-active' : 'checkbox-inactive'\"\r\n              @click=\"checkIsWorking\"\r\n              @keyup.space=\"checkIsWorking\"\r\n              @keyup.enter=\"checkIsWorking\"\r\n            />\r\n            <div class=\"body-item-text row-item-checkbox\">\r\n              {{ Resource.STAFF_INFO.IsWorking }}\r\n            </div>\r\n          </div>\r\n          <div\r\n            class=\"dialog-body-item\"\r\n            style=\"position: absolute; right: 24px\"\r\n            v-show=\"!isWorking\"\r\n          >\r\n            <div class=\"body-item-text\" style=\"margin-right: 8px\">\r\n              {{ Resource.STAFF_INFO.DayQuitWork }}\r\n            </div>\r\n            <div class=\"day-quit-work\">\r\n              <DxDateBox\r\n                v-model:value=\"quitWorkDate\"\r\n                type=\"datetime\"\r\n                :tabindex=\"10\"\r\n                display-format=\"dd/MM/yyyy\"\r\n                invalidDateMessage=\"Ngày nghỉ việc không đúng định dạng\"\r\n                :use-mask-behavior=\"true\"\r\n                placeholder=\"dd/mm/yyyy\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"dialog-footer\">\r\n        <BaseButton\r\n          :tabindex=\"12\"\r\n          id=\"btnClose\"\r\n          buttonName=\"Đóng\"\r\n          buttonType=\"button-white\"\r\n          @click=\"btnCloseOnClick\"\r\n        />\r\n        <BaseButton\r\n          :tabindex=\"11\"\r\n          id=\"btnSave\"\r\n          buttonName=\"Lưu\"\r\n          buttonType=\"button-green\"\r\n          @click=\"saveStaffOnClick\"\r\n        />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport axios from \"axios\";\r\nimport MISAEnum from \"@/script/constants/MISAEnum.js\";\r\nimport MISAResource from \"../../script/constants/MISAResource.js\";\r\nimport DxSelectBox from \"devextreme-vue/select-box\";\r\nimport DxTagBox from \"devextreme-vue/tag-box\";\r\nimport DxDateBox from \"devextreme-vue/date-box\";\r\nexport default {\r\n  components: {\r\n    DxSelectBox,\r\n    DxTagBox,\r\n    DxDateBox,\r\n  },\r\n  props: [\"isShow\", \"staffSelected\", \"staffSelectedId\", \"btnSaveMode\"],\r\n  data() {\r\n    return {\r\n      staff: {},\r\n      teacherCode: null,\r\n      fullName: null,\r\n      avatarCode: null,\r\n      avatarName: null,\r\n      isTrained: null,\r\n      isWorking: null,\r\n      quitWorkDate: null,\r\n      departments: {},\r\n      subjects: {},\r\n      subjectIdList: [],\r\n      teacherSubject: {},\r\n      rooms: {},\r\n      roomIdList: [],\r\n      teacherRoom: {},\r\n    };\r\n  },\r\n  created() {\r\n    this.teacherCode = this.\r\n    this.Resource = MISAResource;\r\n    var me = this;\r\n    axios\r\n      .get(\"https://localhost:7070/api/v1/Subjects\")\r\n      .then(function (response) {\r\n        me.subjects = response.data;\r\n      })\r\n      .catch(function (err) {\r\n        console.log(err);\r\n       \r\n      });\r\n    axios\r\n      .get(\"https://localhost:7070/api/v1/Departments\")\r\n      .then(function (response) {\r\n        me.departments = response.data;\r\n      })\r\n      .catch(function (err) {\r\n        console.log(err);\r\n       \r\n      });\r\n    axios\r\n      .get(\"https://localhost:7070/api/v1/Rooms\")\r\n      .then(function (response) {\r\n        me.rooms = response.data;\r\n      })\r\n      .catch(function (err) {\r\n        console.log(err);\r\n       \r\n      });\r\n\r\n  },\r\n  watch: {\r\n    teacherCode: function(value) {\r\n      if(value == \"\") {\r\n        this.avatarCode = \"Số hiệu cán bộ\";\r\n      } else {\r\n        this.avatarCode = value;\r\n      }\r\n    },\r\n    fullName: function(value) {\r\n      if(value == \"\") {\r\n        this.avatarName = MISAResource.STAFF_INFO.FullName;\r\n      } else {\r\n        this.avatarName = value;\r\n      }\r\n    },\r\n    isShow: function (value) {\r\n      // khi form thông tin chi tiết mở ra, focus vào ô input đầu tiên\r\n      if (value == true) {\r\n        this.$nextTick(() => {\r\n          this.$refs.staffCode.focus();\r\n        });\r\n        // khi mở form thêm mới, reset lại các trường thông tin\r\n        if(this.btnSaveMode == MISAEnum.EditMode.Add){\r\n          this.isTrained = false;\r\n          this.isWorking = false;\r\n          this.quitWorkDate = null;\r\n          this.roomIdList = [];\r\n          this.subjectIdList = [];\r\n        }\r\n      }\r\n    },\r\n    staffSelected: function (value) {\r\n      this.staff = value;\r\n    },\r\n    staffSelectedId: function (value) {\r\n      var me = this;\r\n      // biến danh sách các id của môn học, kho phòng\r\n      var subjectList = [];\r\n      var roomList = [];\r\n      if (value) {\r\n        /**\r\n         * gọi api lấy dữ liệu thông tin chi tiết 1 giáo viên\r\n         * Author: VQBao - 21/7/2022\r\n         */\r\n        axios\r\n          .get(`https://localhost:7070/api/v1/Teachers/${me.staffSelectedId}`)\r\n          .then(function (response) {\r\n            switch (response.status) {\r\n              case 200:\r\n                console.log(response.data);\r\n                me.staff = response.data.teacher;\r\n                me.teacherCode = response.data.teacher.teacherCode;\r\n                me.fullName = response.data.teacher.fullName;\r\n                me.isTrained = response.data.teacher.isTrained;\r\n                me.isWorking = response.data.teacher.isWorking;\r\n                me.quitWorkDate = response.data.teacher.quitWorkDate;\r\n                me.teacherRoom = response.data.room;\r\n                me.teacherSubject = response.data.subject;\r\n                for (let i = 0; i < me.teacherSubject.length; i++) {\r\n                  subjectList.push(me.teacherSubject[i].subjectId);\r\n                }\r\n                me.subjectIdList = subjectList;\r\n                for (let i = 0; i < me.teacherRoom.length; i++) {\r\n                  roomList.push(me.teacherRoom[i].roomId);\r\n                }\r\n                me.roomIdList = roomList;\r\n                break;\r\n            }\r\n          })\r\n          .catch(function (res) {\r\n            switch (res.status) {\r\n              case 404:\r\n                console.log(\"404 Not Found\");\r\n                break;\r\n            }\r\n          });\r\n      }\r\n    },\r\n  },\r\n  methods: {\r\n    /**\r\n     * khi click vào nút đóng thì đóng form giáo viên chi tiết\r\n     * Author: VQBao - 21/7/2022\r\n     */\r\n    btnCloseOnClick() {\r\n      this.$emit(\"isShowStaffDialog\", false);\r\n    },\r\n    /**\r\n     * Thực hiện cất dữ liệu\r\n     * Author: VQBao - 21/7/2022\r\n     */\r\n    saveStaffOnClick() {\r\n      var me = this;\r\n      me.staff.teacherCode = me.teacherCode;\r\n      me.staff.fullName = me.fullName;\r\n      if(me.isTrained) {\r\n        me.staff.isTrained = 1;\r\n      } else {\r\n        me.staff.isTrained = 0;\r\n      }\r\n      if(me.isWorking) {\r\n        me.staff.isWorking = 1;\r\n      } else {\r\n        me.staff.isWorking = 0;\r\n      }\r\n      me.staff.roomId = me.roomIdList;\r\n      me.staff.subjectId = me.subjectIdList;\r\n      me.staff.quitWorkDate = me.quitWorkDate;\r\n      // 1. validate dữ liệu, nếu dữ liệu hợp lệ thì gọi api thêm mới giáo viên\r\n      var isValid = me.validateStaffData();\r\n      if (isValid) {\r\n        // 2. gọi api thực hiên thêm mới dữ liệu\r\n        // nếu saveMode là Add thì thực hiện thêm mới, không thì thực hiện sửa\r\n        if (this.btnSaveMode == MISAEnum.EditMode.Add) {\r\n          axios\r\n            .post(\"https://localhost:7070/api/v1/Teachers\", me.staff)\r\n            .then(function () {\r\n              // tắt form sửa thông tin\r\n              me.$emit(\"isShowStaffDialog\", false);\r\n              // hiển thị toast message thành công\r\n              // load lại dữ liệu của bảng\r\n              me.$emit(\"loadData\", 25, 1, '');\r\n            })\r\n            .catch(function (err) {\r\n              console.log(err);\r\n            });\r\n        } else {\r\n          console.log(me.staff);\r\n          axios\r\n            .put(\r\n              `https://localhost:7070/api/v1/Teachers/${me.staffSelectedId}`,\r\n              me.staff\r\n            )\r\n            .then(function () {\r\n              // tắt form sửa thông tin\r\n              me.$emit(\"isShowStaffDialog\", false);\r\n              // load lại dữ liệu của bảng\r\n              me.$emit(\"loadData\", 25, 1, '');\r\n            })\r\n            .catch(function (err) {\r\n              console.log(err);\r\n            });\r\n        }\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Khi blur, nếu mã giáo viên để trống thì hiện lỗi\r\n     * Author: VQBao - 27/7/2022\r\n     */\r\n    validateStaffCode() {\r\n      if (!this.staff.teacherCode) {\r\n        this.$refs.staffCode.classList.add(\"input-error\");\r\n        this.$refs.staffCode.setAttribute(\r\n          \"title\",\r\n          MISAResource.ERROR.EmptyStaffCode\r\n        );\r\n      } else {\r\n        this.$refs.staffCode.classList.remove(\"input-error\");\r\n        this.$refs.staffCode.setAttribute(\"title\", \"\");\r\n        this.imageStaffCode = this.staff.teacherCode;\r\n      }\r\n    },\r\n    /**\r\n     * Khi blur khỏi input Họ tên, nếu họ tên trống thì báo lỗi\r\n     */\r\n    validateFullName() {\r\n      if (!this.staff.fullName) {\r\n        this.$refs.staffName.classList.add(\"input-error\");\r\n        this.$refs.staffName.setAttribute(\r\n          \"title\",\r\n          MISAResource.ERROR.EmptyFullName\r\n        );\r\n      } else {\r\n        this.$refs.staffName.classList.remove(\"input-error\");\r\n        this.$refs.staffName.setAttribute(\"title\", \"\");\r\n        this.imageStaffName = this.staff.fullName;\r\n      }\r\n    },\r\n    /**\r\n     * Khi blur, nếu email không đúng định dạng thì báo lỗi\r\n     * Author: VQBao - 27/7/2022\r\n     */\r\n    validateEmail() {\r\n      var email = event.currentTarget.value;\r\n      if (email) {\r\n        var emailFormat =\r\n          /^([a-zA-Z0-9_\\-.]+)@([a-zA-Z0-9_\\-.]+)\\.([a-zA-Z]{2,5})$/;\r\n        if (!emailFormat.test(email)) {\r\n          event.currentTarget.classList.add(\"input-error\");\r\n          event.currentTarget.setAttribute(\r\n            \"title\",\r\n            MISAResource.ERROR.InValidEmail\r\n          );\r\n        } else {\r\n          event.currentTarget.classList.remove(\"input-error\");\r\n          event.currentTarget.setAttribute(\"title\", \"\");\r\n        }\r\n      } else {\r\n        event.currentTarget.classList.remove(\"input-error\");\r\n        event.currentTarget.setAttribute(\"title\", \"\");\r\n      }\r\n    },\r\n    /**\r\n     * Thực hiện validate dữ liệu\r\n     * Author: VQBao - 27/7/2022\r\n     */\r\n    validateStaffData() {\r\n      var isValid = true;\r\n      // validate mã giáo viên\r\n      if (!this.staff.teacherCode) {\r\n        isValid = false;\r\n        this.$refs.staffCode.classList.add(\"input-error\");\r\n        this.$refs.staffCode.setAttribute(\r\n          \"title\",\r\n          MISAResource.ERROR.EmptyStaffCode\r\n        );\r\n      }\r\n      // validate họ và tên\r\n      if (!this.staff.fullName) {\r\n        isValid = false;\r\n        this.$refs.staffName.classList.add(\"input-error\");\r\n        this.$refs.staffName.setAttribute(\r\n          \"title\",\r\n          MISAResource.ERROR.EmptyFullName\r\n        );\r\n      }\r\n      // validate email\r\n      if (this.staff.email) {\r\n        var email = this.staff.email;\r\n        if (email) {\r\n          var emailFormat =\r\n            /^([a-zA-Z0-9_\\-.]+)@([a-zA-Z0-9_\\-.]+)\\.([a-zA-Z]{2,5})$/;\r\n          if (!emailFormat.test(email)) {\r\n            isValid = false;\r\n            this.$refs.staffEmail.classList.add(\"input-error\");\r\n            this.$refs.staffEmail.setAttribute(\r\n              \"title\",\r\n              MISAResource.ERROR.InValidEmail\r\n            );\r\n          }\r\n        }\r\n      }\r\n      return isValid;\r\n    },\r\n    /**\r\n     * Hàm check trình độ quản lý thiết bị\r\n     * Author: VQBao - 28/7/2022\r\n     */\r\n    checkIsTrained() {\r\n      this.isTrained = !this.isTrained;\r\n    },\r\n    /**\r\n     * Hàm check trạng thái làm việc\r\n     * Author: VQBao - 28/7/2022\r\n     */\r\n    checkIsWorking() {\r\n      this.isWorking = !this.isWorking;\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n.isShowDialog {\r\n  display: flex !important;\r\n}\r\n\r\n.dialog {\r\n  position: fixed;\r\n  align-items: center;\r\n  justify-content: center;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background-color: rgba(0, 0, 0, 0.24);\r\n  display: none;\r\n}\r\n\r\n.dialog-avatar {\r\n  width: 224px;\r\n  height: 384px;\r\n  background-color: var(--white-background);\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  box-sizing: border-box;\r\n  border-right: 2px solid;\r\n  border-color: var(--button-border);\r\n}\r\n\r\n.avatar-image {\r\n  width: 160px;\r\n  height: 160px;\r\n  background-color: #ccc;\r\n  margin-top: 24px;\r\n  border-radius: 2px 2px 0 0;\r\n  background-size: 160px 160px;\r\n}\r\n\r\n.avatar-button-picker {\r\n  width: 160px;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.avatar-name {\r\n  margin-top: 16px;\r\n  font-size: 16px;\r\n  max-width: 120px;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  white-space: nowrap;\r\n}\r\n\r\n.avatar-code {\r\n  font-size: 12px;\r\n  margin-top: 4px;\r\n}\r\n\r\n.dialog-content {\r\n  position: relative;\r\n  display: flex;\r\n  flex-direction: column;\r\n  background-color: var(--white-background);\r\n}\r\n.content-icon {\r\n  position: absolute;\r\n  width: 36px;\r\n  height: 36px;\r\n  top: 0;\r\n  right: 0;\r\n  cursor: pointer;\r\n}\r\n.dialog-body {\r\n  width: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.dialog-body-text {\r\n  background-color: var(--white-backgound);\r\n  font-family: OpenSans-Semibold;\r\n  font-size: 20px;\r\n  width: 400px;\r\n  height: 26px;\r\n  margin-top: 18px;\r\n  margin-left: 32px;\r\n}\r\n\r\n.dialog-body-item {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-left: 24px;\r\n  margin-top: 24px;\r\n  height: 32px;\r\n  box-sizing: border-box;\r\n  position: relative;\r\n}\r\n\r\n.body-item-text {\r\n  color: #8d8d8d;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.body-item-input {\r\n  width: 200px;\r\n}\r\n\r\n.input-validate-error {\r\n  position: absolute;\r\n  z-index: 2;\r\n  /* display: flex; */\r\n  display: none;\r\n  align-items: center;\r\n  width: fit-content;\r\n}\r\n\r\n.validate-error-arrow {\r\n  width: 16px;\r\n  height: 16px;\r\n  transform: rotate(45deg);\r\n  background-color: var(--delete-icon-hover);\r\n}\r\n\r\n.validate-error-text {\r\n  color: var(--white-text);\r\n  background-color: var(--delete-icon-hover);\r\n  border-radius: 4px;\r\n  display: flex;\r\n  align-items: center;\r\n  padding-left: 8px;\r\n  padding-right: 8px;\r\n  z-index: 3;\r\n  height: 28px;\r\n}\r\n\r\n.body-col-left .input-validate-error {\r\n  left: 306px;\r\n}\r\n\r\n.body-col-left .input-validate-error .validate-error-text {\r\n  margin-left: -14px;\r\n}\r\n\r\n.body-col-right .input-validate-error {\r\n  right: 202px;\r\n}\r\n\r\n.body-col-right .input-validate-error .validate-error-arrow {\r\n  margin-left: -14px;\r\n}\r\n\r\n.body-row {\r\n  width: 100%;\r\n  display: flex;\r\n  margin-right: 24px;\r\n  position: relative;\r\n}\r\n\r\n.body-col-left .body-item-text {\r\n  width: 104px;\r\n}\r\n\r\n.body-col-right .body-item-text {\r\n  width: 86px;\r\n}\r\n\r\n.row-item-checkbox {\r\n  color: var(--button-black-text);\r\n  margin-left: 8px;\r\n}\r\n\r\n.dialog-footer {\r\n  width: 100%;\r\n  height: 60px;\r\n  display: flex;\r\n  position: relative;\r\n}\r\n\r\n#btnPickImage {\r\n  border-radius: 0 0 2px 2px;\r\n}\r\n\r\n#btnClose {\r\n  position: absolute;\r\n  right: 128px;\r\n  top: 14px;\r\n}\r\n\r\n#btnSave {\r\n  position: absolute;\r\n  right: 24px;\r\n  top: 14px;\r\n}\r\n\r\n.day-quit-work {\r\n  width: 150px;\r\n  box-sizing: border-box;\r\n}\r\n\r\n#btnDialogClose {\r\n  width: 24px;\r\n  height: 24px;\r\n  position: absolute;\r\n  right: 8px;\r\n  top: 8px;\r\n  cursor: pointer;\r\n}\r\n\r\n.requiredInput {\r\n  color: red;\r\n  margin-left: 4px;\r\n}\r\n\r\n.input-error {\r\n  border-color: var(--delete-icon-hover);\r\n}\r\n\r\ninput {\r\n  min-width: 120px;\r\n  height: 32px;\r\n  outline: none;\r\n  border: 1px solid #cccccc;\r\n  border-radius: 4px;\r\n  box-sizing: border-box;\r\n  padding: 0 32px 0 16px;\r\n}\r\n\r\ninput:focus {\r\n  border-color: #08bf1e;\r\n}\r\n\r\ninput::placeholder {\r\n  color: var(--button-grey-text);\r\n}\r\n\r\n.select-box {\r\n  width: 200px;\r\n  box-sizing: border-box;\r\n}\r\n.tag-box {\r\n  width: 200px;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.tag-box-room {\r\n  width: 510px;\r\n  box-sizing: border-box;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}