{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\n\n/**\r\n * DevExtreme (esm/viz/chart.js)\r\n * Version: 22.1.4\r\n * Build date: Fri Jul 22 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport { getHeight } from \"../core/utils/size\";\nimport { noop } from \"../core/utils/common\";\nimport { extend as _extend } from \"../core/utils/extend\";\nimport { hasWindow } from \"../core/utils/window\";\nimport { each as _each } from \"../core/utils/iterator\";\nimport registerComponent from \"../core/component_registrator\";\nimport { prepareSegmentRectPoints } from \"./utils\";\nimport { map as _map, getLog, getCategoriesInfo, updatePanesCanvases, convertVisualRangeObject, PANE_PADDING, normalizePanesHeight, rangesAreEqual, isRelativeHeightPane } from \"./core/utils\";\nimport { type, isDefined as _isDefined } from \"../core/utils/type\";\nimport { getPrecision } from \"../core/utils/math\";\nimport { overlapping } from \"./chart_components/base_chart\";\nimport multiAxesSynchronizer from \"./chart_components/multi_axes_synchronizer\";\nimport { AdvancedChart } from \"./chart_components/advanced_chart\";\nimport { ScrollBar } from \"./chart_components/scroll_bar\";\nimport { Crosshair, getMargins } from \"./chart_components/crosshair\";\nimport rangeDataCalculator from \"./series/helpers/range_data_calculator\";\nimport { LayoutManager } from \"./chart_components/layout_manager\";\nimport { Range } from \"./translators/range\";\nvar DEFAULT_PANE_NAME = \"default\";\nvar VISUAL_RANGE = \"VISUAL_RANGE\";\nvar DEFAULT_PANES = [{\n  name: DEFAULT_PANE_NAME,\n  border: {}\n}];\nvar DISCRETE = \"discrete\";\nvar _isArray = Array.isArray;\n\nfunction getFirstAxisNameForPane(axes, paneName, defaultPane) {\n  var result;\n\n  for (var i = 0; i < axes.length; i++) {\n    if (axes[i].pane === paneName || void 0 === axes[i].pane && paneName === defaultPane) {\n      result = axes[i].name;\n      break;\n    }\n  }\n\n  if (!result) {\n    result = axes[0].name;\n  }\n\n  return result;\n}\n\nfunction changeVisibilityAxisGrids(axis, gridVisibility, minorGridVisibility) {\n  var gridOpt = axis.getOptions().grid;\n  var minorGridOpt = axis.getOptions().minorGrid;\n  gridOpt.visible = gridVisibility;\n  minorGridOpt && (minorGridOpt.visible = minorGridVisibility);\n}\n\nfunction hideGridsOnNonFirstValueAxisForPane(axesForPane) {\n  var axisShown = false;\n  var hiddenStubAxis = [];\n  var minorGridVisibility = axesForPane.some(function (axis) {\n    var minorGridOptions = axis.getOptions().minorGrid;\n    return minorGridOptions && minorGridOptions.visible;\n  });\n  var gridVisibility = axesForPane.some(function (axis) {\n    var gridOptions = axis.getOptions().grid;\n    return gridOptions && gridOptions.visible;\n  });\n\n  if (axesForPane.length > 1) {\n    axesForPane.forEach(function (axis) {\n      var gridOpt = axis.getOptions().grid;\n\n      if (axisShown) {\n        changeVisibilityAxisGrids(axis, false, false);\n      } else if (gridOpt && gridOpt.visible) {\n        if (axis.getTranslator().getBusinessRange().isEmpty()) {\n          changeVisibilityAxisGrids(axis, false, false);\n          hiddenStubAxis.push(axis);\n        } else {\n          axisShown = true;\n          changeVisibilityAxisGrids(axis, gridVisibility, minorGridVisibility);\n        }\n      }\n    });\n    !axisShown && hiddenStubAxis.length && changeVisibilityAxisGrids(hiddenStubAxis[0], gridVisibility, minorGridVisibility);\n  }\n}\n\nfunction findAxisOptions(valueAxes, valueAxesOptions, axisName) {\n  var result;\n  var axInd;\n\n  for (axInd = 0; axInd < valueAxesOptions.length; axInd++) {\n    if (valueAxesOptions[axInd].name === axisName) {\n      result = valueAxesOptions[axInd];\n      result.priority = axInd;\n      break;\n    }\n  }\n\n  if (!result) {\n    for (axInd = 0; axInd < valueAxes.length; axInd++) {\n      if (valueAxes[axInd].name === axisName) {\n        result = valueAxes[axInd].getOptions();\n        result.priority = valueAxes[axInd].priority;\n        break;\n      }\n    }\n  }\n\n  return result;\n}\n\nfunction findAxis(paneName, axisName, axes) {\n  var axis;\n  var i;\n\n  for (i = 0; i < axes.length; i++) {\n    axis = axes[i];\n\n    if (axis.name === axisName && axis.pane === paneName) {\n      return axis;\n    }\n  }\n\n  if (paneName) {\n    return findAxis(void 0, axisName, axes);\n  }\n}\n\nfunction compareAxes(a, b) {\n  return a.priority - b.priority;\n}\n\nfunction doesPaneExist(panes, paneName) {\n  var found = false;\n\n  _each(panes, function (_, pane) {\n    if (pane.name === paneName) {\n      found = true;\n      return false;\n    }\n  });\n\n  return found;\n}\n\nfunction accumulate(field, src1, src2, auxSpacing) {\n  var val1 = src1[field] || 0;\n  var val2 = src2[field] || 0;\n  return val1 + val2 + (val1 && val2 ? auxSpacing : 0);\n}\n\nfunction pickMax(field, src1, src2) {\n  return pickMaxValue(src1[field], src2[field]);\n}\n\nfunction pickMaxValue(val1, val2) {\n  return Math.max(val1 || 0, val2 || 0);\n}\n\nfunction getAxisMargins(axis) {\n  return axis.getMargins();\n}\n\nfunction getHorizontalAxesMargins(axes, getMarginsFunc) {\n  return axes.reduce(function (margins, axis) {\n    var _axis$getOrthogonalAx;\n\n    var axisMargins = getMarginsFunc(axis);\n    var paneMargins = margins.panes[axis.pane] = margins.panes[axis.pane] || {};\n    var spacing = axis.getMultipleAxesSpacing();\n    paneMargins.top = accumulate(\"top\", paneMargins, axisMargins, spacing);\n    paneMargins.bottom = accumulate(\"bottom\", paneMargins, axisMargins, spacing);\n    paneMargins.left = pickMax(\"left\", paneMargins, axisMargins);\n    paneMargins.right = pickMax(\"right\", paneMargins, axisMargins);\n    margins.top = pickMax(\"top\", paneMargins, margins);\n    margins.bottom = pickMax(\"bottom\", paneMargins, margins);\n    margins.left = pickMax(\"left\", paneMargins, margins);\n    margins.right = pickMax(\"right\", paneMargins, margins);\n    var orthogonalAxis = null === (_axis$getOrthogonalAx = axis.getOrthogonalAxis) || void 0 === _axis$getOrthogonalAx ? void 0 : _axis$getOrthogonalAx.call(axis);\n\n    if (orthogonalAxis && orthogonalAxis.customPositionIsAvailable() && (!axis.customPositionIsBoundaryOrthogonalAxis() || !orthogonalAxis.customPositionEqualsToPredefined())) {\n      margins[orthogonalAxis.getResolvedBoundaryPosition()] = 0;\n    }\n\n    return margins;\n  }, {\n    panes: {}\n  });\n}\n\nfunction getVerticalAxesMargins(axes) {\n  return axes.reduce(function (margins, axis) {\n    var axisMargins = axis.getMargins();\n    var paneMargins = margins.panes[axis.pane] = margins.panes[axis.pane] || {};\n    var spacing = axis.getMultipleAxesSpacing();\n    paneMargins.top = pickMax(\"top\", paneMargins, axisMargins);\n    paneMargins.bottom = pickMax(\"bottom\", paneMargins, axisMargins);\n    paneMargins.left = accumulate(\"left\", paneMargins, axisMargins, spacing);\n    paneMargins.right = accumulate(\"right\", paneMargins, axisMargins, spacing);\n    margins.top = pickMax(\"top\", paneMargins, margins);\n    margins.bottom = pickMax(\"bottom\", paneMargins, margins);\n    margins.left = pickMax(\"left\", paneMargins, margins);\n    margins.right = pickMax(\"right\", paneMargins, margins);\n    return margins;\n  }, {\n    panes: {}\n  });\n}\n\nfunction performActionOnAxes(axes, action, actionArgument1, actionArgument2, actionArgument3) {\n  axes.forEach(function (axis) {\n    axis[action](actionArgument1 && actionArgument1[axis.pane], actionArgument2 && actionArgument2[axis.pane] || actionArgument2, actionArgument3);\n  });\n}\n\nfunction shrinkCanvases(isRotated, canvases, sizes, verticalMargins, horizontalMargins) {\n  function getMargin(side, margins, pane) {\n    var m = -1 === (isRotated ? [\"left\", \"right\"] : [\"top\", \"bottom\"]).indexOf(side) ? margins : margins.panes[pane] || {};\n    return m[side];\n  }\n\n  function getMaxMargin(side, margins1, margins2, pane) {\n    return pickMaxValue(getMargin(side, margins1, pane), getMargin(side, margins2, pane));\n  }\n\n  var getOriginalField = field => \"original\".concat(field[0].toUpperCase()).concat(field.slice(1));\n\n  function shrink(canvases, paneNames, sizeField, startMargin, endMargin, oppositeMargins) {\n    paneNames = paneNames.sort((p1, p2) => canvases[p2][startMargin] - canvases[p1][startMargin]);\n    paneNames.forEach(pane => {\n      var canvas = canvases[pane];\n      oppositeMargins.forEach(margin => {\n        canvas[margin] = canvas[getOriginalField(margin)] + getMaxMargin(margin, verticalMargins, horizontalMargins, pane);\n      });\n    });\n    var firstPane = canvases[paneNames[0]];\n    var emptySpace = paneNames.reduce((space, paneName) => {\n      space -= getMaxMargin(startMargin, verticalMargins, horizontalMargins, paneName) + getMaxMargin(endMargin, verticalMargins, horizontalMargins, paneName);\n      return space;\n    }, firstPane[sizeField] - firstPane[getOriginalField(endMargin)] - canvases[paneNames[paneNames.length - 1]][getOriginalField(startMargin)]) - PANE_PADDING * (paneNames.length - 1);\n    emptySpace -= Object.keys(sizes).reduce((prev, key) => prev + (!isRelativeHeightPane(sizes[key]) ? sizes[key].height : 0), 0);\n    paneNames.reduce((offset, pane) => {\n      var canvas = canvases[pane];\n      var paneSize = sizes[pane];\n      offset -= getMaxMargin(endMargin, verticalMargins, horizontalMargins, pane);\n      canvas[endMargin] = firstPane[sizeField] - offset;\n      offset -= !isRelativeHeightPane(paneSize) ? paneSize.height : Math.floor(emptySpace * paneSize.height);\n      canvas[startMargin] = offset;\n      offset -= getMaxMargin(startMargin, verticalMargins, horizontalMargins, pane) + PANE_PADDING;\n      return offset;\n    }, firstPane[sizeField] - firstPane[getOriginalField(endMargin)] - (emptySpace < 0 ? emptySpace : 0));\n  }\n\n  var paneNames = Object.keys(canvases);\n\n  if (!isRotated) {\n    shrink(canvases, paneNames, \"height\", \"top\", \"bottom\", [\"left\", \"right\"]);\n  } else {\n    shrink(canvases, paneNames, \"width\", \"left\", \"right\", [\"top\", \"bottom\"]);\n  }\n\n  return canvases;\n}\n\nfunction drawAxesWithTicks(axes, condition, canvases, panesBorderOptions) {\n  if (condition) {\n    performActionOnAxes(axes, \"createTicks\", canvases);\n    multiAxesSynchronizer.synchronize(axes);\n  }\n\n  performActionOnAxes(axes, \"draw\", !condition && canvases, panesBorderOptions);\n}\n\nfunction shiftAxis(side1, side2) {\n  var shifts = {};\n  return function (axis) {\n    if (!axis.customPositionIsAvailable() || axis.customPositionEqualsToPredefined()) {\n      var shift = shifts[axis.pane] = shifts[axis.pane] || {\n        top: 0,\n        left: 0,\n        bottom: 0,\n        right: 0\n      };\n      var spacing = axis.getMultipleAxesSpacing();\n      var margins = axis.getMargins();\n      axis.shift(shift);\n      shift[side1] = accumulate(side1, shift, margins, spacing);\n      shift[side2] = accumulate(side2, shift, margins, spacing);\n    } else {\n      axis.shift({\n        top: 0,\n        left: 0,\n        bottom: 0,\n        right: 0\n      });\n    }\n  };\n}\n\nfunction getCommonSize(side, margins) {\n  var size = 0;\n  var pane;\n  var paneMargins;\n\n  for (pane in margins.panes) {\n    paneMargins = margins.panes[pane];\n    size += \"height\" === side ? paneMargins.top + paneMargins.bottom : paneMargins.left + paneMargins.right;\n  }\n\n  return size;\n}\n\nfunction checkUsedSpace(sizeShortage, side, axes, getMarginFunc) {\n  var size = 0;\n\n  if (sizeShortage[side] > 0) {\n    size = getCommonSize(side, getMarginFunc(axes, getAxisMargins));\n    performActionOnAxes(axes, \"hideTitle\");\n    sizeShortage[side] -= size - getCommonSize(side, getMarginFunc(axes, getAxisMargins));\n  }\n\n  if (sizeShortage[side] > 0) {\n    performActionOnAxes(axes, \"hideOuterElements\");\n  }\n}\n\nfunction axisAnimationEnabled(drawOptions, pointsToAnimation) {\n  var pointsCount = pointsToAnimation.reduce((sum, count) => sum + count, 0) / pointsToAnimation.length;\n  return drawOptions.animate && pointsCount <= drawOptions.animationPointsLimit;\n}\n\nfunction collectMarkersInfoBySeries(allSeries, filteredSeries, argAxis) {\n  var series = [];\n  var overloadedSeries = {};\n  var argVisualRange = argAxis.visualRange();\n  var argTranslator = argAxis.getTranslator();\n  var argViewPortFilter = rangeDataCalculator.getViewPortFilter(argVisualRange || {});\n  filteredSeries.forEach(s => {\n    var valAxis = s.getValueAxis();\n    var valVisualRange = valAxis.getCanvasRange();\n    var valTranslator = valAxis.getTranslator();\n    var seriesIndex = allSeries.indexOf(s);\n    var valViewPortFilter = rangeDataCalculator.getViewPortFilter(valVisualRange || {});\n    overloadedSeries[seriesIndex] = {};\n    filteredSeries.forEach(sr => overloadedSeries[seriesIndex][allSeries.indexOf(sr)] = 0);\n    var seriesPoints = [];\n    s.getPoints().filter(p => p.getOptions().visible && argViewPortFilter(p.argument) && (valViewPortFilter(p.getMinValue(true)) || valViewPortFilter(p.getMaxValue(true)))).forEach(p => {\n      var tp = {\n        seriesIndex: seriesIndex,\n        argument: p.argument,\n        value: p.getMaxValue(true),\n        size: p.bubbleSize || p.getOptions().size\n      };\n\n      if (p.getMinValue(true) !== p.getMaxValue(true)) {\n        var mp = _extend({}, tp);\n\n        mp.value = p.getMinValue(true);\n        mp.x = argTranslator.to(mp.argument, 1);\n        mp.y = valTranslator.to(mp.value, 1);\n        seriesPoints.push(mp);\n      }\n\n      tp.x = argTranslator.to(tp.argument, 1);\n      tp.y = valTranslator.to(tp.value, 1);\n      seriesPoints.push(tp);\n    });\n    overloadedSeries[seriesIndex].pointsCount = seriesPoints.length;\n    overloadedSeries[seriesIndex].total = 0;\n    overloadedSeries[seriesIndex].continuousSeries = 0;\n    series.push({\n      name: s.name,\n      index: seriesIndex,\n      points: seriesPoints\n    });\n  });\n  return {\n    series: series,\n    overloadedSeries: overloadedSeries\n  };\n}\n\nfunction applyAutoHidePointMarkers(allSeries, filteredSeries, overloadedSeries, argAxis) {\n  var argAxisType = argAxis.getOptions().type;\n  filteredSeries.forEach(s => {\n    var seriesIndex = allSeries.indexOf(s);\n    s.autoHidePointMarkers = false;\n    var tickCount = argAxis.getTicksValues().majorTicksValues.length;\n\n    if (s.autoHidePointMarkersEnabled() && (argAxisType === DISCRETE || overloadedSeries[seriesIndex].pointsCount > tickCount)) {\n      for (var index in overloadedSeries[seriesIndex]) {\n        var i = parseInt(index);\n\n        if (isNaN(i) || overloadedSeries[seriesIndex].total / overloadedSeries[seriesIndex].continuousSeries < 3) {\n          continue;\n        }\n\n        if (i === seriesIndex) {\n          if (2 * overloadedSeries[i][i] >= overloadedSeries[i].pointsCount) {\n            s.autoHidePointMarkers = true;\n            break;\n          }\n        } else if (overloadedSeries[seriesIndex].total >= overloadedSeries[seriesIndex].pointsCount) {\n          s.autoHidePointMarkers = true;\n          break;\n        }\n      }\n    }\n  });\n}\n\nfunction fastHidingPointMarkersByArea(canvas, markersInfo, series) {\n  var area = canvas.width * canvas.height;\n  var seriesPoints = markersInfo.series;\n\n  var _loop = function (i) {\n    var currentSeries = series.filter(s => s.name === seriesPoints[i].name)[0];\n    var points = seriesPoints[i].points;\n    var pointSize = points.length ? points[0].size : 0;\n    var pointsArea = pointSize * pointSize * points.length;\n\n    if (currentSeries.autoHidePointMarkersEnabled() && pointsArea >= area / seriesPoints.length) {\n      var index = seriesPoints[i].index;\n      currentSeries.autoHidePointMarkers = true;\n      seriesPoints.splice(i, 1);\n      series.splice(series.indexOf(currentSeries), 1);\n      delete markersInfo.overloadedSeries[index];\n    }\n  };\n\n  for (var i = seriesPoints.length - 1; i >= 0; i--) {\n    _loop(i);\n  }\n}\n\nfunction updateMarkersInfo(points, overloadedSeries) {\n  var isContinuousSeries = false;\n\n  for (var i = 0; i < points.length - 1; i++) {\n    var curPoint = points[i];\n    var size = curPoint.size;\n\n    if (_isDefined(curPoint.x) && _isDefined(curPoint.y)) {\n      for (var j = i + 1; j < points.length; j++) {\n        var nextPoint = points[j];\n        var next_x = null === nextPoint || void 0 === nextPoint ? void 0 : nextPoint.x;\n        var next_y = null === nextPoint || void 0 === nextPoint ? void 0 : nextPoint.y;\n\n        if (!_isDefined(next_x) || Math.abs(curPoint.x - next_x) >= size) {\n          isContinuousSeries &= j !== i + 1;\n          break;\n        } else {\n          var distance = _isDefined(next_x) && _isDefined(next_y) && Math.sqrt(Math.pow(curPoint.x - next_x, 2) + Math.pow(curPoint.y - next_y, 2));\n\n          if (distance && distance < size) {\n            overloadedSeries[curPoint.seriesIndex][nextPoint.seriesIndex]++;\n            overloadedSeries[curPoint.seriesIndex].total++;\n\n            if (!isContinuousSeries) {\n              overloadedSeries[curPoint.seriesIndex].continuousSeries++;\n              isContinuousSeries = true;\n            }\n          }\n        }\n      }\n    }\n  }\n}\n\nvar dxChart = AdvancedChart.inherit({\n  _themeSection: \"chart\",\n  _fontFields: [\"crosshair.label.font\"],\n  _initCore: function () {\n    this.paneAxis = {};\n    this.callBase();\n  },\n\n  _init() {\n    this._containerInitialHeight = hasWindow() ? getHeight(this._$element) : 0;\n    this.callBase();\n  },\n\n  _correctAxes: function () {\n    this._correctValueAxes(true);\n  },\n  _getExtraOptions: noop,\n  _createPanes: function () {\n    var panes = this.option(\"panes\");\n    var panesNameCounter = 0;\n    var defaultPane;\n\n    if (!panes || _isArray(panes) && !panes.length) {\n      panes = DEFAULT_PANES;\n    }\n\n    this.callBase();\n    defaultPane = this.option(\"defaultPane\");\n    panes = _extend(true, [], _isArray(panes) ? panes : [panes]);\n\n    _each(panes, function (_, pane) {\n      pane.name = !_isDefined(pane.name) ? DEFAULT_PANE_NAME + panesNameCounter++ : pane.name;\n    });\n\n    if (_isDefined(defaultPane)) {\n      if (!doesPaneExist(panes, defaultPane)) {\n        this._incidentOccurred(\"W2101\", [defaultPane]);\n\n        defaultPane = panes[panes.length - 1].name;\n      }\n    } else {\n      defaultPane = panes[panes.length - 1].name;\n    }\n\n    this.defaultPane = defaultPane;\n    panes = this._isRotated() ? panes.reverse() : panes;\n    return panes;\n  },\n  _getAxisRenderingOptions: function () {\n    return {\n      axisType: \"xyAxes\",\n      drawingType: \"linear\"\n    };\n  },\n  _prepareAxisOptions: function (typeSelector, userOptions, rotated) {\n    return {\n      isHorizontal: \"argumentAxis\" === typeSelector !== rotated,\n      containerColor: this._themeManager.getOptions(\"containerBackgroundColor\")\n    };\n  },\n  _checkPaneName: function (seriesTheme) {\n    var paneList = _map(this.panes, function (pane) {\n      return pane.name;\n    });\n\n    seriesTheme.pane = seriesTheme.pane || this.defaultPane;\n    return paneList.includes(seriesTheme.pane);\n  },\n\n  _initCustomPositioningAxes() {\n    var that = this;\n    var argumentAxis = that.getArgumentAxis();\n    var valueAxisName = argumentAxis.getOptions().customPositionAxis;\n\n    var valueAxis = that._valueAxes.filter(v => v.pane === argumentAxis.pane && (!valueAxisName || valueAxisName === v.name))[0];\n\n    that._valueAxes.forEach(v => {\n      if (argumentAxis !== v.getOrthogonalAxis()) {\n        v.getOrthogonalAxis = () => argumentAxis;\n\n        v.customPositionIsBoundaryOrthogonalAxis = () => argumentAxis.customPositionIsBoundary();\n      }\n    });\n\n    if (_isDefined(valueAxis) && valueAxis !== argumentAxis.getOrthogonalAxis()) {\n      argumentAxis.getOrthogonalAxis = () => valueAxis;\n\n      argumentAxis.customPositionIsBoundaryOrthogonalAxis = () => that._valueAxes.some(v => v.customPositionIsBoundary());\n    } else if (_isDefined(argumentAxis.getOrthogonalAxis()) && !_isDefined(valueAxis)) {\n      argumentAxis.getOrthogonalAxis = noop;\n    }\n  },\n\n  _getAllAxes() {\n    return this._argumentAxes.concat(this._valueAxes);\n  },\n\n  _resetAxesAnimation(isFirstDrawing, isHorizontal) {\n    var axes = _isDefined(isHorizontal) ? isHorizontal ^ this._isRotated() ? this._argumentAxes : this._valueAxes : this._getAllAxes();\n    axes.forEach(a => {\n      a.resetApplyingAnimation(isFirstDrawing);\n    });\n  },\n\n  _axesBoundaryPositioning() {\n    var allAxes = this._getAllAxes();\n\n    var boundaryStateChanged = false;\n    allAxes.forEach(a => {\n      if (!a.customPositionIsAvailable()) {\n        return false;\n      }\n\n      var prevBoundaryState = a.customPositionIsBoundary();\n      a._customBoundaryPosition = a.getCustomBoundaryPosition();\n      boundaryStateChanged |= prevBoundaryState !== a.customPositionIsBoundary();\n    });\n    return boundaryStateChanged;\n  },\n\n  _getCrosshairMargins: function () {\n    var crosshairOptions = this._getCrosshairOptions() || {};\n    var crosshairEnabled = crosshairOptions.enabled;\n    var margins = getMargins();\n\n    var horizontalLabel = _extend(true, {}, crosshairOptions.label, crosshairOptions.horizontalLine.label);\n\n    var verticalLabel = _extend(true, {}, crosshairOptions.label, crosshairOptions.verticalLine.label);\n\n    return {\n      x: crosshairEnabled && crosshairOptions.horizontalLine.visible && horizontalLabel.visible ? margins.x : 0,\n      y: crosshairEnabled && crosshairOptions.verticalLine.visible && verticalLabel.visible ? margins.y : 0\n    };\n  },\n  _getValueAxis: function (paneName, axisName) {\n    var valueAxes = this._valueAxes;\n    var valueAxisOptions = this.option(\"valueAxis\") || {};\n    var valueAxesOptions = _isArray(valueAxisOptions) ? valueAxisOptions : [valueAxisOptions];\n\n    var rotated = this._isRotated();\n\n    var crosshairMargins = this._getCrosshairMargins();\n\n    var axisOptions;\n    var axis;\n    axisName = axisName || getFirstAxisNameForPane(valueAxes, paneName, this.defaultPane);\n    axis = findAxis(paneName, axisName, valueAxes);\n\n    if (!axis) {\n      axisOptions = findAxisOptions(valueAxes, valueAxesOptions, axisName);\n\n      if (!axisOptions) {\n        this._incidentOccurred(\"W2102\", [axisName]);\n\n        axisOptions = {\n          name: axisName,\n          priority: valueAxes.length\n        };\n      }\n\n      axis = this._createAxis(false, this._populateAxesOptions(\"valueAxis\", axisOptions, {\n        pane: paneName,\n        name: axisName,\n        optionPath: _isArray(valueAxisOptions) ? \"valueAxis[\".concat(axisOptions.priority, \"]\") : \"valueAxis\",\n        crosshairMargin: rotated ? crosshairMargins.y : crosshairMargins.x\n      }, rotated));\n      axis.applyVisualRangeSetter(this._getVisualRangeSetter());\n      valueAxes.push(axis);\n    }\n\n    axis.setPane(paneName);\n    return axis;\n  },\n  _correctValueAxes: function (needHideGrids) {\n    var that = this;\n\n    var synchronizeMultiAxes = that._themeManager.getOptions(\"synchronizeMultiAxes\");\n\n    var valueAxes = that._valueAxes;\n    var paneWithAxis = {};\n    that.series.forEach(function (series) {\n      var axis = series.getValueAxis();\n      paneWithAxis[axis.pane] = true;\n    });\n    that.panes.forEach(function (pane) {\n      var paneName = pane.name;\n\n      if (!paneWithAxis[paneName]) {\n        that._getValueAxis(paneName);\n      }\n\n      if (needHideGrids && synchronizeMultiAxes) {\n        hideGridsOnNonFirstValueAxisForPane(valueAxes.filter(function (axis) {\n          return axis.pane === paneName;\n        }));\n      }\n    });\n    that._valueAxes = valueAxes.filter(function (axis) {\n      if (!axis.pane) {\n        axis.setPane(that.defaultPane);\n      }\n\n      var paneExists = doesPaneExist(that.panes, axis.pane);\n\n      if (!paneExists) {\n        axis.dispose();\n        axis = null;\n      }\n\n      return paneExists;\n    }).sort(compareAxes);\n    var defaultAxis = this.getValueAxis();\n\n    that._valueAxes.forEach(axis => {\n      var optionPath = axis.getOptions().optionPath;\n\n      if (optionPath) {\n        var axesWithSamePath = that._valueAxes.filter(a => a.getOptions().optionPath === optionPath);\n\n        if (axesWithSamePath.length > 1) {\n          if (axesWithSamePath.some(a => a === defaultAxis)) {\n            axesWithSamePath.forEach(a => {\n              if (a !== defaultAxis) {\n                a.getOptions().optionPath = null;\n              }\n            });\n          } else {\n            axesWithSamePath.forEach((a, i) => {\n              if (0 !== i) {\n                a.getOptions().optionPath = null;\n              }\n            });\n          }\n        }\n      }\n    });\n  },\n  _getSeriesForPane: function (paneName) {\n    var paneSeries = [];\n\n    _each(this.series, function (_, oneSeries) {\n      if (oneSeries.pane === paneName) {\n        paneSeries.push(oneSeries);\n      }\n    });\n\n    return paneSeries;\n  },\n  _createPanesBorderOptions: function () {\n    var commonBorderOptions = this._themeManager.getOptions(\"commonPaneSettings\").border;\n\n    var panesBorderOptions = {};\n    this.panes.forEach(pane => panesBorderOptions[pane.name] = _extend(true, {}, commonBorderOptions, pane.border));\n    return panesBorderOptions;\n  },\n  _createScrollBar: function () {\n    var scrollBarOptions = this._themeManager.getOptions(\"scrollBar\") || {};\n    var scrollBarGroup = this._scrollBarGroup;\n\n    if (scrollBarOptions.visible) {\n      scrollBarOptions.rotated = this._isRotated();\n      this._scrollBar = (this._scrollBar || new ScrollBar(this._renderer, scrollBarGroup)).update(scrollBarOptions);\n    } else {\n      scrollBarGroup.linkRemove();\n      this._scrollBar && this._scrollBar.dispose();\n      this._scrollBar = null;\n    }\n  },\n\n  _executeAppendAfterSeries(append) {\n    append();\n  },\n\n  _prepareToRender(drawOptions) {\n    var panesBorderOptions = this._createPanesBorderOptions();\n\n    this._createPanesBackground();\n\n    this._appendAxesGroups();\n\n    this._adjustViewport();\n\n    return panesBorderOptions;\n  },\n\n  _adjustViewport() {\n    var adjustOnZoom = this._themeManager.getOptions(\"adjustOnZoom\");\n\n    if (!adjustOnZoom) {\n      return;\n    }\n\n    this._valueAxes.forEach(axis => axis.adjust());\n  },\n\n  _recreateSizeDependentObjects(isCanvasChanged) {\n    var that = this;\n\n    var series = that._getVisibleSeries();\n\n    var useAggregation = series.some(s => s.useAggregation());\n\n    var zoomChanged = that._isZooming();\n\n    if (!useAggregation) {\n      return;\n    }\n\n    that._argumentAxes.forEach(function (axis) {\n      axis.updateCanvas(that._canvas, true);\n    });\n\n    series.forEach(function (series) {\n      if (series.useAggregation() && (isCanvasChanged || zoomChanged || !series._useAllAggregatedPoints)) {\n        series.createPoints();\n      }\n    });\n\n    that._processSeriesFamilies();\n  },\n\n  _isZooming() {\n    var argumentAxis = this.getArgumentAxis();\n\n    if (!argumentAxis || !argumentAxis.getTranslator()) {\n      return false;\n    }\n\n    var businessRange = argumentAxis.getTranslator().getBusinessRange();\n    var zoomRange = argumentAxis.getViewport();\n    var min = zoomRange ? zoomRange.min : 0;\n    var max = zoomRange ? zoomRange.max : 0;\n\n    if (\"logarithmic\" === businessRange.axisType) {\n      min = getLog(min, businessRange.base);\n      max = getLog(max, businessRange.base);\n    }\n\n    var viewportDistance = businessRange.axisType === DISCRETE ? getCategoriesInfo(businessRange.categories, min, max).categories.length : Math.abs(max - min);\n    var precision = getPrecision(viewportDistance);\n    precision = precision > 1 ? Math.pow(10, precision - 2) : 1;\n    var zoomChanged = Math.round((this._zoomLength - viewportDistance) * precision) / precision !== 0;\n    this._zoomLength = viewportDistance;\n    return zoomChanged;\n  },\n\n  _handleSeriesDataUpdated: function () {\n    var that = this;\n    var viewport = new Range();\n    that.series.forEach(function (s) {\n      viewport.addRange(s.getArgumentRange());\n    });\n\n    that._argumentAxes.forEach(function (axis) {\n      axis.updateCanvas(that._canvas, true);\n      axis.setBusinessRange(viewport, that._axesReinitialized);\n    });\n\n    that.callBase();\n  },\n  _isLegendInside: function () {\n    return this._legend && \"inside\" === this._legend.getPosition();\n  },\n  _isRotated: function () {\n    return this._themeManager.getOptions(\"rotated\");\n  },\n  _getLayoutTargets: function () {\n    return this.panes;\n  },\n  _applyClipRects: function (panesBorderOptions) {\n    this._drawPanesBorders(panesBorderOptions);\n\n    this._createClipRectsForPanes();\n\n    this._applyClipRectsForAxes();\n\n    this._fillPanesBackground();\n  },\n  _updateLegendPosition: function (drawOptions, legendHasInsidePosition) {\n    if (drawOptions.drawLegend && this._legend && legendHasInsidePosition) {\n      var panes = this.panes;\n\n      var newCanvas = _extend({}, panes[0].canvas);\n\n      var layoutManager = new LayoutManager();\n      newCanvas.right = panes[panes.length - 1].canvas.right;\n      newCanvas.bottom = panes[panes.length - 1].canvas.bottom;\n      layoutManager.layoutInsideLegend(this._legend, newCanvas);\n    }\n  },\n  _allowLegendInsidePosition: () => true,\n  _applyExtraSettings: function (series) {\n    var paneIndex = this._getPaneIndex(series.pane);\n\n    var panesClipRects = this._panesClipRects;\n    var wideClipRect = panesClipRects.wide[paneIndex];\n    series.setClippingParams(panesClipRects.base[paneIndex].id, wideClipRect && wideClipRect.id, this._getPaneBorderVisibility(paneIndex));\n  },\n  _updatePanesCanvases: function (drawOptions) {\n    if (!drawOptions.recreateCanvas) {\n      return;\n    }\n\n    updatePanesCanvases(this.panes, this._canvas, this._isRotated());\n  },\n  _normalizePanesHeight: function () {\n    normalizePanesHeight(this.panes);\n  },\n  _renderScaleBreaks: function () {\n    this._valueAxes.concat(this._argumentAxes).forEach(function (axis) {\n      axis.drawScaleBreaks();\n    });\n  },\n\n  _getArgFilter() {\n    return rangeDataCalculator.getViewPortFilter(this.getArgumentAxis().visualRange() || {});\n  },\n\n  _applyPointMarkersAutoHiding() {\n    var that = this;\n    var allSeries = that.series;\n\n    if (!that._themeManager.getOptions(\"autoHidePointMarkers\")) {\n      allSeries.forEach(s => s.autoHidePointMarkers = false);\n      return;\n    }\n\n    that.panes.forEach(_ref => {\n      var {\n        borderCoords: borderCoords,\n        name: name\n      } = _ref;\n      var series = allSeries.filter(s => s.pane === name && s.usePointsToDefineAutoHiding());\n      var argAxis = that.getArgumentAxis();\n      var markersInfo = collectMarkersInfoBySeries(allSeries, series, argAxis);\n      fastHidingPointMarkersByArea(borderCoords, markersInfo, series);\n\n      if (markersInfo.series.length) {\n        var argVisualRange = argAxis.visualRange();\n        var argAxisIsDiscrete = argAxis.getOptions().type === DISCRETE;\n        var sortingCallback = argAxisIsDiscrete ? (p1, p2) => argVisualRange.categories.indexOf(p1.argument) - argVisualRange.categories.indexOf(p2.argument) : (p1, p2) => p1.argument - p2.argument;\n        var points = [];\n        markersInfo.series.forEach(s => points = points.concat(s.points));\n        points.sort(sortingCallback);\n        updateMarkersInfo(points, markersInfo.overloadedSeries);\n        applyAutoHidePointMarkers(allSeries, series, markersInfo.overloadedSeries, argAxis);\n      }\n    });\n  },\n\n  _renderAxes: function (drawOptions, panesBorderOptions) {\n    function calculateTitlesWidth(axes) {\n      return axes.map(axis => {\n        if (!axis.getTitle) {\n          return 0;\n        }\n\n        var title = axis.getTitle();\n        return title ? title.bBox.width : 0;\n      });\n    }\n\n    var that = this;\n\n    var rotated = that._isRotated();\n\n    var synchronizeMultiAxes = that._themeManager.getOptions(\"synchronizeMultiAxes\");\n\n    var scrollBar = that._scrollBar ? [that._scrollBar] : [];\n    var extendedArgAxes = that._isArgumentAxisBeforeScrollBar() ? that._argumentAxes.concat(scrollBar) : scrollBar.concat(that._argumentAxes);\n    var verticalAxes = rotated ? that._argumentAxes : that._valueAxes;\n    var verticalElements = rotated ? extendedArgAxes : that._valueAxes;\n    var horizontalAxes = rotated ? that._valueAxes : that._argumentAxes;\n    var horizontalElements = rotated ? that._valueAxes : extendedArgAxes;\n    var allAxes = verticalAxes.concat(horizontalAxes);\n    var allElements = allAxes.concat(scrollBar);\n    var verticalAxesFirstDrawing = verticalAxes.some(v => v.isFirstDrawing());\n\n    that._normalizePanesHeight();\n\n    that._updatePanesCanvases(drawOptions);\n\n    var panesCanvases = that.panes.reduce(function (canvases, pane) {\n      canvases[pane.name] = _extend({}, pane.canvas);\n      return canvases;\n    }, {});\n    var paneSizes = that.panes.reduce((sizes, pane) => {\n      sizes[pane.name] = {\n        height: pane.height,\n        unit: pane.unit\n      };\n      return sizes;\n    }, {});\n\n    var cleanPanesCanvases = _extend(true, {}, panesCanvases);\n\n    that._initCustomPositioningAxes();\n\n    var needCustomAdjustAxes = that._axesBoundaryPositioning();\n\n    if (!drawOptions.adjustAxes && !needCustomAdjustAxes) {\n      drawAxesWithTicks(verticalAxes, !rotated && synchronizeMultiAxes, panesCanvases, panesBorderOptions);\n      drawAxesWithTicks(horizontalAxes, rotated && synchronizeMultiAxes, panesCanvases, panesBorderOptions);\n      performActionOnAxes(allAxes, \"prepareAnimation\");\n\n      that._renderScaleBreaks();\n\n      horizontalAxes.forEach(a => a.resolveOverlappingForCustomPositioning(verticalAxes));\n      verticalAxes.forEach(a => a.resolveOverlappingForCustomPositioning(horizontalAxes));\n      return false;\n    }\n\n    if (needCustomAdjustAxes) {\n      allAxes.forEach(a => a.customPositionIsAvailable() && a.shift({\n        top: 0,\n        left: 0,\n        bottom: 0,\n        right: 0\n      }));\n    }\n\n    if (that._scrollBar) {\n      that._scrollBar.setPane(that.panes);\n    }\n\n    var vAxesMargins = {\n      panes: {}\n    };\n    var hAxesMargins = getHorizontalAxesMargins(horizontalElements, axis => axis.estimateMargins(panesCanvases[axis.pane]));\n    panesCanvases = shrinkCanvases(rotated, panesCanvases, paneSizes, vAxesMargins, hAxesMargins);\n\n    var drawAxesAndSetCanvases = isHorizontal => {\n      var axes = isHorizontal ? horizontalAxes : verticalAxes;\n      var condition = (isHorizontal ? rotated : !rotated) && synchronizeMultiAxes;\n      drawAxesWithTicks(axes, condition, panesCanvases, panesBorderOptions);\n\n      if (isHorizontal) {\n        hAxesMargins = getHorizontalAxesMargins(horizontalElements, getAxisMargins);\n      } else {\n        vAxesMargins = getVerticalAxesMargins(verticalElements);\n      }\n\n      panesCanvases = shrinkCanvases(rotated, panesCanvases, paneSizes, vAxesMargins, hAxesMargins);\n    };\n\n    drawAxesAndSetCanvases(false);\n    drawAxesAndSetCanvases(true);\n\n    if (!that._changesApplying && that._estimateTickIntervals(verticalAxes, panesCanvases)) {\n      drawAxesAndSetCanvases(false);\n    }\n\n    var oldTitlesWidth = calculateTitlesWidth(verticalAxes);\n\n    var visibleSeries = that._getVisibleSeries();\n\n    var pointsToAnimation = that._getPointsToAnimation(visibleSeries);\n\n    var axesIsAnimated = axisAnimationEnabled(drawOptions, pointsToAnimation);\n    performActionOnAxes(allElements, \"updateSize\", panesCanvases, axesIsAnimated);\n    horizontalElements.forEach(shiftAxis(\"top\", \"bottom\"));\n    verticalElements.forEach(shiftAxis(\"left\", \"right\"));\n\n    that._renderScaleBreaks();\n\n    that.panes.forEach(function (pane) {\n      _extend(pane.canvas, panesCanvases[pane.name]);\n    });\n\n    that._valueAxes.forEach(axis => {\n      axis.setInitRange();\n    });\n\n    verticalAxes.forEach((axis, i) => {\n      var _axis$hasWrap;\n\n      if (null !== (_axis$hasWrap = axis.hasWrap) && void 0 !== _axis$hasWrap && _axis$hasWrap.call(axis)) {\n        var title = axis.getTitle();\n        var newTitleWidth = title ? title.bBox.width : 0;\n        var offset = newTitleWidth - oldTitlesWidth[i];\n\n        if (\"right\" === axis.getOptions().position) {\n          vAxesMargins.right += offset;\n        } else {\n          vAxesMargins.left += offset;\n          that.panes.forEach(_ref2 => {\n            var {\n              name: name\n            } = _ref2;\n            return vAxesMargins.panes[name].left += offset;\n          });\n        }\n\n        panesCanvases = shrinkCanvases(rotated, panesCanvases, paneSizes, vAxesMargins, hAxesMargins);\n        performActionOnAxes(allElements, \"updateSize\", panesCanvases, false, false);\n        oldTitlesWidth = calculateTitlesWidth(verticalAxes);\n      }\n    });\n\n    if (verticalAxes.some(v => v.customPositionIsAvailable() && v.getCustomPosition() !== v._axisPosition)) {\n      axesIsAnimated && that._resetAxesAnimation(verticalAxesFirstDrawing, false);\n      performActionOnAxes(verticalAxes, \"updateSize\", panesCanvases, axesIsAnimated);\n    }\n\n    horizontalAxes.forEach(a => a.resolveOverlappingForCustomPositioning(verticalAxes));\n    verticalAxes.forEach(a => a.resolveOverlappingForCustomPositioning(horizontalAxes));\n    return cleanPanesCanvases;\n  },\n\n  _getExtraTemplatesItems() {\n    var allAxes = (this._argumentAxes || []).concat(this._valueAxes || []);\n\n    var elements = this._collectTemplatesFromItems(allAxes);\n\n    return {\n      items: elements.items,\n      groups: elements.groups,\n\n      launchRequest() {\n        allAxes.forEach(function (a) {\n          a.setRenderedState(true);\n        });\n      },\n\n      doneRequest() {\n        allAxes.forEach(function (a) {\n          a.setRenderedState(false);\n        });\n      }\n\n    };\n  },\n\n  _estimateTickIntervals: (axes, canvases) => axes.some(axis => axis.estimateTickInterval(canvases[axis.pane])),\n\n  checkForMoreSpaceForPanesCanvas() {\n    var rotated = this._isRotated();\n\n    var panesAreCustomSized = this.panes.filter(p => p.unit).length === this.panes.length;\n    var needSpace = false;\n\n    if (panesAreCustomSized) {\n      var needHorizontalSpace = 0;\n      var needVerticalSpace = 0;\n\n      if (rotated) {\n        var argAxisRightMargin = this.getArgumentAxis().getMargins().right;\n        var rightPanesIndent = Math.min.apply(Math, this.panes.map(p => p.canvas.right));\n        needHorizontalSpace = this._canvas.right + argAxisRightMargin - rightPanesIndent;\n      } else {\n        var argAxisBottomMargin = this.getArgumentAxis().getMargins().bottom;\n        var bottomPanesIndent = Math.min.apply(Math, this.panes.map(p => p.canvas.bottom));\n        needVerticalSpace = this._canvas.bottom + argAxisBottomMargin - bottomPanesIndent;\n      }\n\n      needSpace = needHorizontalSpace > 0 || needVerticalSpace > 0 ? {\n        width: needHorizontalSpace,\n        height: needVerticalSpace\n      } : false;\n\n      if (0 !== needVerticalSpace) {\n        var realSize = this.getSize();\n        var customSize = this.option(\"size\");\n        var container = this._$element[0];\n        var containerHasStyledHeight = !!parseInt(container.style.height) || 0 !== this._containerInitialHeight;\n\n        if (!rotated && !(customSize && customSize.height) && !containerHasStyledHeight) {\n          this._forceResize(realSize.width, realSize.height + needVerticalSpace);\n\n          needSpace = false;\n        }\n      }\n    } else {\n      needSpace = this.layoutManager.needMoreSpaceForPanesCanvas(this._getLayoutTargets(), rotated, pane => ({\n        width: rotated && !!pane.unit,\n        height: !rotated && !!pane.unit\n      }));\n    }\n\n    return needSpace;\n  },\n\n  _forceResize(width, height) {\n    this._renderer.resize(width, height);\n\n    this._updateSize();\n\n    this._setContentSize();\n\n    this._preserveOriginalCanvas();\n\n    this._updateCanvasClipRect(this._canvas);\n  },\n\n  _shrinkAxes(sizeShortage, panesCanvases) {\n    if (!sizeShortage || !panesCanvases) {\n      return;\n    }\n\n    this._renderer.stopAllAnimations(true);\n\n    var rotated = this._isRotated();\n\n    var scrollBar = this._scrollBar ? [this._scrollBar] : [];\n    var extendedArgAxes = this._isArgumentAxisBeforeScrollBar() ? this._argumentAxes.concat(scrollBar) : scrollBar.concat(this._argumentAxes);\n    var verticalAxes = rotated ? extendedArgAxes : this._valueAxes;\n    var horizontalAxes = rotated ? this._valueAxes : extendedArgAxes;\n    var allAxes = verticalAxes.concat(horizontalAxes);\n\n    if (sizeShortage.width || sizeShortage.height) {\n      checkUsedSpace(sizeShortage, \"height\", horizontalAxes, getHorizontalAxesMargins);\n      checkUsedSpace(sizeShortage, \"width\", verticalAxes, getVerticalAxesMargins);\n      performActionOnAxes(allAxes, \"updateSize\", panesCanvases);\n      var paneSizes = this.panes.reduce((sizes, pane) => {\n        sizes[pane.name] = {\n          height: pane.height,\n          unit: pane.unit\n        };\n        return sizes;\n      }, {});\n      panesCanvases = shrinkCanvases(rotated, panesCanvases, paneSizes, getVerticalAxesMargins(verticalAxes), getHorizontalAxesMargins(horizontalAxes, getAxisMargins));\n      performActionOnAxes(allAxes, \"updateSize\", panesCanvases);\n      horizontalAxes.forEach(shiftAxis(\"top\", \"bottom\"));\n      verticalAxes.forEach(shiftAxis(\"left\", \"right\"));\n      this.panes.forEach(pane => _extend(pane.canvas, panesCanvases[pane.name]));\n    }\n  },\n\n  _isArgumentAxisBeforeScrollBar() {\n    var argumentAxis = this.getArgumentAxis();\n\n    if (this._scrollBar) {\n      var _argumentAxis$getOpti;\n\n      var argAxisPosition = argumentAxis.getResolvedBoundaryPosition();\n      var argAxisLabelPosition = null === (_argumentAxis$getOpti = argumentAxis.getOptions().label) || void 0 === _argumentAxis$getOpti ? void 0 : _argumentAxis$getOpti.position;\n\n      var scrollBarPosition = this._scrollBar.getOptions().position;\n\n      return argumentAxis.hasNonBoundaryPosition() || scrollBarPosition === argAxisPosition && argAxisLabelPosition !== scrollBarPosition;\n    }\n\n    return false;\n  },\n\n  _getPanesParameters: function () {\n    var panes = this.panes;\n    var i;\n    var params = [];\n\n    for (i = 0; i < panes.length; i++) {\n      if (this._getPaneBorderVisibility(i)) {\n        params.push({\n          coords: panes[i].borderCoords,\n          clipRect: this._panesClipRects.fixed[i]\n        });\n      }\n    }\n\n    return params;\n  },\n  _createCrosshairCursor: function () {\n    var options = this._themeManager.getOptions(\"crosshair\") || {};\n    var argumentAxis = this.getArgumentAxis();\n    var axes = !this._isRotated() ? [[argumentAxis], this._valueAxes] : [this._valueAxes, [argumentAxis]];\n    var parameters = {\n      canvas: this._getCommonCanvas(),\n      panes: this._getPanesParameters(),\n      axes: axes\n    };\n\n    if (!options || !options.enabled) {\n      return;\n    }\n\n    if (!this._crosshair) {\n      this._crosshair = new Crosshair(this._renderer, options, parameters, this._crosshairCursorGroup);\n    } else {\n      this._crosshair.update(options, parameters);\n    }\n\n    this._crosshair.render();\n  },\n  _getCommonCanvas: function () {\n    var i;\n    var canvas;\n    var commonCanvas;\n    var panes = this.panes;\n\n    for (i = 0; i < panes.length; i++) {\n      canvas = panes[i].canvas;\n\n      if (!commonCanvas) {\n        commonCanvas = _extend({}, canvas);\n      } else {\n        commonCanvas.right = canvas.right;\n        commonCanvas.bottom = canvas.bottom;\n      }\n    }\n\n    return commonCanvas;\n  },\n  _createPanesBackground: function () {\n    var defaultBackgroundColor = this._themeManager.getOptions(\"commonPaneSettings\").backgroundColor;\n\n    var backgroundColor;\n    var renderer = this._renderer;\n    var rect;\n    var i;\n    var rects = [];\n\n    this._panesBackgroundGroup.clear();\n\n    for (i = 0; i < this.panes.length; i++) {\n      backgroundColor = this.panes[i].backgroundColor || defaultBackgroundColor;\n\n      if (!backgroundColor || \"none\" === backgroundColor) {\n        rects.push(null);\n        continue;\n      }\n\n      rect = renderer.rect(0, 0, 0, 0).attr({\n        fill: backgroundColor,\n        \"stroke-width\": 0\n      }).append(this._panesBackgroundGroup);\n      rects.push(rect);\n    }\n\n    this.panesBackground = rects;\n  },\n  _fillPanesBackground: function () {\n    var that = this;\n    var bc;\n\n    _each(that.panes, function (i, pane) {\n      bc = pane.borderCoords;\n\n      if (null !== that.panesBackground[i]) {\n        that.panesBackground[i].attr({\n          x: bc.left,\n          y: bc.top,\n          width: bc.width,\n          height: bc.height\n        });\n      }\n    });\n  },\n  _calcPaneBorderCoords: function (pane) {\n    var canvas = pane.canvas;\n    var bc = pane.borderCoords = pane.borderCoords || {};\n    bc.left = canvas.left;\n    bc.top = canvas.top;\n    bc.right = canvas.width - canvas.right;\n    bc.bottom = canvas.height - canvas.bottom;\n    bc.width = Math.max(bc.right - bc.left, 0);\n    bc.height = Math.max(bc.bottom - bc.top, 0);\n  },\n  _drawPanesBorders: function (panesBorderOptions) {\n    var that = this;\n\n    var rotated = that._isRotated();\n\n    that._panesBorderGroup.linkRemove().clear();\n\n    _each(that.panes, function (i, pane) {\n      var borderOptions = panesBorderOptions[pane.name];\n      var attr = {\n        fill: \"none\",\n        stroke: borderOptions.color,\n        \"stroke-opacity\": borderOptions.opacity,\n        \"stroke-width\": borderOptions.width,\n        dashStyle: borderOptions.dashStyle,\n        \"stroke-linecap\": \"square\"\n      };\n\n      that._calcPaneBorderCoords(pane, rotated);\n\n      if (!borderOptions.visible) {\n        return;\n      }\n\n      var bc = pane.borderCoords;\n      var segmentRectParams = prepareSegmentRectPoints(bc.left, bc.top, bc.width, bc.height, borderOptions);\n\n      that._renderer.path(segmentRectParams.points, segmentRectParams.pathType).attr(attr).append(that._panesBorderGroup);\n    });\n\n    that._panesBorderGroup.linkAppend();\n  },\n  _createClipRect: function (clipArray, index, left, top, width, height) {\n    var clipRect = clipArray[index];\n\n    if (!clipRect) {\n      clipRect = this._renderer.clipRect(left, top, width, height);\n      clipArray[index] = clipRect;\n    } else {\n      clipRect.attr({\n        x: left,\n        y: top,\n        width: width,\n        height: height\n      });\n    }\n  },\n  _createClipRectsForPanes: function () {\n    var that = this;\n    var canvas = that._canvas;\n\n    _each(that.panes, function (i, pane) {\n      var needWideClipRect = false;\n      var bc = pane.borderCoords;\n      var left = bc.left;\n      var top = bc.top;\n      var width = bc.width;\n      var height = bc.height;\n      var panesClipRects = that._panesClipRects;\n\n      that._createClipRect(panesClipRects.fixed, i, left, top, width, height);\n\n      that._createClipRect(panesClipRects.base, i, left, top, width, height);\n\n      _each(that.series, function (_, series) {\n        if (series.pane === pane.name && (series.isFinancialSeries() || series.areErrorBarsVisible())) {\n          needWideClipRect = true;\n        }\n      });\n\n      if (needWideClipRect) {\n        if (that._isRotated()) {\n          top = 0;\n          height = canvas.height;\n        } else {\n          left = 0;\n          width = canvas.width;\n        }\n\n        that._createClipRect(panesClipRects.wide, i, left, top, width, height);\n      } else {\n        panesClipRects.wide[i] = null;\n      }\n    });\n  },\n\n  _applyClipRectsForAxes() {\n    var axes = this._getAllAxes();\n\n    var chartCanvasClipRectID = this._getCanvasClipRectID();\n\n    for (var i = 0; i < axes.length; i++) {\n      var elementsClipRectID = this._getElementsClipRectID(axes[i].pane);\n\n      axes[i].applyClipRects(elementsClipRectID, chartCanvasClipRectID);\n    }\n  },\n\n  _getPaneBorderVisibility: function (paneIndex) {\n    var commonPaneBorderVisible = this._themeManager.getOptions(\"commonPaneSettings\").border.visible;\n\n    var pane = this.panes[paneIndex] || {};\n    var paneBorder = pane.border || {};\n    return \"visible\" in paneBorder ? paneBorder.visible : commonPaneBorderVisible;\n  },\n  _getCanvasForPane: function (paneName) {\n    var panes = this.panes;\n    var panesNumber = panes.length;\n    var i;\n\n    for (i = 0; i < panesNumber; i++) {\n      if (panes[i].name === paneName) {\n        return panes[i].canvas;\n      }\n    }\n  },\n  _getTrackerSettings: function () {\n    var themeManager = this._themeManager;\n    return _extend(this.callBase(), {\n      chart: this,\n      rotated: this._isRotated(),\n      crosshair: this._getCrosshairOptions().enabled ? this._crosshair : null,\n      stickyHovering: themeManager.getOptions(\"stickyHovering\")\n    });\n  },\n  _resolveLabelOverlappingStack: function () {\n    var that = this;\n\n    var isRotated = that._isRotated();\n\n    var shiftDirection = isRotated ? function (box, length) {\n      return {\n        x: box.x - length,\n        y: box.y\n      };\n    } : function (box, length) {\n      return {\n        x: box.x,\n        y: box.y - length\n      };\n    };\n\n    _each(that._getStackPoints(), function (_, stacks) {\n      _each(stacks, function (_, points) {\n        var isInverted = points[0].series.getValueAxis().getOptions().inverted;\n        overlapping.resolveLabelOverlappingInOneDirection(points, that._getCommonCanvas(), isRotated, isInverted, shiftDirection, (a, b) => {\n          var coordPosition = isRotated ? 1 : 0;\n          var figureCenter1 = a.labels[0].getFigureCenter()[coordPosition];\n          var figureCenter12 = b.labels[0].getFigureCenter()[coordPosition];\n\n          if (figureCenter1 - figureCenter12 === 0) {\n            return (a.value() - b.value()) * (a.labels[0].getPoint().series.getValueAxis().getTranslator().isInverted() ? -1 : 1);\n          }\n\n          return 0;\n        });\n      });\n    });\n  },\n  _getStackPoints: function () {\n    var stackPoints = {};\n\n    var visibleSeries = this._getVisibleSeries();\n\n    _each(visibleSeries, function (_, singleSeries) {\n      var points = singleSeries.getPoints();\n      var stackName = singleSeries.getStackName() || null;\n\n      _each(points, function (_, point) {\n        var argument = point.argument;\n\n        if (!stackPoints[argument]) {\n          stackPoints[argument] = {};\n        }\n\n        if (!stackPoints[argument][stackName]) {\n          stackPoints[argument][stackName] = [];\n        }\n\n        stackPoints[argument][stackName].push(point);\n      });\n    });\n\n    return stackPoints;\n  },\n  _getCrosshairOptions: function () {\n    return this._getOption(\"crosshair\");\n  },\n\n  zoomArgument(min, max) {\n    if (!this._initialized || !_isDefined(min) && !_isDefined(max)) {\n      return;\n    }\n\n    this.getArgumentAxis().visualRange([min, max]);\n  },\n\n  resetVisualRange() {\n    var that = this;\n    var axes = that._argumentAxes;\n    var nonVirtualArgumentAxis = that.getArgumentAxis();\n    axes.forEach(axis => {\n      axis.resetVisualRange(nonVirtualArgumentAxis !== axis);\n\n      that._applyCustomVisualRangeOption(axis);\n    });\n    that.callBase();\n  },\n\n  getVisibleArgumentBounds: function () {\n    var translator = this._argumentAxes[0].getTranslator();\n\n    var range = translator.getBusinessRange();\n    var isDiscrete = range.axisType === DISCRETE;\n    var categories = range.categories;\n    return {\n      minVisible: isDiscrete ? range.minVisible || categories[0] : range.minVisible,\n      maxVisible: isDiscrete ? range.maxVisible || categories[categories.length - 1] : range.maxVisible\n    };\n  },\n\n  _change_FULL_RENDER() {\n    this.callBase();\n\n    if (this._changes.has(VISUAL_RANGE)) {\n      this._raiseZoomEndHandlers();\n    }\n  },\n\n  _getAxesForScaling() {\n    return [this.getArgumentAxis()].concat(this._valueAxes);\n  },\n\n  _applyVisualRangeByVirtualAxes(axis, range) {\n    if (axis.isArgumentAxis) {\n      if (axis !== this.getArgumentAxis()) {\n        return true;\n      }\n\n      this._argumentAxes.filter(a => a !== axis).forEach(a => a.visualRange(range, {\n        start: true,\n        end: true\n      }));\n    }\n\n    return false;\n  },\n\n  _raiseZoomEndHandlers() {\n    this._argumentAxes.forEach(axis => axis.handleZoomEnd());\n\n    this.callBase();\n  },\n\n  _setOptionsByReference() {\n    this.callBase();\n\n    _extend(this._optionsByReference, {\n      \"argumentAxis.visualRange\": true\n    });\n  },\n\n  option() {\n    var option = this.callBase.apply(this, arguments);\n\n    var valueAxis = this._options.silent(\"valueAxis\");\n\n    if (\"array\" === type(valueAxis)) {\n      for (var i = 0; i < valueAxis.length; i++) {\n        var optionPath = \"valueAxis[\".concat(i, \"].visualRange\");\n        this._optionsByReference[optionPath] = true;\n      }\n    }\n\n    return option;\n  },\n\n  _notifyVisualRange() {\n    var argAxis = this._argumentAxes[0];\n    var argumentVisualRange = convertVisualRangeObject(argAxis.visualRange(), !_isArray(this.option(\"argumentAxis.visualRange\")));\n\n    if (!argAxis.skipEventRising || !rangesAreEqual(argumentVisualRange, this.option(\"argumentAxis.visualRange\"))) {\n      this.option(\"argumentAxis.visualRange\", argumentVisualRange);\n    } else {\n      argAxis.skipEventRising = null;\n    }\n\n    this.callBase();\n  }\n\n});\nimport shutterZoom from \"./chart_components/shutter_zoom\";\nimport zoomAndPan from \"./chart_components/zoom_and_pan\";\nimport { plugins } from \"./core/annotations\";\ndxChart.addPlugin(shutterZoom);\ndxChart.addPlugin(zoomAndPan);\ndxChart.addPlugin(plugins.core);\ndxChart.addPlugin(plugins.chart);\nregisterComponent(\"dxChart\", dxChart);\nexport default dxChart;","map":{"version":3,"names":["getHeight","noop","extend","_extend","hasWindow","each","_each","registerComponent","prepareSegmentRectPoints","map","_map","getLog","getCategoriesInfo","updatePanesCanvases","convertVisualRangeObject","PANE_PADDING","normalizePanesHeight","rangesAreEqual","isRelativeHeightPane","type","isDefined","_isDefined","getPrecision","overlapping","multiAxesSynchronizer","AdvancedChart","ScrollBar","Crosshair","getMargins","rangeDataCalculator","LayoutManager","Range","DEFAULT_PANE_NAME","VISUAL_RANGE","DEFAULT_PANES","name","border","DISCRETE","_isArray","Array","isArray","getFirstAxisNameForPane","axes","paneName","defaultPane","result","i","length","pane","changeVisibilityAxisGrids","axis","gridVisibility","minorGridVisibility","gridOpt","getOptions","grid","minorGridOpt","minorGrid","visible","hideGridsOnNonFirstValueAxisForPane","axesForPane","axisShown","hiddenStubAxis","some","minorGridOptions","gridOptions","forEach","getTranslator","getBusinessRange","isEmpty","push","findAxisOptions","valueAxes","valueAxesOptions","axisName","axInd","priority","findAxis","compareAxes","a","b","doesPaneExist","panes","found","_","accumulate","field","src1","src2","auxSpacing","val1","val2","pickMax","pickMaxValue","Math","max","getAxisMargins","getHorizontalAxesMargins","getMarginsFunc","reduce","margins","_axis$getOrthogonalAx","axisMargins","paneMargins","spacing","getMultipleAxesSpacing","top","bottom","left","right","orthogonalAxis","getOrthogonalAxis","call","customPositionIsAvailable","customPositionIsBoundaryOrthogonalAxis","customPositionEqualsToPredefined","getResolvedBoundaryPosition","getVerticalAxesMargins","performActionOnAxes","action","actionArgument1","actionArgument2","actionArgument3","shrinkCanvases","isRotated","canvases","sizes","verticalMargins","horizontalMargins","getMargin","side","m","indexOf","getMaxMargin","margins1","margins2","getOriginalField","concat","toUpperCase","slice","shrink","paneNames","sizeField","startMargin","endMargin","oppositeMargins","sort","p1","p2","canvas","margin","firstPane","emptySpace","space","Object","keys","prev","key","height","offset","paneSize","floor","drawAxesWithTicks","condition","panesBorderOptions","synchronize","shiftAxis","side1","side2","shifts","shift","getCommonSize","size","checkUsedSpace","sizeShortage","getMarginFunc","axisAnimationEnabled","drawOptions","pointsToAnimation","pointsCount","sum","count","animate","animationPointsLimit","collectMarkersInfoBySeries","allSeries","filteredSeries","argAxis","series","overloadedSeries","argVisualRange","visualRange","argTranslator","argViewPortFilter","getViewPortFilter","s","valAxis","getValueAxis","valVisualRange","getCanvasRange","valTranslator","seriesIndex","valViewPortFilter","sr","seriesPoints","getPoints","filter","p","argument","getMinValue","getMaxValue","tp","value","bubbleSize","mp","x","to","y","total","continuousSeries","index","points","applyAutoHidePointMarkers","argAxisType","autoHidePointMarkers","tickCount","getTicksValues","majorTicksValues","autoHidePointMarkersEnabled","parseInt","isNaN","fastHidingPointMarkersByArea","markersInfo","area","width","_loop","currentSeries","pointSize","pointsArea","splice","updateMarkersInfo","isContinuousSeries","curPoint","j","nextPoint","next_x","next_y","abs","distance","sqrt","pow","dxChart","inherit","_themeSection","_fontFields","_initCore","paneAxis","callBase","_init","_containerInitialHeight","_$element","_correctAxes","_correctValueAxes","_getExtraOptions","_createPanes","option","panesNameCounter","_incidentOccurred","_isRotated","reverse","_getAxisRenderingOptions","axisType","drawingType","_prepareAxisOptions","typeSelector","userOptions","rotated","isHorizontal","containerColor","_themeManager","_checkPaneName","seriesTheme","paneList","includes","_initCustomPositioningAxes","that","argumentAxis","getArgumentAxis","valueAxisName","customPositionAxis","valueAxis","_valueAxes","v","customPositionIsBoundary","_getAllAxes","_argumentAxes","_resetAxesAnimation","isFirstDrawing","resetApplyingAnimation","_axesBoundaryPositioning","allAxes","boundaryStateChanged","prevBoundaryState","_customBoundaryPosition","getCustomBoundaryPosition","_getCrosshairMargins","crosshairOptions","_getCrosshairOptions","crosshairEnabled","enabled","horizontalLabel","label","horizontalLine","verticalLabel","verticalLine","_getValueAxis","valueAxisOptions","crosshairMargins","axisOptions","_createAxis","_populateAxesOptions","optionPath","crosshairMargin","applyVisualRangeSetter","_getVisualRangeSetter","setPane","needHideGrids","synchronizeMultiAxes","paneWithAxis","paneExists","dispose","defaultAxis","axesWithSamePath","_getSeriesForPane","paneSeries","oneSeries","_createPanesBorderOptions","commonBorderOptions","_createScrollBar","scrollBarOptions","scrollBarGroup","_scrollBarGroup","_scrollBar","_renderer","update","linkRemove","_executeAppendAfterSeries","append","_prepareToRender","_createPanesBackground","_appendAxesGroups","_adjustViewport","adjustOnZoom","adjust","_recreateSizeDependentObjects","isCanvasChanged","_getVisibleSeries","useAggregation","zoomChanged","_isZooming","updateCanvas","_canvas","_useAllAggregatedPoints","createPoints","_processSeriesFamilies","businessRange","zoomRange","getViewport","min","base","viewportDistance","categories","precision","round","_zoomLength","_handleSeriesDataUpdated","viewport","addRange","getArgumentRange","setBusinessRange","_axesReinitialized","_isLegendInside","_legend","getPosition","_getLayoutTargets","_applyClipRects","_drawPanesBorders","_createClipRectsForPanes","_applyClipRectsForAxes","_fillPanesBackground","_updateLegendPosition","legendHasInsidePosition","drawLegend","newCanvas","layoutManager","layoutInsideLegend","_allowLegendInsidePosition","_applyExtraSettings","paneIndex","_getPaneIndex","panesClipRects","_panesClipRects","wideClipRect","wide","setClippingParams","id","_getPaneBorderVisibility","_updatePanesCanvases","recreateCanvas","_normalizePanesHeight","_renderScaleBreaks","drawScaleBreaks","_getArgFilter","_applyPointMarkersAutoHiding","_ref","borderCoords","usePointsToDefineAutoHiding","argAxisIsDiscrete","sortingCallback","_renderAxes","calculateTitlesWidth","getTitle","title","bBox","scrollBar","extendedArgAxes","_isArgumentAxisBeforeScrollBar","verticalAxes","verticalElements","horizontalAxes","horizontalElements","allElements","verticalAxesFirstDrawing","panesCanvases","paneSizes","unit","cleanPanesCanvases","needCustomAdjustAxes","adjustAxes","resolveOverlappingForCustomPositioning","vAxesMargins","hAxesMargins","estimateMargins","drawAxesAndSetCanvases","_changesApplying","_estimateTickIntervals","oldTitlesWidth","visibleSeries","_getPointsToAnimation","axesIsAnimated","setInitRange","_axis$hasWrap","hasWrap","newTitleWidth","position","_ref2","getCustomPosition","_axisPosition","_getExtraTemplatesItems","elements","_collectTemplatesFromItems","items","groups","launchRequest","setRenderedState","doneRequest","estimateTickInterval","checkForMoreSpaceForPanesCanvas","panesAreCustomSized","needSpace","needHorizontalSpace","needVerticalSpace","argAxisRightMargin","rightPanesIndent","apply","argAxisBottomMargin","bottomPanesIndent","realSize","getSize","customSize","container","containerHasStyledHeight","style","_forceResize","needMoreSpaceForPanesCanvas","resize","_updateSize","_setContentSize","_preserveOriginalCanvas","_updateCanvasClipRect","_shrinkAxes","stopAllAnimations","_argumentAxis$getOpti","argAxisPosition","argAxisLabelPosition","scrollBarPosition","hasNonBoundaryPosition","_getPanesParameters","params","coords","clipRect","fixed","_createCrosshairCursor","options","parameters","_getCommonCanvas","_crosshair","_crosshairCursorGroup","render","commonCanvas","defaultBackgroundColor","backgroundColor","renderer","rect","rects","_panesBackgroundGroup","clear","attr","fill","panesBackground","bc","_calcPaneBorderCoords","_panesBorderGroup","borderOptions","stroke","color","opacity","dashStyle","segmentRectParams","path","pathType","linkAppend","_createClipRect","clipArray","needWideClipRect","isFinancialSeries","areErrorBarsVisible","chartCanvasClipRectID","_getCanvasClipRectID","elementsClipRectID","_getElementsClipRectID","applyClipRects","commonPaneBorderVisible","paneBorder","_getCanvasForPane","panesNumber","_getTrackerSettings","themeManager","chart","crosshair","stickyHovering","_resolveLabelOverlappingStack","shiftDirection","box","_getStackPoints","stacks","isInverted","inverted","resolveLabelOverlappingInOneDirection","coordPosition","figureCenter1","labels","getFigureCenter","figureCenter12","getPoint","stackPoints","singleSeries","stackName","getStackName","point","_getOption","zoomArgument","_initialized","resetVisualRange","nonVirtualArgumentAxis","_applyCustomVisualRangeOption","getVisibleArgumentBounds","translator","range","isDiscrete","minVisible","maxVisible","_change_FULL_RENDER","_changes","has","_raiseZoomEndHandlers","_getAxesForScaling","_applyVisualRangeByVirtualAxes","isArgumentAxis","start","end","handleZoomEnd","_setOptionsByReference","_optionsByReference","arguments","_options","silent","_notifyVisualRange","argumentVisualRange","skipEventRising","shutterZoom","zoomAndPan","plugins","addPlugin","core"],"sources":["E:/MisaProject/W2022_06/misa_emis/node_modules/devextreme/esm/viz/chart.js"],"sourcesContent":["/**\r\n * DevExtreme (esm/viz/chart.js)\r\n * Version: 22.1.4\r\n * Build date: Fri Jul 22 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport {\r\n    getHeight\r\n} from \"../core/utils/size\";\r\nimport {\r\n    noop\r\n} from \"../core/utils/common\";\r\nimport {\r\n    extend as _extend\r\n} from \"../core/utils/extend\";\r\nimport {\r\n    hasWindow\r\n} from \"../core/utils/window\";\r\nimport {\r\n    each as _each\r\n} from \"../core/utils/iterator\";\r\nimport registerComponent from \"../core/component_registrator\";\r\nimport {\r\n    prepareSegmentRectPoints\r\n} from \"./utils\";\r\nimport {\r\n    map as _map,\r\n    getLog,\r\n    getCategoriesInfo,\r\n    updatePanesCanvases,\r\n    convertVisualRangeObject,\r\n    PANE_PADDING,\r\n    normalizePanesHeight,\r\n    rangesAreEqual,\r\n    isRelativeHeightPane\r\n} from \"./core/utils\";\r\nimport {\r\n    type,\r\n    isDefined as _isDefined\r\n} from \"../core/utils/type\";\r\nimport {\r\n    getPrecision\r\n} from \"../core/utils/math\";\r\nimport {\r\n    overlapping\r\n} from \"./chart_components/base_chart\";\r\nimport multiAxesSynchronizer from \"./chart_components/multi_axes_synchronizer\";\r\nimport {\r\n    AdvancedChart\r\n} from \"./chart_components/advanced_chart\";\r\nimport {\r\n    ScrollBar\r\n} from \"./chart_components/scroll_bar\";\r\nimport {\r\n    Crosshair,\r\n    getMargins\r\n} from \"./chart_components/crosshair\";\r\nimport rangeDataCalculator from \"./series/helpers/range_data_calculator\";\r\nimport {\r\n    LayoutManager\r\n} from \"./chart_components/layout_manager\";\r\nimport {\r\n    Range\r\n} from \"./translators/range\";\r\nvar DEFAULT_PANE_NAME = \"default\";\r\nvar VISUAL_RANGE = \"VISUAL_RANGE\";\r\nvar DEFAULT_PANES = [{\r\n    name: DEFAULT_PANE_NAME,\r\n    border: {}\r\n}];\r\nvar DISCRETE = \"discrete\";\r\nvar _isArray = Array.isArray;\r\n\r\nfunction getFirstAxisNameForPane(axes, paneName, defaultPane) {\r\n    var result;\r\n    for (var i = 0; i < axes.length; i++) {\r\n        if (axes[i].pane === paneName || void 0 === axes[i].pane && paneName === defaultPane) {\r\n            result = axes[i].name;\r\n            break\r\n        }\r\n    }\r\n    if (!result) {\r\n        result = axes[0].name\r\n    }\r\n    return result\r\n}\r\n\r\nfunction changeVisibilityAxisGrids(axis, gridVisibility, minorGridVisibility) {\r\n    var gridOpt = axis.getOptions().grid;\r\n    var minorGridOpt = axis.getOptions().minorGrid;\r\n    gridOpt.visible = gridVisibility;\r\n    minorGridOpt && (minorGridOpt.visible = minorGridVisibility)\r\n}\r\n\r\nfunction hideGridsOnNonFirstValueAxisForPane(axesForPane) {\r\n    var axisShown = false;\r\n    var hiddenStubAxis = [];\r\n    var minorGridVisibility = axesForPane.some((function(axis) {\r\n        var minorGridOptions = axis.getOptions().minorGrid;\r\n        return minorGridOptions && minorGridOptions.visible\r\n    }));\r\n    var gridVisibility = axesForPane.some((function(axis) {\r\n        var gridOptions = axis.getOptions().grid;\r\n        return gridOptions && gridOptions.visible\r\n    }));\r\n    if (axesForPane.length > 1) {\r\n        axesForPane.forEach((function(axis) {\r\n            var gridOpt = axis.getOptions().grid;\r\n            if (axisShown) {\r\n                changeVisibilityAxisGrids(axis, false, false)\r\n            } else if (gridOpt && gridOpt.visible) {\r\n                if (axis.getTranslator().getBusinessRange().isEmpty()) {\r\n                    changeVisibilityAxisGrids(axis, false, false);\r\n                    hiddenStubAxis.push(axis)\r\n                } else {\r\n                    axisShown = true;\r\n                    changeVisibilityAxisGrids(axis, gridVisibility, minorGridVisibility)\r\n                }\r\n            }\r\n        }));\r\n        !axisShown && hiddenStubAxis.length && changeVisibilityAxisGrids(hiddenStubAxis[0], gridVisibility, minorGridVisibility)\r\n    }\r\n}\r\n\r\nfunction findAxisOptions(valueAxes, valueAxesOptions, axisName) {\r\n    var result;\r\n    var axInd;\r\n    for (axInd = 0; axInd < valueAxesOptions.length; axInd++) {\r\n        if (valueAxesOptions[axInd].name === axisName) {\r\n            result = valueAxesOptions[axInd];\r\n            result.priority = axInd;\r\n            break\r\n        }\r\n    }\r\n    if (!result) {\r\n        for (axInd = 0; axInd < valueAxes.length; axInd++) {\r\n            if (valueAxes[axInd].name === axisName) {\r\n                result = valueAxes[axInd].getOptions();\r\n                result.priority = valueAxes[axInd].priority;\r\n                break\r\n            }\r\n        }\r\n    }\r\n    return result\r\n}\r\n\r\nfunction findAxis(paneName, axisName, axes) {\r\n    var axis;\r\n    var i;\r\n    for (i = 0; i < axes.length; i++) {\r\n        axis = axes[i];\r\n        if (axis.name === axisName && axis.pane === paneName) {\r\n            return axis\r\n        }\r\n    }\r\n    if (paneName) {\r\n        return findAxis(void 0, axisName, axes)\r\n    }\r\n}\r\n\r\nfunction compareAxes(a, b) {\r\n    return a.priority - b.priority\r\n}\r\n\r\nfunction doesPaneExist(panes, paneName) {\r\n    var found = false;\r\n    _each(panes, (function(_, pane) {\r\n        if (pane.name === paneName) {\r\n            found = true;\r\n            return false\r\n        }\r\n    }));\r\n    return found\r\n}\r\n\r\nfunction accumulate(field, src1, src2, auxSpacing) {\r\n    var val1 = src1[field] || 0;\r\n    var val2 = src2[field] || 0;\r\n    return val1 + val2 + (val1 && val2 ? auxSpacing : 0)\r\n}\r\n\r\nfunction pickMax(field, src1, src2) {\r\n    return pickMaxValue(src1[field], src2[field])\r\n}\r\n\r\nfunction pickMaxValue(val1, val2) {\r\n    return Math.max(val1 || 0, val2 || 0)\r\n}\r\n\r\nfunction getAxisMargins(axis) {\r\n    return axis.getMargins()\r\n}\r\n\r\nfunction getHorizontalAxesMargins(axes, getMarginsFunc) {\r\n    return axes.reduce((function(margins, axis) {\r\n        var _axis$getOrthogonalAx;\r\n        var axisMargins = getMarginsFunc(axis);\r\n        var paneMargins = margins.panes[axis.pane] = margins.panes[axis.pane] || {};\r\n        var spacing = axis.getMultipleAxesSpacing();\r\n        paneMargins.top = accumulate(\"top\", paneMargins, axisMargins, spacing);\r\n        paneMargins.bottom = accumulate(\"bottom\", paneMargins, axisMargins, spacing);\r\n        paneMargins.left = pickMax(\"left\", paneMargins, axisMargins);\r\n        paneMargins.right = pickMax(\"right\", paneMargins, axisMargins);\r\n        margins.top = pickMax(\"top\", paneMargins, margins);\r\n        margins.bottom = pickMax(\"bottom\", paneMargins, margins);\r\n        margins.left = pickMax(\"left\", paneMargins, margins);\r\n        margins.right = pickMax(\"right\", paneMargins, margins);\r\n        var orthogonalAxis = null === (_axis$getOrthogonalAx = axis.getOrthogonalAxis) || void 0 === _axis$getOrthogonalAx ? void 0 : _axis$getOrthogonalAx.call(axis);\r\n        if (orthogonalAxis && orthogonalAxis.customPositionIsAvailable() && (!axis.customPositionIsBoundaryOrthogonalAxis() || !orthogonalAxis.customPositionEqualsToPredefined())) {\r\n            margins[orthogonalAxis.getResolvedBoundaryPosition()] = 0\r\n        }\r\n        return margins\r\n    }), {\r\n        panes: {}\r\n    })\r\n}\r\n\r\nfunction getVerticalAxesMargins(axes) {\r\n    return axes.reduce((function(margins, axis) {\r\n        var axisMargins = axis.getMargins();\r\n        var paneMargins = margins.panes[axis.pane] = margins.panes[axis.pane] || {};\r\n        var spacing = axis.getMultipleAxesSpacing();\r\n        paneMargins.top = pickMax(\"top\", paneMargins, axisMargins);\r\n        paneMargins.bottom = pickMax(\"bottom\", paneMargins, axisMargins);\r\n        paneMargins.left = accumulate(\"left\", paneMargins, axisMargins, spacing);\r\n        paneMargins.right = accumulate(\"right\", paneMargins, axisMargins, spacing);\r\n        margins.top = pickMax(\"top\", paneMargins, margins);\r\n        margins.bottom = pickMax(\"bottom\", paneMargins, margins);\r\n        margins.left = pickMax(\"left\", paneMargins, margins);\r\n        margins.right = pickMax(\"right\", paneMargins, margins);\r\n        return margins\r\n    }), {\r\n        panes: {}\r\n    })\r\n}\r\n\r\nfunction performActionOnAxes(axes, action, actionArgument1, actionArgument2, actionArgument3) {\r\n    axes.forEach((function(axis) {\r\n        axis[action](actionArgument1 && actionArgument1[axis.pane], actionArgument2 && actionArgument2[axis.pane] || actionArgument2, actionArgument3)\r\n    }))\r\n}\r\n\r\nfunction shrinkCanvases(isRotated, canvases, sizes, verticalMargins, horizontalMargins) {\r\n    function getMargin(side, margins, pane) {\r\n        var m = -1 === (isRotated ? [\"left\", \"right\"] : [\"top\", \"bottom\"]).indexOf(side) ? margins : margins.panes[pane] || {};\r\n        return m[side]\r\n    }\r\n\r\n    function getMaxMargin(side, margins1, margins2, pane) {\r\n        return pickMaxValue(getMargin(side, margins1, pane), getMargin(side, margins2, pane))\r\n    }\r\n    var getOriginalField = field => \"original\".concat(field[0].toUpperCase()).concat(field.slice(1));\r\n\r\n    function shrink(canvases, paneNames, sizeField, startMargin, endMargin, oppositeMargins) {\r\n        paneNames = paneNames.sort((p1, p2) => canvases[p2][startMargin] - canvases[p1][startMargin]);\r\n        paneNames.forEach(pane => {\r\n            var canvas = canvases[pane];\r\n            oppositeMargins.forEach(margin => {\r\n                canvas[margin] = canvas[getOriginalField(margin)] + getMaxMargin(margin, verticalMargins, horizontalMargins, pane)\r\n            })\r\n        });\r\n        var firstPane = canvases[paneNames[0]];\r\n        var emptySpace = paneNames.reduce((space, paneName) => {\r\n            space -= getMaxMargin(startMargin, verticalMargins, horizontalMargins, paneName) + getMaxMargin(endMargin, verticalMargins, horizontalMargins, paneName);\r\n            return space\r\n        }, firstPane[sizeField] - firstPane[getOriginalField(endMargin)] - canvases[paneNames[paneNames.length - 1]][getOriginalField(startMargin)]) - PANE_PADDING * (paneNames.length - 1);\r\n        emptySpace -= Object.keys(sizes).reduce((prev, key) => prev + (!isRelativeHeightPane(sizes[key]) ? sizes[key].height : 0), 0);\r\n        paneNames.reduce((offset, pane) => {\r\n            var canvas = canvases[pane];\r\n            var paneSize = sizes[pane];\r\n            offset -= getMaxMargin(endMargin, verticalMargins, horizontalMargins, pane);\r\n            canvas[endMargin] = firstPane[sizeField] - offset;\r\n            offset -= !isRelativeHeightPane(paneSize) ? paneSize.height : Math.floor(emptySpace * paneSize.height);\r\n            canvas[startMargin] = offset;\r\n            offset -= getMaxMargin(startMargin, verticalMargins, horizontalMargins, pane) + PANE_PADDING;\r\n            return offset\r\n        }, firstPane[sizeField] - firstPane[getOriginalField(endMargin)] - (emptySpace < 0 ? emptySpace : 0))\r\n    }\r\n    var paneNames = Object.keys(canvases);\r\n    if (!isRotated) {\r\n        shrink(canvases, paneNames, \"height\", \"top\", \"bottom\", [\"left\", \"right\"])\r\n    } else {\r\n        shrink(canvases, paneNames, \"width\", \"left\", \"right\", [\"top\", \"bottom\"])\r\n    }\r\n    return canvases\r\n}\r\n\r\nfunction drawAxesWithTicks(axes, condition, canvases, panesBorderOptions) {\r\n    if (condition) {\r\n        performActionOnAxes(axes, \"createTicks\", canvases);\r\n        multiAxesSynchronizer.synchronize(axes)\r\n    }\r\n    performActionOnAxes(axes, \"draw\", !condition && canvases, panesBorderOptions)\r\n}\r\n\r\nfunction shiftAxis(side1, side2) {\r\n    var shifts = {};\r\n    return function(axis) {\r\n        if (!axis.customPositionIsAvailable() || axis.customPositionEqualsToPredefined()) {\r\n            var shift = shifts[axis.pane] = shifts[axis.pane] || {\r\n                top: 0,\r\n                left: 0,\r\n                bottom: 0,\r\n                right: 0\r\n            };\r\n            var spacing = axis.getMultipleAxesSpacing();\r\n            var margins = axis.getMargins();\r\n            axis.shift(shift);\r\n            shift[side1] = accumulate(side1, shift, margins, spacing);\r\n            shift[side2] = accumulate(side2, shift, margins, spacing)\r\n        } else {\r\n            axis.shift({\r\n                top: 0,\r\n                left: 0,\r\n                bottom: 0,\r\n                right: 0\r\n            })\r\n        }\r\n    }\r\n}\r\n\r\nfunction getCommonSize(side, margins) {\r\n    var size = 0;\r\n    var pane;\r\n    var paneMargins;\r\n    for (pane in margins.panes) {\r\n        paneMargins = margins.panes[pane];\r\n        size += \"height\" === side ? paneMargins.top + paneMargins.bottom : paneMargins.left + paneMargins.right\r\n    }\r\n    return size\r\n}\r\n\r\nfunction checkUsedSpace(sizeShortage, side, axes, getMarginFunc) {\r\n    var size = 0;\r\n    if (sizeShortage[side] > 0) {\r\n        size = getCommonSize(side, getMarginFunc(axes, getAxisMargins));\r\n        performActionOnAxes(axes, \"hideTitle\");\r\n        sizeShortage[side] -= size - getCommonSize(side, getMarginFunc(axes, getAxisMargins))\r\n    }\r\n    if (sizeShortage[side] > 0) {\r\n        performActionOnAxes(axes, \"hideOuterElements\")\r\n    }\r\n}\r\n\r\nfunction axisAnimationEnabled(drawOptions, pointsToAnimation) {\r\n    var pointsCount = pointsToAnimation.reduce((sum, count) => sum + count, 0) / pointsToAnimation.length;\r\n    return drawOptions.animate && pointsCount <= drawOptions.animationPointsLimit\r\n}\r\n\r\nfunction collectMarkersInfoBySeries(allSeries, filteredSeries, argAxis) {\r\n    var series = [];\r\n    var overloadedSeries = {};\r\n    var argVisualRange = argAxis.visualRange();\r\n    var argTranslator = argAxis.getTranslator();\r\n    var argViewPortFilter = rangeDataCalculator.getViewPortFilter(argVisualRange || {});\r\n    filteredSeries.forEach(s => {\r\n        var valAxis = s.getValueAxis();\r\n        var valVisualRange = valAxis.getCanvasRange();\r\n        var valTranslator = valAxis.getTranslator();\r\n        var seriesIndex = allSeries.indexOf(s);\r\n        var valViewPortFilter = rangeDataCalculator.getViewPortFilter(valVisualRange || {});\r\n        overloadedSeries[seriesIndex] = {};\r\n        filteredSeries.forEach(sr => overloadedSeries[seriesIndex][allSeries.indexOf(sr)] = 0);\r\n        var seriesPoints = [];\r\n        s.getPoints().filter(p => p.getOptions().visible && argViewPortFilter(p.argument) && (valViewPortFilter(p.getMinValue(true)) || valViewPortFilter(p.getMaxValue(true)))).forEach(p => {\r\n            var tp = {\r\n                seriesIndex: seriesIndex,\r\n                argument: p.argument,\r\n                value: p.getMaxValue(true),\r\n                size: p.bubbleSize || p.getOptions().size\r\n            };\r\n            if (p.getMinValue(true) !== p.getMaxValue(true)) {\r\n                var mp = _extend({}, tp);\r\n                mp.value = p.getMinValue(true);\r\n                mp.x = argTranslator.to(mp.argument, 1);\r\n                mp.y = valTranslator.to(mp.value, 1);\r\n                seriesPoints.push(mp)\r\n            }\r\n            tp.x = argTranslator.to(tp.argument, 1);\r\n            tp.y = valTranslator.to(tp.value, 1);\r\n            seriesPoints.push(tp)\r\n        });\r\n        overloadedSeries[seriesIndex].pointsCount = seriesPoints.length;\r\n        overloadedSeries[seriesIndex].total = 0;\r\n        overloadedSeries[seriesIndex].continuousSeries = 0;\r\n        series.push({\r\n            name: s.name,\r\n            index: seriesIndex,\r\n            points: seriesPoints\r\n        })\r\n    });\r\n    return {\r\n        series: series,\r\n        overloadedSeries: overloadedSeries\r\n    }\r\n}\r\n\r\nfunction applyAutoHidePointMarkers(allSeries, filteredSeries, overloadedSeries, argAxis) {\r\n    var argAxisType = argAxis.getOptions().type;\r\n    filteredSeries.forEach(s => {\r\n        var seriesIndex = allSeries.indexOf(s);\r\n        s.autoHidePointMarkers = false;\r\n        var tickCount = argAxis.getTicksValues().majorTicksValues.length;\r\n        if (s.autoHidePointMarkersEnabled() && (argAxisType === DISCRETE || overloadedSeries[seriesIndex].pointsCount > tickCount)) {\r\n            for (var index in overloadedSeries[seriesIndex]) {\r\n                var i = parseInt(index);\r\n                if (isNaN(i) || overloadedSeries[seriesIndex].total / overloadedSeries[seriesIndex].continuousSeries < 3) {\r\n                    continue\r\n                }\r\n                if (i === seriesIndex) {\r\n                    if (2 * overloadedSeries[i][i] >= overloadedSeries[i].pointsCount) {\r\n                        s.autoHidePointMarkers = true;\r\n                        break\r\n                    }\r\n                } else if (overloadedSeries[seriesIndex].total >= overloadedSeries[seriesIndex].pointsCount) {\r\n                    s.autoHidePointMarkers = true;\r\n                    break\r\n                }\r\n            }\r\n        }\r\n    })\r\n}\r\n\r\nfunction fastHidingPointMarkersByArea(canvas, markersInfo, series) {\r\n    var area = canvas.width * canvas.height;\r\n    var seriesPoints = markersInfo.series;\r\n    var _loop = function(i) {\r\n        var currentSeries = series.filter(s => s.name === seriesPoints[i].name)[0];\r\n        var points = seriesPoints[i].points;\r\n        var pointSize = points.length ? points[0].size : 0;\r\n        var pointsArea = pointSize * pointSize * points.length;\r\n        if (currentSeries.autoHidePointMarkersEnabled() && pointsArea >= area / seriesPoints.length) {\r\n            var index = seriesPoints[i].index;\r\n            currentSeries.autoHidePointMarkers = true;\r\n            seriesPoints.splice(i, 1);\r\n            series.splice(series.indexOf(currentSeries), 1);\r\n            delete markersInfo.overloadedSeries[index]\r\n        }\r\n    };\r\n    for (var i = seriesPoints.length - 1; i >= 0; i--) {\r\n        _loop(i)\r\n    }\r\n}\r\n\r\nfunction updateMarkersInfo(points, overloadedSeries) {\r\n    var isContinuousSeries = false;\r\n    for (var i = 0; i < points.length - 1; i++) {\r\n        var curPoint = points[i];\r\n        var size = curPoint.size;\r\n        if (_isDefined(curPoint.x) && _isDefined(curPoint.y)) {\r\n            for (var j = i + 1; j < points.length; j++) {\r\n                var nextPoint = points[j];\r\n                var next_x = null === nextPoint || void 0 === nextPoint ? void 0 : nextPoint.x;\r\n                var next_y = null === nextPoint || void 0 === nextPoint ? void 0 : nextPoint.y;\r\n                if (!_isDefined(next_x) || Math.abs(curPoint.x - next_x) >= size) {\r\n                    isContinuousSeries &= j !== i + 1;\r\n                    break\r\n                } else {\r\n                    var distance = _isDefined(next_x) && _isDefined(next_y) && Math.sqrt(Math.pow(curPoint.x - next_x, 2) + Math.pow(curPoint.y - next_y, 2));\r\n                    if (distance && distance < size) {\r\n                        overloadedSeries[curPoint.seriesIndex][nextPoint.seriesIndex]++;\r\n                        overloadedSeries[curPoint.seriesIndex].total++;\r\n                        if (!isContinuousSeries) {\r\n                            overloadedSeries[curPoint.seriesIndex].continuousSeries++;\r\n                            isContinuousSeries = true\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\nvar dxChart = AdvancedChart.inherit({\r\n    _themeSection: \"chart\",\r\n    _fontFields: [\"crosshair.label.font\"],\r\n    _initCore: function() {\r\n        this.paneAxis = {};\r\n        this.callBase()\r\n    },\r\n    _init() {\r\n        this._containerInitialHeight = hasWindow() ? getHeight(this._$element) : 0;\r\n        this.callBase()\r\n    },\r\n    _correctAxes: function() {\r\n        this._correctValueAxes(true)\r\n    },\r\n    _getExtraOptions: noop,\r\n    _createPanes: function() {\r\n        var panes = this.option(\"panes\");\r\n        var panesNameCounter = 0;\r\n        var defaultPane;\r\n        if (!panes || _isArray(panes) && !panes.length) {\r\n            panes = DEFAULT_PANES\r\n        }\r\n        this.callBase();\r\n        defaultPane = this.option(\"defaultPane\");\r\n        panes = _extend(true, [], _isArray(panes) ? panes : [panes]);\r\n        _each(panes, (function(_, pane) {\r\n            pane.name = !_isDefined(pane.name) ? DEFAULT_PANE_NAME + panesNameCounter++ : pane.name\r\n        }));\r\n        if (_isDefined(defaultPane)) {\r\n            if (!doesPaneExist(panes, defaultPane)) {\r\n                this._incidentOccurred(\"W2101\", [defaultPane]);\r\n                defaultPane = panes[panes.length - 1].name\r\n            }\r\n        } else {\r\n            defaultPane = panes[panes.length - 1].name\r\n        }\r\n        this.defaultPane = defaultPane;\r\n        panes = this._isRotated() ? panes.reverse() : panes;\r\n        return panes\r\n    },\r\n    _getAxisRenderingOptions: function() {\r\n        return {\r\n            axisType: \"xyAxes\",\r\n            drawingType: \"linear\"\r\n        }\r\n    },\r\n    _prepareAxisOptions: function(typeSelector, userOptions, rotated) {\r\n        return {\r\n            isHorizontal: \"argumentAxis\" === typeSelector !== rotated,\r\n            containerColor: this._themeManager.getOptions(\"containerBackgroundColor\")\r\n        }\r\n    },\r\n    _checkPaneName: function(seriesTheme) {\r\n        var paneList = _map(this.panes, (function(pane) {\r\n            return pane.name\r\n        }));\r\n        seriesTheme.pane = seriesTheme.pane || this.defaultPane;\r\n        return paneList.includes(seriesTheme.pane)\r\n    },\r\n    _initCustomPositioningAxes() {\r\n        var that = this;\r\n        var argumentAxis = that.getArgumentAxis();\r\n        var valueAxisName = argumentAxis.getOptions().customPositionAxis;\r\n        var valueAxis = that._valueAxes.filter(v => v.pane === argumentAxis.pane && (!valueAxisName || valueAxisName === v.name))[0];\r\n        that._valueAxes.forEach(v => {\r\n            if (argumentAxis !== v.getOrthogonalAxis()) {\r\n                v.getOrthogonalAxis = () => argumentAxis;\r\n                v.customPositionIsBoundaryOrthogonalAxis = () => argumentAxis.customPositionIsBoundary()\r\n            }\r\n        });\r\n        if (_isDefined(valueAxis) && valueAxis !== argumentAxis.getOrthogonalAxis()) {\r\n            argumentAxis.getOrthogonalAxis = () => valueAxis;\r\n            argumentAxis.customPositionIsBoundaryOrthogonalAxis = () => that._valueAxes.some(v => v.customPositionIsBoundary())\r\n        } else if (_isDefined(argumentAxis.getOrthogonalAxis()) && !_isDefined(valueAxis)) {\r\n            argumentAxis.getOrthogonalAxis = noop\r\n        }\r\n    },\r\n    _getAllAxes() {\r\n        return this._argumentAxes.concat(this._valueAxes)\r\n    },\r\n    _resetAxesAnimation(isFirstDrawing, isHorizontal) {\r\n        var axes = _isDefined(isHorizontal) ? isHorizontal ^ this._isRotated() ? this._argumentAxes : this._valueAxes : this._getAllAxes();\r\n        axes.forEach(a => {\r\n            a.resetApplyingAnimation(isFirstDrawing)\r\n        })\r\n    },\r\n    _axesBoundaryPositioning() {\r\n        var allAxes = this._getAllAxes();\r\n        var boundaryStateChanged = false;\r\n        allAxes.forEach(a => {\r\n            if (!a.customPositionIsAvailable()) {\r\n                return false\r\n            }\r\n            var prevBoundaryState = a.customPositionIsBoundary();\r\n            a._customBoundaryPosition = a.getCustomBoundaryPosition();\r\n            boundaryStateChanged |= prevBoundaryState !== a.customPositionIsBoundary()\r\n        });\r\n        return boundaryStateChanged\r\n    },\r\n    _getCrosshairMargins: function() {\r\n        var crosshairOptions = this._getCrosshairOptions() || {};\r\n        var crosshairEnabled = crosshairOptions.enabled;\r\n        var margins = getMargins();\r\n        var horizontalLabel = _extend(true, {}, crosshairOptions.label, crosshairOptions.horizontalLine.label);\r\n        var verticalLabel = _extend(true, {}, crosshairOptions.label, crosshairOptions.verticalLine.label);\r\n        return {\r\n            x: crosshairEnabled && crosshairOptions.horizontalLine.visible && horizontalLabel.visible ? margins.x : 0,\r\n            y: crosshairEnabled && crosshairOptions.verticalLine.visible && verticalLabel.visible ? margins.y : 0\r\n        }\r\n    },\r\n    _getValueAxis: function(paneName, axisName) {\r\n        var valueAxes = this._valueAxes;\r\n        var valueAxisOptions = this.option(\"valueAxis\") || {};\r\n        var valueAxesOptions = _isArray(valueAxisOptions) ? valueAxisOptions : [valueAxisOptions];\r\n        var rotated = this._isRotated();\r\n        var crosshairMargins = this._getCrosshairMargins();\r\n        var axisOptions;\r\n        var axis;\r\n        axisName = axisName || getFirstAxisNameForPane(valueAxes, paneName, this.defaultPane);\r\n        axis = findAxis(paneName, axisName, valueAxes);\r\n        if (!axis) {\r\n            axisOptions = findAxisOptions(valueAxes, valueAxesOptions, axisName);\r\n            if (!axisOptions) {\r\n                this._incidentOccurred(\"W2102\", [axisName]);\r\n                axisOptions = {\r\n                    name: axisName,\r\n                    priority: valueAxes.length\r\n                }\r\n            }\r\n            axis = this._createAxis(false, this._populateAxesOptions(\"valueAxis\", axisOptions, {\r\n                pane: paneName,\r\n                name: axisName,\r\n                optionPath: _isArray(valueAxisOptions) ? \"valueAxis[\".concat(axisOptions.priority, \"]\") : \"valueAxis\",\r\n                crosshairMargin: rotated ? crosshairMargins.y : crosshairMargins.x\r\n            }, rotated));\r\n            axis.applyVisualRangeSetter(this._getVisualRangeSetter());\r\n            valueAxes.push(axis)\r\n        }\r\n        axis.setPane(paneName);\r\n        return axis\r\n    },\r\n    _correctValueAxes: function(needHideGrids) {\r\n        var that = this;\r\n        var synchronizeMultiAxes = that._themeManager.getOptions(\"synchronizeMultiAxes\");\r\n        var valueAxes = that._valueAxes;\r\n        var paneWithAxis = {};\r\n        that.series.forEach((function(series) {\r\n            var axis = series.getValueAxis();\r\n            paneWithAxis[axis.pane] = true\r\n        }));\r\n        that.panes.forEach((function(pane) {\r\n            var paneName = pane.name;\r\n            if (!paneWithAxis[paneName]) {\r\n                that._getValueAxis(paneName)\r\n            }\r\n            if (needHideGrids && synchronizeMultiAxes) {\r\n                hideGridsOnNonFirstValueAxisForPane(valueAxes.filter((function(axis) {\r\n                    return axis.pane === paneName\r\n                })))\r\n            }\r\n        }));\r\n        that._valueAxes = valueAxes.filter((function(axis) {\r\n            if (!axis.pane) {\r\n                axis.setPane(that.defaultPane)\r\n            }\r\n            var paneExists = doesPaneExist(that.panes, axis.pane);\r\n            if (!paneExists) {\r\n                axis.dispose();\r\n                axis = null\r\n            }\r\n            return paneExists\r\n        })).sort(compareAxes);\r\n        var defaultAxis = this.getValueAxis();\r\n        that._valueAxes.forEach(axis => {\r\n            var optionPath = axis.getOptions().optionPath;\r\n            if (optionPath) {\r\n                var axesWithSamePath = that._valueAxes.filter(a => a.getOptions().optionPath === optionPath);\r\n                if (axesWithSamePath.length > 1) {\r\n                    if (axesWithSamePath.some(a => a === defaultAxis)) {\r\n                        axesWithSamePath.forEach(a => {\r\n                            if (a !== defaultAxis) {\r\n                                a.getOptions().optionPath = null\r\n                            }\r\n                        })\r\n                    } else {\r\n                        axesWithSamePath.forEach((a, i) => {\r\n                            if (0 !== i) {\r\n                                a.getOptions().optionPath = null\r\n                            }\r\n                        })\r\n                    }\r\n                }\r\n            }\r\n        })\r\n    },\r\n    _getSeriesForPane: function(paneName) {\r\n        var paneSeries = [];\r\n        _each(this.series, (function(_, oneSeries) {\r\n            if (oneSeries.pane === paneName) {\r\n                paneSeries.push(oneSeries)\r\n            }\r\n        }));\r\n        return paneSeries\r\n    },\r\n    _createPanesBorderOptions: function() {\r\n        var commonBorderOptions = this._themeManager.getOptions(\"commonPaneSettings\").border;\r\n        var panesBorderOptions = {};\r\n        this.panes.forEach(pane => panesBorderOptions[pane.name] = _extend(true, {}, commonBorderOptions, pane.border));\r\n        return panesBorderOptions\r\n    },\r\n    _createScrollBar: function() {\r\n        var scrollBarOptions = this._themeManager.getOptions(\"scrollBar\") || {};\r\n        var scrollBarGroup = this._scrollBarGroup;\r\n        if (scrollBarOptions.visible) {\r\n            scrollBarOptions.rotated = this._isRotated();\r\n            this._scrollBar = (this._scrollBar || new ScrollBar(this._renderer, scrollBarGroup)).update(scrollBarOptions)\r\n        } else {\r\n            scrollBarGroup.linkRemove();\r\n            this._scrollBar && this._scrollBar.dispose();\r\n            this._scrollBar = null\r\n        }\r\n    },\r\n    _executeAppendAfterSeries(append) {\r\n        append()\r\n    },\r\n    _prepareToRender(drawOptions) {\r\n        var panesBorderOptions = this._createPanesBorderOptions();\r\n        this._createPanesBackground();\r\n        this._appendAxesGroups();\r\n        this._adjustViewport();\r\n        return panesBorderOptions\r\n    },\r\n    _adjustViewport() {\r\n        var adjustOnZoom = this._themeManager.getOptions(\"adjustOnZoom\");\r\n        if (!adjustOnZoom) {\r\n            return\r\n        }\r\n        this._valueAxes.forEach(axis => axis.adjust())\r\n    },\r\n    _recreateSizeDependentObjects(isCanvasChanged) {\r\n        var that = this;\r\n        var series = that._getVisibleSeries();\r\n        var useAggregation = series.some(s => s.useAggregation());\r\n        var zoomChanged = that._isZooming();\r\n        if (!useAggregation) {\r\n            return\r\n        }\r\n        that._argumentAxes.forEach((function(axis) {\r\n            axis.updateCanvas(that._canvas, true)\r\n        }));\r\n        series.forEach((function(series) {\r\n            if (series.useAggregation() && (isCanvasChanged || zoomChanged || !series._useAllAggregatedPoints)) {\r\n                series.createPoints()\r\n            }\r\n        }));\r\n        that._processSeriesFamilies()\r\n    },\r\n    _isZooming() {\r\n        var argumentAxis = this.getArgumentAxis();\r\n        if (!argumentAxis || !argumentAxis.getTranslator()) {\r\n            return false\r\n        }\r\n        var businessRange = argumentAxis.getTranslator().getBusinessRange();\r\n        var zoomRange = argumentAxis.getViewport();\r\n        var min = zoomRange ? zoomRange.min : 0;\r\n        var max = zoomRange ? zoomRange.max : 0;\r\n        if (\"logarithmic\" === businessRange.axisType) {\r\n            min = getLog(min, businessRange.base);\r\n            max = getLog(max, businessRange.base)\r\n        }\r\n        var viewportDistance = businessRange.axisType === DISCRETE ? getCategoriesInfo(businessRange.categories, min, max).categories.length : Math.abs(max - min);\r\n        var precision = getPrecision(viewportDistance);\r\n        precision = precision > 1 ? Math.pow(10, precision - 2) : 1;\r\n        var zoomChanged = Math.round((this._zoomLength - viewportDistance) * precision) / precision !== 0;\r\n        this._zoomLength = viewportDistance;\r\n        return zoomChanged\r\n    },\r\n    _handleSeriesDataUpdated: function() {\r\n        var that = this;\r\n        var viewport = new Range;\r\n        that.series.forEach((function(s) {\r\n            viewport.addRange(s.getArgumentRange())\r\n        }));\r\n        that._argumentAxes.forEach((function(axis) {\r\n            axis.updateCanvas(that._canvas, true);\r\n            axis.setBusinessRange(viewport, that._axesReinitialized)\r\n        }));\r\n        that.callBase()\r\n    },\r\n    _isLegendInside: function() {\r\n        return this._legend && \"inside\" === this._legend.getPosition()\r\n    },\r\n    _isRotated: function() {\r\n        return this._themeManager.getOptions(\"rotated\")\r\n    },\r\n    _getLayoutTargets: function() {\r\n        return this.panes\r\n    },\r\n    _applyClipRects: function(panesBorderOptions) {\r\n        this._drawPanesBorders(panesBorderOptions);\r\n        this._createClipRectsForPanes();\r\n        this._applyClipRectsForAxes();\r\n        this._fillPanesBackground()\r\n    },\r\n    _updateLegendPosition: function(drawOptions, legendHasInsidePosition) {\r\n        if (drawOptions.drawLegend && this._legend && legendHasInsidePosition) {\r\n            var panes = this.panes;\r\n            var newCanvas = _extend({}, panes[0].canvas);\r\n            var layoutManager = new LayoutManager;\r\n            newCanvas.right = panes[panes.length - 1].canvas.right;\r\n            newCanvas.bottom = panes[panes.length - 1].canvas.bottom;\r\n            layoutManager.layoutInsideLegend(this._legend, newCanvas)\r\n        }\r\n    },\r\n    _allowLegendInsidePosition: () => true,\r\n    _applyExtraSettings: function(series) {\r\n        var paneIndex = this._getPaneIndex(series.pane);\r\n        var panesClipRects = this._panesClipRects;\r\n        var wideClipRect = panesClipRects.wide[paneIndex];\r\n        series.setClippingParams(panesClipRects.base[paneIndex].id, wideClipRect && wideClipRect.id, this._getPaneBorderVisibility(paneIndex))\r\n    },\r\n    _updatePanesCanvases: function(drawOptions) {\r\n        if (!drawOptions.recreateCanvas) {\r\n            return\r\n        }\r\n        updatePanesCanvases(this.panes, this._canvas, this._isRotated())\r\n    },\r\n    _normalizePanesHeight: function() {\r\n        normalizePanesHeight(this.panes)\r\n    },\r\n    _renderScaleBreaks: function() {\r\n        this._valueAxes.concat(this._argumentAxes).forEach((function(axis) {\r\n            axis.drawScaleBreaks()\r\n        }))\r\n    },\r\n    _getArgFilter() {\r\n        return rangeDataCalculator.getViewPortFilter(this.getArgumentAxis().visualRange() || {})\r\n    },\r\n    _applyPointMarkersAutoHiding() {\r\n        var that = this;\r\n        var allSeries = that.series;\r\n        if (!that._themeManager.getOptions(\"autoHidePointMarkers\")) {\r\n            allSeries.forEach(s => s.autoHidePointMarkers = false);\r\n            return\r\n        }\r\n        that.panes.forEach(_ref => {\r\n            var {\r\n                borderCoords: borderCoords,\r\n                name: name\r\n            } = _ref;\r\n            var series = allSeries.filter(s => s.pane === name && s.usePointsToDefineAutoHiding());\r\n            var argAxis = that.getArgumentAxis();\r\n            var markersInfo = collectMarkersInfoBySeries(allSeries, series, argAxis);\r\n            fastHidingPointMarkersByArea(borderCoords, markersInfo, series);\r\n            if (markersInfo.series.length) {\r\n                var argVisualRange = argAxis.visualRange();\r\n                var argAxisIsDiscrete = argAxis.getOptions().type === DISCRETE;\r\n                var sortingCallback = argAxisIsDiscrete ? (p1, p2) => argVisualRange.categories.indexOf(p1.argument) - argVisualRange.categories.indexOf(p2.argument) : (p1, p2) => p1.argument - p2.argument;\r\n                var points = [];\r\n                markersInfo.series.forEach(s => points = points.concat(s.points));\r\n                points.sort(sortingCallback);\r\n                updateMarkersInfo(points, markersInfo.overloadedSeries);\r\n                applyAutoHidePointMarkers(allSeries, series, markersInfo.overloadedSeries, argAxis)\r\n            }\r\n        })\r\n    },\r\n    _renderAxes: function(drawOptions, panesBorderOptions) {\r\n        function calculateTitlesWidth(axes) {\r\n            return axes.map(axis => {\r\n                if (!axis.getTitle) {\r\n                    return 0\r\n                }\r\n                var title = axis.getTitle();\r\n                return title ? title.bBox.width : 0\r\n            })\r\n        }\r\n        var that = this;\r\n        var rotated = that._isRotated();\r\n        var synchronizeMultiAxes = that._themeManager.getOptions(\"synchronizeMultiAxes\");\r\n        var scrollBar = that._scrollBar ? [that._scrollBar] : [];\r\n        var extendedArgAxes = that._isArgumentAxisBeforeScrollBar() ? that._argumentAxes.concat(scrollBar) : scrollBar.concat(that._argumentAxes);\r\n        var verticalAxes = rotated ? that._argumentAxes : that._valueAxes;\r\n        var verticalElements = rotated ? extendedArgAxes : that._valueAxes;\r\n        var horizontalAxes = rotated ? that._valueAxes : that._argumentAxes;\r\n        var horizontalElements = rotated ? that._valueAxes : extendedArgAxes;\r\n        var allAxes = verticalAxes.concat(horizontalAxes);\r\n        var allElements = allAxes.concat(scrollBar);\r\n        var verticalAxesFirstDrawing = verticalAxes.some(v => v.isFirstDrawing());\r\n        that._normalizePanesHeight();\r\n        that._updatePanesCanvases(drawOptions);\r\n        var panesCanvases = that.panes.reduce((function(canvases, pane) {\r\n            canvases[pane.name] = _extend({}, pane.canvas);\r\n            return canvases\r\n        }), {});\r\n        var paneSizes = that.panes.reduce((sizes, pane) => {\r\n            sizes[pane.name] = {\r\n                height: pane.height,\r\n                unit: pane.unit\r\n            };\r\n            return sizes\r\n        }, {});\r\n        var cleanPanesCanvases = _extend(true, {}, panesCanvases);\r\n        that._initCustomPositioningAxes();\r\n        var needCustomAdjustAxes = that._axesBoundaryPositioning();\r\n        if (!drawOptions.adjustAxes && !needCustomAdjustAxes) {\r\n            drawAxesWithTicks(verticalAxes, !rotated && synchronizeMultiAxes, panesCanvases, panesBorderOptions);\r\n            drawAxesWithTicks(horizontalAxes, rotated && synchronizeMultiAxes, panesCanvases, panesBorderOptions);\r\n            performActionOnAxes(allAxes, \"prepareAnimation\");\r\n            that._renderScaleBreaks();\r\n            horizontalAxes.forEach(a => a.resolveOverlappingForCustomPositioning(verticalAxes));\r\n            verticalAxes.forEach(a => a.resolveOverlappingForCustomPositioning(horizontalAxes));\r\n            return false\r\n        }\r\n        if (needCustomAdjustAxes) {\r\n            allAxes.forEach(a => a.customPositionIsAvailable() && a.shift({\r\n                top: 0,\r\n                left: 0,\r\n                bottom: 0,\r\n                right: 0\r\n            }))\r\n        }\r\n        if (that._scrollBar) {\r\n            that._scrollBar.setPane(that.panes)\r\n        }\r\n        var vAxesMargins = {\r\n            panes: {}\r\n        };\r\n        var hAxesMargins = getHorizontalAxesMargins(horizontalElements, axis => axis.estimateMargins(panesCanvases[axis.pane]));\r\n        panesCanvases = shrinkCanvases(rotated, panesCanvases, paneSizes, vAxesMargins, hAxesMargins);\r\n        var drawAxesAndSetCanvases = isHorizontal => {\r\n            var axes = isHorizontal ? horizontalAxes : verticalAxes;\r\n            var condition = (isHorizontal ? rotated : !rotated) && synchronizeMultiAxes;\r\n            drawAxesWithTicks(axes, condition, panesCanvases, panesBorderOptions);\r\n            if (isHorizontal) {\r\n                hAxesMargins = getHorizontalAxesMargins(horizontalElements, getAxisMargins)\r\n            } else {\r\n                vAxesMargins = getVerticalAxesMargins(verticalElements)\r\n            }\r\n            panesCanvases = shrinkCanvases(rotated, panesCanvases, paneSizes, vAxesMargins, hAxesMargins)\r\n        };\r\n        drawAxesAndSetCanvases(false);\r\n        drawAxesAndSetCanvases(true);\r\n        if (!that._changesApplying && that._estimateTickIntervals(verticalAxes, panesCanvases)) {\r\n            drawAxesAndSetCanvases(false)\r\n        }\r\n        var oldTitlesWidth = calculateTitlesWidth(verticalAxes);\r\n        var visibleSeries = that._getVisibleSeries();\r\n        var pointsToAnimation = that._getPointsToAnimation(visibleSeries);\r\n        var axesIsAnimated = axisAnimationEnabled(drawOptions, pointsToAnimation);\r\n        performActionOnAxes(allElements, \"updateSize\", panesCanvases, axesIsAnimated);\r\n        horizontalElements.forEach(shiftAxis(\"top\", \"bottom\"));\r\n        verticalElements.forEach(shiftAxis(\"left\", \"right\"));\r\n        that._renderScaleBreaks();\r\n        that.panes.forEach((function(pane) {\r\n            _extend(pane.canvas, panesCanvases[pane.name])\r\n        }));\r\n        that._valueAxes.forEach(axis => {\r\n            axis.setInitRange()\r\n        });\r\n        verticalAxes.forEach((axis, i) => {\r\n            var _axis$hasWrap;\r\n            if (null !== (_axis$hasWrap = axis.hasWrap) && void 0 !== _axis$hasWrap && _axis$hasWrap.call(axis)) {\r\n                var title = axis.getTitle();\r\n                var newTitleWidth = title ? title.bBox.width : 0;\r\n                var offset = newTitleWidth - oldTitlesWidth[i];\r\n                if (\"right\" === axis.getOptions().position) {\r\n                    vAxesMargins.right += offset\r\n                } else {\r\n                    vAxesMargins.left += offset;\r\n                    that.panes.forEach(_ref2 => {\r\n                        var {\r\n                            name: name\r\n                        } = _ref2;\r\n                        return vAxesMargins.panes[name].left += offset\r\n                    })\r\n                }\r\n                panesCanvases = shrinkCanvases(rotated, panesCanvases, paneSizes, vAxesMargins, hAxesMargins);\r\n                performActionOnAxes(allElements, \"updateSize\", panesCanvases, false, false);\r\n                oldTitlesWidth = calculateTitlesWidth(verticalAxes)\r\n            }\r\n        });\r\n        if (verticalAxes.some(v => v.customPositionIsAvailable() && v.getCustomPosition() !== v._axisPosition)) {\r\n            axesIsAnimated && that._resetAxesAnimation(verticalAxesFirstDrawing, false);\r\n            performActionOnAxes(verticalAxes, \"updateSize\", panesCanvases, axesIsAnimated)\r\n        }\r\n        horizontalAxes.forEach(a => a.resolveOverlappingForCustomPositioning(verticalAxes));\r\n        verticalAxes.forEach(a => a.resolveOverlappingForCustomPositioning(horizontalAxes));\r\n        return cleanPanesCanvases\r\n    },\r\n    _getExtraTemplatesItems() {\r\n        var allAxes = (this._argumentAxes || []).concat(this._valueAxes || []);\r\n        var elements = this._collectTemplatesFromItems(allAxes);\r\n        return {\r\n            items: elements.items,\r\n            groups: elements.groups,\r\n            launchRequest() {\r\n                allAxes.forEach((function(a) {\r\n                    a.setRenderedState(true)\r\n                }))\r\n            },\r\n            doneRequest() {\r\n                allAxes.forEach((function(a) {\r\n                    a.setRenderedState(false)\r\n                }))\r\n            }\r\n        }\r\n    },\r\n    _estimateTickIntervals: (axes, canvases) => axes.some(axis => axis.estimateTickInterval(canvases[axis.pane])),\r\n    checkForMoreSpaceForPanesCanvas() {\r\n        var rotated = this._isRotated();\r\n        var panesAreCustomSized = this.panes.filter(p => p.unit).length === this.panes.length;\r\n        var needSpace = false;\r\n        if (panesAreCustomSized) {\r\n            var needHorizontalSpace = 0;\r\n            var needVerticalSpace = 0;\r\n            if (rotated) {\r\n                var argAxisRightMargin = this.getArgumentAxis().getMargins().right;\r\n                var rightPanesIndent = Math.min.apply(Math, this.panes.map(p => p.canvas.right));\r\n                needHorizontalSpace = this._canvas.right + argAxisRightMargin - rightPanesIndent\r\n            } else {\r\n                var argAxisBottomMargin = this.getArgumentAxis().getMargins().bottom;\r\n                var bottomPanesIndent = Math.min.apply(Math, this.panes.map(p => p.canvas.bottom));\r\n                needVerticalSpace = this._canvas.bottom + argAxisBottomMargin - bottomPanesIndent\r\n            }\r\n            needSpace = needHorizontalSpace > 0 || needVerticalSpace > 0 ? {\r\n                width: needHorizontalSpace,\r\n                height: needVerticalSpace\r\n            } : false;\r\n            if (0 !== needVerticalSpace) {\r\n                var realSize = this.getSize();\r\n                var customSize = this.option(\"size\");\r\n                var container = this._$element[0];\r\n                var containerHasStyledHeight = !!parseInt(container.style.height) || 0 !== this._containerInitialHeight;\r\n                if (!rotated && !(customSize && customSize.height) && !containerHasStyledHeight) {\r\n                    this._forceResize(realSize.width, realSize.height + needVerticalSpace);\r\n                    needSpace = false\r\n                }\r\n            }\r\n        } else {\r\n            needSpace = this.layoutManager.needMoreSpaceForPanesCanvas(this._getLayoutTargets(), rotated, pane => ({\r\n                width: rotated && !!pane.unit,\r\n                height: !rotated && !!pane.unit\r\n            }))\r\n        }\r\n        return needSpace\r\n    },\r\n    _forceResize(width, height) {\r\n        this._renderer.resize(width, height);\r\n        this._updateSize();\r\n        this._setContentSize();\r\n        this._preserveOriginalCanvas();\r\n        this._updateCanvasClipRect(this._canvas)\r\n    },\r\n    _shrinkAxes(sizeShortage, panesCanvases) {\r\n        if (!sizeShortage || !panesCanvases) {\r\n            return\r\n        }\r\n        this._renderer.stopAllAnimations(true);\r\n        var rotated = this._isRotated();\r\n        var scrollBar = this._scrollBar ? [this._scrollBar] : [];\r\n        var extendedArgAxes = this._isArgumentAxisBeforeScrollBar() ? this._argumentAxes.concat(scrollBar) : scrollBar.concat(this._argumentAxes);\r\n        var verticalAxes = rotated ? extendedArgAxes : this._valueAxes;\r\n        var horizontalAxes = rotated ? this._valueAxes : extendedArgAxes;\r\n        var allAxes = verticalAxes.concat(horizontalAxes);\r\n        if (sizeShortage.width || sizeShortage.height) {\r\n            checkUsedSpace(sizeShortage, \"height\", horizontalAxes, getHorizontalAxesMargins);\r\n            checkUsedSpace(sizeShortage, \"width\", verticalAxes, getVerticalAxesMargins);\r\n            performActionOnAxes(allAxes, \"updateSize\", panesCanvases);\r\n            var paneSizes = this.panes.reduce((sizes, pane) => {\r\n                sizes[pane.name] = {\r\n                    height: pane.height,\r\n                    unit: pane.unit\r\n                };\r\n                return sizes\r\n            }, {});\r\n            panesCanvases = shrinkCanvases(rotated, panesCanvases, paneSizes, getVerticalAxesMargins(verticalAxes), getHorizontalAxesMargins(horizontalAxes, getAxisMargins));\r\n            performActionOnAxes(allAxes, \"updateSize\", panesCanvases);\r\n            horizontalAxes.forEach(shiftAxis(\"top\", \"bottom\"));\r\n            verticalAxes.forEach(shiftAxis(\"left\", \"right\"));\r\n            this.panes.forEach(pane => _extend(pane.canvas, panesCanvases[pane.name]))\r\n        }\r\n    },\r\n    _isArgumentAxisBeforeScrollBar() {\r\n        var argumentAxis = this.getArgumentAxis();\r\n        if (this._scrollBar) {\r\n            var _argumentAxis$getOpti;\r\n            var argAxisPosition = argumentAxis.getResolvedBoundaryPosition();\r\n            var argAxisLabelPosition = null === (_argumentAxis$getOpti = argumentAxis.getOptions().label) || void 0 === _argumentAxis$getOpti ? void 0 : _argumentAxis$getOpti.position;\r\n            var scrollBarPosition = this._scrollBar.getOptions().position;\r\n            return argumentAxis.hasNonBoundaryPosition() || scrollBarPosition === argAxisPosition && argAxisLabelPosition !== scrollBarPosition\r\n        }\r\n        return false\r\n    },\r\n    _getPanesParameters: function() {\r\n        var panes = this.panes;\r\n        var i;\r\n        var params = [];\r\n        for (i = 0; i < panes.length; i++) {\r\n            if (this._getPaneBorderVisibility(i)) {\r\n                params.push({\r\n                    coords: panes[i].borderCoords,\r\n                    clipRect: this._panesClipRects.fixed[i]\r\n                })\r\n            }\r\n        }\r\n        return params\r\n    },\r\n    _createCrosshairCursor: function() {\r\n        var options = this._themeManager.getOptions(\"crosshair\") || {};\r\n        var argumentAxis = this.getArgumentAxis();\r\n        var axes = !this._isRotated() ? [\r\n            [argumentAxis], this._valueAxes\r\n        ] : [this._valueAxes, [argumentAxis]];\r\n        var parameters = {\r\n            canvas: this._getCommonCanvas(),\r\n            panes: this._getPanesParameters(),\r\n            axes: axes\r\n        };\r\n        if (!options || !options.enabled) {\r\n            return\r\n        }\r\n        if (!this._crosshair) {\r\n            this._crosshair = new Crosshair(this._renderer, options, parameters, this._crosshairCursorGroup)\r\n        } else {\r\n            this._crosshair.update(options, parameters)\r\n        }\r\n        this._crosshair.render()\r\n    },\r\n    _getCommonCanvas: function() {\r\n        var i;\r\n        var canvas;\r\n        var commonCanvas;\r\n        var panes = this.panes;\r\n        for (i = 0; i < panes.length; i++) {\r\n            canvas = panes[i].canvas;\r\n            if (!commonCanvas) {\r\n                commonCanvas = _extend({}, canvas)\r\n            } else {\r\n                commonCanvas.right = canvas.right;\r\n                commonCanvas.bottom = canvas.bottom\r\n            }\r\n        }\r\n        return commonCanvas\r\n    },\r\n    _createPanesBackground: function() {\r\n        var defaultBackgroundColor = this._themeManager.getOptions(\"commonPaneSettings\").backgroundColor;\r\n        var backgroundColor;\r\n        var renderer = this._renderer;\r\n        var rect;\r\n        var i;\r\n        var rects = [];\r\n        this._panesBackgroundGroup.clear();\r\n        for (i = 0; i < this.panes.length; i++) {\r\n            backgroundColor = this.panes[i].backgroundColor || defaultBackgroundColor;\r\n            if (!backgroundColor || \"none\" === backgroundColor) {\r\n                rects.push(null);\r\n                continue\r\n            }\r\n            rect = renderer.rect(0, 0, 0, 0).attr({\r\n                fill: backgroundColor,\r\n                \"stroke-width\": 0\r\n            }).append(this._panesBackgroundGroup);\r\n            rects.push(rect)\r\n        }\r\n        this.panesBackground = rects\r\n    },\r\n    _fillPanesBackground: function() {\r\n        var that = this;\r\n        var bc;\r\n        _each(that.panes, (function(i, pane) {\r\n            bc = pane.borderCoords;\r\n            if (null !== that.panesBackground[i]) {\r\n                that.panesBackground[i].attr({\r\n                    x: bc.left,\r\n                    y: bc.top,\r\n                    width: bc.width,\r\n                    height: bc.height\r\n                })\r\n            }\r\n        }))\r\n    },\r\n    _calcPaneBorderCoords: function(pane) {\r\n        var canvas = pane.canvas;\r\n        var bc = pane.borderCoords = pane.borderCoords || {};\r\n        bc.left = canvas.left;\r\n        bc.top = canvas.top;\r\n        bc.right = canvas.width - canvas.right;\r\n        bc.bottom = canvas.height - canvas.bottom;\r\n        bc.width = Math.max(bc.right - bc.left, 0);\r\n        bc.height = Math.max(bc.bottom - bc.top, 0)\r\n    },\r\n    _drawPanesBorders: function(panesBorderOptions) {\r\n        var that = this;\r\n        var rotated = that._isRotated();\r\n        that._panesBorderGroup.linkRemove().clear();\r\n        _each(that.panes, (function(i, pane) {\r\n            var borderOptions = panesBorderOptions[pane.name];\r\n            var attr = {\r\n                fill: \"none\",\r\n                stroke: borderOptions.color,\r\n                \"stroke-opacity\": borderOptions.opacity,\r\n                \"stroke-width\": borderOptions.width,\r\n                dashStyle: borderOptions.dashStyle,\r\n                \"stroke-linecap\": \"square\"\r\n            };\r\n            that._calcPaneBorderCoords(pane, rotated);\r\n            if (!borderOptions.visible) {\r\n                return\r\n            }\r\n            var bc = pane.borderCoords;\r\n            var segmentRectParams = prepareSegmentRectPoints(bc.left, bc.top, bc.width, bc.height, borderOptions);\r\n            that._renderer.path(segmentRectParams.points, segmentRectParams.pathType).attr(attr).append(that._panesBorderGroup)\r\n        }));\r\n        that._panesBorderGroup.linkAppend()\r\n    },\r\n    _createClipRect: function(clipArray, index, left, top, width, height) {\r\n        var clipRect = clipArray[index];\r\n        if (!clipRect) {\r\n            clipRect = this._renderer.clipRect(left, top, width, height);\r\n            clipArray[index] = clipRect\r\n        } else {\r\n            clipRect.attr({\r\n                x: left,\r\n                y: top,\r\n                width: width,\r\n                height: height\r\n            })\r\n        }\r\n    },\r\n    _createClipRectsForPanes: function() {\r\n        var that = this;\r\n        var canvas = that._canvas;\r\n        _each(that.panes, (function(i, pane) {\r\n            var needWideClipRect = false;\r\n            var bc = pane.borderCoords;\r\n            var left = bc.left;\r\n            var top = bc.top;\r\n            var width = bc.width;\r\n            var height = bc.height;\r\n            var panesClipRects = that._panesClipRects;\r\n            that._createClipRect(panesClipRects.fixed, i, left, top, width, height);\r\n            that._createClipRect(panesClipRects.base, i, left, top, width, height);\r\n            _each(that.series, (function(_, series) {\r\n                if (series.pane === pane.name && (series.isFinancialSeries() || series.areErrorBarsVisible())) {\r\n                    needWideClipRect = true\r\n                }\r\n            }));\r\n            if (needWideClipRect) {\r\n                if (that._isRotated()) {\r\n                    top = 0;\r\n                    height = canvas.height\r\n                } else {\r\n                    left = 0;\r\n                    width = canvas.width\r\n                }\r\n                that._createClipRect(panesClipRects.wide, i, left, top, width, height)\r\n            } else {\r\n                panesClipRects.wide[i] = null\r\n            }\r\n        }))\r\n    },\r\n    _applyClipRectsForAxes() {\r\n        var axes = this._getAllAxes();\r\n        var chartCanvasClipRectID = this._getCanvasClipRectID();\r\n        for (var i = 0; i < axes.length; i++) {\r\n            var elementsClipRectID = this._getElementsClipRectID(axes[i].pane);\r\n            axes[i].applyClipRects(elementsClipRectID, chartCanvasClipRectID)\r\n        }\r\n    },\r\n    _getPaneBorderVisibility: function(paneIndex) {\r\n        var commonPaneBorderVisible = this._themeManager.getOptions(\"commonPaneSettings\").border.visible;\r\n        var pane = this.panes[paneIndex] || {};\r\n        var paneBorder = pane.border || {};\r\n        return \"visible\" in paneBorder ? paneBorder.visible : commonPaneBorderVisible\r\n    },\r\n    _getCanvasForPane: function(paneName) {\r\n        var panes = this.panes;\r\n        var panesNumber = panes.length;\r\n        var i;\r\n        for (i = 0; i < panesNumber; i++) {\r\n            if (panes[i].name === paneName) {\r\n                return panes[i].canvas\r\n            }\r\n        }\r\n    },\r\n    _getTrackerSettings: function() {\r\n        var themeManager = this._themeManager;\r\n        return _extend(this.callBase(), {\r\n            chart: this,\r\n            rotated: this._isRotated(),\r\n            crosshair: this._getCrosshairOptions().enabled ? this._crosshair : null,\r\n            stickyHovering: themeManager.getOptions(\"stickyHovering\")\r\n        })\r\n    },\r\n    _resolveLabelOverlappingStack: function() {\r\n        var that = this;\r\n        var isRotated = that._isRotated();\r\n        var shiftDirection = isRotated ? function(box, length) {\r\n            return {\r\n                x: box.x - length,\r\n                y: box.y\r\n            }\r\n        } : function(box, length) {\r\n            return {\r\n                x: box.x,\r\n                y: box.y - length\r\n            }\r\n        };\r\n        _each(that._getStackPoints(), (function(_, stacks) {\r\n            _each(stacks, (function(_, points) {\r\n                var isInverted = points[0].series.getValueAxis().getOptions().inverted;\r\n                overlapping.resolveLabelOverlappingInOneDirection(points, that._getCommonCanvas(), isRotated, isInverted, shiftDirection, (a, b) => {\r\n                    var coordPosition = isRotated ? 1 : 0;\r\n                    var figureCenter1 = a.labels[0].getFigureCenter()[coordPosition];\r\n                    var figureCenter12 = b.labels[0].getFigureCenter()[coordPosition];\r\n                    if (figureCenter1 - figureCenter12 === 0) {\r\n                        return (a.value() - b.value()) * (a.labels[0].getPoint().series.getValueAxis().getTranslator().isInverted() ? -1 : 1)\r\n                    }\r\n                    return 0\r\n                })\r\n            }))\r\n        }))\r\n    },\r\n    _getStackPoints: function() {\r\n        var stackPoints = {};\r\n        var visibleSeries = this._getVisibleSeries();\r\n        _each(visibleSeries, (function(_, singleSeries) {\r\n            var points = singleSeries.getPoints();\r\n            var stackName = singleSeries.getStackName() || null;\r\n            _each(points, (function(_, point) {\r\n                var argument = point.argument;\r\n                if (!stackPoints[argument]) {\r\n                    stackPoints[argument] = {}\r\n                }\r\n                if (!stackPoints[argument][stackName]) {\r\n                    stackPoints[argument][stackName] = []\r\n                }\r\n                stackPoints[argument][stackName].push(point)\r\n            }))\r\n        }));\r\n        return stackPoints\r\n    },\r\n    _getCrosshairOptions: function() {\r\n        return this._getOption(\"crosshair\")\r\n    },\r\n    zoomArgument(min, max) {\r\n        if (!this._initialized || !_isDefined(min) && !_isDefined(max)) {\r\n            return\r\n        }\r\n        this.getArgumentAxis().visualRange([min, max])\r\n    },\r\n    resetVisualRange() {\r\n        var that = this;\r\n        var axes = that._argumentAxes;\r\n        var nonVirtualArgumentAxis = that.getArgumentAxis();\r\n        axes.forEach(axis => {\r\n            axis.resetVisualRange(nonVirtualArgumentAxis !== axis);\r\n            that._applyCustomVisualRangeOption(axis)\r\n        });\r\n        that.callBase()\r\n    },\r\n    getVisibleArgumentBounds: function() {\r\n        var translator = this._argumentAxes[0].getTranslator();\r\n        var range = translator.getBusinessRange();\r\n        var isDiscrete = range.axisType === DISCRETE;\r\n        var categories = range.categories;\r\n        return {\r\n            minVisible: isDiscrete ? range.minVisible || categories[0] : range.minVisible,\r\n            maxVisible: isDiscrete ? range.maxVisible || categories[categories.length - 1] : range.maxVisible\r\n        }\r\n    },\r\n    _change_FULL_RENDER() {\r\n        this.callBase();\r\n        if (this._changes.has(VISUAL_RANGE)) {\r\n            this._raiseZoomEndHandlers()\r\n        }\r\n    },\r\n    _getAxesForScaling() {\r\n        return [this.getArgumentAxis()].concat(this._valueAxes)\r\n    },\r\n    _applyVisualRangeByVirtualAxes(axis, range) {\r\n        if (axis.isArgumentAxis) {\r\n            if (axis !== this.getArgumentAxis()) {\r\n                return true\r\n            }\r\n            this._argumentAxes.filter(a => a !== axis).forEach(a => a.visualRange(range, {\r\n                start: true,\r\n                end: true\r\n            }))\r\n        }\r\n        return false\r\n    },\r\n    _raiseZoomEndHandlers() {\r\n        this._argumentAxes.forEach(axis => axis.handleZoomEnd());\r\n        this.callBase()\r\n    },\r\n    _setOptionsByReference() {\r\n        this.callBase();\r\n        _extend(this._optionsByReference, {\r\n            \"argumentAxis.visualRange\": true\r\n        })\r\n    },\r\n    option() {\r\n        var option = this.callBase.apply(this, arguments);\r\n        var valueAxis = this._options.silent(\"valueAxis\");\r\n        if (\"array\" === type(valueAxis)) {\r\n            for (var i = 0; i < valueAxis.length; i++) {\r\n                var optionPath = \"valueAxis[\".concat(i, \"].visualRange\");\r\n                this._optionsByReference[optionPath] = true\r\n            }\r\n        }\r\n        return option\r\n    },\r\n    _notifyVisualRange() {\r\n        var argAxis = this._argumentAxes[0];\r\n        var argumentVisualRange = convertVisualRangeObject(argAxis.visualRange(), !_isArray(this.option(\"argumentAxis.visualRange\")));\r\n        if (!argAxis.skipEventRising || !rangesAreEqual(argumentVisualRange, this.option(\"argumentAxis.visualRange\"))) {\r\n            this.option(\"argumentAxis.visualRange\", argumentVisualRange)\r\n        } else {\r\n            argAxis.skipEventRising = null\r\n        }\r\n        this.callBase()\r\n    }\r\n});\r\nimport shutterZoom from \"./chart_components/shutter_zoom\";\r\nimport zoomAndPan from \"./chart_components/zoom_and_pan\";\r\nimport {\r\n    plugins\r\n} from \"./core/annotations\";\r\ndxChart.addPlugin(shutterZoom);\r\ndxChart.addPlugin(zoomAndPan);\r\ndxChart.addPlugin(plugins.core);\r\ndxChart.addPlugin(plugins.chart);\r\nregisterComponent(\"dxChart\", dxChart);\r\nexport default dxChart;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}