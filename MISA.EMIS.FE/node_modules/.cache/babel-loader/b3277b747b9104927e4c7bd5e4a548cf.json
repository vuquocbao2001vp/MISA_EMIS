{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/diagram/ui.diagram.dialog_manager.js)\r\n * Version: 22.1.4\r\n * Build date: Fri Jul 22 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport $ from \"../../core/renderer\";\nimport { getDiagram } from \"./diagram.importer\";\nimport messageLocalization from \"../../localization/message\";\nimport FileUploader from \"../file_uploader\";\nimport { getWindow } from \"../../core/utils/window\";\nvar DiagramDialogManager = {\n  getConfigurations: function () {\n    var {\n      DiagramCommand: DiagramCommand\n    } = getDiagram();\n    return this.dialogList || (this.dialogList = [{\n      command: DiagramCommand.InsertShapeImage,\n      title: messageLocalization.format(\"dxDiagram-dialogInsertShapeImageTitle\"),\n      onGetContent: this.getChangeImageDialogContent\n    }, {\n      command: DiagramCommand.EditShapeImage,\n      title: messageLocalization.format(\"dxDiagram-dialogEditShapeImageTitle\"),\n      onGetContent: this.getChangeImageDialogContent\n    }]);\n  },\n  getChangeImageDialogContent: function (args) {\n    var $uploader = $(\"<div>\");\n\n    args.component._createComponent($uploader, FileUploader, {\n      selectButtonText: messageLocalization.format(\"dxDiagram-dialogEditShapeImageSelectButton\"),\n      accept: \"image/*\",\n      uploadMode: \"useForm\",\n      onValueChanged: function (e) {\n        var window = getWindow();\n        var reader = new window.FileReader();\n\n        reader.onload = function (e) {\n          args.component._commandParameter = e.target.result;\n        };\n\n        reader.readAsDataURL(e.value[0]);\n      }\n    });\n\n    return $uploader;\n  },\n\n  getDialogParameters(command) {\n    var commandIndex = this.getConfigurations().map(c => c.command).indexOf(command);\n\n    if (commandIndex >= 0) {\n      return this.getConfigurations()[commandIndex];\n    } else {\n      return null;\n    }\n  }\n\n};\nexport default DiagramDialogManager;","map":{"version":3,"names":["$","getDiagram","messageLocalization","FileUploader","getWindow","DiagramDialogManager","getConfigurations","DiagramCommand","dialogList","command","InsertShapeImage","title","format","onGetContent","getChangeImageDialogContent","EditShapeImage","args","$uploader","component","_createComponent","selectButtonText","accept","uploadMode","onValueChanged","e","window","reader","FileReader","onload","_commandParameter","target","result","readAsDataURL","value","getDialogParameters","commandIndex","map","c","indexOf"],"sources":["E:/MisaProject/W2022_06/misa_emis/node_modules/devextreme/esm/ui/diagram/ui.diagram.dialog_manager.js"],"sourcesContent":["/**\r\n * DevExtreme (esm/ui/diagram/ui.diagram.dialog_manager.js)\r\n * Version: 22.1.4\r\n * Build date: Fri Jul 22 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport $ from \"../../core/renderer\";\r\nimport {\r\n    getDiagram\r\n} from \"./diagram.importer\";\r\nimport messageLocalization from \"../../localization/message\";\r\nimport FileUploader from \"../file_uploader\";\r\nimport {\r\n    getWindow\r\n} from \"../../core/utils/window\";\r\nvar DiagramDialogManager = {\r\n    getConfigurations: function() {\r\n        var {\r\n            DiagramCommand: DiagramCommand\r\n        } = getDiagram();\r\n        return this.dialogList || (this.dialogList = [{\r\n            command: DiagramCommand.InsertShapeImage,\r\n            title: messageLocalization.format(\"dxDiagram-dialogInsertShapeImageTitle\"),\r\n            onGetContent: this.getChangeImageDialogContent\r\n        }, {\r\n            command: DiagramCommand.EditShapeImage,\r\n            title: messageLocalization.format(\"dxDiagram-dialogEditShapeImageTitle\"),\r\n            onGetContent: this.getChangeImageDialogContent\r\n        }])\r\n    },\r\n    getChangeImageDialogContent: function(args) {\r\n        var $uploader = $(\"<div>\");\r\n        args.component._createComponent($uploader, FileUploader, {\r\n            selectButtonText: messageLocalization.format(\"dxDiagram-dialogEditShapeImageSelectButton\"),\r\n            accept: \"image/*\",\r\n            uploadMode: \"useForm\",\r\n            onValueChanged: function(e) {\r\n                var window = getWindow();\r\n                var reader = new window.FileReader;\r\n                reader.onload = function(e) {\r\n                    args.component._commandParameter = e.target.result\r\n                };\r\n                reader.readAsDataURL(e.value[0])\r\n            }\r\n        });\r\n        return $uploader\r\n    },\r\n    getDialogParameters(command) {\r\n        var commandIndex = this.getConfigurations().map(c => c.command).indexOf(command);\r\n        if (commandIndex >= 0) {\r\n            return this.getConfigurations()[commandIndex]\r\n        } else {\r\n            return null\r\n        }\r\n    }\r\n};\r\nexport default DiagramDialogManager;\r\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAOA,CAAP,MAAc,qBAAd;AACA,SACIC,UADJ,QAEO,oBAFP;AAGA,OAAOC,mBAAP,MAAgC,4BAAhC;AACA,OAAOC,YAAP,MAAyB,kBAAzB;AACA,SACIC,SADJ,QAEO,yBAFP;AAGA,IAAIC,oBAAoB,GAAG;EACvBC,iBAAiB,EAAE,YAAW;IAC1B,IAAI;MACAC,cAAc,EAAEA;IADhB,IAEAN,UAAU,EAFd;IAGA,OAAO,KAAKO,UAAL,KAAoB,KAAKA,UAAL,GAAkB,CAAC;MAC1CC,OAAO,EAAEF,cAAc,CAACG,gBADkB;MAE1CC,KAAK,EAAET,mBAAmB,CAACU,MAApB,CAA2B,uCAA3B,CAFmC;MAG1CC,YAAY,EAAE,KAAKC;IAHuB,CAAD,EAI1C;MACCL,OAAO,EAAEF,cAAc,CAACQ,cADzB;MAECJ,KAAK,EAAET,mBAAmB,CAACU,MAApB,CAA2B,qCAA3B,CAFR;MAGCC,YAAY,EAAE,KAAKC;IAHpB,CAJ0C,CAAtC,CAAP;EASH,CAdsB;EAevBA,2BAA2B,EAAE,UAASE,IAAT,EAAe;IACxC,IAAIC,SAAS,GAAGjB,CAAC,CAAC,OAAD,CAAjB;;IACAgB,IAAI,CAACE,SAAL,CAAeC,gBAAf,CAAgCF,SAAhC,EAA2Cd,YAA3C,EAAyD;MACrDiB,gBAAgB,EAAElB,mBAAmB,CAACU,MAApB,CAA2B,4CAA3B,CADmC;MAErDS,MAAM,EAAE,SAF6C;MAGrDC,UAAU,EAAE,SAHyC;MAIrDC,cAAc,EAAE,UAASC,CAAT,EAAY;QACxB,IAAIC,MAAM,GAAGrB,SAAS,EAAtB;QACA,IAAIsB,MAAM,GAAG,IAAID,MAAM,CAACE,UAAX,EAAb;;QACAD,MAAM,CAACE,MAAP,GAAgB,UAASJ,CAAT,EAAY;UACxBR,IAAI,CAACE,SAAL,CAAeW,iBAAf,GAAmCL,CAAC,CAACM,MAAF,CAASC,MAA5C;QACH,CAFD;;QAGAL,MAAM,CAACM,aAAP,CAAqBR,CAAC,CAACS,KAAF,CAAQ,CAAR,CAArB;MACH;IAXoD,CAAzD;;IAaA,OAAOhB,SAAP;EACH,CA/BsB;;EAgCvBiB,mBAAmB,CAACzB,OAAD,EAAU;IACzB,IAAI0B,YAAY,GAAG,KAAK7B,iBAAL,GAAyB8B,GAAzB,CAA6BC,CAAC,IAAIA,CAAC,CAAC5B,OAApC,EAA6C6B,OAA7C,CAAqD7B,OAArD,CAAnB;;IACA,IAAI0B,YAAY,IAAI,CAApB,EAAuB;MACnB,OAAO,KAAK7B,iBAAL,GAAyB6B,YAAzB,CAAP;IACH,CAFD,MAEO;MACH,OAAO,IAAP;IACH;EACJ;;AAvCsB,CAA3B;AAyCA,eAAe9B,oBAAf"},"metadata":{},"sourceType":"module"}