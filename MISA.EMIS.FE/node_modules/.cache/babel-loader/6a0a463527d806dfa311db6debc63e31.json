{"ast":null,"code":"/**\r\n * DevExtreme (esm/viz/vector_map/gesture_handler.js)\r\n * Version: 22.1.4\r\n * Build date: Fri Jul 22 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nvar _ln = Math.log;\nvar _LN2 = Math.LN2;\nexport function GestureHandler(params) {\n  this._projection = params.projection;\n  this._renderer = params.renderer;\n  this._x = this._y = 0;\n\n  this._subscribeToTracker(params.tracker);\n}\nGestureHandler.prototype = {\n  constructor: GestureHandler,\n  dispose: function () {\n    this._offTracker();\n\n    this._offTracker = null;\n  },\n  _subscribeToTracker: function (tracker) {\n    var that = this;\n    var isActive = false;\n    that._offTracker = tracker.on({\n      start: function (arg) {\n        isActive = \"control-bar\" !== arg.data.name;\n\n        if (isActive) {\n          that._processStart(arg);\n        }\n      },\n      move: function (arg) {\n        if (isActive) {\n          that._processMove(arg);\n        }\n      },\n      end: function () {\n        if (isActive) {\n          that._processEnd();\n        }\n      },\n      zoom: function (arg) {\n        that._processZoom(arg);\n      }\n    });\n  },\n  setInteraction: function (options) {\n    this._processEnd();\n\n    this._centeringEnabled = options.centeringEnabled;\n    this._zoomingEnabled = options.zoomingEnabled;\n  },\n  _processStart: function (arg) {\n    if (this._centeringEnabled) {\n      this._x = arg.x;\n      this._y = arg.y;\n\n      this._projection.beginMoveCenter();\n    }\n  },\n  _processMove: function (arg) {\n    if (this._centeringEnabled) {\n      this._renderer.root.attr({\n        cursor: \"move\"\n      });\n\n      this._projection.moveCenter([this._x - arg.x, this._y - arg.y]);\n\n      this._x = arg.x;\n      this._y = arg.y;\n    }\n  },\n  _processEnd: function () {\n    if (this._centeringEnabled) {\n      this._renderer.root.attr({\n        cursor: \"default\"\n      });\n\n      this._projection.endMoveCenter();\n    }\n  },\n  _processZoom: function (arg) {\n    var delta;\n    var screenPosition;\n    var coords;\n\n    if (this._zoomingEnabled) {\n      if (arg.delta) {\n        delta = arg.delta;\n      } else if (arg.ratio) {\n        delta = _ln(arg.ratio) / _LN2;\n      }\n\n      if (this._centeringEnabled) {\n        screenPosition = this._renderer.getRootOffset();\n        screenPosition = [arg.x - screenPosition.left, arg.y - screenPosition.top];\n        coords = this._projection.fromScreenPoint(screenPosition);\n      }\n\n      this._projection.changeScaledZoom(delta);\n\n      if (this._centeringEnabled) {\n        this._projection.setCenterByPoint(coords, screenPosition);\n      }\n    }\n  }\n};","map":{"version":3,"names":["_ln","Math","log","_LN2","LN2","GestureHandler","params","_projection","projection","_renderer","renderer","_x","_y","_subscribeToTracker","tracker","prototype","constructor","dispose","_offTracker","that","isActive","on","start","arg","data","name","_processStart","move","_processMove","end","_processEnd","zoom","_processZoom","setInteraction","options","_centeringEnabled","centeringEnabled","_zoomingEnabled","zoomingEnabled","x","y","beginMoveCenter","root","attr","cursor","moveCenter","endMoveCenter","delta","screenPosition","coords","ratio","getRootOffset","left","top","fromScreenPoint","changeScaledZoom","setCenterByPoint"],"sources":["E:/MisaProject/W2022_06/misa_emis/node_modules/devextreme/esm/viz/vector_map/gesture_handler.js"],"sourcesContent":["/**\r\n * DevExtreme (esm/viz/vector_map/gesture_handler.js)\r\n * Version: 22.1.4\r\n * Build date: Fri Jul 22 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nvar _ln = Math.log;\r\nvar _LN2 = Math.LN2;\r\nexport function GestureHandler(params) {\r\n    this._projection = params.projection;\r\n    this._renderer = params.renderer;\r\n    this._x = this._y = 0;\r\n    this._subscribeToTracker(params.tracker)\r\n}\r\nGestureHandler.prototype = {\r\n    constructor: GestureHandler,\r\n    dispose: function() {\r\n        this._offTracker();\r\n        this._offTracker = null\r\n    },\r\n    _subscribeToTracker: function(tracker) {\r\n        var that = this;\r\n        var isActive = false;\r\n        that._offTracker = tracker.on({\r\n            start: function(arg) {\r\n                isActive = \"control-bar\" !== arg.data.name;\r\n                if (isActive) {\r\n                    that._processStart(arg)\r\n                }\r\n            },\r\n            move: function(arg) {\r\n                if (isActive) {\r\n                    that._processMove(arg)\r\n                }\r\n            },\r\n            end: function() {\r\n                if (isActive) {\r\n                    that._processEnd()\r\n                }\r\n            },\r\n            zoom: function(arg) {\r\n                that._processZoom(arg)\r\n            }\r\n        })\r\n    },\r\n    setInteraction: function(options) {\r\n        this._processEnd();\r\n        this._centeringEnabled = options.centeringEnabled;\r\n        this._zoomingEnabled = options.zoomingEnabled\r\n    },\r\n    _processStart: function(arg) {\r\n        if (this._centeringEnabled) {\r\n            this._x = arg.x;\r\n            this._y = arg.y;\r\n            this._projection.beginMoveCenter()\r\n        }\r\n    },\r\n    _processMove: function(arg) {\r\n        if (this._centeringEnabled) {\r\n            this._renderer.root.attr({\r\n                cursor: \"move\"\r\n            });\r\n            this._projection.moveCenter([this._x - arg.x, this._y - arg.y]);\r\n            this._x = arg.x;\r\n            this._y = arg.y\r\n        }\r\n    },\r\n    _processEnd: function() {\r\n        if (this._centeringEnabled) {\r\n            this._renderer.root.attr({\r\n                cursor: \"default\"\r\n            });\r\n            this._projection.endMoveCenter()\r\n        }\r\n    },\r\n    _processZoom: function(arg) {\r\n        var delta;\r\n        var screenPosition;\r\n        var coords;\r\n        if (this._zoomingEnabled) {\r\n            if (arg.delta) {\r\n                delta = arg.delta\r\n            } else if (arg.ratio) {\r\n                delta = _ln(arg.ratio) / _LN2\r\n            }\r\n            if (this._centeringEnabled) {\r\n                screenPosition = this._renderer.getRootOffset();\r\n                screenPosition = [arg.x - screenPosition.left, arg.y - screenPosition.top];\r\n                coords = this._projection.fromScreenPoint(screenPosition)\r\n            }\r\n            this._projection.changeScaledZoom(delta);\r\n            if (this._centeringEnabled) {\r\n                this._projection.setCenterByPoint(coords, screenPosition)\r\n            }\r\n        }\r\n    }\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}